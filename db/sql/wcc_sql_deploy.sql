-- generated by db/seed.sh on 2026-01-02T09:35:25Z

-- >>> BEGIN sql/wcc_ddl_schema.sql

\echo 'wcc_ddl_schema.sql'

DROP TABLE IF EXISTS wcc_item_weapons_to_effects CASCADE;
DROP TABLE IF EXISTS wcc_item_weapons CASCADE;
DROP TABLE IF EXISTS wcc_item_classes CASCADE;
DROP TABLE IF EXISTS wcc_item_effects CASCADE;
DROP TABLE IF EXISTS wcc_item_effect_conditions CASCADE;
DROP TABLE IF EXISTS wcc_dlcs CASCADE;

DROP TABLE IF EXISTS effects;
DROP TABLE IF EXISTS transitions;
DROP TABLE IF EXISTS answer_options;
DROP TABLE IF EXISTS questions;
DROP TABLE IF EXISTS i18n_text;
DROP TABLE IF EXISTS i18n_keys;
DROP TABLE IF EXISTS content_packs;
DROP TABLE IF EXISTS survey_versions;
DROP TABLE IF EXISTS surveys;
DROP TABLE IF EXISTS rules;
DROP TYPE IF EXISTS question_type;
DROP TYPE IF EXISTS trigger_timing;
DROP TYPE IF EXISTS rule_logic;

CREATE TYPE question_type AS ENUM ('single', 'single_table', 'multiple', 'value_textbox', 'value_numeric', 'value_string', 'drop_down_detailed');
CREATE TYPE trigger_timing AS ENUM ('on_enter', 'on_exit', 'on_select');
CREATE TYPE rule_logic AS ENUM ('jsonlogic'); -- –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –±—É–¥—É—â–µ–µ, –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å

CREATE OR REPLACE FUNCTION ck_id(src text)
RETURNS uuid AS $$
DECLARE
  _ns constant text := '12345678-9098-7654-3212-345678909876';
  m text;
BEGIN
  m := md5(_ns || src);
  RETURN (
      substr(m, 1, 8)  || '-' ||
      substr(m, 9, 4)  || '-' ||
      substr(m, 13, 4) || '-' ||
      substr(m, 17, 4) || '-' ||
      substr(m, 21, 12)
  )::uuid;
END;
$$ LANGUAGE plpgsql IMMUTABLE STRICT;


-- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ/–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≥—Ä–∞—Ñ–∞
CREATE TABLE surveys (
  su_id         TEXT PRIMARY KEY,
  title         TEXT NOT NULL,
  description   TEXT,
  created_at    TIMESTAMPTZ NOT NULL DEFAULT now()
);

CREATE TABLE survey_versions (
  sv_id         INTEGER PRIMARY KEY,
  su_su_id      TEXT NOT NULL REFERENCES surveys(su_id) ON DELETE CASCADE,
  is_active     BOOLEAN NOT NULL DEFAULT FALSE,
  valid_from    TIMESTAMPTZ,
  valid_to      TIMESTAMPTZ,
  UNIQUE (su_su_id, sv_id)
);

CREATE TABLE content_packs (
  cp_id       TEXT PRIMARY KEY DEFAULT 'core',
  su_su_id    TEXT NOT NULL REFERENCES surveys(su_id) ON DELETE CASCADE,
  title       TEXT NOT NULL,
  semver      TEXT NOT NULL,             -- '1.2.0'
  priority    INTEGER NOT NULL DEFAULT 0, -- –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ç—á–µ–π (–≤—ã—à–µ ‚Äî –ø–æ–∑–∂–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è)
  created_at  timestamptz NOT NULL DEFAULT now(),
  is_official BOOLEAN NOT NULL DEFAULT TRUE,
  UNIQUE (su_su_id, cp_id)
);

-- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
/*
CREATE TABLE i18n_keys (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid()
);*/
CREATE TABLE i18n_text (
  id           UUID NOT NULL,
  entity       TEXT NOT NULL,  -- 'questions' | 'answer_options' | ...
  entity_field TEXT NOT NULL,  -- id –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã
  lang         TEXT NOT NULL,  -- 'ru', 'en', ...
  text         TEXT NOT NULL,
  PRIMARY KEY (id, lang)
);

-- –£–∑–ª—ã: –≤–æ–ø—Ä–æ—Å—ã
CREATE TABLE questions (
  qu_id            TEXT PRIMARY KEY,
  su_su_id         TEXT NOT NULL REFERENCES surveys(su_id) ON DELETE CASCADE,
  cp_cp_id         TEXT NOT NULL DEFAULT 'core' REFERENCES content_packs(cp_id) ON DELETE CASCADE,
  title            UUID, -- –∫—Ä–∞—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞
  body             UUID, -- –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ç–µ–∫—Å—Ç/–æ–ø–∏—Å–∞–Ω–∏–µ
  qtype            question_type NOT NULL,
  metadata         JSONB NOT NULL DEFAULT '{}'::jsonb, -- –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∞/–≤–∞–ª–∏–¥–∞—Ü–∏–∏
  UNIQUE (su_su_id, cp_cp_id, qu_id)
);

-- –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
CREATE TABLE answer_options (
  an_id            TEXT PRIMARY KEY,
  su_su_id         TEXT NOT NULL REFERENCES surveys(su_id) ON DELETE CASCADE,
  cp_cp_id         TEXT NOT NULL DEFAULT 'core' REFERENCES content_packs(cp_id) ON DELETE CASCADE,
  qu_qu_id         TEXT NOT NULL REFERENCES questions(qu_id) ON DELETE CASCADE,
  label            TEXT NOT NULL,
  sort_order       INTEGER NOT NULL DEFAULT 0,
  visible_ru_ru_id UUID,
  metadata         JSONB NOT NULL DEFAULT '{}'::jsonb,
  UNIQUE (qu_qu_id, an_id)
);

-- –≠—Ñ—Ñ–µ–∫—Ç—ã (–∞—Ç–æ–º–∞—Ä–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è)
CREATE TABLE effects (
  ef_id          UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  qu_qu_id       TEXT REFERENCES questions(qu_id) ON DELETE CASCADE,
  an_an_id       TEXT REFERENCES answer_options(an_id) ON DELETE CASCADE,
  scope          TEXT NOT NULL,
  name           TEXT,
  description    TEXT,
  body           JSONB NOT NULL
);

-- –ü—Ä–∞–≤–∏–ª–∞/—É—Å–ª–æ–≤–∏—è (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ: –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏, –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ —Ç.–¥.)
CREATE TABLE rules (
  ru_id         UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name          TEXT,
  description   TEXT,
  dialect       rule_logic NOT NULL DEFAULT 'jsonlogic',
  body          JSONB NOT NULL                 -- –Ω–∞–ø—Ä–∏–º–µ—Ä JSONLogic –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
);

-- –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ (—Ä–µ–±—Ä–∞)
CREATE TABLE transitions (
  tr_id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  from_qu_qu_id      TEXT NOT NULL REFERENCES questions(qu_id) ON DELETE CASCADE,
  to_qu_qu_id        TEXT NOT NULL REFERENCES questions(qu_id) ON DELETE CASCADE,
  via_an_an_id       TEXT REFERENCES answer_options(an_id) ON DELETE SET NULL,
  ru_ru_id           UUID REFERENCES rules(ru_id) ON DELETE SET NULL,  -- —É—Å–ª–æ–≤–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ (–¥–æ–ø. –∫ via_answer)
  priority           INTEGER NOT NULL DEFAULT 0 -- —á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
);
-- <<< END sql/wcc_ddl_schema.sql

-- >>> BEGIN sql/001_survey.sql

\echo '001_survey.sql'
-- TRUNCATE TABLE effects;
-- TRUNCATE TABLE answer_options;
-- TRUNCATE TABLE transitions;
-- TRUNCATE TABLE questions;
-- TRUNCATE TABLE i18n_text;
-- TRUNCATE TABLE i18n_keys;
-- TRUNCATE TABLE content_packs;
-- TRUNCATE TABLE survey_versions;
-- TRUNCATE TABLE surveys;
-- TRUNCATE TABLE rules;

INSERT INTO surveys(su_id, title) VALUES ('witcher_cc', 'Witcher TRPG Character Creator');
INSERT INTO survey_versions(sv_id, su_su_id, is_active, valid_from)
  SELECT 100, su_id, TRUE, now() FROM surveys WHERE su_id='witcher_cc';
INSERT INTO content_packs(su_su_id, title, semver) VALUES ('witcher_cc', 'The Witcher TRPG', '1.0.0');

-- –ò–µ—Ä–∞—Ä—Ö–∏—è –ø—É—Ç–µ–π (hierarchy paths)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
SELECT ck_id('witcher_cc.hierarchy.' || v.path) AS id
     , 'hierarchy' AS entity
     , 'path' AS entity_field
     , v.lang
     , v.text
  FROM (VALUES
          ('identity', 'ru', '–ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å'),
          ('identity', 'en', 'Identity'),
          ('race', 'ru', '–†–∞—Å–∞'),
          ('race', 'en', 'Race'),
          ('character_age', 'ru', '–í–æ–∑—Ä–∞—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞'),
          ('character_age', 'en', 'Character age'),
          ('character_name', 'ru', '–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞'),
          ('character_name', 'en', 'Character name'),
          ('homeland', 'ru', '–†–æ–¥–∏–Ω–∞'),
          ('homeland', 'en', 'Homeland'),
          ('homeland_nonhuman', 'ru', '–†–æ–¥–∏–Ω–∞ –Ω–µ–ª—é–¥—è'),
          ('homeland_nonhuman', 'en', 'Non-human homeland'),
          ('family', 'ru', '–°–µ–º—å—è'),
          ('family', 'en', 'Family'),
          ('family_threat', 'ru', '–£–≥—Ä–æ–∑–∞ —Å–µ–º—å–µ'),
          ('family_threat', 'en', 'Family threat'),
          ('family_fate', 'ru', '–°—É–¥—å–±–∞ —Å–µ–º—å–∏'),
          ('family_fate', 'en', 'Family fate'),
          ('family_status', 'ru', '–°—Ç–∞—Ç—É—Å —Å–µ–º—å–∏'),
          ('family_status', 'en', 'Family status'),
          ('parents_threat', 'ru', '–£–≥—Ä–æ–∑–∞ —Ä–æ–¥–∏—Ç–µ–ª—è–º'),
          ('parents_threat', 'en', 'Parents threat'),
          ('parents_fate', 'ru', '–°—É–¥—å–±–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–π'),
          ('parents_fate', 'en', 'Parents fate'),
          ('parents_who', 'ru', '–ö—Ç–æ –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª–µ–π'),
          ('parents_who', 'en', 'Which parent'),
          ('siblings', 'ru', '–ë—Ä–∞—Ç—å—è –∏ —Å–µ—Å—Ç—Ä—ã'),
          ('siblings', 'en', 'Siblings'),
          ('siblings_amount', 'ru', '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ'),
          ('siblings_amount', 'en', 'Amount'),
          ('gender', 'ru', '–ü–æ–ª'),
          ('gender', 'en', 'Gender'),
          ('age', 'ru', '–í–æ–∑—Ä–∞—Å—Ç'),
          ('age', 'en', 'Age'),
          ('attitude', 'ru', '–û—Ç–Ω–æ—à–µ–Ω–∏–µ'),
          ('attitude', 'en', 'Attitude'),
          ('personality', 'ru', '–û—Å–Ω–æ–≤–Ω–∞—è —á–µ—Ä—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞'),
          ('personality', 'en', 'Personality'),
          ('life_path', 'ru', '–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å'),
          ('life_path', 'en', 'Life path'),
          ('friend', 'ru', '–î—Ä—É–≥'),
          ('friend', 'en', 'Friend'),
          ('life_events', 'ru', '–ö–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ –∂–∏–∑–Ω–∏'),
          ('life_events', 'en', 'Life Events'),
          ('life_events_event', 'ru', '–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ'),
          ('life_events_event', 'en', 'What happened'),
          ('life_events_fortune_or_not', 'ru', '–£–¥–∞—á–∞ –∏–ª–∏ –Ω–µ—É–¥–∞—á–∞'),
          ('life_events_fortune_or_not', 'en', 'Fortune or Misfortune'),
          ('life_events_fortune', 'ru', '–£–¥–∞—á–∞'),
          ('life_events_fortune', 'en', 'Fortune'),
          ('life_events_fortune_kind', 'ru', '–ö–∞–∫–∞—è –∏–º–µ–Ω–Ω–æ'),
          ('life_events_fortune_kind', 'en', 'Which one'),
          ('life_events_misfortune', 'ru', '–ù–µ—É–¥–∞—á–∞'),
          ('life_events_misfortune', 'en', 'Misfortune'),
          ('life_events_misfortune_kind', 'ru', '–ö–∞–∫–∞—è –∏–º–µ–Ω–Ω–æ'),
          ('life_events_misfortune_kind', 'en', 'Which one'),
          ('life_events_misfortune_details', 'ru', '–£—Ç–æ—á–Ω–µ–Ω–∏–µ'),
          ('life_events_misfortune_details', 'en', 'Clarification'),
          ('life_events_misfortune_details_2', 'ru', '–£—Ç–æ—á–Ω–µ–Ω–∏–µ 2'),
          ('life_events_misfortune_details_2', 'en', 'Clarification 2'),
          ('life_events_misfortune_custom_addiction', 'ru', '–ö–∞—Å—Ç–æ–º–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
          ('life_events_misfortune_custom_addiction', 'en', 'Custom Addiction'),
          ('life_events_misfortune_custom_curse', 'ru', '–ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–æ–∫–ª—è—Ç–∏–µ'),
          ('life_events_misfortune_custom_curse', 'en', 'Custom Curse'),
          ('life_events_allies_enemies', 'ru', '–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏'),
          ('life_events_allies_enemies', 'en', 'Allies and Enemies'),
          ('life_events_enemy', 'ru', '–í—Ä–∞–≥'),
          ('life_events_enemy', 'en', 'Enemy'),
          ('life_events_enemy_victim', 'ru', '–ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π'),
          ('life_events_enemy_victim', 'en', 'Who was wronged'),
          ('life_events_enemy_gender', 'ru', '–ü–æ–ª'),
          ('life_events_enemy_gender', 'en', 'Gender'),
          ('life_events_enemy_position', 'ru', '–ö—Ç–æ –≤–∞—à –≤—Ä–∞–≥'),
          ('life_events_enemy_position', 'en', 'Who is your enemy'),
          ('life_events_enemy_cause', 'ru', '–ü—Ä–∏—á–∏–Ω–∞ –≤—Ä–∞–∂–¥—ã'),
          ('life_events_enemy_cause', 'en', 'Cause of conflict'),
          ('life_events_enemy_power_level', 'ru', '–£—Ä–æ–≤–µ–Ω—å —Å–∏–ª—ã –≤—Ä–∞–≥–∞'),
          ('life_events_enemy_power_level', 'en', 'Enemy power level'),
          ('life_events_enemy_how_far', 'ru', '–°—Ç–µ–ø–µ–Ω—å —ç—Å–∫–∞–ª–∞—Ü–∏–∏'),
          ('life_events_enemy_how_far', 'en', 'Escalation level'),
          ('life_events_enemy_power', 'ru', '–°–∏–ª–∞ –≤—Ä–∞–≥–∞'),
          ('life_events_enemy_power', 'en', 'Enemy power'),
          ('life_events_ally', 'ru', '–°–æ—é–∑–Ω–∏–∫'),
          ('life_events_ally', 'en', 'Ally'),
          ('life_events_ally_gender', 'ru', '–ü–æ–ª'),
          ('life_events_ally_gender', 'en', 'Gender'),
          ('life_events_ally_position', 'ru', '–ö—Ç–æ –≤–∞—à —Å–æ—é–∑–Ω–∏–∫'),
          ('life_events_ally_position', 'en', 'Who is your ally'),
          ('life_events_ally_how_met', 'ru', '–ö–∞–∫ –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å'),
          ('life_events_ally_how_met', 'en', 'How you met'),
          ('life_events_ally_closeness', 'ru', '–ù–∞—Å–∫–æ–ª—å–∫–æ –±–ª–∏–∑–∫–∏'),
          ('life_events_ally_closeness', 'en', 'How close you are'),
          ('life_events_ally_where', 'ru', '–ì–¥–µ –æ–Ω —Å–µ–π—á–∞—Å'),
          ('life_events_ally_where', 'en', 'Where they are now'),
          ('life_events_relationships', 'ru', '–û—Ç–Ω–æ—à–µ–Ω–∏—è'),
          ('life_events_relationships', 'en', 'Relationships'),
          ('life_events_relationships_type', 'ru', '–¢–∏–ø –æ—Ç–Ω–æ—à–µ–Ω–∏–π'),
          ('life_events_relationships_type', 'en', 'Relationship type'),
          ('life_events_relationships_details', 'ru', '–ò—Å—Ç–æ—Ä–∏—è –ª—é–±–≤–∏'),
          ('life_events_relationships_details', 'en', 'Love story details'),
          ('witcher_age', 'ru', '–í–æ–∑—Ä–∞—Å—Ç –≤–µ–¥—å–º–∞–∫–∞'),
          ('witcher_age', 'en', 'Witcher age'),
          ('witcher_graduation_age', 'ru', '–í–æ–∑—Ä–∞—Å—Ç –≤—ã—Ö–æ–¥–∞ –Ω–∞ –ë–æ–ª—å—à–∞–∫'),
          ('witcher_graduation_age', 'en', 'Witcher graduation age'),
          ('witcher', 'ru', '–í–µ–¥—å–º–∞–∫'),
          ('witcher', 'en', 'Witcher'),
          ('witcher_when', 'ru', '–ö–æ–≥–¥–∞ —Å—Ç–∞–ª –≤–µ–¥—å–º–∞–∫–æ–º'),
          ('witcher_when', 'en', 'When became a witcher'),
          ('witcher_school', 'ru', '–®–∫–æ–ª–∞ –≤–µ–¥—å–º–∞–∫–∞'),
          ('witcher_school', 'en', 'Witcher school'),
          ('witcher_first_trainings', 'ru', '–ü–µ—Ä–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏'),
          ('witcher_first_trainings', 'en', 'First trainings'),
          ('witcher_trials', 'ru', '–ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ç—Ä–∞–≤–∞–º–∏'),
          ('witcher_trials', 'en', 'Trial of the Grasses'),
          ('witcher_most_important_event', 'ru', '–í–∞–∂–Ω–µ–π—à–µ–µ —Å–æ–±—ã—Ç–∏–µ'),
          ('witcher_most_important_event', 'en', 'Most important event'),
          ('witcher_child_who', 'ru', '–ü–æ–ª'),
          ('witcher_child_who', 'en', 'Gender'),
          ('witcher_child_fate', 'ru', '–°—É–¥—å–±–∞'),
          ('witcher_child_fate', 'en', 'Fate'),
          ('witcher_current_situation', 'ru', '–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è'),
          ('witcher_current_situation', 'en', 'Current situation'),
          ('witcher_events_risk', 'ru', '–†–∏—Å–∫–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è'),
          ('witcher_events_risk', 'en', 'Risk behavior'),
          ('witcher_events_danger', 'ru', '–û–ø–∞—Å–Ω–æ—Å—Ç—å'),
          ('witcher_events_danger', 'en', 'Danger'),
          ('witcher_events_is_in_danger', 'ru', '–ö–∞–∫–∞—è –∏–º–µ–Ω–Ω–æ'),
          ('witcher_events_is_in_danger', 'en', 'Which one'),
          ('witcher_events_danger_events', 'ru', '–°–æ–±—ã—Ç–∏–µ'),
          ('witcher_events_danger_events', 'en', 'Event'),
          ('witcher_events_danger_events_details', 'ru', '–î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è'),
          ('witcher_events_danger_events_details', 'en', 'Event details'),
          ('witcher_events_danger_events_details_addiction', 'ru', '–ö–∞—Å—Ç–æ–º–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
          ('witcher_events_danger_events_details_addiction', 'en', 'Custom addiction'),
          ('witcher_events_danger_events_details_curse', 'ru', '–ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–æ–∫–ª—è—Ç–∏–µ'),
          ('witcher_events_danger_events_details_curse', 'en', 'Custom curse'),
          ('witcher_events_danger_wounds', 'ru', '–†–∞–Ω—ã'),
          ('witcher_events_danger_wounds', 'en', 'Wounds'),
          ('witcher_events_danger_enemy', 'ru', '–í—Ä–∞–≥'),
          ('witcher_events_danger_enemy', 'en', 'Enemy'),
          ('witcher_events_danger_enemy_gender', 'ru', '–ü–æ–ª'),
          ('witcher_events_danger_enemy_gender', 'en', 'Gender'),
          ('witcher_events_danger_enemy_profession', 'ru', '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è'),
          ('witcher_events_danger_enemy_profession', 'en', 'Profession'),
          ('witcher_events_danger_enemy_reason', 'ru', '–ü—Ä–∏—á–∏–Ω–∞ –≤—Ä–∞–∂–¥—ã'),
          ('witcher_events_danger_enemy_reason', 'en', 'Cause of conflict'),
          ('witcher_events_danger_enemy_strength', 'ru', '–í —á–µ–º —Å–∏–ª–∞'),
          ('witcher_events_danger_enemy_strength', 'en', 'What is the strength'),
          ('witcher_events_danger_enemy_result', 'ru', '–°—Ç–µ–ø–µ–Ω—å —ç—Å–∫–∞–ª–∞—Ü–∏–∏'),
          ('witcher_events_danger_enemy_result', 'en', 'Escalation level'),
          ('witcher_events_danger_enemy_is_alive', 'ru', '–ñ–∏–≤ –ª–∏ –≤—Ä–∞–≥'),
          ('witcher_events_danger_enemy_is_alive', 'en', 'Is enemy alive'),
          ('witcher_events_danger_enemy_death_reason', 'ru', '–ü—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏'),
          ('witcher_events_danger_enemy_death_reason', 'en', 'Death reason'),
          ('witcher_events', 'ru', '–ò—Å—Ö–æ–¥'),
          ('witcher_events', 'en', 'Outcome'),
          ('witcher_events_benefit', 'ru', '–í—ã–≥–æ–¥–∞'),
          ('witcher_events_benefit', 'en', 'Benefit'),
          ('witcher_events_benefit_type', 'ru', '–ö–∞–∫–∞—è –∏–º–µ–Ω–Ω–æ'),
          ('witcher_events_benefit_type', 'en', 'Which one'),
          ('witcher_events_benefit_details', 'ru', '–î–µ—Ç–∞–ª–∏ –≤—ã–≥–æ–¥—ã'),
          ('witcher_events_benefit_details', 'en', 'Benefit details'),
          ('witcher_events_benefit_details_2', 'ru', '–î–µ—Ç–∞–ª–∏ –≤—ã–≥–æ–¥—ã 2'),
          ('witcher_events_benefit_details_2', 'en', 'Benefit details 2'),
          ('witcher_family', 'ru', '–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤–µ–¥—å–º–∞–∫–∞'),
          ('witcher_family', 'en', 'Witcher''s origin'),
          ('witcher_events_ally', 'ru', '–°–æ—é–∑–Ω–∏–∫'),
          ('witcher_events_ally', 'en', 'Ally'),
          ('witcher_events_ally_gender', 'ru', '–ü–æ–ª'),
          ('witcher_events_ally_gender', 'en', 'Gender'),
          ('witcher_events_ally_who', 'ru', '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è'),
          ('witcher_events_ally_who', 'en', 'Profession'),
          ('witcher_events_ally_how_met', 'ru', '–ö–∞–∫ –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å'),
          ('witcher_events_ally_how_met', 'en', 'How you met'),
          ('witcher_events_ally_closeness', 'ru', '–°—Ç–µ–ø–µ–Ω—å –±–ª–∏–∑–æ—Å—Ç–∏'),
          ('witcher_events_ally_closeness', 'en', 'Closeness level'),
          ('witcher_events_ally_is_alive', 'ru', '–ñ–∏–≤ –ª–∏ —Å–æ—é–∑–Ω–∏–∫'),
          ('witcher_events_ally_is_alive', 'en', 'Is ally alive'),
          ('witcher_events_ally_death_reason', 'ru', '–ü—Ä–∏—á–∏–Ω—ã —Å–º–µ—Ä—Ç–∏'),
          ('witcher_events_ally_death_reason', 'en', 'Death reasons'),
          ('witcher_events_hunt', 'ru', '–û—Ö–æ—Ç–∞'),
          ('witcher_events_hunt', 'en', 'Hunt'),
          ('witcher_events_hunt_prey', 'ru', '–¶–µ–ª—å'),
          ('witcher_events_hunt_prey', 'en', 'Prey'),
          ('witcher_events_hunt_location', 'ru', '–ú–µ—Å—Ç–æ'),
          ('witcher_events_hunt_location', 'en', 'Location'),
          ('witcher_events_hunt_outcome', 'ru', '–†–µ–∑—É–ª—å—Ç–∞—Ç'),
          ('witcher_events_hunt_outcome', 'en', 'Outcome'),
          ('witcher_events_hunt_twist', 'ru', '–ë—ã–ª –ª–∏ —Å—é–∂–µ—Ç–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç'),
          ('witcher_events_hunt_twist', 'en', 'Was there a plot twist'),
          ('witcher_events_hunt_twist_details', 'ru', '–°—é–∂–µ—Ç–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç'),
          ('witcher_events_hunt_twist_details', 'en', 'Plot twist'),
          ('style', 'ru', '–°—Ç–∏–ª—å'),
          ('style', 'en', 'Style'),
          ('style_clothing', 'ru', '–û–¥–µ–∂–¥–∞'),
          ('style_clothing', 'en', 'Clothing'),
          ('style_personality', 'ru', '–•–∞—Ä–∞–∫—Ç–µ—Ä'),
          ('style_personality', 'en', 'Personality'),
          ('style_hair', 'ru', '–ü—Ä–∏—á–µ—Å–∫–∞'),
          ('style_hair', 'en', 'Hair'),
          ('style_affectations', 'ru', '–£–∫—Ä–∞—à–µ–Ω–∏—è'),
          ('style_affectations', 'en', 'Affectations'),
          ('values', 'ru', '–¶–µ–Ω–Ω–æ—Å—Ç–∏'),
          ('values', 'en', 'Values'),
          ('values_valued_person', 'ru', '–ö–æ–≥–æ —Ü–µ–Ω–∏—Ç'),
          ('values_valued_person', 'en', 'Valued person'),
          ('values_value', 'ru', '–ß—Ç–æ —Ü–µ–Ω–∏—Ç'),
          ('values_value', 'en', 'Value'),
          ('values_feelings_on_people', 'ru', '–û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –ª—é–¥—è–º'),
          ('values_feelings_on_people', 'en', 'Feelings on people'),
          ('profession', 'ru', '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è'),
          ('profession', 'en', 'Profession')
       ) AS v(path, lang, text)
  ON CONFLICT (id, lang) DO NOTHING;
-- <<< END sql/001_survey.sql

-- >>> BEGIN sql/002_race.sql

\echo '002_race.sql'
-- –£–∑–µ–ª: –í—ã–±–æ—Ä —Ä–∞—Å—ã

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–ù–∞–¥–æ –≤—ã–±—Ä–∞—Ç—å —Ä–∞—Å—É –≤ —ç—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏', 'body'),
                ('en', 'You should choose a race for your character', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
       , jsonb_build_object(
           'dice', 'd0',
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.identity')::text,
             ck_id('witcher_cc.hierarchy.race')::text
           )
         )
     FROM meta;

-- –û–ø—Ü–∏–∏: –í—ã–±–æ—Ä —Ä–∞—Å—ã
-- –û–ø—Ü–∏—è - —á–µ–ª–æ–≤–µ–∫
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(1, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru',
'<h1>–õ—é–¥–∏</h1>
<i>–û—Ö, –±—É–¥—å —è –ø–æ–∫–æ–∑–ª–∏—Å—Ç–µ–µ, —Ç–æ –≤—Å—é –∂–µ–ª—á—å –∏–∑–ª–∏–ª –±—ã —Ç–µ–±–µ –æ —Ç–æ–º, –∫–∞–∫ –ª—é–¥–∏—à–∫–∏ –Ω–∞—Å–æ–ª–∏–ª–∏ –º–æ–µ–º—É –Ω–∞—Ä–æ–¥—É –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–º –°—Ç–∞—Ä—à–∏–º –ù–∞—Ä–æ–¥–∞–º. '
  || '–ù–æ —è –Ω–µ —Ç–∞–∫–æ–π. –° –ª—é–¥—å–º–∏ —è —Å–ª—É–∂–∏–ª –±–æ–∫ –æ –±–æ–∫ –Ω–∞ –≤–æ–π–Ω–µ —Å –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–æ–º; –≤ —Ç–æ–π –∂–µ —Ç–µ–º–µ—Ä—Å–∫–æ–π –∞—Ä–º–∏–∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ ‚Äî –ª—é–¥–∏. –ù–µ –≤—Å–µ '
  || '–æ–Ω–∏ –≥–æ–≤–Ω—é–∫–∏ ‚Äî –±—ã–≤–∞—é—Ç –∏ —Ö–æ—Ä–æ—à–∏–µ. –ü–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä—É –ª—é–¥–∏-—Ç–æ —Ä–∞–∑–Ω—ã–µ. –û–±—ã—á–Ω–æ –æ–Ω–∏ –≤–µ—Å—å–º–∞ —Å—Ç–æ–π–∫–∏–µ —Ä–µ–±—è—Ç–∞. –†–∞–∑–≤–µ —á—Ç–æ —á–∞—Å—Ç–µ–Ω—å–∫–æ '
  || '–Ω–∞—á–∏–Ω–∞—é—Ç —Ç–æ –∑–∞ ¬´–ø—Ä–∞–≤–æ–µ –¥–µ–ª–æ¬ª –≤–æ–µ–≤–∞—Ç—å, —Ç–æ —Ç—ã–∫–∞—Ç—å –ø–∞–ª—å—Ü–∞–º–∏ –∏ –±–æ—è—Ç—å—Å—è. –°–µ–π—á–∞—Å –ª—é–¥–∏ –Ω–∞ –ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–µ ‚Äî –ø—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π –≤–∏–¥, –∏ –æ–Ω–∏ '
  || '–æ–± —ç—Ç–æ–º –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –∑–Ω–∞—é—Ç... —á—ë—Ä—Ç, –¥–∞–∂–µ –Ω–µ –Ω–∞–¥–æ —Å—Ç–∞—Ä–∞—Ç—å—Å—è, —á—Ç–æ–±—ã –æ –Ω–∏—Ö –≥–∞–¥–æ—Å—Ç–∏ –≥–æ–≤–æ—Ä–∏—Ç—å. –õ—é–¥–∏ –ø–æ—á—Ç–∏ —É–Ω–∏—á—Ç–æ–∂–∏–ª–∏ –°—Ç–∞—Ä—à–∏–µ '
  || '–ù–∞—Ä–æ–¥—ã, –≤—ãkos–∏–ª–∏ –≤—Ä–∞–≥–æ–≤, –æ—Å—Ç–∞–≤–∏–ª–∏ –≤ –∂–∏–≤—ã—Ö –≤—Å–µ–≥–æ –ø–∞—Ä—É —Å–æ—Ç–µ–Ω –±–æ–±–æ–ª–∞–∫–æ–≤, –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ —Å–≤–æ–∏ –≥–æ—Ä–æ–¥–∞ –Ω–∞ —Ä—É–∏–Ω–∞—Ö –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤ –∏ '
  || '–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∫–æ–≥–æ-—Ç–æ –∏–∑ –°—Ç–∞—Ä—à–∏—Ö —É–±–∏–≤–∞—é—Ç. –ù–æ –Ω–µ—Ç, –æ–Ω–∏ –Ω–µ –≤—Å–µ –≥–æ–≤–Ω—é–∫–∏. –î–∞, –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–∞–≥–æ–≤ ‚Äî –ª—é–¥–∏, –∏ –∏–º–µ–Ω–Ω–æ –æ–Ω–∏ –ø–æ–≥—Ä—É–∑–∏–ª–∏ '
  || '–º–∏—Ä –≤ —Ö–∞–æ—Å, –Ω–æ –æ–Ω–∏ —Ç–∞–∫–∂–µ —Å–¥–µ–ª–∞–ª–∏ –º–∏—Ä –ª—É—á—à–µ —Å –ø–æ–º–æ—â—å—é –Ω–∞—É–∫–∏ –∏ –º–∞–≥–∏–∏. –õ—é–¥–∏ —É–º–Ω—ã–µ –∏, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –≤–µ—Ä–Ω—ã–µ ‚Äî –µ—Å–ª–∏ —Ç—ã —Å '
  || '—á–µ–ª–æ–≤–µ–∫–æ–º –¥—Ä—É–∂–µ–Ω, –æ–Ω —Ç–µ–±—è –≤ –±–µ–¥–µ –Ω–µ –±—Ä–æ—Å–∏—Ç.
<b>-–†–æ–¥–æ–ª—å—Ñ –ö–∞–∑–º–µ—Ä</b></i>
<h2>–ß–µ—Ä—Ç—ã</h2>
<h3>üü° –î–æ–≤–µ—Ä–∏–µ</h3>
–í –º–∏—Ä–µ, –≥–¥–µ –Ω–µ–ª—é–¥—è–º –Ω–µ –¥–æ–≤–µ—Ä—è—é—Ç, –ª—é–¥—è–º –¥–æ–≤–µ—Ä–∏—Ç—å—Å—è –∫—É–¥–∞ –ø—Ä–æ—â–µ. –£ –ª—é–¥–µ–π –µ—Å—Ç—å –≤—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –±–æ–Ω—É—Å +1 –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –•–∞—Ä–∏–∑–º—ã'
  || ', –°–æ–±–ª–∞–∑–Ω–µ–Ω–∏—è –∏ –£–±–µ–∂–¥–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π.
<h3>üü° –ò–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h3>
–õ—é–¥–∏ —É–º–Ω—ã –∏ –∑–∞—á–∞—Å—Ç—É—é –Ω–∞—Ö–æ–¥—è—Ç –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º. –õ—é–¥–∏ –ø–æ–ª—É—á–∞—é—Ç –≤—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –±–æ–Ω—É—Å +1 –∫ –î–µ–¥—É–∫—Ü–∏–∏.
<h3>üü° –£–ø—Ä—è–º—Å—Ç–≤–æ</h3>
–û–¥–Ω–æ –∏–∑ –≤–µ–ª–∏—á–∞–π—à–∏—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π —Ä–∞—Å—ã ‚Äî –Ω–µ–∂–µ–ª–∞–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–∞—Ç—å –¥–∞–∂–µ –≤ –æ–ø–∞—Å–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏. –û–Ω–∏ –º–æ–≥—É—Ç —Å–æ–±—Ä–∞—Ç—å—Å—è '
  || '—Å –¥—É—Ö–æ–º –∏ –ø–µ—Ä–µ–±—Ä–æ—Å–∏—Ç—å –Ω–µ—É–¥–∞—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —É–±–µ–∂–¥–µ–Ω–∏—é –∏–ª–∏ –•—Ä–∞–±—Ä–æ—Å—Ç–∏, –Ω–æ –Ω–µ –±–æ–ª–µ–µ 3 —Ä–∞–∑ –∑–∞ '
  || '–∏–≥—Ä–æ–≤—É—é –ø–∞—Ä—Ç–∏—é. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –∏–∑ –¥–≤—É—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞–∏–≤—ã—Å—à–∏–π, –Ω–æ –µ—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–æ–≤–∞–ª—å–Ω—ã–π, —Ç–æ '
  || '–≤–Ω–æ–≤—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –£–ø—Ä—è–º—Å—Ç–≤–æ –Ω–µ–ª—å–∑—è.'),
                ('en',
'<h1>Humans</h1>
<i>If I were a worse person I''d vent my spleen and tell ya all the terrible things humans have done to my people and the other '
  || 'elder races. But I''m better than that. Worked with a lot of humans during the Northern Wars. Hell, most of the Temerian '
  || 'army''s humans. Humans can be fine folks. They''re varied in nature and usually a pretty resilient race. They tend to get '
  || 'swept up in causes and fears pretty easily, though. They''re the dominant species on the Continent right now and they know '
  || 'it. Heh. It''s easy to speak ill of ''em. They just about destroyed the elder races, wiped out the vran, killed all but a '
  || 'few hundred of the werebubbs, built their cities on top of elderfolk cities, and depending on where you are they''re '
  || 'still killing elderfolk by the score every day. But they''re not all bad. Heh, most mages are human and they may '
  || 'destabilize countries and plunge the world into chaos, but they''ve also made the world better with magic and science. '
  || 'Human are a clever bunch, and in a pinch, a human you know well will probably have your back.
<b>‚ÄìRodolf Kazmer</b></i>
<h2>Perks</h2>
<h3>üü° Trustworthy</h3>
In a world where non-humans can''t be trusted, humans look more trustworthy. Humans have an inherent +1 to their Charisma, '
  || 'Seduction, and Persuasion checks against other humans.
<h3>üü° Ingenuity</h3>
Humans are clever and often have brilliant solutions to difficult problems. Humans gain an inherent +1 to Deduction.
<h3>üü° Blindly Stubborn</h3>
Part of the human race''s greatest strength is its willingness to charge forward endlessly, even into truly life-threatening '
  || 'situations. A human can summon up their courage and reroll a failed Resist Coercion or Courage roll 3 times per game '
  || 'session. They take the higher of the two rolls, but if they still fail they cannot re-use the ability to roll again.')) AS v(lang, text)
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_race_human'
       , meta.su_su_id
       , meta.qu_id
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(1, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label
       , 1 AS sort_order
       , '{}'::jsonb AS metadata
    FROM meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞—Å—ã —á–µ–ª–æ–≤–µ–∫
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'character' AS entity)
, ins_r_human AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'human' ||'.'|| meta.entity ||'.'|| 'race') AS id
         , meta.entity, 'race', v.lang, v.text
      FROM (VALUES
        ('ru', '–ß–µ–ª–æ–≤–µ–∫'),
        ('en', 'Human')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_r_human_f1 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'human' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '1') AS id
         , meta.entity, 'perks', v.lang, v.text
      FROM (VALUES
        ('ru', '<b>–î–æ–≤–µ—Ä–∏–µ</b>: +1 –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –•–∞—Ä–∏–∑–º—ã, –°–æ–±–ª–∞–∑–Ω–µ–Ω–∏—è –∏ –£–±–µ–∂–¥–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ –ª—é–¥–µ–π'),
        ('en', '<b>Trust</b>: +1 to Charisma, Persuasion, and Seduction checks against humans')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_r_human_f2 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'human' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '2') AS id
         , meta.entity, 'perks', v.lang, v.text
      FROM (VALUES
        ('ru', '<b>–ò–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å</b> –í—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –±–æ–Ω—É—Å [+1 –∫ –î–µ–¥—É–∫—Ü–∏–∏]'),
        ('en', '<b>Ingenuity</b> [+1 to Deduction]')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_r_human_f3 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'human' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '3') AS id
         , meta.entity, 'perks', v.lang, v.text
      FROM (VALUES
        ('ru', '<b>–£–ø—Ä—è–º—Å—Ç–≤–æ</b>: 3 –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º –¥–ª—è –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —É–±–µ–∂–¥–µ–Ω–∏—é –∏–ª–∏ –•—Ä–∞–±—Ä–æ—Å—Ç–∏ –∑–∞ —Å–µ—Å—Å–∏—é'),
        ('en', '<b>Stubbornness</b>: 3 checks with advantage on Resist Coercion or Courage per session')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
INSERT INTO effects (scope, an_an_id, body)
SELECT
  'character' AS scope,
  'wcc_race_human' AS an_an_id,
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.race'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'human' ||'.'|| meta.entity ||'.'|| 'race')::text)
    )
  ) AS body
FROM meta UNION ALL
SELECT
  'character' AS scope,
  'wcc_race_human' AS an_an_id,
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.logicFields.race'),
      'Human'
    )
  ) AS body UNION ALL
SELECT
  'character',
  'wcc_race_human',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'human' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '1')::text)
    )
  )
FROM meta UNION ALL
SELECT
  'character',
  'wcc_race_human',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'human' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '2')::text)
    )
  )
FROM meta UNION ALL
SELECT
  'character',
  'wcc_race_human',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'human' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '3')::text)
    )
  )
FROM meta UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –ß–µ–ª–æ–≤–µ–∫ - –ò–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (+1 –∫ –î–µ–¥—É–∫—Ü–∏–∏)
SELECT 'character', 'wcc_race_human',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.deduction.race_bonus'),
      1
    )
  );

-- –û–ø—Ü–∏—è - –∫—Ä–∞—Å–Ω–æ–ª—é–¥
-- –û–ø—Ü–∏—è –æ—Ç–≤–µ—Ç–∞: –ö—Ä–∞—Å–Ω–æ–ª—é–¥—ã / Dwarves
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(2, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
         , meta.entity, meta.entity_field, v.lang, v.text
      FROM (VALUES
        ('ru',
'<h1>–ö—Ä–∞—Å–Ω–æ–ª—é–¥—ã</h1>
<i>–î—Ä—É–∂–µ, –≤–æ—Ç —á—Ç–æ —è —Ç–µ–±–µ —Å–∫–∞–∂—É: —Ä–µ–∫–∏ –≤—ã—Å–æ—Ö–Ω—É—Ç, –≥–æ—Ä—ã —Ä–∞—Å—Å—ã–ø–ª—é—Ç—Å—è, –∞ –∫—Ä–∞—Å–Ω–æ–ª—é–¥—ã –Ω–∏–∫—É–¥–∞ –Ω–µ –¥–µ–Ω—É—Ç—Å—è. –ú–æ–∂–µ—Ç, –º—ã –∏ –Ω–∏–∑–µ–Ω—å–∫–∏–µ –≤ '
  || '—Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å —ç–ª—å—Ñ–∞–º–∏ –∏ –ª—é–¥—å–º–∏, –¥–∞ —Ç–æ–ª—å–∫–æ –≤ —Å–∏–ª–µ –∏ –∑–∞–∫–∞–ª–∫–µ –∏–º —Å –Ω–∞–º–∏ –Ω–µ —Ç—è–≥–∞—Ç—å—Å—è. –ú—ã ‚Äî —Å–∞–º–æ –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ —Å—Ç–æ–π–∫–æ—Å—Ç–∏! '
  || '–ö—Ä–∞—Å–Ω–æ–ª—é–¥—ã —É–∂–µ –Ω–µ –ø–µ—Ä–≤—ã–π –≤–µ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —ç—Ç–æ–º –º–∏—Ä–µ. –ñ–∏–ª–∏ —Å–µ–±–µ —Å–ø–æ–∫–æ–π–Ω–æ –≤ –≥–æ—Ä–∞—Ö, –∫–æ–≤–∞–ª–∏. –ú—ã –Ω–∞—Ä–æ–¥ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, '
  || '–µ—Å–ª–∏ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω–∞–º–∏ –ø–æ–±–ª–∏–∂–µ. –î–∞ –∏ —É–∂–∏–≤–∞–µ–º—Å—è —Å–ø–æ–∫–æ–π–Ω–æ —Å–æ –≤—Å–µ–º–∏‚Ä¶ –µ—Å–ª–∏ –Ω–∞—Å –Ω–µ –±–µ—Å–∏—Ç—å, –∫–æ–Ω–µ—á–Ω–æ. –ß–µ–ª–æ–≤–µ—á–∫–∏ –Ω–∞—Å –Ω–µ '
  || '–æ—Å–æ–±–æ –ª—é–±—è—Ç, –Ω–æ –º—ã –∏–º –Ω—É–∂–Ω—ã ‚Äî –∫—Ç–æ –∂–µ —Å—Ç–∞–ª—å –∏–º –∫–æ–≤–∞—Ç—å –±—É–¥–µ–º –∏ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å? –ö —Ç–æ–º—É –∂–µ, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ä–∞–Ω—ã—Ö —ç–ª—å—Ñ–æ–≤, –º—ã '
  || '–Ω–µ –¥–µ—Ä–∂–∏–º –Ω–∞ –ª—é–¥–µ–π –∑–ª–∞. –ù–∞—Å –Ω–µ —Ç—Ä–æ–≥–∞—é—Ç ‚Äî –∏ –º—ã –∏—Ö –Ω–µ —Ç—Ä–æ–≥–∞–µ–º –≤ –æ—Ç–≤–µ—Ç. –ü–æ—Ä–æ–π –¥–∞–∂–µ –∫—Ä—É–∂–µ—á–∫—É-–¥—Ä—É–≥—É—é –≥–æ—Ç–æ–≤—ã —Ä–∞–∑–¥–µ–ª–∏—Ç—å '
  || '–≤–º–µ—Å—Ç–µ —Å —á–µ–ª–æ–≤–µ–∫–æ–º. –ñ–∞–ª—å, –∫–æ–Ω–µ—á–Ω–æ, —á—Ç–æ –≤—Å—è —ç—Ç–∞ –±–µ–∑—É–º–Ω–∞—è —Ä–∞—Å–∏—Å—Ç—Å–∫–∞—è –¥—Ä—è–Ω—å –ø–æ –°–µ–≤–µ—Ä—É —Ä–∞—Å–ø–æ–ª–∑–ª–∞—Å—å. –¢–µ–ø–µ—Ä—å –∏ –Ω–∞ –∫—Ä–∞—Å–Ω–æ–ª—é–¥–æ–≤ '
  || '—Ç—Ä–∞–≤–ª—é –æ—Ç–∫—Ä—ã–ª–∏. –ü–æ–≤–µ–∑–ª–æ –µ—â—ë, —á—Ç–æ –ª—é–¥–∏ –Ω–∞—à–∏—Ö –¥–µ–≤–æ–∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –æ—Ç –º—É–∂–∏–∫–æ–≤ –æ—Ç–ª–∏—á–∏—Ç—å –Ω–µ –º–æ–≥—É—Ç, –∞ —Ç–æ –±—ã –≤—Å–µ—Ö —É–∂–µ —É–≤–µ–ª–∏! '
  || '–í–µ–¥—å –Ω–µ—Ç—É –±–∞–±—ã –∫—Ä–∞—à–µ –∫—Ä–∞—Å–Ω–æ–ª—É–¥–∫–∏. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≥–æ–≤–æ—Ä—è—Ç: —á–µ–º –ø—ã—à–Ω–µ–µ –±–æ—Ä–æ–¥–∞, —Ç–µ–º –ø—Ä–∏—è—Ç–Ω–µ–µ‚Ä¶ –Ω—É, —Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å.
<b>-–†–æ–¥–æ–ª—å—Ñ –ö–∞–∑–º–µ—Ä</b></i>
<h2>–ß–µ—Ä—Ç—ã</h2>
<h3>üü° –ó–∞–∫–∞–ª—ë–Ω–Ω—ã–π</h3>
–£ –∫—Ä–∞—Å–Ω–æ–ª—é–¥–æ–≤ –≤–µ—Å—å–º–∞ –∫—Ä–µ–ø–∫–∞—è –∫–æ–∂–∞, –∏–º–µ—é—â–∞—è –≤—Ä–æ–∂–¥—ë–Ω–Ω—É—é –ø—Ä–æ—á–Ω–æ—Å—Ç—å 2. –≠—Ç–∞ –≤–µ–ª–∏—á–∏–Ω–∞ –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ –ª—é–±–æ–π –±—Ä–æ–Ω–∏ –∏ –Ω–µ '
  || '–º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–Ω–∏–∂–µ–Ω–∞ —Ä–∞–∑—Ä—É—à–∞—é—â–∏–º —É—Ä–æ–Ω–æ–º.
<h3>üü° –°–∏–ª–∞—á</h3>
–ë–ª–∞–≥–æ–¥–∞—Ä—è –Ω–µ–≤—ã—Å–æ–∫–æ–º—É —Ä–æ—Å—Ç—É –∏ —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–∏ –∫ —Ç—è–∂—ë–ª–æ–π —Ä–∞–±–æ—Ç–µ, —Ç—Ä–µ–±—É—é—â–µ–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —É—Å–∏–ª–∏–π, –∫—Ä–∞—Å–Ω–æ–ª—é–¥—ã –ø–æ–ª—É—á–∞—é—Ç +1 –∫ –°–∏–ª–µ '
  || '(–ù–∞–≤—ã–∫—É ¬´–°–∏–ª–∞¬ª) –∏ –ø–æ–≤—ã—à–∞—é—Ç —Å–≤–æ—ë –∑–Ω–∞—á–µ–Ω–∏–µ –ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ–≥–æ –≤–µ—Å–∞ –Ω–∞ 25.
<h3>üü° –ù–∞–º—ë—Ç–∞–Ω–Ω—ã–π –≥–ª–∞–∑</h3>
–ö—Ä–∞—Å–Ω–æ–ª—é–¥—ã ‚Äî –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–µ –æ—Ü–µ–Ω—â–∏–∫–∏, –æ–±–ª–∞–¥–∞—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏–µ–º –∫ –¥–µ—Ç–∞–ª—è–º; –æ–±–º–∞–Ω—É—Ç—å –∏—Ö —Ç—Ä—É–¥–Ω–æ. –ö—Ä–∞—Å–Ω–æ–ª—é–¥—ã –ø–æ–ª—É—á–∞—é—Ç –≤—Ä–æ–∂–¥—ë–Ω–Ω—ã–π '
  || '–±–æ–Ω—É—Å +1 –∫ –¢–æ—Ä–≥–æ–≤–ª–µ.'),
        ('en',
'<h1>Dwarves</h1>
<i>Heh. My friend, rivers dry up, mountains crumble, but dwarves are a constant. We may be short compared to the elves and '
  || 'the humans but we''re sturdier than they''ll ever be‚Äîthe definition of barrel-chested! We dwarves have been around '
  || 'for ages, livin'' in the mountains and plyin'' our trade: forg in''. We''re friendly enough when ya get to know us '
  || 'and easy to get along with as long as ya don''t piss in our faces. The humans may not love us dwarves, but they need '
  || 'us for our skill and our steel. ''Sides, unlike the damn elves we don''t hold an in-born grudge against the humans. '
  || 'We keep to our business and them to theirs. Share a drink here and there. Heh, sadly, madness is spreadin'' quick '
  || 'through the North and dwarves are targets now more than ever. Lucky the humans have a hard time pickin'' out our women! '
  || 'Never find a prettier lass than a dwarven girl. They say the fuller the beard, the fuller the...well. Ya get my point.
<b>-Rodolf Kazmer</b></i>
<h2>Perks</h2>
<h3>üü° Tough</h3>
Spending much of their time in the mountains and mines, dwarves have naturally tough skin. A dwarf''s skin has a natural '
  || 'Stopping Power of 2. This SP is applied on top of any armor the dwarf is already wearing and cannot be lowered via '
  || 'weapon attacks or ablation damage.
<h3>üü° Strong</h3>
Due to their compact frame and propensity for tough, physically demanding professions, dwarves gain a +1 to their Physique '
  || 'skill and raise their Encumbrance by 25.
<h3>üü° Crafter''s Eye</h3>
With their eye for fine detail and appraisal it is hard to bluff a dwarf. Dwarves have an inherent +1 to their Business skill.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_race_dwarf'
     , meta.su_su_id
     , meta.qu_id
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(2, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label
     , 2 AS sort_order
     , '{}'::jsonb AS metadata
  FROM meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –≤—ã–±–æ—Ä–∞ —Ä–∞—Å—ã: –ö—Ä–∞—Å–Ω–æ–ª—é–¥
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'character' AS entity)
, ins_r_dwarf AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarf' ||'.'|| meta.entity ||'.'|| 'race') AS id
       , meta.entity, 'race', v.lang, v.text
    FROM (VALUES
      ('ru', '–ö—Ä–∞—Å–Ω–æ–ª—é–¥'),
      ('en', 'Dwarf')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_dwarf_f1 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '1') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–ó–∞–∫–∞–ª—ë–Ω–Ω—ã–π</b>: –≤—Ä–æ–∂–¥—ë–Ω–Ω–∞—è –ü—Ä–æ—á–Ω–æ—Å—Ç—å 2; —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å –±—Ä–æ–Ω—ë–π –∏ –Ω–µ —Å–Ω–∏–∂–∞–µ—Ç—Å—è —Ä–∞–∑—Ä—É—à–∞—é—â–∏–º —É—Ä–æ–Ω–æ–º'),
      ('en', '<b>Tough</b>: natural SP 2; stacks with worn armor; not lowered by ablation damage')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_dwarf_f2 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '2') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–°–∏–ª–∞—á</b>: [+1 –∫ –°–∏–ª–µ] –∏ [+25 –∫ –ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ–º—É –≤–µ—Å—É]'),
      ('en', '<b>Strong</b>: [+1 Physique] and [+25 Encumbrance]')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_dwarf_f3 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '3') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–ù–∞–º—ë—Ç–∞–Ω–Ω—ã–π –≥–ª–∞–∑</b>: [+1 –∫ –¢–æ—Ä–≥–æ–≤–ª–µ]'),
      ('en', '<b>Crafter''s Eye</b>: [+1 to Business]')
    ) AS v(lang, text)
    CROSS JOIN meta
)
INSERT INTO effects (scope, an_an_id, body)
SELECT
  'character',
  'wcc_race_dwarf',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.race'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarf' ||'.'|| meta.entity ||'.'|| 'race')::text)
    )
  )
FROM meta UNION ALL
SELECT
  'character' AS scope,
  'wcc_race_dwarf' AS an_an_id,
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.logicFields.race'),
      'Dwarf'
    )
  ) AS body
UNION ALL
SELECT
  'character',
  'wcc_race_dwarf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '1')::text)
    )
  )
FROM meta
UNION ALL
SELECT
  'character',
  'wcc_race_dwarf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '2')::text)
    )
  )
FROM meta
UNION ALL
SELECT
  'character',
  'wcc_race_dwarf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '3')::text)
    )
  )
FROM meta UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –ö—Ä–∞—Å–Ω–æ–ª—é–¥ - –°–∏–ª–∞—á (+1 –∫ –°–∏–ª–µ)
SELECT 'character', 'wcc_race_dwarf',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.physique.race_bonus'),
      1
    )
  )
UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –ö—Ä–∞—Å–Ω–æ–ª—é–¥ - –°–∏–ª–∞—á (+25 –∫ –ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ–º—É –≤–µ—Å—É)
SELECT 'character', 'wcc_race_dwarf',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.statistics.calculated.ENC.race_bonus'),
      25
    )
  )
UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –ö—Ä–∞—Å–Ω–æ–ª—é–¥ - –ù–∞–º—ë—Ç–∞–Ω–Ω—ã–π –≥–ª–∞–∑ (+1 –∫ –¢–æ—Ä–≥–æ–≤–ª–µ)
SELECT 'character', 'wcc_race_dwarf',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.business.race_bonus'),
      1
    )
  );

-- –û–ø—Ü–∏—è –æ—Ç–≤–µ—Ç–∞: –≠–ª—å—Ñ—ã (Aen Seidhe) / Elves (The Aen Seidhe)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(3, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
         , meta.entity, meta.entity_field, v.lang, v.text
      FROM (VALUES
        ('ru',
'<h1>–≠–ª—å—Ñ—ã (Aen Seidhe)</h1>
<i>–ò—Å—Ç–æ—Ä–∏—è —ç–ª—å—Ñ–æ–≤ (—Ç–æ—á–Ω–µ–µ Aen Seidhe, –ø–æ—Å–∫–æ–ª—å–∫—É –Ω–∞—à–∏ —ç–ª—å—Ñ—ã –¥–∞–ª–µ–∫–æ –Ω–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ) –≤–µ—Å—å–º–∞ –≥—Ä—É—Å—Ç–Ω–∞—è. –û–Ω–∏ –ø—Ä–∏–±—ã–ª–∏ —Å—é–¥–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ '
  || '–æ—Ç–∫—É–¥–∞ –Ω–∞ –æ–≥—Ä–æ–º–Ω—ã—Ö –±–µ–ª—ã—Ö –∫–æ—Ä–∞–±–ª—è—Ö. –°–ª—É—á–∏–ª–æ—Å—å —ç—Ç–æ –Ω–µ–∑–∞–¥–æ–ª–≥–æ –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –ª—é–¥–µ–π. –Ø –±—ã –Ω–µ –Ω–∞–∑–≤–∞–ª —ç–ª—å—Ñ–æ–≤ –¥–æ–±—Ä—è–∫–∞–º–∏, –Ω–æ —Å '
  || '–æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –æ–Ω–∏ –∫–∞–∫-—Ç–æ —É–∂–∏–≤–∞–ª–∏—Å—å. –û—Ç –ª—é–¥–µ–π –æ–Ω–∏ –Ω–µ —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è: –≤—ã—Å–æ–∫–∏–µ, —Ö—É–¥—ã–µ, –ª—é–±—è—Ç –Ω–∞ –¥—Ä—É–≥–∏e –Ω–∞—Ä–æ–¥—ã —Å–≤—ã—Å–æ–∫–∞ '
  || '—Å–º–æ—Ç—Ä–µ—Ç—å. –†–∞–∑–≤–µ —á—Ç–æ —É—à–∏ –æ—Å—Ç—Ä—ã–µ, –∂–∏–∑–Ω—å –≤–µ—á–Ω–∞—è, –¥–∞, —Å—á–∏—Ç–∞–π, –ø–æ–ª–Ω–æ–µ –µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ø—Ä–∏—Ä–æ–¥–æ–π ‚Äî —ç–ª—å—Ñ—ã –º–Ω–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏–π —Ç–æ–ª—å–∫–æ –∏ '
  || '–¥–µ–ª–∞–ª–∏, —á—Ç–æ –∑–∞–Ω–∏–º–∞–ª–∏—Å—å —Å–æ–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –∏ —Å—Ç—Ä–æ–∏–ª–∏ –¥–≤–æ—Ä—Ü—ã. –£ –Ω–∏—Ö –∑–∞ –≤—Ä–µ–º—è –ø–æ–µ–¥–∞–Ω–∏—è —è–≥–æ–¥ –¥–∞ –∫–æ—Ä–µ–Ω—å–µ–≤ –∏ –∫–ª—ã–∫–æ–≤-—Ç–æ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å. '
  || '–ü—Ä–∞–≤–¥–∞, –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Å–æ–≤–µ—Ç—É—é –∏—Ö –∏–∑ —Å–µ–±—è –≤—ã–≤–æ–¥–∏—Ç—å ‚Äî –Ω–∞ –ø–æ–ª–µ –±–æ—è —ç–ª—å—Ñ—ã –º–æ–≥—É—Ç —É—Å—Ç—Ä–æ–∏—Ç—å –≤–∞–º –µ—â—ë –∞–¥. –ë—Ä–æ–Ω—é –æ–Ω–∏ —Ç–æ–ª–∫–æ–º –Ω–µ –Ω–æ—Å—è—Ç, '
  || '–Ω–æ –∑–∞–ø—Ä–∏–º–µ—Ç–∏—Ç—å —ç–ª—å—Ñ–∞ –≤ –ª–µ—Å—É —Ç–∞–∫ –∂–µ —Ç—è–∂–µ–ª–æ, –∫–∞–∫ –∑–∏–º–æ–π –ª—è–≥—É—à–∫—É –Ω–∞–π—Ç–∏. –ê —É–∂ –∏—Å–∫—É—Å–Ω–µ–µ –ª—É—á–Ω–∏–∫–∞, —á–µ–º —ç–ª—å—Ñ, –¥–Ω—ë–º —Å –æ–≥–Ω—ë–º –Ω–µ —Å—ã—â–µ—à—å.
<b>–†–æ–¥–æ–ª—å—Ñ –ö–∞–∑–º–µ—Ä</b></i>
<h2>–ß–µ—Ä—Ç—ã</h2>
<h3>üü° –ß—É–≤—Å—Ç–≤–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ</h3>
–£ —ç–ª—å—Ñ–æ–≤ –µ—Å—Ç—å –≤—Ä–æ–∂–¥—ë–Ω–Ω–∞—è —Ç–≤–æ—Ä—á–µ—Å–∫–∞—è –∂–∏–ª–∫–∞ –∏ —Ä–∞–∑–≤–∏—Ç–æ–µ —á—É–≤—Å—Ç–≤–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ. –≠–ª—å—Ñ—ã –ø–æ–ª—É—á–∞—é—Ç –≤—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –±–æ–Ω—É—Å +1 –∫ –ò—Å–∫—É—Å—Å—Ç–≤—É.
<h3>üü° –°—Ç—Ä–µ–ª–æ–∫</h3>
–ë–ª–∞–≥–æ–¥–∞—Ä—è –¥–∞–≤–Ω–∏–º —Ç—Ä–∞–¥–∏—Ü–∏—è–º –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º —ç–ª—å—Ñ—ã ‚Äî –æ–¥–Ω–∏ –∏–∑ –ª—É—á—à–∏—Ö –ª—É—á–Ω–∏–∫–æ–≤ –≤ –º–∏—Ä–µ. –≠–ª—å—Ñ—ã –ø–æ–ª—É—á–∞—é—Ç –≤—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –±–æ–Ω—É—Å +2 '
  || '–∫ –°—Ç—Ä–µ–ª—å–±–µ –∏–∑ –ª—É–∫–∞ –∏ —Å–ø–æ—Å–æ–±–Ω—ã –≤–∑–≤–æ–¥–∏—Ç—å –∏ –Ω–∞—Ç—è–≥–∏–≤–∞—Ç—å –ª—É–∫, –Ω–µ —Ç—Ä–∞—Ç—è –Ω–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ.
<h3>üü° –ï–¥–∏–Ω–µ–Ω–∏–µ —Å –ø—Ä–∏—Ä–æ–¥–æ–π</h3>
–≠–ª—å—Ñ—ã —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω—ã —Å –ø—Ä–∏—Ä–æ–¥–æ–π. –û–Ω–∏ –Ω–µ —Ç—Ä–µ–≤–æ–∂–∞—Ç –∂–∏–≤–æ—Ç–Ω—ã—Ö ‚Äî –ª—é–±–æ–π –∑–≤–µ—Ä—å, –≤—Å—Ç—Ä–µ—á–µ–Ω–Ω—ã–π —ç–ª—å—Ñ–æ–º, –±—É–¥–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ –Ω–µ–º—É –¥—Ä—É–∂–µ–ª—é–±–Ω–æ '
  || '–∏ –Ω–µ –Ω–∞–ø–∞–¥—ë—Ç –±–µ–∑ –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–∏. –≠–ª—å—Ñ—ã —Ç–∞–∫–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç –ª—é–±—ã–µ –æ–±—ã—á–Ω—ã–µ –∏ –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω—ã–µ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–µ —Å—É–±—Å—Ç–∞–Ω—Ü–∏–∏, –µ—Å–ª–∏ '
  || '–∏—Å–∫–æ–º–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ–±–∏—Ç–∞–µ—Ç –Ω–∞ –¥–∞–Ω–Ω–æ–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏.'),
        ('en',
'<h1>Elves (The Aen Seidhe)</h1>
<i>Elves, or the Aen Seidhe, since ours aren''t the only elves out there, are a sad tale indeed. Heh. They came to the world '
  || 'not long before humans, in great white ships from somewhere. Wouldn''t call ''em the kindest of the races but they get '
  || 'along well enough with the rest of us. They''re not too unlike humans: tall, thin, prone to lookin'' down on others. '
  || 'Only difference is their pointed ears, their seemingly eternal lives, and their bond with the land. Heh, the elves are '
  || 'at one with nature or somethin''. Lived off the land for generations, foragin'' for food and buildin'' great palaces. '
  || 'Don''t even have sharp teeth after all those years of eatin'' berries and plants. Don''t get ''em cross though; an elf''s '
  || 'hell on the battlefield too. They may not wear much armor but they''re hard as frogs in winter to find in the wilderness, '
  || 'and probably the best archers you''ll ever see.
<b>Rodolf Kazmer</b></i>
<h2>Perks</h2>
<h3>üü° Artistic</h3>
Elves have a natural eye for beauty and a talent for artistic endeavours. Elves gain an inherent +1 to their Fine Arts skill.
<h3>üü° Marksman</h3>
Years of tradition and practice make elves some of the best archers in the world. Elves gain an inherent +2 to their Archery '
  || 'skill and can draw and string a bow without taking an action.
<h3>üü° Natural Attunement</h3>
Elves have a deep magical bond with nature itself. Elves do not disturb animals, meaning any beast they encounter is considered '
  || 'friendly and will not attack unless provoked. Elves also automatically find any plant substance rated as commonly '
  || 'available (or lower) that they are seeking, as long as the substance would occur naturally in the surrounding terrain.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_race_elf'
     , meta.su_su_id
     , meta.qu_id
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(3, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label
     , 3 AS sort_order
     , '{}'::jsonb AS metadata
  FROM meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –≤—ã–±–æ—Ä–∞ —Ä–∞—Å—ã: –≠–ª—å—Ñ
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'character' AS entity)
, ins_r_elf AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elf' ||'.'|| meta.entity ||'.'|| 'race') AS id
       , meta.entity, 'race', v.lang, v.text
    FROM (VALUES
      ('ru', '–≠–ª—å—Ñ'),
      ('en', 'Elf')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_elf_f1 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '1') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–ß—É–≤—Å—Ç–≤–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ</b>: [+1 –∫ –ò—Å–∫—É—Å—Å—Ç–≤—É]'),
      ('en', '<b>Artistic</b>: [+1 to Fine Arts]')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_elf_f2 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '2') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–°—Ç—Ä–µ–ª–æ–∫</b>: [+2 –∫ –°—Ç—Ä–µ–ª—å–±–µ –∏–∑ –ª—É–∫–∞]; –≤—ã—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏ –Ω–∞—Ç—è–≥–∏–≤–∞–µ—Ç –ª—É–∫ –±–µ–∑ —Ç—Ä–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏—è'),
      ('en', '<b>Marksman</b>: [+2 to Archery]; can draw & string a bow without taking an action')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_elf_f3 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '3') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–ï–¥–∏–Ω–µ–Ω–∏–µ —Å –ø—Ä–∏—Ä–æ–¥–æ–π</b>: –∑–≤–µ—Ä–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –¥—Ä—É–∂–µ–ª—é–±–Ω–æ –∏ –Ω–µ –∞—Ç–∞–∫—É—é—Ç –±–µ–∑ –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–∏; –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç '
  || '–æ–±—ã—á–Ω—ã–µ/–ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω—ã–µ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–µ —Å—É–±—Å—Ç–∞–Ω—Ü–∏–∏, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã –¥–ª—è –º–µ—Å—Ç–Ω–æ—Å—Ç–∏'),
      ('en', '<b>Natural Attunement</b>: beasts are friendly and won''t attack unless provoked; automatically finds '
  || 'commonly-available plant substances occurring naturally in the area')
    ) AS v(lang, text)
    CROSS JOIN meta
)
INSERT INTO effects (scope, an_an_id, body)
-- race text
SELECT
  'character',
  'wcc_race_elf',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.race'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elf' ||'.'|| meta.entity ||'.'|| 'race')::text)
    )
  )
FROM meta UNION ALL
SELECT
  'character' AS scope,
  'wcc_race_elf' AS an_an_id,
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.logicFields.race'),
      'Elf'
    )
  ) AS body
UNION ALL
-- perks: Artistic / Marksman / Natural Attunement
SELECT
  'character',
  'wcc_race_elf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '1')::text)
    )
  )
FROM meta
UNION ALL
SELECT
  'character',
  'wcc_race_elf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '2')::text)
    )
  )
FROM meta
UNION ALL
SELECT
  'character',
  'wcc_race_elf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elf' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '3')::text)
    )
  )
FROM meta UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –≠–ª—å—Ñ - –ß—É–≤—Å—Ç–≤–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ (+1 –∫ –ò—Å–∫—É—Å—Å—Ç–≤—É)
SELECT 'character', 'wcc_race_elf',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.fine_arts.race_bonus'),
      1
    )
  )
UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –≠–ª—å—Ñ - –°—Ç—Ä–µ–ª–æ–∫ (+2 –∫ –°—Ç—Ä–µ–ª—å–±–µ –∏–∑ –ª—É–∫–∞)
SELECT 'character', 'wcc_race_elf',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.archery.race_bonus'),
      2
    )
  );

-- –û–ø—Ü–∏—è –æ—Ç–≤–µ—Ç–∞: –í–µ–¥—å–º–∞–∫–∏ / Witchers
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(4, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
         , meta.entity, meta.entity_field, v.lang, v.text
      FROM (VALUES
        ('ru',
'<h1>–í–µ–¥—å–º–∞–∫–∏</h1>
<i>–í–µ–¥—å–º–∞–∫–∏ ‚Äî —Ç–µ–º–∞ –¥–µ–ª–∏–∫–∞—Ç–Ω–∞—è —Å —Ç–µ—Ö —Å–∞–º—ã—Ö –ø–æ—Ä, –∫–∞–∫ –∏—Ö —Å–æ–∑–¥–∞–ª–∏ –º–Ω–æ–≥–æ –≤–µ–∫–æ–≤ —Ç–æ–º—É –Ω–∞–∑–∞–¥. –ù–æ, –∑–Ω–∞–µ—à—å, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –æ–Ω–∏ –±—ã–ª–∏ '
  || '–Ω–∞—Ä–∞—Å—Ö–≤–∞—Ç, –∏—Ö –Ω–µ –æ—Å–æ–±–æ-—Ç–æ –ª—é–±–∏–ª–∏. –í–µ–¥—å–º–∞–∫–æ–≤ –≤—ã—Ä–∞—â–∏–≤–∞–ª–∏ –∏–∑ –ª—é–¥—Å–∫–∏—Ö –¥–µ—Ç–µ–π –≤ –≤–µ–¥—å–º–∞—á—å–∏—Ö —à–∫–æ–ª–∞—Ö. –¢–∞–º –¥–µ—Ç–∏ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ '
  || '–ª—é—Ç—É—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π —Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –∂–∏–≤—ã–º –æ—Ä—É–∂–∏–µ–º. –ë—ã—Å—Ç—Ä—ã–µ –¥–æ –æ–¥—É—Ä–∏, –æ–Ω–∏ –º–æ–≥—É—Ç —Å—Ä–∞–∂–∞—Ç—å—Å—è –≤—Å–ª–µ–ø—É—é –∏ –æ–±—É—á–µ–Ω—ã '
  || '–æ—Ö–æ—Ç–∏—Ç—å—Å—è –ø–æ—á—Ç–∏ –Ω–∞ –≤—Å–µ—Ö —Ç–≤–∞—Ä–µ–π, –∫–∞–∫–∏–µ —Ç–æ–ª—å–∫–æ –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å. –ß–µ—Ä–µ–∑ –ø–∞—Ä—É –ª–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏—Ö –ø–æ–¥–≤–µ—Ä–≥–∞—é—Ç –º—É—Ç–∞—Ü–∏—è–º ‚Äî '
  || '–∏–∑–≤–µ—Å—Ç–Ω–µ–π –≤—Å–µ–≥–æ –ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ç—Ä–∞–≤–∞–º–∏. –í–µ–¥—å–º–∞–∫, —Å –∫–æ—Ç–æ—Ä—ã–º —è —Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–≤–∞–ª, –≥–æ–≤–æ—Ä–∏–ª, —á—Ç–æ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç —ç—Ç—É –¥—Ä—è–Ω—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω '
  || '—Ä–µ–±—ë–Ω–æ–∫ –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö.</i>
<i>–¢–µ, –∫—Ç–æ –≤—ã–∂–∏–ª, –º–µ–Ω—è—é—Ç—Å—è. –ì–ª–∞–∑–∞ —É –Ω–∏—Ö —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∫–æ—à–∞—á—å–∏–º–∏, –∞ —ç–º–æ—Ü–∏–∏ –ø–æ—á—Ç–∏ –æ—Ç–º–∏—Ä–∞—é—Ç. –í—Ä–æ–¥–µ –ø–æ—Ç–æ–º —á–∞—Å—Ç–∏—á–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è ‚Äî '
  || '–º–æ–π —Å–ø—É—Ç–Ω–∏–∫ –ø–æ –¥–æ—Ä–æ–≥–µ –∏ —à—É—Ç–∫–∏ –æ—Ç–ø—É—Å–∫–∞–ª. –ù–æ —Å —Ç–æ–π –ø–æ—Ä—ã –≤–µ–¥—å–º–∞–∫–∏ ‚Äî —É–±–∏–π—Ü—ã, –ø–µ—Ä–µ—Ä–æ–∂–¥—ë–Ω–Ω—ã–µ –¥–ª—è –æ–¥–Ω–æ–π —Ü–µ–ª–∏: —É–±–∏–≤–∞—Ç—å —á—É–¥–æ–≤–∏—â. '
  || '–£–≤–∏–¥–∏—à—å –≤–µ–¥—å–º–∞–∫–∞ –≤ –¥–µ–ª–µ ‚Äî –ø–æ–π–º—ë—à—å, —á—Ç–æ –≤—Å–µ —Å—Ç—Ä–∞–¥–∞–Ω–∏—è –±—ã–ª–∏ –Ω–µ –∑—Ä—è. –û–¥–Ω–∞ –±–µ–¥–∞: –æ–Ω–∏ –º—É—Ç–∞–Ω—Ç—ã, –∞ –ª—é–¥–µ–π –º—É—Ç–∞–Ω—Ç—ã –ø—É–≥–∞—é—Ç –∏ –∑–ª—è—Ç. '
  || '–° –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π —É –≤–µ–¥—å–º–∞–∫–æ–≤ —Ç—É–≥–æ, –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å—á–∏—Ç–∞–µ—Ç –∏—Ö —Ö–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–Ω—ã–º–∏ –±–µ–∑–¥—É—à–Ω—ã–º–∏ –≤—ã—Ä–æ–¥–∫–∞–º–∏, —á—Ç–æ —Å–ø–µ—Ä–≤–∞ –æ–±–≤–æ—Ä—É—é—Ç —Ç–µ–±—è –∏ '
  || '—Ç–≤–æ–∏—Ö, –∞ –ø–æ—Ç–æ–º –≤—Å–∞–¥—è—Ç –º–µ—á –≤ –±—Ä—é—Ö–æ.</i>
<b>–†–æ–¥–æ–ª—å—Ñ –ö–∞–∑–º–µ—Ä</b>
<h2>–ß–µ—Ä—Ç—ã</h2>
<h3>üü° –û–±–æ—Å—Ç—Ä—ë–Ω–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞</h3>
–ë–ª–∞–≥–æ–¥–∞—Ä—è –æ–±–æ—Å—Ç—Ä—ë–Ω–Ω—ã–º —á—É–≤—Å—Ç–≤–∞–º –≤–µ–¥—å–º–∞–∫–∏ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —à—Ç—Ä–∞—Ñ–æ–≤ –ø—Ä–∏ —Å–ª–∞–±–æ–º —Å–≤–µ—Ç–µ –∏ –ø–æ–ª—É—á–∞—é—Ç +1 –∫ –í–Ω–∏–º–∞–Ω–∏—é, –∞ —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å '
  || '–≤—ã—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ –∑–∞–ø–∞—Ö—É.
<h3>üü° –°—Ç–æ–π–∫–æ—Å—Ç—å –º—É—Ç–∞–Ω—Ç–∞</h3>
–ü–æ—Å–ª–µ –≤—Å–µ—Ö –º—É—Ç–∞—Ü–∏–π –≤–µ–¥—å–º–∞–∫–∏ –Ω–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤—ã –∫ –±–æ–ª–µ–∑–Ω—è–º –∏ —Å–ø–æ—Å–æ–±–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—É—Ç–∞–≥–µ–Ω—ã.
<h3>üü° –ü—Ä–∏—Ç—É–ø–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏–π</h3>
–ò–∑-–∑–∞ –ø–µ—Ä–µ–∂–∏—Ç—ã—Ö —Å—Ç—Ä–∞–¥–∞–Ω–∏–π –∏ –º—É—Ç–∞—Ü–∏–π —ç–º–æ—Ü–∏–∏ —É –≤–µ–¥—å–º–∞–∫–æ–≤ –ø—Ä–∏—Ç—É–ø–ª—è—é—Ç—Å—è. –í–µ–¥—å–º–∞–∫–∞–º –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–≤–µ—Ä—à–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –•—Ä–∞–±—Ä–æ—Å—Ç–∏ –ø—Ä–æ—Ç–∏–≤ '
  || '–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è; –ø—Ä–∏ —ç—Ç–æ–º –æ–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç —à—Ç—Ä–∞—Ñ ‚àí4 –∫ –≠–º–ø–∞—Ç–∏–∏, –Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≠–º–ø–∞—Ç–∏–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∏–∂–µ 1.
<h3>üü° –ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è</h3>
–ë–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º –∏ –º—É—Ç–∞—Ü–∏—è–º –≤–µ–¥—å–º–∞–∫–∏ –±—ã—Å—Ç—Ä–µ–µ –∏ –ø—Ä–æ–≤–æ—Ä–Ω–µ–µ –ª—é–¥–µ–π. –û–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –±–æ–Ω—É—Å +1 –∫ –†–µ–∞–∫—Ü–∏–∏ '
  || '–∏ –õ–æ–≤–∫–æ—Å—Ç–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø—Ä–µ–≤—ã—à–∞—Ç—å 10.</i>'),
        ('en',
'<h1>Witchers</h1>
<i>Witchers have been a touchy issue since they were made centuries ago. Even when they were sought after, nobody really '
  || 'liked ''em. They''re raised from human children in the Witcher Schools and put through gruelin'' trainin'' that '
  || 'turns ''em into livin'' weapons. Fast as hell, trained to fight blind and hunt just about any monster you''re likely '
  || 'to meet. After a few years they go through mutations ‚Äî the Trial of the Grasses. The witcher I traveled with said '
  || 'only one in four kids survives.</i>
<i>The ones that survive are changed. Bright cat''s eyes and just about no feelin'' left, though it evens out some with '
  || 'time ‚Äî the witcher I traveled with even cracked a few jokes on the road. From that point on they''re killers, reborn '
  || 'for one purpose: killin'' monsters. See a witcher in action and you''ll know the payoff of all that hardship. Problem '
  || 'is they''re mutants, and people hate mutants. Most folk think they''re cold, heartless murderers who''ll steal your '
  || 'gold and then put a sword in your gut.</i>
<b>Rodolf Kazmer</b>
<h2>Perks</h2>
<h3>üü° Enhanced Senses</h3>
Due to their heightened senses, witchers take no penalties in dim light and gain an inherent +1 to Awareness, as well as the '
  || 'ability to track by scent alone.
<h3>üü° Resilient Mutation</h3>
After all required mutations, witchers are immune to diseases and are able to use mutagens.
<h3>üü° Dulled Emotions</h3>
Thanks to trauma and mutation, a witcher''s emotions are dulled. Witchers do not have to make courage checks against '
  || 'Intimidation, but they have a ‚àí4 to their Empathy; this cannot bring Empathy below 1.
<h3>üü° Lightning Reflexes</h3>
After intensive training and mutation, witchers are faster and more agile than humans. They gain a permanent +1 to both '
  || 'Reflex and Dexterity that can raise these stats above 10.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_race_witcher'
     , meta.su_su_id
     , meta.qu_id
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(4, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label
     , 4 AS sort_order
     , '{}'::jsonb AS metadata
  FROM meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –≤—ã–±–æ—Ä–∞ —Ä–∞—Å—ã: –í–µ–¥—å–º–∞–∫
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'character' AS entity)
, ins_r_witcher AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'race') AS id
       , meta.entity, 'race', v.lang, v.text
    FROM (VALUES
      ('ru', '–í–µ–¥—å–º–∞–∫'),
      ('en', 'Witcher')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_witcher_f1 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '1') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–û–±–æ—Å—Ç—Ä—ë–Ω–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞</b>: –Ω–µ—Ç —à—Ç—Ä–∞—Ñ–æ–≤ –∑–∞ —Ç—É—Å–∫–ª—ã–π —Å–≤–µ—Ç; [+1 –∫ –í–Ω–∏–º–∞–Ω–∏—é]; –≤—ã—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ –∑–∞–ø–∞—Ö—É'),
      ('en', '<b>Enhanced Senses</b>: no penalties in dim light; [+1 Awareness]; can track by scent')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_witcher_f2 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '2') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–°—Ç–æ–π–∫–æ—Å—Ç—å –º—É—Ç–∞–Ω—Ç–∞</b>: –∏–º–º—É–Ω–∏—Ç–µ—Ç –∫ –±–æ–ª–µ–∑–Ω—è–º; –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—É—Ç–∞–≥–µ–Ω—ã'),
      ('en', '<b>Resilient Mutation</b>: immune to diseases; can use mutagens')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_witcher_f3 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '3') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–ü—Ä–∏—Ç—É–ø–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏–π</b>: –Ω–µ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –•—Ä–∞–±—Ä–æ—Å—Ç–∏ –ø—Ä–æ—Ç–∏–≤ –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è; [‚àí4 –∫ –≠–º–ø–∞—Ç–∏–∏] (–Ω–µ –Ω–∏–∂–µ 1)'),
      ('en', '<b>Dulled Emotions</b>: no Courage checks vs Intimidation; [‚àí4 Empathy] (cannot go below 1)')
    ) AS v(lang, text)
    CROSS JOIN meta
)
, ins_r_witcher_f4 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '4') AS id
       , meta.entity, 'perks', v.lang, v.text
    FROM (VALUES
      ('ru', '<b>–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è</b>: [+1 –∫ –†–µ–∞–∫—Ü–∏–∏ –∏ –õ–æ–≤–∫–æ—Å—Ç–∏]; –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å 10'),
      ('en', '<b>Lightning Reflexes</b>: [+1 to Reflex and Dexterity]; may exceed 10')
    ) AS v(lang, text)
    CROSS JOIN meta
)
INSERT INTO effects (scope, an_an_id, body)
-- race text
SELECT
  'character',
  'wcc_race_witcher',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.race'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'race')::text)
    )
  )
FROM meta UNION ALL
SELECT
  'character' AS scope,
  'wcc_race_witcher' AS an_an_id,
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.logicFields.race'),
      'Witcher'
    )
  ) AS body
UNION ALL
-- perks (4 —à—Ç.)
SELECT 'character','wcc_race_witcher',
       jsonb_build_object('add', jsonb_build_array(
         jsonb_build_object('var','characterRaw.perks'),
         jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '1')::text)
       ))
FROM meta
UNION ALL
SELECT 'character','wcc_race_witcher',
       jsonb_build_object('add', jsonb_build_array(
         jsonb_build_object('var','characterRaw.perks'),
         jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '2')::text)
       ))
FROM meta
UNION ALL
SELECT 'character','wcc_race_witcher',
       jsonb_build_object('add', jsonb_build_array(
         jsonb_build_object('var','characterRaw.perks'),
         jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '3')::text)
       ))
FROM meta
UNION ALL
SELECT 'character','wcc_race_witcher',
       jsonb_build_object('add', jsonb_build_array(
         jsonb_build_object('var','characterRaw.perks'),
         jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'witcher' ||'.'|| meta.entity ||'.'|| 'perks' ||'.'|| '4')::text)
       ))
FROM meta UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –í–µ–¥—å–º–∞–∫ - –û–±–æ—Å—Ç—Ä—ë–Ω–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞ (+1 –∫ –í–Ω–∏–º–∞–Ω–∏—é)
SELECT 'character', 'wcc_race_witcher',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.awareness.race_bonus'),
      1
    )
  )
UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –í–µ–¥—å–º–∞–∫ - –ü—Ä–∏—Ç—É–ø–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏–π (-4 –∫ –≠–º–ø–∞—Ç–∏–∏, max = 6)
SELECT 'character', 'wcc_race_witcher',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.statistics.EMP.race_bonus'),
      -4
    )
  )
UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –í–µ–¥—å–º–∞–∫ - –ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è (+1 –∫ –†–µ–∞–∫—Ü–∏–∏)
SELECT 'character', 'wcc_race_witcher',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.statistics.REF.race_bonus'),
      1
    )
  )
UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä—Ç —Ä–∞—Å—ã: –í–µ–¥—å–º–∞–∫ - –ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è (+1 –∫ –õ–æ–≤–∫–æ—Å—Ç–∏)
SELECT 'character', 'wcc_race_witcher',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.statistics.DEX.race_bonus'),
      1
    )
  );

-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π (–¥–ª—è social_status)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_race' AS qu_id
                , 'character' AS entity)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'territory' ||'.'|| v.territory_key) AS id
       , meta.entity, 'social_status_group', v.lang, v.text
    FROM (VALUES
      ('north', 'ru', '–°–µ–≤–µ—Ä'),
      ('north', 'en', 'The North'),
      ('nilfgaard', 'ru', '–ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥'),
      ('nilfgaard', 'en', 'Nilfgaard'),
      ('skellige', 'ru', '–°–∫–µ–ª–ª–∏–≥–µ'),
      ('skellige', 'en', 'Skellige'),
      ('dol_blathanna', 'ru', '–î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞'),
      ('dol_blathanna', 'en', 'Dol Blathanna'),
      ('mahakam', 'ru', '–ú–∞—Ö–∞–∫–∞–º'),
      ('mahakam', 'en', 'Mahakam')
    ) AS v(territory_key, lang, text)
    CROSS JOIN meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã social_status –¥–ª—è —Ä–∞—Å—ã: –ß–µ–ª–æ–≤–µ–∫
-- –°–µ–≤–µ—Ä: –õ—é–¥–∏=3, –≠–ª—å—Ñ—ã=1, –ö—Ä–∞—Å–Ω–æ–ª—é–¥—ã=2, –í–µ–¥—å–º–∞–∫–∏=1+true
-- –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥: –≤—Å–µ=3, –í–µ–¥—å–º–∞–∫–∏=1+true
-- –°–∫–µ–ª–ª–∏–≥–µ: –≤—Å–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
-- –î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞: –õ—é–¥–∏=1, –æ—Å—Ç–∞–ª—å–Ω—ã–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
-- –ú–∞—Ö–∞–∫–∞–º: –õ—é–¥–∏=2, –æ—Å—Ç–∞–ª—å–Ω—ã–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_race_human',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.north')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_human',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.nilfgaard')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_human',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.skellige')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_human',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.dol_blathanna')::text),
        'group_status', 1,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_human',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.mahakam')::text),
        'group_status', 2,
        'group_is_feared', false
      )
    )
  );

-- –≠—Ñ—Ñ–µ–∫—Ç—ã social_status –¥–ª—è —Ä–∞—Å—ã: –ö—Ä–∞—Å–Ω–æ–ª—é–¥
-- –°–µ–≤–µ—Ä: –õ—é–¥–∏=3, –≠–ª—å—Ñ—ã=1, –ö—Ä–∞—Å–Ω–æ–ª—é–¥—ã=2, –í–µ–¥—å–º–∞–∫–∏=1+true
-- –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥: –≤—Å–µ=3, –í–µ–¥—å–º–∞–∫–∏=1+true
-- –°–∫–µ–ª–ª–∏–≥–µ: –≤—Å–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
-- –î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞: –õ—é–¥–∏=1, –æ—Å—Ç–∞–ª—å–Ω—ã–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
-- –ú–∞—Ö–∞–∫–∞–º: –õ—é–¥–∏=2, –æ—Å—Ç–∞–ª—å–Ω—ã–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_race_dwarf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.north')::text),
        'group_status', 2,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_dwarf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.nilfgaard')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_dwarf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.skellige')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_dwarf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.dol_blathanna')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_dwarf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.mahakam')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  );

-- –≠—Ñ—Ñ–µ–∫—Ç—ã social_status –¥–ª—è —Ä–∞—Å—ã: –≠–ª—å—Ñ
-- –°–µ–≤–µ—Ä: –õ—é–¥–∏=3, –≠–ª—å—Ñ—ã=1, –ö—Ä–∞—Å–Ω–æ–ª—é–¥—ã=2, –í–µ–¥—å–º–∞–∫–∏=1+true
-- –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥: –≤—Å–µ=3, –í–µ–¥—å–º–∞–∫–∏=1+true
-- –°–∫–µ–ª–ª–∏–≥–µ: –≤—Å–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
-- –î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞: –õ—é–¥–∏=1, –æ—Å—Ç–∞–ª—å–Ω—ã–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
-- –ú–∞—Ö–∞–∫–∞–º: –õ—é–¥–∏=2, –æ—Å—Ç–∞–ª—å–Ω—ã–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_race_elf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.north')::text),
        'group_status', 1,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_elf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.nilfgaard')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_elf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.skellige')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_elf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.dol_blathanna')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_elf',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.mahakam')::text),
        'group_status', 3,
        'group_is_feared', false
      )
    )
  );

-- –≠—Ñ—Ñ–µ–∫—Ç—ã social_status –¥–ª—è —Ä–∞—Å—ã: –í–µ–¥—å–º–∞–∫
-- –°–µ–≤–µ—Ä: –õ—é–¥–∏=3, –≠–ª—å—Ñ—ã=1, –ö—Ä–∞—Å–Ω–æ–ª—é–¥—ã=2, –í–µ–¥—å–º–∞–∫–∏=1+true
-- –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥: –≤—Å–µ=3, –í–µ–¥—å–º–∞–∫–∏=1+true
-- –°–∫–µ–ª–ª–∏–≥–µ: –≤—Å–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
-- –î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞: –õ—é–¥–∏=1, –æ—Å—Ç–∞–ª—å–Ω—ã–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
-- –ú–∞—Ö–∞–∫–∞–º: –õ—é–¥–∏=2, –æ—Å—Ç–∞–ª—å–Ω—ã–µ=3, –í–µ–¥—å–º–∞–∫–∏=2+false
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_race_witcher',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.north')::text),
        'group_status', 1,
        'group_is_feared', true
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_witcher',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.nilfgaard')::text),
        'group_status', 1,
        'group_is_feared', true
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_witcher',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.skellige')::text),
        'group_status', 2,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_witcher',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.dol_blathanna')::text),
        'group_status', 2,
        'group_is_feared', false
      )
    )
  )
UNION ALL
SELECT 'character', 'wcc_race_witcher',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.social_status'),
      jsonb_build_object(
        'group_name', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_race.territory.mahakam')::text),
        'group_status', 2,
        'group_is_feared', false
      )
    )
  );

-- –ü—Ä–∞–≤–∏–ª–∞
INSERT INTO rules(name, body) VALUES ('is_elf', '{"==":[{"var":"characterRaw.logicFields.race"},"Elf"]}'::jsonb);
INSERT INTO rules(name, body) VALUES ('is_dwarf', '{"==":[{"var":"characterRaw.logicFields.race"},"Dwarf"]}'::jsonb);
INSERT INTO rules(name, body) VALUES ('is_witcher', '{"==":[{"var":"characterRaw.logicFields.race"},"Witcher"]}'::jsonb);

-- <<< END sql/002_race.sql

-- >>> BEGIN sql/003_past_witcher_q1.sql

\echo '003_past_witcher_q1.sql'
-- –£–∑–µ–ª: –ù—É–∂–Ω–∞ –ø—Ä–µ–¥–∏—Å—Ç–æ—Ä–∏—è?

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_witcher_q1' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru',
'–í—ã –≤—ã–±—Ä–∞–ª–∏ —Ä–∞—Å—É –≤–µ–¥—å–º–∞–∫–∞, –∞ –∑–Ω–∞—á–∏—Ç –≤—ã–±–æ—Ä –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è –∏ —Å–µ–º—å–∏ –Ω–µ –±—É–¥—É—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å '
  || '–≤—ã–±–æ—Ä –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤–æ–≤—Å–µ, —Ç–∞–∫ –∫–∞–∫ –≤–µ–¥—å–º–∞–∫–∞–º–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤ –≥–ª—É–±–æ–∫–æ–º –¥–µ—Ç—Å—Ç–≤–µ –∏ –Ω–µ —Ä–µ–¥–∫–æ –≤–µ–¥—å–º–∞–∫–∏ –≤–æ–≤—Å–µ –Ω–µ –∑–Ω–∞—é—Ç –Ω–∏—á–µ–≥–æ '
  || '–æ —Å–≤–æ–µ–π —Å–µ–º—å–µ. –•–æ—Ç–∏—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –∏ —Å–µ–º—å—é –ø–µ—Ä—Å–æ–Ω–∞–∂–∞?', 'body'),
                ('en',
'You''ve chosen your witcher''s race, meaning your origin and family choices won''t affect their stats. You can skip choosing '
  || 'your origin entirely, as witchers become witchers in early childhood, and it''s not uncommon for them to know nothing '
  || 'about their family. Want to determine your character''s origin and family?', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
       , jsonb_build_object(
           'dice', 'd0',
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.identity')::text,
             ck_id('witcher_cc.hierarchy.witcher_family')::text
           )
         )
     FROM meta;
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_witcher_q1' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
    ('ru', 1, '–Ø –Ω–µ —Ö–æ—á—É –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø—Ä–æ—à–ª–æ–µ –≤–µ–¥—å–º–∞–∫–∞ –¥–æ –µ–≥–æ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ —Å–≤–æ—é —à–∫–æ–ª—É'),
    ('en', 1, 'I don''t want to define the witcher''s past before he gets to his school.'),
    ('ru', 2, '–Ø –≤—ã–±–µ—Ä—É –ø—Ä–æ—à–ª–æ–µ –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞, —Ö–æ—Ç—è —ç—Ç–æ –∏ –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –∞ —Å–∞–º –≤–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç –¥–∞–∂–µ –Ω–µ —Å–º–æ–∂–µ—Ç –µ–≥–æ –≤—Å–ø–æ–º–Ω–∏—Ç—å.'),
    ('en', 2, 'I will choose the past for the witcher, although it will not affect the characteristics, and the witcher himself may not even be able to remember it.')
  ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_witcher_q1_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_race', 'wcc_past_witcher_q1', 'wcc_race_witcher';
-- <<< END sql/003_past_witcher_q1.sql

-- >>> BEGIN sql/004_past_dwarf_q1.sql

\echo '004_past_dwarf_q1.sql'
-- –£–∑–µ–ª: –†–æ–¥–∏–Ω–∞ –∫—Ä–∞—Å–Ω–æ–ª—é–¥–∞

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_dwarf_q1' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru',
'–í—ã –≤—ã–±—Ä–∞–ª–∏ —Ä–∞—Å—É –∫—Ä–∞—Å–Ω–æ–ª—é–¥–∞. –ü—Ä–∞–≤–∏–ª–∞ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ —Ä–æ–¥–∏–Ω–∞ –∫—Ä–∞—Å–Ω–æ–ª—é–¥–∞ - —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –ú–∞—Ö–∞–∫–∞–º (+1 –∫ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é). –ù–æ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å '
  || '–≤—ã–±–æ—Ä —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ', 'body'),
                ('en',
'You''ve chosen the dwarf race. The rules state that the dwarf homeland is always Mahakam (+1 to Crafting). But if you wish, you can make your '
  || 'own choice.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
       , jsonb_build_object(
           'dice', 'd0',
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.identity')::text,
             ck_id('witcher_cc.hierarchy.homeland_nonhuman')::text
           )
         )
     FROM meta;
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_dwarf_q1' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
    ('ru', 1, '–Ø —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ —Ä–æ–¥–∏–Ω—É –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é - –ú–∞—Ö–∞–∫–∞–º. (+1 –∫ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é)'),
    ('en', 1, 'I agree to the default homeland - Mahakam. (+1 to Crafting)'),
    ('ru', 2, '–Ø —Ö–æ—á—É –≤—ã–±—Ä–∞—Ç—å —á—Ç–æ-—Ç–æ –∏–∑ –∑–µ–º–µ–ª—å —Å—Ç–∞—Ä—à–∏—Ö –Ω–∞—Ä–æ–¥–æ–≤.'),
    ('en', 2, 'I want to choose something from the lands of the elder peoples.'),
    ('ru', 3, '–Ø —Ö–æ—á—É –≤—ã–±—Ä–∞—Ç—å —á—Ç–æ-—Ç–æ –∏–∑ –ª—é–¥—Å–∫–∏—Ö –ø–æ—Å–µ–ª–µ–Ω–∏–π.'),
    ('en', 3, 'I want to choose something from human settlements.')
  ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_dwarf_q1_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞: –Ø —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ —Ä–æ–¥–∏–Ω—É –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é - –ú–∞—Ö–∞–∫–∞–º
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_dwarf_q1' AS qu_id
                , 'character' AS entity)
, ins_homeland AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o01' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES
        ('ru', '–ú–∞—Ö–∞–∫–∞–º'),
        ('en', 'Mahakam')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_home_language AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o01' ||'.'|| meta.entity ||'.'|| 'home_language') AS id
         , meta.entity, 'home_language', v.lang, v.text
      FROM (VALUES
        ('ru', '–ö—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–∏–π'),
        ('en', 'Dwarvish')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
INSERT INTO effects (scope, an_an_id, body)
-- –≠—Ñ—Ñ–µ–∫—Ç: +1 –∫ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é (Crafting)
SELECT 'character', 'wcc_past_dwarf_q1_o01',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.crafting.bonus'),
      1
    )
  )
FROM meta UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç: –†–æ–¥–∏–Ω–∞ - –ú–∞—Ö–∞–∫–∞–º
SELECT 'character', 'wcc_past_dwarf_q1_o01',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.homeland'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o01' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
    )
  )
FROM meta UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç: –†–æ–¥–Ω–æ–π —è–∑—ã–∫ - –ö—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–∏–π
SELECT 'character', 'wcc_past_dwarf_q1_o01',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.home_language'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o01' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
    )
  )
FROM meta UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç: +8 –∫ –ö—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–æ–º—É —è–∑—ã–∫—É (language_dwarvish)
SELECT 'character', 'wcc_past_dwarf_q1_o01',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.language_dwarvish.bonus'),
      8
    )
  )
FROM meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_race', 'wcc_past_dwarf_q1', 'wcc_race_dwarf';
-- <<< END sql/004_past_dwarf_q1.sql

-- >>> BEGIN sql/005_past_elf_q1.sql

\echo '005_past_elf_q1.sql'
-- –£–∑–µ–ª: –†–æ–¥–∏–Ω–∞ —ç–ª—å—Ñ–∞

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_elf_q1' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru',
'–í—ã –≤—ã–±—Ä–∞–ª–∏ —Ä–∞—Å—É —ç–ª—å—Ñ–∞. –ü—Ä–∞–≤–∏–ª–∞ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ —Ä–æ–¥–∏–Ω–∞ —ç–ª—å—Ñ–∞ - —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞ (+1 –∫ –≠—Ç–∏–∫–µ—Ç—É). –ù–æ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –≤—ã '
  || '–º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –≤—ã–±–æ—Ä —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ', 'body'),
                ('en',
'You''ve chosen the elf race. The rules state that the elf homeland is always Dol Blathanna (+1 to Etiquette). But if you '
  || 'wish, you can make your own choice.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
       , jsonb_build_object(
           'dice', 'd0',
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.identity')::text,
             ck_id('witcher_cc.hierarchy.homeland_nonhuman')::text
           )
         )
     FROM meta;
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_elf_q1' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
    ('ru', 1, '–Ø —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ —Ä–æ–¥–∏–Ω—É –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é - –î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞. (+1 –∫ –≠—Ç–∏–∫–µ—Ç—É)'),
    ('en', 1, 'I agree to the default homeland - Dol Blathanna. (+1 to Etiquette)'),
    ('ru', 2, '–Ø —Ö–æ—á—É –≤—ã–±—Ä–∞—Ç—å —á—Ç–æ-—Ç–æ –∏–∑ –∑–µ–º–µ–ª—å —Å—Ç–∞—Ä—à–∏—Ö –Ω–∞—Ä–æ–¥–æ–≤.'),
    ('en', 2, 'I want to choose something from the lands of the elder peoples.'),
    ('ru', 3, '–Ø —Ö–æ—á—É –≤—ã–±—Ä–∞—Ç—å —á—Ç–æ-—Ç–æ –∏–∑ –ª—é–¥—Å–∫–∏—Ö –ø–æ—Å–µ–ª–µ–Ω–∏–π.'),
    ('en', 3, 'I want to choose something from human settlements.')
  ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_elf_q1_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_race', 'wcc_past_elf_q1', 'wcc_race_elf';
-- <<< END sql/005_past_elf_q1.sql

-- >>> BEGIN sql/006_past_homeland_human.sql

\echo '006_past_homeland_human.sql'
-- –£–∑–µ–ª: –†–æ–¥–∏–Ω–∞ - –ª—é–¥—Å–∫–∏–µ –ø–æ—Å–µ–ª–µ–Ω–∏—è

-- –í–æ–ø—Ä–æ—Å

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_homeland_human' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–í—ã–±–µ—Ä–µ—Ç–µ —Ä–æ–¥–∏–Ω—É –≤–∞—à–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.'),
                            ('en', 'Choose your character''s homeland.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–†–µ–≥–∏–æ–Ω'),
                                     ('ru', 3, '–ú–µ—Å—Ç–æ'),
                                     ('ru', 4, '–≠—Ñ—Ñ–µ–∫—Ç'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Region'),
                                     ('en', 3, 'Place'),
                                     ('en', 4, 'Effect'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_homeland_human' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.identity')::text,
             ck_id('witcher_cc.hierarchy.homeland')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_homeland_human' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || region || '</td>' ||
                   '<td>' || place_name || '</td>' ||
                   '<td>' || effect || '</td>') AS text,
                  num,
                  probability,
                  lang
           FROM (VALUES
                          -- RU: Northern Kingdoms (10* –ø–æ 0.05)
                          ('ru', 101, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–†–µ–¥–∞–Ω–∏—è','+1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é',               0.05::numeric),
                          ('ru', 102, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–ö–∞—ç–¥–≤–µ–Ω','+1 –∫ –°—Ç–æ–π–∫–æ—Å—Ç–∏',                  0.05),
                          ('ru', 103, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–¢–µ–º–µ—Ä–∏—è','+1 –∫ –•–∞—Ä–∏–∑–º–µ',                    0.05),
                          ('ru', 104, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–ê—ç–¥–∏—Ä–Ω','+1 –∫ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é',                0.05),
                          ('ru', 105, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–õ–∏—Ä–∏—è –∏ –†–∏–≤–∏—è','+1 –∫ –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—é —É–±–µ–∂–¥–µ–Ω–∏—é', 0.05),
                          ('ru', 106, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–ö–æ–≤–∏—Ä –∏ –ü–æ–≤–∏—Å—Å','+1 –∫ –¢–æ—Ä–≥–æ–≤–ª–µ',            0.05),
                          ('ru', 107, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–°–∫–µ–ª–ª–∏–≥–µ','+1 –∫ –•—Ä–∞–±—Ä–æ—Å—Ç–∏',                  0.05),
                          ('ru', 108, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–¶–∏–¥–∞—Ä–∏—Å','+1 –∫ –ú–æ—Ä–µ—Ö–æ–¥—Å—Ç–≤—É',                 0.05),
                          ('ru', 109, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–í–µ—Ä–¥—ç–Ω','+1 –∫ –í—ã–∂–∏–≤–∞–Ω–∏—é –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ',   0.05),
                          ('ru', 110, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞','–¶–∏–Ω—Ç—Ä–∞','+1 –∫ –ü–æ–Ω–∏–º–∞–Ω–∏—é –ª—é–¥–µ–π',             0.05),
                      
                          -- EN: Northern Kingdoms (10* –ø–æ 0.05)
                          ('en', 101, 'Northern Kingdoms','Redania','+1 Education',                      0.05),
                          ('en', 102, 'Northern Kingdoms','Kaedwen','+1 Endurance',                      0.05),
                          ('en', 103, 'Northern Kingdoms','Temeria','+1 Charisma',                       0.05),
                          ('en', 104, 'Northern Kingdoms','Aedirn','+1 Crafting',                        0.05),
                          ('en', 105, 'Northern Kingdoms','Lyria & Rivia','+1 Resist Coercion',          0.05),
                          ('en', 106, 'Northern Kingdoms','Kovir & Poviss','+1 Business',                0.05),
                          ('en', 107, 'Northern Kingdoms','Skellige','+1 Courage',                        0.05),
                          ('en', 108, 'Northern Kingdoms','Cidaris','+1 Sailing',                         0.05),
                          ('en', 109, 'Northern Kingdoms','Verden','+1 Wilderness Survival',             0.05),
                          ('en', 110, 'Northern Kingdoms','Cintra','+1 Human Perception',                0.05),
                      
                          -- RU/EN: Nilfgaard core (–ø–æ 0.15)
                          ('ru', 201, '–ò–º–ø–µ—Ä–∏—è –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥','–°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','+1 –∫ –û–±–º–∞–Ω—É',          0.15),
                          ('en', 201, 'Nilfgaardian Empire','The Heart of Nilfgaard','+1 Deceit',       0.15),
                      
                          -- RU: Nilfgaard vassals (10* –ø–æ 0.035)
                          ('ru', 301, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–í–∏–∫–æ–≤–∞—Ä–æ','+1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é',                 0.035),
                          ('ru', 302, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–ê–∏–≥—Ä–µ–Ω','+1 –∫ –í—ã–∂–∏–≤–∞–Ω–∏—é –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ',     0.035),
                          ('ru', 303, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–ù–∞–∑–∞–∏—Ä','+1 –∫ –ë–æ—Ä—å–±–µ',                         0.035),
                          ('ru', 304, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–ú–µ—Ç–∏–∏–Ω–∞','+1 –∫ –í–µ—Ä—Ö–æ–≤–æ–π –µ–∑–¥–µ',                 0.035),
                          ('ru', 305, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–ú–∞–≥ –¢—É—Ä–≥–∞','+1 –∫ –°—Ç–æ–π–∫–æ—Å—Ç–∏',                   0.035),
                          ('ru', 306, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–ì–µ—Å–æ','+1 –∫ –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏',                       0.035),
                          ('ru', 307, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–≠–±–±–∏–Ω–≥','+1 –∫ –î–µ–¥—É–∫—Ü–∏–∏',                       0.035),
                          ('ru', 308, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–ú–µ—Ö—Ç','+1 –∫ –•–∞—Ä–∏–∑–º–µ',                          0.035),
                          ('ru', 309, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–ì–µ–º–º–µ—Ä–∞','+1 –∫ –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—é',                   0.035),
                          ('ru', 310, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞','–≠—Ç–æ–ª–∏—è','+1 –∫ –•—Ä–∞–±—Ä–æ—Å—Ç–∏',                      0.035),
                      
                          -- EN: Nilfgaard vassals (10* –ø–æ 0.035)
                          ('en', 301, 'Nilfgaardian Vassal State','Vicovaro','+1 Education',             0.035),
                          ('en', 302, 'Nilfgaardian Vassal State','Angren','+1 Wilderness Survival',     0.035),
                          ('en', 303, 'Nilfgaardian Vassal State','Nazair','+1 Brawling',                0.035),
                          ('en', 304, 'Nilfgaardian Vassal State','Mettina','+1 Ride',                   0.035),
                          ('en', 305, 'Nilfgaardian Vassal State','Mag Turga','+1 Endurance',            0.035),
                          ('en', 306, 'Nilfgaardian Vassal State','Gheso','+1 Stealth',                  0.035),
                          ('en', 307, 'Nilfgaardian Vassal State','Ebbing','+1 Deduction',               0.035),
                          ('en', 308, 'Nilfgaardian Vassal State','Maecht','+1 Charisma',                0.035),
                          ('en', 309, 'Nilfgaardian Vassal State','Gemmeria','+1 Intimidation',          0.035),
                          ('en', 310, 'Nilfgaardian Vassal State','Etolia','+1 Courage',                 0.035)
           ) AS v(lang, num, region, place_name, effect, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_homeland_human_o' || to_char(vals.num, 'FM0000') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_homeland_human' AS qu_id
                , 'character' AS entity)
-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ä–æ–¥–∏–Ω
, ins_homeland_101 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0101' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–†–µ–¥–∞–Ω–∏—è'), ('en', 'Redania')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_102 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0102' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ö–∞—ç–¥–≤–µ–Ω'), ('en', 'Kaedwen')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_103 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0103' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–¢–µ–º–µ—Ä–∏—è'), ('en', 'Temeria')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_104 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0104' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ê—ç–¥–∏—Ä–Ω'), ('en', 'Aedirn')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_105 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0105' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–õ–∏—Ä–∏—è –∏ –†–∏–≤–∏—è'), ('en', 'Lyria & Rivia')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_106 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0106' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ö–æ–≤–∏—Ä –∏ –ü–æ–≤–∏—Å—Å'), ('en', 'Kovir & Poviss')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_107 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0107' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–°–∫–µ–ª–ª–∏–≥–µ'), ('en', 'Skellige')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_108 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0108' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–¶–∏–¥–∞—Ä–∏—Å'), ('en', 'Cidaris')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_109 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0109' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–í–µ—Ä–¥—ç–Ω'), ('en', 'Verden')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_110 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0110' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–¶–∏–Ω—Ç—Ä–∞'), ('en', 'Cintra')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_201 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0201' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞'), ('en', 'The Heart of Nilfgaard')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_301 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0301' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–í–∏–∫–æ–≤–∞—Ä–æ'), ('en', 'Vicovaro')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_302 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0302' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ê–∏–≥—Ä–µ–Ω'), ('en', 'Angren')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_303 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0303' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ù–∞–∑–∞–∏—Ä'), ('en', 'Nazair')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_304 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0304' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ú–µ—Ç–∏–∏–Ω–∞'), ('en', 'Mettina')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_305 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0305' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ú–∞–≥ –¢—É—Ä–≥–∞'), ('en', 'Mag Turga')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_306 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0306' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ì–µ—Å–æ'), ('en', 'Gheso')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_307 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0307' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–≠–±–±–∏–Ω–≥'), ('en', 'Ebbing')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_308 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0308' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ú–µ—Ö—Ç'), ('en', 'Maecht')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_309 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0309' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ì–µ–º–º–µ—Ä–∞'), ('en', 'Gemmeria')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_310 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0310' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–≠—Ç–æ–ª–∏—è'), ('en', 'Etolia')) AS v(lang, text)
      CROSS JOIN meta
  )
-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ä–æ–¥–Ω–æ–≥–æ —è–∑—ã–∫–∞: –í—Å–µ–æ–±—â–∏–π (Northern) –¥–ª—è 101-106, 108-110
, ins_lang_northern AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language') AS id
         , meta.entity, 'home_language', v.lang, v.text
      FROM (VALUES ('ru', '–í—Å–µ–æ–±—â–∏–π'), ('en', 'Northern')) AS v(lang, text)
      CROSS JOIN meta
  )
-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ä–æ–¥–Ω–æ–≥–æ —è–∑—ã–∫–∞: –°—Ç–∞—Ä—à–∞—è —Ä–µ—á—å (Elder Speech) –¥–ª—è 107, 201, 301-310
, ins_lang_elder_speech AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language') AS id
         , meta.entity, 'home_language', v.lang, v.text
      FROM (VALUES ('ru', '–°—Ç–∞—Ä—à–∞—è —Ä–µ—á—å'), ('en', 'Elder Speech')) AS v(lang, text)
      CROSS JOIN meta
  )
INSERT INTO effects (scope, an_an_id, body)
-- 101: –†–µ–¥–∞–Ω–∏—è - +1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é (Education)
SELECT 'character', 'wcc_past_homeland_human_o0101',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.education.bonus'),
      1
    )
  )
FROM meta UNION ALL
-- 101: –†–æ–¥–∏–Ω–∞ - –†–µ–¥–∞–Ω–∏—è
SELECT 'character', 'wcc_past_homeland_human_o0101',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.homeland'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0101' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
    )
  )
FROM meta UNION ALL
-- 101: –†–æ–¥–Ω–æ–π —è–∑—ã–∫ - –í—Å–µ–æ–±—â–∏–π
SELECT 'character', 'wcc_past_homeland_human_o0101',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.home_language'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
    )
  )
FROM meta UNION ALL
-- 101: +8 –∫ –í—Å–µ–æ–±—â–µ–º—É —è–∑—ã–∫—É (language_northern)
SELECT 'character', 'wcc_past_homeland_human_o0101',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.language_northern.bonus'),
      8
    )
  )
FROM meta UNION ALL
-- 102: –ö–∞—ç–¥–≤–µ–Ω - +1 –∫ –°—Ç–æ–π–∫–æ—Å—Ç–∏ (Endurance)
SELECT 'character', 'wcc_past_homeland_human_o0102',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.endurance.bonus'),
      1
    )
  )
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0102',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0102' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0102',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0102',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_northern.bonus'),
    8
  ))
FROM meta UNION ALL
-- 103: –¢–µ–º–µ—Ä–∏—è - +1 –∫ –•–∞—Ä–∏–∑–º–µ (Charisma)
SELECT 'character', 'wcc_past_homeland_human_o0103',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.charisma.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0103',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0103' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0103',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0103',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_northern.bonus'), 8
  ))
FROM meta UNION ALL
-- 104: –ê—ç–¥–∏—Ä–Ω - +1 –∫ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é (Crafting)
SELECT 'character', 'wcc_past_homeland_human_o0104',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.crafting.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0104',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0104' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0104',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0104',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_northern.bonus'), 8
  ))
FROM meta UNION ALL
-- 105: –õ–∏—Ä–∏—è –∏ –†–∏–≤–∏—è - +1 –∫ –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—é —É–±–µ–∂–¥–µ–Ω–∏—é (Resist Coercion)
SELECT 'character', 'wcc_past_homeland_human_o0105',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.resist_coercion.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0105',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0105' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0105',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0105',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_northern.bonus'), 8
  ))
FROM meta UNION ALL
-- 106: –ö–æ–≤–∏—Ä –∏ –ü–æ–≤–∏—Å—Å - +1 –∫ –¢–æ—Ä–≥–æ–≤–ª–µ (Business)
SELECT 'character', 'wcc_past_homeland_human_o0106',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.business.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0106',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0106' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0106',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0106',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_northern.bonus'), 8
  ))
FROM meta UNION ALL
-- 107: –°–∫–µ–ª–ª–∏–≥–µ - +1 –∫ –•—Ä–∞–±—Ä–æ—Å—Ç–∏ (Courage)
SELECT 'character', 'wcc_past_homeland_human_o0107',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.courage.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0107',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0107' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0107',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0107',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 108: –¶–∏–¥–∞—Ä–∏—Å - +1 –∫ –ú–æ—Ä–µ—Ö–æ–¥—Å—Ç–≤—É (Sailing)
SELECT 'character', 'wcc_past_homeland_human_o0108',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.sailing.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0108',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0108' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0108',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0108',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_northern.bonus'), 8
  ))
FROM meta UNION ALL
-- 109: –í–µ—Ä–¥—ç–Ω - +1 –∫ –í—ã–∂–∏–≤–∞–Ω–∏—é –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ (Wilderness Survival)
SELECT 'character', 'wcc_past_homeland_human_o0109',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.wilderness_survival.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0109',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0109' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0109',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0109',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_northern.bonus'), 8
  ))
FROM meta UNION ALL
-- 110: –¶–∏–Ω—Ç—Ä–∞ - +1 –∫ –ü–æ–Ω–∏–º–∞–Ω–∏—é –ª—é–¥–µ–π (Human Perception)
SELECT 'character', 'wcc_past_homeland_human_o0110',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.human_perception.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0110',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0110' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0110',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'northern' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0110',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_northern.bonus'), 8
  ))
FROM meta UNION ALL
-- 201: –°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - +1 –∫ –û–±–º–∞–Ω—É (Deceit)
SELECT 'character', 'wcc_past_homeland_human_o0201',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.deceit.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0201',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0201' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0201',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0201',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 301: –í–∏–∫–æ–≤–∞—Ä–æ - +1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é (Education)
SELECT 'character', 'wcc_past_homeland_human_o0301',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.education.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0301',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0301' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0301',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0301',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 302: –ê–∏–≥—Ä–µ–Ω - +1 –∫ –í—ã–∂–∏–≤–∞–Ω–∏—é –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ (Wilderness Survival)
SELECT 'character', 'wcc_past_homeland_human_o0302',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.wilderness_survival.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0302',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0302' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0302',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0302',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 303: –ù–∞–∑–∞–∏—Ä - +1 –∫ –ë–æ—Ä—å–±–µ (Brawling)
SELECT 'character', 'wcc_past_homeland_human_o0303',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.brawling.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0303',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0303' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0303',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0303',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 304: –ú–µ—Ç–∏–∏–Ω–∞ - +1 –∫ –í–µ—Ä—Ö–æ–≤–æ–π –µ–∑–¥–µ (Riding)
SELECT 'character', 'wcc_past_homeland_human_o0304',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.riding.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0304',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0304' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0304',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0304',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 305: –ú–∞–≥ –¢—É—Ä–≥–∞ - +1 –∫ –°—Ç–æ–π–∫–æ—Å—Ç–∏ (Endurance)
SELECT 'character', 'wcc_past_homeland_human_o0305',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.endurance.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0305',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0305' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0305',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0305',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 306: –ì–µ—Å–æ - +1 –∫ –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏ (Stealth)
SELECT 'character', 'wcc_past_homeland_human_o0306',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.stealth.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0306',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0306' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0306',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0306',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 307: –≠–±–±–∏–Ω–≥ - +1 –∫ –î–µ–¥—É–∫—Ü–∏–∏ (Deduction)
SELECT 'character', 'wcc_past_homeland_human_o0307',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.deduction.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0307',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0307' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0307',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0307',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 308: –ú–µ—Ö—Ç - +1 –∫ –•–∞—Ä–∏–∑–º–µ (Charisma)
SELECT 'character', 'wcc_past_homeland_human_o0308',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.charisma.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0308',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0308' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0308',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0308',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 309: –ì–µ–º–º–µ—Ä–∞ - +1 –∫ –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—é (Intimidation)
SELECT 'character', 'wcc_past_homeland_human_o0309',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.intimidation.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0309',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0309' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0309',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0309',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 310: –≠—Ç–æ–ª–∏—è - +1 –∫ –•—Ä–∞–±—Ä–æ—Å—Ç–∏ (Courage)
SELECT 'character', 'wcc_past_homeland_human_o0310',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.courage.bonus'), 1
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0310',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o0310' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0310',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
SELECT 'character', 'wcc_past_homeland_human_o0310',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_race', 'wcc_past_homeland_human', 'wcc_race_human' UNION ALL
  SELECT 'wcc_past_witcher_q1', 'wcc_past_homeland_human', 'wcc_past_witcher_q1_o02' UNION ALL
  SELECT 'wcc_past_dwarf_q1', 'wcc_past_homeland_human', 'wcc_past_dwarf_q1_o03' UNION ALL
  SELECT 'wcc_past_elf_q1', 'wcc_past_homeland_human', 'wcc_past_elf_q1_o03';
-- <<< END sql/006_past_homeland_human.sql

-- >>> BEGIN sql/007_past_homeland_elders.sql

\echo '007_past_homeland_elders.sql'
-- –£–∑–µ–ª: –†–æ–¥–∏–Ω–∞ - –∑–µ–º–ª–∏ —Å—Ç–∞—Ä—à–∏—Ö –Ω–∞—Ä–æ–¥–æ–≤

-- –í–æ–ø—Ä–æ—Å

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_homeland_elders' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–í—ã–±–µ—Ä–µ—Ç–µ —Ä–æ–¥–∏–Ω—É –≤–∞—à–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.'),
                            ('en', 'Choose your character''s homeland.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 3, '–ú–µ—Å—Ç–æ'),
                                     ('ru', 4, '–≠—Ñ—Ñ–µ–∫—Ç'),
                                     ('en', 1, 'Chance'),
                                     ('en', 3, 'Place'),
                                     ('en', 4, 'Effect'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_homeland_elders' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.identity')::text,
             ck_id('witcher_cc.hierarchy.homeland')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_homeland_elders' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || place_name || '</td>' ||
                   '<td>' || effect || '</td>') AS text,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  -- RU: Northern Kingdoms (10* –ø–æ 0.05)
                  ('ru', 1, '–î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞','+1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é', 0.5::numeric),
                  ('ru', 2, '–ú–∞—Ö–∞–∫–∞–º','+1 –∫ –°—Ç–æ–π–∫–æ—Å—Ç–∏', 0.5),
                  ('en', 1, 'Dol Blathanna','+1 Social Etiquette', 0.5),
                  ('en', 2, 'Mahakam','+1 Crafting', 0.5)
           ) AS v(lang, num, place_name, effect, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_homeland_elders_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_homeland_elders' AS qu_id
                , 'character' AS entity)
-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ä–æ–¥–∏–Ω
, ins_homeland_01 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o01' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞'), ('en', 'Dol Blathanna')) AS v(lang, text)
      CROSS JOIN meta
  )
, ins_homeland_02 AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o02' ||'.'|| meta.entity ||'.'|| 'homeland') AS id
         , meta.entity, 'homeland', v.lang, v.text
      FROM (VALUES ('ru', '–ú–∞—Ö–∞–∫–∞–º'), ('en', 'Mahakam')) AS v(lang, text)
      CROSS JOIN meta
  )
-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ä–æ–¥–Ω–æ–≥–æ —è–∑—ã–∫–∞: –°—Ç–∞—Ä—à–∞—è —Ä–µ—á—å –¥–ª—è –î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞
, ins_lang_elder_speech AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language') AS id
         , meta.entity, 'home_language', v.lang, v.text
      FROM (VALUES ('ru', '–°—Ç–∞—Ä—à–∞—è —Ä–µ—á—å'), ('en', 'Elder Speech')) AS v(lang, text)
      CROSS JOIN meta
  )
-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ä–æ–¥–Ω–æ–≥–æ —è–∑—ã–∫–∞: –î–≤–∞—Ä—Ñ–∏–π—Å–∫–∏–π –¥–ª—è –ú–∞—Ö–∞–∫–∞–º
, ins_lang_dwarvish AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarvish' ||'.'|| meta.entity ||'.'|| 'home_language') AS id
         , meta.entity, 'home_language', v.lang, v.text
      FROM (VALUES ('ru', '–ö—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–∏–π'), ('en', 'Dwarvish')) AS v(lang, text)
      CROSS JOIN meta
  )
INSERT INTO effects (scope, an_an_id, body)
-- 01: –î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞ - +1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é (Education)
SELECT 'character', 'wcc_past_homeland_elders_o01',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.education.bonus'), 1
  ))
FROM meta UNION ALL
-- 01: –†–æ–¥–∏–Ω–∞ - –î–æ–ª—å –ë–ª–∞—Ç–∞–Ω–Ω–∞
SELECT 'character', 'wcc_past_homeland_elders_o01',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o01' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
-- 01: –†–æ–¥–Ω–æ–π —è–∑—ã–∫ - –°—Ç–∞—Ä—à–∞—è —Ä–µ—á—å
SELECT 'character', 'wcc_past_homeland_elders_o01',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'elder_speech' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
-- 01: +8 –∫ –°—Ç–∞—Ä—à–µ–π —Ä–µ—á–∏ (language_elder_speech)
SELECT 'character', 'wcc_past_homeland_elders_o01',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_elder_speech.bonus'), 8
  ))
FROM meta UNION ALL
-- 02: –ú–∞—Ö–∞–∫–∞–º - +1 –∫ –°—Ç–æ–π–∫–æ—Å—Ç–∏ (Endurance)
SELECT 'character', 'wcc_past_homeland_elders_o02',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.endurance.bonus'), 1
  ))
FROM meta UNION ALL
-- 02: –†–æ–¥–∏–Ω–∞ - –ú–∞—Ö–∞–∫–∞–º
SELECT 'character', 'wcc_past_homeland_elders_o02',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.homeland'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'o02' ||'.'|| meta.entity ||'.'|| 'homeland')::text)
  ))
FROM meta UNION ALL
-- 02: –†–æ–¥–Ω–æ–π —è–∑—ã–∫ - –ö—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–∏–π
SELECT 'character', 'wcc_past_homeland_elders_o02',
  jsonb_build_object('set', jsonb_build_array(
    jsonb_build_object('var','characterRaw.lore.home_language'),
    jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'dwarvish' ||'.'|| meta.entity ||'.'|| 'home_language')::text)
  ))
FROM meta UNION ALL
-- 02: +8 –∫ –ö—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–æ–º—É —è–∑—ã–∫—É (language_dwarvish)
SELECT 'character', 'wcc_past_homeland_elders_o02',
  jsonb_build_object('inc', jsonb_build_array(
    jsonb_build_object('var','characterRaw.skills.common.language_dwarvish.bonus'), 8
  ))
FROM meta;
  
-- –°–≤—è–∑–∏  
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_past_dwarf_q1', 'wcc_past_homeland_elders', 'wcc_past_dwarf_q1_o02' UNION ALL
  SELECT 'wcc_past_elf_q1', 'wcc_past_homeland_elders', 'wcc_past_elf_q1_o02';
-- <<< END sql/007_past_homeland_elders.sql

-- >>> BEGIN sql/008_ch_name.sql

\echo '010_ch_name.sql'
-- –£–∑–µ–ª: –ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_ch_name' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?'),
        ('en', 'What is your name?')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'value_textbox'
       , jsonb_build_object(
          'defaultValue', 'Character Name',
          'valueTarget' , 'characterRaw.name',
          'path', jsonb_build_array(
            ck_id('witcher_cc.hierarchy.identity')::text,
            ck_id('witcher_cc.hierarchy.character_name')::text
          ),
          -- randomList: –º–∞—Å—Å–∏–≤ –∏–º–µ–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞—Å—ã
          'randomList', jsonb_build_object(
            'if', jsonb_build_array(
              jsonb_build_object('==', jsonb_build_array(
                jsonb_build_object('var', 'characterRaw.logicFields.race'),
                'Witcher'
              )),
              jsonb_build_array('Olsen', 'Dagread', 'Adalbert', 'John', 'Agnes', 'Aplegatt', 'Carduin'),
              jsonb_build_object(
                'if', jsonb_build_array(
                  jsonb_build_object('==', jsonb_build_array(
                    jsonb_build_object('var', 'characterRaw.logicFields.race'),
                    'Human'
                  )),
                  jsonb_build_array('Olsen', 'Dagread', 'Adalbert', 'John', 'Agnes', 'Aplegatt', 'Carduin'),
                  jsonb_build_object(
                    'if', jsonb_build_array(
                      jsonb_build_object('==', jsonb_build_array(
                        jsonb_build_object('var', 'characterRaw.logicFields.race'),
                        'Dwarf'
                      )),
                      jsonb_build_array('Rodolf', 'Zoltan', 'Yarpen', 'Barclay', 'Brouver', 'Golan', 'Rhundurin'),
                      jsonb_build_object(
                        'if', jsonb_build_array(
                          jsonb_build_object('==', jsonb_build_array(
                            jsonb_build_object('var', 'characterRaw.logicFields.race'),
                            'Elf'
                          )),
                          jsonb_build_array('Yaevinn', 'Iorveth', 'Aelirenn', 'Filavandrel', 'Ge''els', 'Shiadhal', 'Nithral'),
                          jsonb_build_array('Sigurd', 'Aksel', 'Laila', 'Ragnar', 'Brynhild', 'Olaf', 'Hakon')
                        )
                      )
                    )
                  )
                )
              )
            )
          )
         ) AS metadata
  FROM meta;
  
-- –°–≤—è–∑–∏
-- –ù–æ–¥–∞ –¥–æ–ª–∂–Ω–∞ –∏–¥—Ç–∏ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ä–∞—Å—ã, –Ω–æ –ø–µ—Ä–µ–¥ –≤–æ–∑—Ä–∞—Å—Ç–æ–º
-- –î–æ–±–∞–≤–∏–º –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç —Ä–∞—Å—ã –∫ –∏–º–µ–Ω–∏

-- –û—Ç –∏–º–µ–Ω–∏ –∫ –≤–æ–∑—Ä–∞—Å—Ç—É (–¥–ª—è –≤—Å–µ—Ö —Ä–∞—Å)


-- –ü–µ—Ä–µ—Ö–æ–¥—ã —Ç–µ–ø–µ—Ä—å –∏–¥—É—Ç —á–µ—Ä–µ–∑ wcc_ch_name (–∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞)
-- –ò–∑–º–µ–Ω—è–µ–º –ø–µ—Ä–µ—Ö–æ–¥—ã —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ —à–ª–∏ –∫ –∏–º–µ–Ω–∏, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é –∫ –≤–æ–∑—Ä–∞—Å—Ç—É
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_past_elf_q1', 'wcc_ch_name', 'wcc_past_elf_q1_o01' UNION ALL
  SELECT 'wcc_past_dwarf_q1', 'wcc_ch_name', 'wcc_past_dwarf_q1_o01'UNION ALL
  SELECT 'wcc_past_witcher_q1', 'wcc_ch_name', 'wcc_past_witcher_q1_o01';

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_past_homeland_human', 'wcc_ch_name' UNION ALL
  SELECT 'wcc_past_homeland_elders', 'wcc_ch_name';
-- <<< END sql/008_ch_name.sql

-- >>> BEGIN sql/009_ch_age.sql

\echo '009_ch_age.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –û—Å–Ω–æ–≤–Ω–∞—è —á–µ—Ä—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_ch_age' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç? –í–µ–¥—å–º–∞–∫–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç 50 –¥–æ 260 –ª–µ—Ç, –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–∞—Å –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π..'),
        ('en', 'How old are you? Witchers can be anywhere from 50 to 260 years old. For other races, there are no restrictions in the rules.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'value_numeric'
       , jsonb_build_object(
          'type'        , 'int',
          'defaultValue', 18,
          'placeholder' , 'Years',
          'valueTarget' , 'characterRaw.age',
          'counterSet'  , jsonb_build_array(
                            jsonb_build_object('id','lifeEventsCounter','value', 0)
                          ),
          'path', jsonb_build_array(
            ck_id('witcher_cc.hierarchy.identity')::text,
            ck_id('witcher_cc.hierarchy.character_age')::text
          ),
          -- min: 50 –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞, 0 –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–∞—Å
          'min', jsonb_build_object(
            'if', jsonb_build_array(
              jsonb_build_object('==', jsonb_build_array(
                jsonb_build_object('var', 'characterRaw.logicFields.race'),
                'Witcher'
              )),
              50,
              0
            )
          ),
          -- max: 260 –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞, –Ω–µ –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö (null)
          'max', jsonb_build_object(
            'if', jsonb_build_array(
              jsonb_build_object('==', jsonb_build_array(
                jsonb_build_object('var', 'characterRaw.logicFields.race'),
                'Witcher'
              )),
              260,
              null
            )
          ),
          -- min_rand: 50 –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞, 18 –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–∞—Å
          'min_rand', jsonb_build_object(
            'if', jsonb_build_array(
              jsonb_build_object('==', jsonb_build_array(
                jsonb_build_object('var', 'characterRaw.logicFields.race'),
                'Witcher'
              )),
              50,
              18
            )
          ),
          -- max_rand: 260 –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞, 60 –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞, 150 –¥–ª—è –∫—Ä–∞—Å–Ω–æ–ª—é–¥–∞, 300 –¥–ª—è —ç–ª—å—Ñ–∞
          'max_rand', jsonb_build_object(
            'if', jsonb_build_array(
              jsonb_build_object('==', jsonb_build_array(
                jsonb_build_object('var', 'characterRaw.logicFields.race'),
                'Witcher'
              )),
              260,
              jsonb_build_object(
                'if', jsonb_build_array(
                  jsonb_build_object('==', jsonb_build_array(
                    jsonb_build_object('var', 'characterRaw.logicFields.race'),
                    'Human'
                  )),
                  60,
                  jsonb_build_object(
                    'if', jsonb_build_array(
                      jsonb_build_object('==', jsonb_build_array(
                        jsonb_build_object('var', 'characterRaw.logicFields.race'),
                        'Dwarf'
                      )),
                      150,
                      jsonb_build_object(
                        'if', jsonb_build_array(
                          jsonb_build_object('==', jsonb_build_array(
                            jsonb_build_object('var', 'characterRaw.logicFields.race'),
                            'Elf'
                          )),
                          300,
                          null
                        )
                      )
                    )
                  )
                )
              )
            )
          )
         ) AS metadata
  FROM meta;
  
-- –°–≤—è–∑–∏

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_ch_name', 'wcc_ch_age';

-- –ü—Ä–∞–≤–∏–ª–∞
INSERT INTO rules(name, body)
VALUES ('lifeEventsCounter_is_valid',
'{
  "<=":
    [
      {
        "+":
          [
            {
              "var":"counters.lifeEventsCounter"
            },
            10
          ]
      },
      {
        "var": "characterRaw.age"
      }
    ]
}'::jsonb);
-- <<< END sql/009_ch_age.sql

-- >>> BEGIN sql/010_past_family.sql

\echo '010_past_family.sql'
-- –£–∑–µ–ª: –°–µ–º—å—è

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_family' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–ù—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—Å—ë –ª–∏ –≤ –ø–æ—Ä—è–¥–∫–µ —Å —Å–µ–º—å–µ–π.', 'body'),
                ('en', 'Determine whether your family is all right.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
       , jsonb_build_object(
           'dice', 'd0',
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.family_threat')::text
           )
         )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_family' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES ('ru', 1, '–° —Å–µ–º—å–µ–π –Ω–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ... –ê —á—Ç–æ –Ω–∞—Å—á–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–æ–¥–∏—Ç–µ–ª–µ–π?'),
               ('ru', 2, '–° —Å–µ–º—å–µ–π —á—Ç–æ-—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å.'),
               ('en', 1, 'Nothing special has happened to your family... But what about your parents?'),
               ('en', 2, 'Something happened to your family')
         ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_family_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
-- INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
--   SELECT 'wcc_past_elf_q1', 'wcc_past_family', 'wcc_past_elf_q1_o01' UNION ALL
--   SELECT 'wcc_past_dwarf_q1', 'wcc_past_family', 'wcc_past_dwarf_q1_o01';

-- INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
--   SELECT 'wcc_past_homeland_human', 'wcc_past_family' UNION ALL
--   SELECT 'wcc_past_homeland_elders', 'wcc_past_family';
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_ch_age', 'wcc_past_family';
-- <<< END sql/010_past_family.sql

-- >>> BEGIN sql/011_past_family_fate.sql

\echo '011_past_family_fate.sql'
-- –£–∑–µ–ª: –°—É–¥—å–±–∞ —Å–µ–º—å–∏

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_family_fate' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–í—Ä–µ–º—è –ø–æ–Ω—è—Ç—å —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å –≤–∞—à–µ–π —Å–µ–º—å–µ–π.', 'body'),
                ('en', 'Time to determine what happened to your family.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
       , jsonb_build_object(
           'dice', 'd0',
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.family_fate')::text
           )
         )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_family_fate' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
    SELECT 'ru' lang, raw_data_ru.*
      FROM (VALUES
              (1, '–ò–∑-–∑–∞ –≤–æ–π–Ω –≤–∞—à–∞ —Å–µ–º—å—è –±—ã–ª–∞ –≤—ã–Ω—É–∂–¥–µ–Ω–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç—å—Å—è, –∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤.', 1),
              (1, '–í–∞—à–∞ —Å–µ–º—å—è –æ–±—Ä–∞—â–µ–Ω–∞ –≤ —Ä–∞–±—Å—Ç–≤–æ –∑–∞ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤ –ò–º–ø–µ—Ä–∏–∏ –∏–ª–∏ –ø–æ –ª–æ–∂–Ω–æ–º—É –æ–±–≤–∏–Ω–µ–Ω–∏—é. –¢–æ–ª—å–∫–æ –≤–∞–º —É–¥–∞–ª–æ—Å—å —Å–±–µ–∂–∞—Ç—å.', 2),
              (1, '–°—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –≤–∞—à–∞ —Å–µ–º—å—è —Å–∏–º–ø–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ª—é–¥—è–º, –ø–æ—ç—Ç–æ–º—É –≤–∞—à–∏—Ö —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –Ω–µ –æ—á–µ–Ω—å –ª—é–±—è—Ç –Ω–∞ —Ä–æ–¥–∏–Ω–µ.', 3),
              
              (2, '–í–∞—à—É —Å–µ–º—å—é –ø–æ—Å–∞–¥–∏–ª–∏ –≤ —Ç—é—Ä—å–º—É –∑–∞ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏–ª–∏ –ø–æ –ª–æ–∂–Ω–æ–º—É –æ–±–≤–∏–Ω–µ–Ω–∏—é. –í—ã –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π, –∫–æ–º—É —É–¥–∞–ª–æ—Å—å —Å–±–µ–∂–∞—Ç—å. –ò —Ç–µ–ø–µ—Ä—å –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–æ–¥–Ω—ã—Ö‚Ä¶ –∏–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ?', 1),
              (2, '–í–∞—à—É —Å–µ–º—å—é –∏–∑–≥–Ω–∞–ª–∏ –≤ –ø—É—Å—Ç—ã–Ω—é –ö–æ—Ä–∞—Ç, –∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —é–Ω–æ—Å—Ç–∏ –≤—ã –ø—Ä–æ–≤–µ–ª–∏ –≤ –ø–æ–ø—ã—Ç–∫–∞—Ö –≤—ã–∂–∏—Ç—å –≤ —ç—Ç–∏—Ö —Å—É—Ä–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.', 2),
              (2, '–í–∞—à–∏ —Ä–æ–¥–Ω—ã–µ —Å—Ç–∞–ª–∏ –∏–∑–≥–æ—è–º–∏ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –Ω–µ —Å–æ–≥–ª–∞—Å–Ω—ã —Å –º–Ω–µ–Ω–∏–µ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞, –∏ —Ç–µ–ø–µ—Ä—å —Å –≤–∞–º–∏ –∏–ª–∏ —Å–æ –≤—Å–µ–π –≤–∞—à–µ–π —Å–µ–º—å—ë–π –Ω–µ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—é—Ç.', 3),
              
              (3, '–î–æ–º –≤–∞—à–µ–π —Å–µ–º—å–∏ –ø—Ä–æ–∫–ª—è—Ç. –õ–∏–±–æ –Ω–∞ –ø–æ–ª—è—Ö –Ω–µ—Ç —É—Ä–æ–∂–∞—è, –ª–∏–±–æ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º –±—Ä–æ–¥—è—Ç –¥—É—Ö–∏. –û—Å—Ç–∞–≤–∞—Ç—å—Å—è —Ç–∞–º —Å–ª–∏—à–∫–æ–º –æ–ø–∞—Å–Ω–æ.', 1),
              (3, '–í–∞—à—É —Å–µ–º—å—é —É–±–∏–ª –º—è—Ç–µ–∂–Ω—ã–π –º–∞–≥, –∫–æ—Ç–æ—Ä—ã–π —Ç–æ –ª–∏ –∑–∞—Ç–∞–∏–ª –∑–ª–æ –Ω–∞ –≤–∞—à—É —Å–µ–º—å—é, —Ç–æ –ª–∏ –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç–µ–ª –∫—Ä–æ–≤–∏. –¢–∞–∫ –∏–ª–∏ –∏–Ω–∞—á–µ, –≤—ã –æ–¥–∏–Ω–æ–∫–∏.', 2),
              (3, '–í–∞—à–∞ —Å–µ–º—å—è –ø–æ–≥–∏–±–ª–∞ –≤–æ –≤—Ä–µ–º—è –≤–æ–π–Ω—ã —Å –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–æ–º. –í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω–∏ —Å—Ä–∞–∂–∞–ª–∏—Å—å –Ω–∞ –≤–æ–π–Ω–µ, –∞ –º–æ–∂–µ—Ç, –ø—Ä–æ—Å—Ç–æ –±—ã–ª–∏ –µ—ë –∂–µ—Ä—Ç–≤–∞–º–∏.', 3),
              
              (4, '–ò–∑-–∑–∞ –≤–æ–π–Ω –≤–∞—à–∞ —Å–µ–º—å—è –æ–∫–∞–∑–∞–ª–∞—Å—å –≤ –ø–ª–∞—á–µ–≤–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏. –ß—Ç–æ–±—ã –≤—ã–∂–∏—Ç—å, –∏–º –ø—Ä–∏—à–ª–æ—Å—å –≤—Å—Ç–∞—Ç—å –Ω–∞ –ø—É—Ç—å –ø—Ä–µ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.', 1),
              (4, '–í—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –≤–∞—à–∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏. –û–¥–Ω–∞–∂–¥—ã –æ–Ω–∏ –ø—Ä–æ—Å—Ç–æ –≤–∑—è–ª–∏ –∏ —É—à–ª–∏.', 2),
              (4, '–í–∞—à–∞ —Å–µ–º—å—è –Ω–µ –ø–µ—Ä–≤—ã–π –≤–µ–∫ –≤ —Å—Å–æ—Ä–µ —Å –¥—Ä—É–≥–æ–π —Å–µ–º—å—ë–π. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –¥–∞–∂–µ –Ω–µ –ø–æ–º–Ω–∏—Ç–µ, —Å —á–µ–≥–æ –Ω–∞—á–∞–ª–∞—Å—å —ç—Ç–∞ –≤—Ä–∞–∂–¥–∞.', 3),
              
              (5, '–í–∞—à–∞ —Å–µ–º—å—è –≤ –¥–æ–ª–≥–∞—Ö –∏–∑-–∑–∞ –∞–∑–∞—Ä—Ç–Ω—ã—Ö –∏–≥—Ä –∏–ª–∏ –∑–∞–π–º–æ–≤. –í–∞–º –æ—á–µ–Ω—å –Ω—É–∂–Ω—ã –¥–µ–Ω—å–≥–∏.', 1),
              (5, '–í–∞—à—É —Å–µ–º—å—é –∫–∞–∑–Ω–∏–ª–∏ –∑–∞ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—É—é –∏–∑–º–µ–Ω—É. –¢–æ–ª—å–∫–æ –≤–∞–º —É–¥–∞–ª–æ—Å—å –∏–∑–±–µ–∂–∞—Ç—å —Å—Ç–æ–ª—å –º—Ä–∞—á–Ω–æ–π —É—á–∞—Å—Ç–∏.', 2),
              (5, '–ü–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –≤–∞—à—É —Å–µ–º—å—é –ª–∏—à–∏–ª–∏ –≤—Å–µ—Ö —Ç–∏—Ç—É–ª–æ–≤. –í–∞—Å –≤—ã—Å–µ–ª–∏–ª–∏ –∏–∑ –¥–æ–º–∞, –∏ –≤—ã –µ–ª–µ —Å–≤–æ–¥–∏–ª–∏ –∫–æ–Ω—Ü—ã —Å –∫–æ–Ω—Ü–∞–º–∏.', 3),
              
              (6, '–í–∞—à–∞ —Å–µ–º—å—è –≤ —Å—Å–æ—Ä–µ —Å –¥—Ä—É–≥–æ–π —Å–µ–º—å—ë–π. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –¥–∞–∂–µ –Ω–µ –ø–æ–º–Ω–∏—Ç–µ, —Å —á–µ–≥–æ –≤—Å—ë –Ω–∞—á–∞–ª–æ—Å—å.', 1),
              (6, '–ü–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –≤–∞—à—É —Å–µ–º—å—é –ª–∏—à–∏–ª–∏ –≤—Å–µ—Ö —Ç–∏—Ç—É–ª–æ–≤. –í–∞—Å –≤—ã—Å–µ–ª–∏–ª–∏ –∏–∑ –¥–æ–º–∞, –∏ –≤–∞–º –ø—Ä–∏—à–ª–æ—Å—å –≤—ã–∂–∏–≤–∞—Ç—å —Å—Ä–µ–¥–∏ –ø—Ä–æ—Å—Ç–æ–ª—é–¥–∏–Ω–æ–≤.', 2),
              (6, '–ö–æ–≥–¥–∞ –≤—ã –±—ã–ª–∏ —Å–æ–≤—Å–µ–º —é–Ω—ã, –≤–∞—à–∞ —Å–µ–º—å—è —Å–æ–≤–µ—Ä—à–∞–ª–∞ –Ω–∞–±–µ–≥–∏ –Ω–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ –ø–æ—Å–µ–ª–µ–Ω–∏—è, —á—Ç–æ–±—ã –¥–æ–±—ã—Ç—å –µ–¥—É, –∞, –≤–æ–∑–º–æ–∂–Ω–æ, –æ—Ç–æ–º—Å—Ç–∏—Ç—å –ª—é–¥—è–º.', 3),
              
              (7, '–ü–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –≤–∞—à—É —Å–µ–º—å—é –Ω–µ–Ω–∞–≤–∏–¥—è—Ç –≤ —Ä–æ–¥–Ω–æ–º –≥–æ—Ä–æ–¥–µ, –∏ –Ω–∏–∫—Ç–æ –Ω–µ —Ö–æ—á–µ—Ç –∏–º–µ—Ç—å –¥–µ–ª–∞ —Å –≤–∞—à–∏–º–∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º–∏.', 1),
              (7, '–í–∞—à —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫-–º–∞–≥ –∑–∞–ø—è—Ç–Ω–∞–ª –∏–º—è —Å–µ–º—å–∏, –≤—ã—Å—Ç–∞–≤–ª—è—è –Ω–∞–ø–æ–∫–∞–∑ —Å–≤–æ–π –º–∞–≥–∏—á–µ—Å–∫–∏–π –¥–∞—Ä, —Å–ª–æ–≤–Ω–æ –∫–∞–∫–æ–π-—Ç–æ —Å–µ–≤–µ—Ä—è–Ω–∏–Ω.', 2),
              (7, '–í –¥–æ–º–µ –≤–∞—à–µ–π —Å–µ–º—å–∏ –ø–æ—Å–µ–ª–∏–ª–æ—Å—å –ø—Ä–∏–≤–∏–¥–µ–Ω–∏–µ. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º, —á—Ç–æ –≤ —ç—Ç–æ–º –¥–æ–º–µ –º–Ω–æ–≥–∏–µ –ø–æ–≥–∏–±–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤–æ–π–Ω—ã –ø—Ä–æ—Ç–∏–≤ –ª—é–¥–µ–π.', 3),
              
              (8, '–û–¥–Ω–∞–∂–¥—ã –≤–∞—à—É —Å–µ–º—å—é –¥–æ—á–∏—Å—Ç–∞ –æ–≥—Ä–∞–±–∏–ª–∞ –±–∞–Ω–¥–∞ —Ä–∞–∑–±–æ–π–Ω–∏–∫–æ–≤. –í—Å–µ—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–Ω—ã—Ö –∑–∞—Ä–µ–∑–∞–ª–∏, –≤—ã –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–∂–∏–≤—à–∏–π.', 1),
              (8, '–í—ã –æ—á–µ—Ä–Ω–∏–ª–∏ —Å–≤–æ—é —Å–µ–º—å—é –ø–µ—Ä–µ–¥ –ò–º–ø–µ—Ä–∏–µ–π. –¢–æ, —á—Ç–æ –≤—ã —Å–¥–µ–ª–∞–ª–∏ (–∏–ª–∏ –Ω–µ —Å–º–æ–≥–ª–∏ —Å–¥–µ–ª–∞—Ç—å), –∑–∞–ø—è—Ç–Ω–∞–ª–æ –≤–∞—à–µ –∏–º—è –∏ –Ω–∞–≤—Ä–µ–¥–∏–ª–æ –≤–∞—à–µ–π —Å–µ–º—å–µ.', 2),
              (8, '–í–∞—à–∞ —Å–µ–º—å—è —Ä–∞–∑–¥–µ–ª–∏–ª–∞—Å—å –∏–∑-–∑–∞ —á–µ–ª–æ–≤–µ–∫–∞, —Å–æ—Å—Ç–æ—è—â–µ–≥–æ –≤ –±—Ä–∞–∫–µ —Å –≤–∞—à–∏–º –±—Ä–∞—Ç–æ–º, —Å–µ—Å—Ç—Ä–æ–π –∏–ª–∏ –¥—Ä—É–≥–∏–º —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–º. –ß–∞—Å—Ç—å —Å–µ–º—å–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞, –∞ –¥—Ä—É–≥–∞—è ‚Äî –Ω–µ–Ω–∞–≤–∏–¥–∏—Ç.', 3),
              
              (9, '–£ –≤–∞—à–µ–π —Å–µ–º—å–∏ –µ—Å—Ç—å –∑–ª–æ–≤–µ—â–∞—è —Ç–∞–π–Ω–∞. –ï—Å–ª–∏ –æ –Ω–µ–π –∫—Ç–æ-—Ç–æ —É–∑–Ω–∞–µ—Ç, –≤–∞–º –∫–æ–Ω–µ—Ü. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–¥—É–º–∞—Ç—å —Ç–∞–π–Ω—É —Å–∞–º–∏ –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–æ –Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –≤–µ–¥—É—â–µ–≥–æ.', 1),
              (9, '–£ –≤–∞—à–µ–π —Å–µ–º—å–∏ –µ—Å—Ç—å –∑–ª–æ–≤–µ—â–∞—è —Ç–∞–π–Ω–∞. –ï—Å–ª–∏ –æ –Ω–µ–π –∫—Ç–æ-—Ç–æ —É–∑–Ω–∞–µ—Ç, –∫–æ–Ω–µ—Ü. –í—ã –¥–æ–ª–∂–Ω—ã –∑–∞—â–∏—â–∞—Ç—å —ç—Ç—É —Ç–∞–π–Ω—É –¥–∞–∂–µ —Ü–µ–Ω–æ–π —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏.', 2),
              (9, '–í–∞—à–∏—Ö —Ä–æ–¥–Ω—ã—Ö —É–±–∏–ª–∏ –ª—é–¥–∏, –ø–æ—Å—á–∏—Ç–∞–≤ –∏—Ö —Å–∫–æ—è''—Ç–∞—ç–ª—è–º–∏. –í–æ–∑–º–æ–∂–Ω–æ, –∏—Ö –ø–æ–ø—Ä–æ—Å—Ç—É –∑–∞—Ä–µ–∑–∞–ª–∏ –∏–ª–∏ –ø–æ–≤–µ—Å–∏–ª–∏ –±–µ–∑ —Å—É–¥–∞ –∏ —Å–ª–µ–¥—Å—Ç–≤–∏—è.', 3),
              
              (10, '–ß–ª–µ–Ω—ã –≤–∞—à–µ–π —Å–µ–º—å–∏ –ø—Ä–µ–∑–∏—Ä–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –í—Å–µ, –∫—Ç–æ –±—ã–ª —Ä—è–¥–æ–º, –ø–æ–∫–∞ –≤—ã —Ä–æ—Å–ª–∏, –Ω–µ –≥–æ–≤–æ—Ä—è—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, –∏ –≤—ã –º–æ–∂–µ—Ç–µ —Å—á–∏—Ç–∞—Ç—å —Å–µ–±—è —Å—á–∞—Å—Ç–ª–∏–≤—á–∏–∫–æ–º, –µ—Å–ª–∏ –±—Ä–∞—Ç –∏–ª–∏ —Å–µ—Å—Ç—Ä–∞ —Å –≤–∞–º–∏ —Ö–æ—Ç—è –±—ã –ø–æ–∑–¥–æ—Ä–æ–≤–∞–µ—Ç—Å—è.', 1),
              (10, '–í–∞—à—É —Å–µ–º—å—é —É–±–∏–ª–∏. –í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω–∏ –≤—Å—Ç–∞–ª–∏ —É –∫–æ–≥–æ-—Ç–æ –Ω–∞ –ø—É—Ç–∏ –∏–ª–∏ –∂–µ —á–µ—Ä–µ–∑ –Ω–∏—Ö –ø—ã—Ç–∞–ª–∏—Å—å –ø–æ–¥–æ–±—Ä–∞—Ç—å—Å—è –∫ –∫–æ–º—É-—Ç–æ –±–æ–ª–µ–µ –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É. –¢–∞–∫ –∏–ª–∏ –∏–Ω–∞—á–µ, –≤–∞—à–∏ —Ä–æ–¥–Ω—ã–µ –º–µ—Ä—Ç–≤—ã.', 2),
              (10, '–û–¥–∏–Ω –∏–∑ –≤–∞—à–∏—Ö –ø—Ä–µ–¥–∫–æ–≤ ‚Äî –∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø—Ä–µ–¥–∞—Ç–µ–ª—å. –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –¥—Ä—É–≥–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–∏ –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –≤–∞—à–µ–π —Å–µ–º—å–µ –ø—Ä–µ–¥–≤–∑—è—Ç–æ, –∏ –∂–∏—Ç—å —Å—Ä–µ–¥–∏ —Å–æ–ø–ª–µ–º–µ–Ω–Ω–∏–∫–æ–≤ –≤–∞–º –Ω–µ–ª–µ–≥–∫–æ.', 3)
              ) AS raw_data_ru(num, text, group_id)
    UNION ALL
    SELECT 'en' lang, raw_data_en.*
      FROM (VALUES
              (1, 'Your family was scattered to the winds by the wars and you have no idea where most of them are.', 1),
              (1, 'Your family was indentured for crimes against the Empire or on trumped-up charges. Only you escaped.', 2),
              (1, 'Your family were marked as human sympathizers and are not particularly loved in their homeland.', 3),
              
              (2, 'Your family was imprisoned for crimes or on trumped-up charges. You were the only one to escape. You may want to free them...or maybe not.', 1),
              (2, 'Your family was exiled to the Korath Desert and you likely spent most of your early life struggling to survive in the deadly wasteland.', 2),
              (2, 'Your family was ostracized for dissenting opinions and now people won''t socialize with you or your family at all.', 3),
              
              (3, 'Your family house was cursed and now either crops won''t grow or specters roam the halls. It became too dangerous for you to stay in this home.', 1),
              (3, 'Your family was killed by a rogue mage who either had a vendetta against your family, or just wanted blood. Either way, you are alone.', 2),
              (3, 'Your family died in the Northern Wars. They may have actually fought in the war, or were casualties of war who just happened to get in the way.', 3),
              
              (4, 'With so many wars your family''s livelihood was destroyed. Your family turned to crime to survive.', 1),
              (4, 'Your family disappeared and you have no idea where they went. One day they just up and left.', 2),
              (4, 'Your family has been caught in a feud for centuries. You may not remember why this feud started, but it is dire.', 3),
              
              (5, 'Your family accumulated a huge debt through gambling or favors from others. You need money desperately.', 1),
              (5, 'Your family was executed for treason against the Empire. You were the only one to escape this fate.', 2),
              (5, 'Your family was stripped of its title for some reason. You were evicted from your home and left scrambling to survive.', 3),
              
              (6, 'Your family has fallen into a feud with another family. You may not even remember why this feud started in the first place.', 1),
              (6, 'Your family was stripped of its title for some reason. You were evicted from your home and left scrambling to survive among the un-washed masses.', 2),
              (6, 'Your family turned to raiding human settlements early in your life to get food and perhaps strike back at the humans.', 3),
              
              (7, 'Due to some action or inaction your family has become hated in your home town and now no one there wants to have anything to do with them.', 1),
              (7, 'Your family name was tarnished by a magic relative who flaunted their magical gift disgracefully like a Northern mage.', 2),
              (7, 'Your family house is haunted. Most likely this is because your home was the site of many, many deaths during the war against humans.', 3),
              
              (8, 'One day everything you had was ripped away by a bandit mob. Your family was massacred, leaving you entirely alone.', 1),
              (8, 'You disgraced your family in the eyes of the Empire. Something you did or failed to do has ruined your personal name and harmed your family.', 2),
              (8, 'Your family has been split by a human in-law who was brought into your family by a sibling or relative. Some of your family like them and some hate them.', 3),
              
              (9, 'Your family has a deep, dark secret that if discovered would ruin you all completely. You can decide what this secret is, or the Game Master can decide.', 1),
              (9, 'Your family has a deep, dark secret that if discovered would destroy them and their name forever. You must protect this secret with your life.', 2),
              (9, 'Your family was killed by humans who thought they were Scoia''tael. They may have been slaughtered or hung with no court proceedings or trials.', 3),
              
              (10, 'Your family has come to despise each other. No one you grew up with will talk with each other any more and you''re lucky to get a passing hello from your siblings.', 1),
              (10, 'Your family was assassinated. They may have been in the way of someone''s plan or they may have been used to get at someone more powerful. Either way, your family is gone now.', 2),
              (10, 'Your family is descended from an infamous traitor. It taints your family''s interactions with others of the elder races and has made living in the elderland difficult.', 3)
              ) AS raw_data_en(num, text, group_id)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
, rules_vals(group_id, body, name, id) AS ( VALUES (1,
'{
  "or": [
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0101" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0102" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0103" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0104" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0105" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0106" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0107" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0108" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0109" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0110" } }
  ]
}'::jsonb, 'is_nordman', gen_random_uuid())
                                               , (2,
'{
  "or": [
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0201" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0301" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0302" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0303" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0304" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0305" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0306" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0307" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0308" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0309" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_human_o0310" } }
  ]
}'::jsonb, 'is_nilfgaardian', gen_random_uuid())
                                               , (3,
'{
  "or": [
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_elders_o01" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_homeland_elders_o02" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_elf_q1_o01" } },
    { "!!": { "var": "answers.byAnswer.wcc_past_dwarf_q1_o01" } }
  ]
}'::jsonb, 'is_elderland', gen_random_uuid())
),
ins_rules AS (
  INSERT INTO rules(ru_id, name, body) SELECT r.id, r.name, r.body FROM rules_vals r
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id)
  SELECT 'wcc_past_family_fate_o' || to_char(vals.group_id, 'FM9900') || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         rules_vals.id AS visible_ru_ru_id
    FROM vals
    CROSS JOIN meta
    JOIN rules_vals ON rules_vals.group_id = vals.group_id
  ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_family_fate' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
    SELECT 'ru' lang, raw_data_ru.*
      FROM (VALUES
              (1, 1), (1, 2), (1, 3),
              (2, 1), (2, 2), (2, 3),
              (3, 1), (3, 2), (3, 3),
              (4, 1), (4, 2), (4, 3),
              (5, 1), (5, 2), (5, 3),
              (6, 1), (6, 2), (6, 3),
              (7, 1), (7, 2), (7, 3),
              (8, 1), (8, 2), (8, 3),
              (9, 1), (9, 2), (9, 3),
              (10, 1), (10, 2), (10, 3)
              ) AS raw_data_ru(num, group_id)
    UNION ALL
    SELECT 'en' lang, raw_data_en.*
      FROM (VALUES
              (1, 1), (1, 2), (1, 3),
              (2, 1), (2, 2), (2, 3),
              (3, 1), (3, 2), (3, 3),
              (4, 1), (4, 2), (4, 3),
              (5, 1), (5, 2), (5, 3),
              (6, 1), (6, 2), (6, 3),
              (7, 1), (7, 2), (7, 3),
              (8, 1), (8, 2), (8, 3),
              (9, 1), (9, 2), (9, 3),
              (10, 1), (10, 2), (10, 3)
              ) AS raw_data_en(num, group_id)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_past_family_fate_o' || to_char(vals.group_id, 'FM9900') || to_char(vals.num, 'FM9900'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.family_fate'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field)::text)
    )
  )
FROM vals
CROSS JOIN meta;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_past_family', 'wcc_past_family_fate', 'wcc_past_family_o02';
-- <<< END sql/011_past_family_fate.sql

-- >>> BEGIN sql/012_past_parents.sql

\echo '012_past_parents.sql'
-- –£–∑–µ–ª: –†–æ–¥–∏—Ç–µ–ª–∏

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_parents' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–ù—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—Å—ë –ª–∏ –≤ –ø–æ—Ä—è–¥–∫–µ —Å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏.', 'body'),
                ('en', 'Determine whether your parents are all right.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
       , jsonb_build_object(
           'dice', 'd0',
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.parents_threat')::text
           )
         )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_parents' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES ('ru', 1, '–†–æ–¥–∏—Ç–µ–ª–∏ –∂–∏–≤—ã.'),
               ('ru', 2, '–° —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏ —á—Ç–æ-—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å.'),
               ('en', 1, 'Your parents are alive'),
               ('en', 2, 'Something happened to your parents')
         ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_parents_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_past_family', 'wcc_past_parents', 'wcc_past_family_o01';
-- <<< END sql/012_past_parents.sql

-- >>> BEGIN sql/013_past_parents_fate.sql

\echo '013_past_parents_fate.sql'
-- –£–∑–µ–ª: –°—É–¥—å–±–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–π (wcc_past_parents_fate)

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_parents_fate' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–í—Ä–µ–º—è –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å –≤–∞—à–∏–º–∏ —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏.', 'body'),
                ('en', 'Time to determine what happened to your parents.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
       , jsonb_build_object(
           'dice', 'd0',
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.parents_fate')::text
           )
         )
     FROM meta;


-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_parents_fate' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
    SELECT 'ru' AS lang, raw_data_ru.*
      FROM (VALUES
              -- group 1: –°–µ–≤–µ—Ä—è–Ω–∏–Ω
              (1, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –ø–æ–≥–∏–±–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤–æ–π–Ω—ã —Å –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–æ–º. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–æ –±—ã–ª –æ—Ç–µ—Ü, –Ω–æ –º–∞—Ç—å —Ç–∞–∫–∂–µ –º–æ–≥–ª–∞ —Å—Ä–∞–∂–∞—Ç—å—Å—è –∏–ª–∏ —Å—Ç–∞—Ç—å –∂–µ—Ä—Ç–≤–æ–π –≤–æ–π–Ω—ã.', 1),
              (2, '–†–æ–¥–∏—Ç–µ–ª–∏ –±—Ä–æ—Å–∏–ª–∏ –≤–∞—Å –≤ –ª–µ—Å—É. –í–æ–∑–º–æ–∂–Ω–æ, —Å–µ–º—å—è –Ω–µ –º–æ–≥–ª–∞ –ø—Ä–æ–∫–æ—Ä–º–∏—Ç—å –µ—â—ë –æ–¥–∏–Ω —Ä–æ—Ç, –∞ –º–æ–∂–µ—Ç, —ç—Ç–æ –±—ã–ª–∞ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å.', 1),
              (3, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –ø—Ä–æ–∫–ª—è—Ç—ã –º–∞–≥–æ–º –∏–ª–∏ –∫–µ–º-—Ç–æ, –∫—Ç–æ –Ω–µ–Ω–∞–≤–∏–¥–µ–ª –∏—Ö –≤—Å–µ–π –¥—É—à–æ–π. –ü—Ä–æ–∫–ª—è—Ç–∏–µ –æ–∫–∞–∑–∞–ª–æ—Å—å —Å–º–µ—Ä—Ç–µ–ª—å–Ω—ã–º.', 1),
              (4, '–†–æ–¥–∏—Ç–µ–ª–∏ –ø—Ä–æ–¥–∞–ª–∏ –≤–∞—Å –∑–∞ –∑–æ–ª–æ—Ç–æ –∏–ª–∏ –æ–±–º–µ–Ω—è–ª–∏ –Ω–∞ –∫–∞–∫–∏–µ-—Ç–æ –≤–µ—â–∏ –∏–ª–∏ —É—Å–ª—É–≥–∏. –ü–æ—Ö–æ–∂–µ, –∑–æ–ª–æ—Ç–æ –±—ã–ª–æ –∏–º –Ω—É–∂–Ω–µ–µ, —á–µ–º –≤—ã.', 1),
              (5, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –≤—Å—Ç—É–ø–∏–ª–∏ –≤ –±–∞–Ω–¥—É. –í—ã —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–ª–∏—Å—å —Å —á–ª–µ–Ω–∞–º–∏ —Ç–æ–π –±–∞–Ω–¥—ã, –∞ –ø–æ—Ä–æ–π –±—ã–ª–∏ –≤—ã–Ω—É–∂–¥–µ–Ω—ã –Ω–∞ –Ω–µ—ë —Ä–∞–±–æ—Ç–∞—Ç—å.', 1),
              (6, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π —É–±–∏–ª–æ —á—É–¥–æ–≤–∏—â–µ. –†–µ—à–∏—Ç–µ —Å–∞–º–∏, —á—Ç–æ —ç—Ç–æ –±—ã–ª–∞ –∑–∞ —Ç–≤–∞—Ä—å.', 1),
              (7, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∫–∞–∑–Ω–∏–ª–∏ –ø–æ –ª–æ–∂–Ω–æ–º—É –æ–±–≤–∏–Ω–µ–Ω–∏—é. –¢–æ –ª–∏ –æ–Ω–∏ —Å—Ç–∞–ª–∏ –∫–æ–∑–ª–∞–º–∏ –æ—Ç–ø—É—â–µ–Ω–∏—è, —Ç–æ –ª–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å –Ω–µ –≤ —Ç–æ–º –º–µ—Å—Ç–µ –∏ –Ω–µ –≤ —Ç–æ –≤—Ä–µ–º—è.', 1),
              (8, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è —É–º–µ—Ä–ª–∏ –æ—Ç —á—É–º—ã. –ë–æ–ª–µ–∑–Ω—å –±—ã–ª–∞ –Ω–µ–∏–∑–ª–µ—á–∏–º–∞, –æ—Å—Ç–∞–≤–∞–ª–æ—Å—å –ª–∏—à—å –æ–±–ª–µ–≥—á–∏—Ç—å —Å—Ç—Ä–∞–¥–∞–Ω–∏—è.', 1),
              (9, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –¥–µ–∑–µ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ –∫ –Ω–∏–ª—å—Ñ–≥–∞–∞—Ä–¥—Ü–∞–º, –ø—Ä–æ–¥–∞–≤ –∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–π–¥—è –≥—Ä–∞–Ω–∏—Ü—É.', 1),
              (10, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –ø–æ—Ö–∏—Ç–∏–ª–∏ –∞—Ä–∏—Å—Ç–æ–∫—Ä–∞—Ç—ã. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–æ –±—ã–ª–∞ –≤–∞—à–∞ –º–∞—Ç—å, –ø—Ä–∏–≥–ª—è–Ω—É–≤—à–∞—è—Å—è –º–µ—Å—Ç–Ω–æ–º—É –∫–Ω—è–∑—é –∏–ª–∏ –µ–≥–æ —Å—ã–Ω—É.', 1),

              -- group 2: –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–µ—Ü
              (1, '–í–∞—à –æ—Ç–µ—Ü –ø–æ–≥–∏–± –≤ –æ–¥–Ω–æ–π –∏–∑ –°–µ–≤–µ—Ä–Ω—ã—Ö –≤–æ–π–Ω. –í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω —É–∂–µ –±—ã–ª –≤–æ–µ–Ω–Ω—ã–º –∏–ª–∏ –∂–µ –µ–≥–æ –ø—Ä–∏–∑–≤–∞–ª–∏ –Ω–∞ —Å–ª—É–∂–±—É, –∫–æ–≥–¥–∞ –Ω–∞—á–∞–ª–∞—Å—å –≤–æ–π–Ω–∞.', 2),
              (2, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π –æ—Ç—Ä–∞–≤–∏–ª–∏. –í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –¥–µ–ª–æ —Ä—É–∫ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞ –∏–ª–∏ –∫–æ–≥–æ-—Ç–æ, –∫—Ç–æ —Ö–æ—Ç–µ–ª —É–±—Ä–∞—Ç—å –∏—Ö —Å –ø—É—Ç–∏.', 2),
              (3, '–¢–∞–π–Ω–∞—è –ø–æ–ª–∏—Ü–∏—è –∑–∞–±—Ä–∞–ª–∞ –∫–æ–≥–æ-—Ç–æ –∏–∑ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π (–∏–ª–∏ –æ–±–æ–∏—Ö) –Ω–∞ –¥–æ–ø—Ä–æ—Å. –ù–µ–¥–µ–ª—é —Å–ø—É—Å—Ç—è –∏—Ö —Ç–µ–ª–∞ –Ω–∞—à–ª–∏ –ø–æ–≤–µ—à–µ–Ω–Ω—ã–º–∏ –Ω–∞ –≥–æ—Ä–æ–¥—Å–∫–æ–π —É–ª–∏—Ü–µ.', 2),
              (4, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π —É–±–∏–ª –º—è—Ç–µ–∂–Ω—ã–π –º–∞–≥. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –æ–Ω–∏ –ø—ã—Ç–∞–ª–∏—Å—å —Å–¥–∞—Ç—å —ç—Ç–æ–≥–æ –º–∞–≥–∞ –ò–º–ø–µ—Ä–∏–∏ –∏ –ø–æ–ø–ª–∞—Ç–∏–ª–∏—Å—å –∑–∞ —ç—Ç–æ.', 2),
              (5, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π –ø–æ—Å–∞–¥–∏–ª–∏ –∑–∞ –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–µ –≤–ª–∞–¥–µ–Ω–∏–µ –º–∞–≥–∏–µ–π. –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—ã–ª–æ, –ª–∏–±–æ —ç—Ç–æ –±—ã–ª–∞ –ø–æ–¥—Å—Ç–∞–≤–∞.', 2),
              (6, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏–∑–≥–Ω–∞–ª–∏ –≤ –ø—É—Å—Ç—ã–Ω—é –ö–æ—Ä–∞—Ç. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –æ–Ω–∏ —Å–æ–≤–µ—Ä—à–∏–ª–∏ —Å–µ—Ä—å—ë–∑–Ω–æ–µ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ, –Ω–æ –∫–∞–∑–Ω–∏—Ç—å –∏—Ö –±—ã–ª–æ –æ–ø–∞—Å–Ω–æ.', 2),
              (7, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π –ø—Ä–æ–∫–ª—è–ª –º–∞–≥. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —É –º–∞–≥–∞ –±—ã–ª–∞ –ª–∏—á–Ω–∞—è –≤–µ–Ω–¥–µ—Ç—Ç–∞.', 2),
              (8, '–û–¥–Ω–∞–∂–¥—ã –≤–∞—à–∏ —Ä–æ–¥–∏—Ç–µ–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–∏–ª–∏ –≤–∞—Å. –í–∑—è–ª–∏ –∏ –∏—Å—á–µ–∑–ª–∏. –í–µ—Ä–æ—è—Ç–Ω–æ, –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ –ø—Ä–∏—á–∏–Ω—ã.', 2),
              (9, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –ø–æ–ø–∞–ª–∏ –≤ —Ä–∞–±—Å—Ç–≤–æ –∑–∞ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤ –ò–º–ø–µ—Ä–∏–∏ –∏–ª–∏ –ø–æ –ª–æ–∂–Ω–æ–º—É –¥–æ–Ω–æ—Å—É.', 2),
              (10, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –Ω–∞ –°–µ–≤–µ—Ä –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–≤–æ–π–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤. –í—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, –¥–∞–∂–µ –Ω–µ –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –æ–Ω–∏ —Ç–µ–ø–µ—Ä—å, –Ω–æ –æ–Ω–∏ —Å–ª—É–∂–∞—Ç –ò–º–ø–µ—Ä–∞—Ç–æ—Ä—É.', 2),

              -- group 3: –ù–µ–ª—é–¥—å
              (1, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π —Å—á–∏—Ç–∞—é—Ç —á–ª–µ–Ω–∞–º–∏ –±–∞–Ω–¥—ã —Å–∫–æ—è''—Ç–∞—ç–ª–µ–π, –∏–∑-–∑–∞ —á–µ–≥–æ –Ω–∞ –Ω–∏—Ö –∫–æ—Å–æ —Å–º–æ—Ç—Ä—è—Ç.', 3),
              (2, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –ø—Ä–µ–¥–∞–ª–∏ —Å–≤–æ–π –Ω–∞—Ä–æ–¥ –∏ —Å–¥–∞–ª–∏ —á–ª–µ–Ω–æ–≤ –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤ –ª—é–¥—è–º, —Ç–∞–∫ —á—Ç–æ –∏–º –Ω–µ —Ä–∞–¥—ã –Ω–∞ —Ä–æ–¥–∏–Ω–µ.', 3),
              (3, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –≤ –æ—Ç—á–∞—è–Ω–∏–∏ –ø–æ–∫–æ–Ω—á–∏–ª–∏ —Å —Å–æ–±–æ–π, —É—Ç—Ä–∞—Ç–∏–≤ –Ω–∞–¥–µ–∂–¥—É –Ω–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –±—ã–ª–æ–π —Å–ª–∞–≤—ã —Å–≤–æ–µ–≥–æ –Ω–∞—Ä–æ–¥–∞.', 3),
              (4, '–í–æ –≤—Ä–µ–º—è —Å—Ç—Ä–∞–Ω—Å—Ç–≤–∏–π –æ–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è —Å—Ç–∞–ª–∏ –∂–µ—Ä—Ç–≤–∞–º–∏ –ª—é–¥—Å–∫–æ–≥–æ —Ä–∞—Å–∏–∑–º–∞. –ü–æ—Å–ª–µ –ø–æ–≥—Ä–æ–º–∞ –∏—Ö —Ç–µ–ª–∞ –≤—ã—Å—Ç–∞–≤–∏–ª–∏ –Ω–∞ –ø–∏–∫–∞—Ö –Ω–∞ –≤—Å–µ–æ–±—â–µ–µ –æ–±–æ–∑—Ä–µ–Ω–∏–µ.', 3),
              (5, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –æ–¥–µ—Ä–∂–∏–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –±—ã–ª–æ–π —Å–ª–∞–≤—ã —Å–≤–æ–µ–≥–æ –Ω–∞—Ä–æ–¥–∞ –∏ –∂–µ—Ä—Ç–≤—É—é—Ç –≤—Å–µ–º —Ä–∞–¥–∏ —ç—Ç–æ–π —Ü–µ–ª–∏.', 3),
              (6, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏–∑–≥–Ω–∞–ª–∏ —Å —Ä–æ–¥–∏–Ω—ã ‚Äî –∑–∞ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ, –Ω–µ—Å–æ–≥–ª–∞—Å–∏–µ —Å –º–Ω–µ–Ω–∏–µ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∏–ª–∏ –ø–æ –∫–∞–∫–æ–π-–ª–∏–±–æ –∏–Ω–æ–π –ø—Ä–∏—á–∏–Ω–µ.', 3),
              (7, '–û–¥–Ω–æ–≥–æ –∏–ª–∏ –æ–±–æ–∏—Ö –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π –ø—Ä–æ–∫–ª—è–ª–∏. –í—ã–±–µ—Ä–∏—Ç–µ —Å–∞–º–∏, —á—Ç–æ —ç—Ç–æ –∑–∞ –ø—Ä–æ–∫–ª—è—Ç–∏–µ, –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –≤–µ–¥—É—â–µ–≥–æ.', 3),
              (8, '–í–∞—à–∏ —Ä–æ–¥–∏—Ç–µ–ª–∏ –æ—Ç–¥–∞–ª–∏ –≤–∞—Å –¥—Ä—É–≥–æ–π —Å–µ–º—å–µ, —á—Ç–æ–±—ã –≤—ã –≤—ã–∂–∏–ª–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –Ω–µ –º–æ–≥–ª–∏ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –≤–∞—Å —Å–∞–º–∏.', 3),
              (9, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Ä—è–¥—ã —Å–∫–æ—è''—Ç–∞—ç–ª–µ–π, —á—Ç–æ–±—ã –æ—Ç–æ–º—Å—Ç–∏—Ç—å –ª—é–¥—è–º, –∫–æ—Ç–æ—Ä—ã–µ, –∫–∞–∫ –æ–Ω–∏ —Å—á–∏—Ç–∞—é—Ç, –∏—Å–∫–æ–≤–µ—Ä–∫–∞–ª–∏ –∏–º –∂–∏–∑–Ω—å.', 3),
              (10, '–û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –≤–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—è –ø–æ–≥–∏–±–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ ¬´–Ω–µ—Å—á–∞—Å—Ç–Ω–æ–≥–æ —Å–ª—É—á–∞—è¬ª. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —É –Ω–∏—Ö –±—ã–ª –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—Ä–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∫–æ–Ω–µ—Ü –Ω–∞—à—ë–ª —Å–ø–æ—Å–æ–± –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –Ω–∏—Ö.', 3)
            ) AS raw_data_ru(num, text, group_id)
    UNION ALL
    SELECT 'en' AS lang, raw_data_en.*
      FROM (VALUES
              -- group 1: Northern
              (1, 'One or more of your parents were killed in the Northern Wars. Most likely your father, but it is also possible that your mother fought or was a casualty.', 1),
              (2, 'One or more of your parents left you in the wilderness to fend for yourself. Maybe they couldn''t afford to keep you; maybe you were an accident.', 1),
              (3, 'One or more of your parents were cursed by a mage or due to the intense hatred of someone they encountered. The curse took their life.', 1),
              (4, 'One or more of your parents sold you for coin, or perhaps traded you for some goods or service. Your parents needed the money more than you.', 1),
              (5, 'One or more of your parents joined a gang. You saw this gang often and were sometimes forced to work with them.', 1),
              (6, 'One or more of your parents were killed by monsters. It is your decision as to what they may have fallen prey to.', 1),
              (7, 'One or more of your parents were falsely executed. They may have been a scapegoat for something or just in the wrong place.', 1),
              (8, 'One or more of your parents died of a plague. There was nothing that could be done but try to ease their passing.', 1),
              (9, 'One or more of your parents defected to Nilfgaard. They may have been given a deal for information or they may just have jumped the border.', 1),
              (10, 'One or more of your parents were kidnapped by nobles. Likely it was your mother, who attracted the attention of a local lord or his son.', 1),

              -- group 2: Nilfgaardian
              (1, 'Your father died in one of the Northern Wars. He may have already been in the military or he may have been conscripted into service during that war.', 2),
              (2, 'One or more of your parents were poisoned. This may have been the work of a professional rival, or it may have been to get your parents out of the way.', 2),
              (3, 'The secret police took your parent or parents for ''questioning.'' The next week their bodies were found hung in the streets of the city.', 2),
              (4, 'One or more of your parents were killed by a rogue mage. Most likely they tried to turn the mage in question in to the Empire and paid the price.', 2),
              (5, 'One or more of your parents were imprisoned for unlawful magic. Maybe they actually committed the crime or maybe it was a setup.', 2),
              (6, 'One or more of your parents were exiled to the Korath Desert. Likely they committed a major crime but killing them would cause trouble.', 2),
              (7, 'One or more of your parents were cursed by a mage. The mage likely had a vendetta against them.', 2),
              (8, 'Your parents simply left you one day. You may not even know why they did it. One day your parents just disappeared.', 2),
              (9, 'One or more of your parents were enslaved. They either committed a crime against the Empire or were set up by a rival.', 2),
              (10, 'One or more of your parents were sent to the North as double agents. You likely don''t even know where they are now, but they''re serving the Emperor.', 2),

              -- group 3: Elderland (non-human)
              (1, 'One or more of your parents were accused of being Scoia''tael. The people around you give your parents sidelong glances.', 3),
              (2, 'One or more of your parents turned on your own people and sold out the elder races to the humans. Your parents are unwelcome in your homeland.', 3),
              (3, 'One or more of your parents killed themselves out of despair. With no hope of regaining the former glory of the past, they gave up and ended it.', 3),
              (4, 'While traveling, one or more of your parents fell prey to human racism. They died in a pogrom and their bodies were displayed on pikes.', 3),
              (5, 'One or more of your parents have become obsessed with regaining the former glory of their race. They sacrifice everything for this cause.', 3),
              (6, 'One or more of your parents were exiled from your homeland. There are many possible reasons, from crime to dissenting opinions.', 3),
              (7, 'One or more of your parents were cursed. You can decide what this curse is, or the Game Master can decide.', 3),
              (8, 'Your parents gave you to another family so that you could survive, because they couldn''t care for you.', 3),
              (9, 'One or more of your parents joined the Scoia''tael in an attempt to get revenge on the humans who they see as ruining their lives.', 3),
              (10, 'One or more of your parents died in an ''accident''. Most likely they made a powerful enemy that finally found a way to get rid of them.', 3)
           ) AS raw_data_en(num, text, group_id)
)
, ins_label AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
         , meta.entity, meta.entity_field, vals.lang, vals.text
      FROM vals
      CROSS JOIN meta
)
, rules_vals(group_id, body, name, id) AS (
  SELECT CASE name WHEN 'is_nordman' THEN 1
                   WHEN 'is_nilfgaardian' THEN 2
                   WHEN 'is_elderland' THEN 3 END
       , body, name, ru_id FROM rules WHERE name in ('is_nordman','is_nilfgaardian', 'is_elderland')
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id)
SELECT
  'wcc_past_parents_fate_o' || to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num AS sort_order,
  rules_vals.id AS visible_ru_ru_id
FROM vals
CROSS JOIN meta
JOIN rules_vals ON rules_vals.group_id = vals.group_id
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_parents_fate' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
    SELECT 'ru' AS lang, raw_data_ru.*
      FROM (VALUES
              (1, 1), (2, 1), (3, 1), (4, 1), (5, 1), (6, 1), (7, 1), (8, 1), (9, 1), (10, 1),
              (1, 2), (2, 2), (3, 2), (4, 2), (5, 2), (6, 2), (7, 2), (8, 2), (9, 2), (10, 2),
              (1, 3), (2, 3), (3, 3), (4, 3), (5, 3), (6, 3), (7, 3), (8, 3), (9, 3), (10, 3)
              ) AS raw_data_ru(num, group_id)
    UNION ALL
    SELECT 'en' AS lang, raw_data_en.*
      FROM (VALUES
              (1, 1), (2, 1), (3, 1), (4, 1), (5, 1), (6, 1), (7, 1), (8, 1), (9, 1), (10, 1),
              (1, 2), (2, 2), (3, 2), (4, 2), (5, 2), (6, 2), (7, 2), (8, 2), (9, 2), (10, 2),
              (1, 3), (2, 3), (3, 3), (4, 3), (5, 3), (6, 3), (7, 3), (8, 3), (9, 3), (10, 3)
              ) AS raw_data_en(num, group_id)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_past_parents_fate_o' || to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.parents_fate'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field)::text)
    )
  )
FROM vals
CROSS JOIN meta;

-- –°–≤—è–∑–∏  
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_past_parents', 'wcc_past_parents_fate', 'wcc_past_parents_o02', 1;
-- <<< END sql/013_past_parents_fate.sql

-- >>> BEGIN sql/014_past_parents_who.sql

\echo '014_past_parents_who.sql'
-- –£–∑–µ–ª: –†–æ–¥–∏—Ç–µ–ª–∏ - –° –∫–µ–º –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª–µ–π?

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_parents_who' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–ú–æ–≥–ª–∏ –ø–æ—Å—Ç—Ä–∞–¥–∞—Ç—å —Å—Ä–∞–∑—É –æ–±–∞ —Ä–æ–¥–∏—Ç–µ–ª—è –∏–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö.'),
                            ('en', 'Both parents may have suffered, or only one of them.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 3, '–†–æ–¥–∏—Ç–µ–ª—å'),
                                     ('en', 1, 'Chance'),
                                     ('en', 3, 'Parent'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_parents_who' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.parents_fate')::text,
             ck_id('witcher_cc.hierarchy.parents_who')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_parents_who' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || parent || '</td>') AS text,
                  num,
                  probability,
                  lang,
                  parent
           FROM (VALUES
                  -- RU: Northern Kingdoms (10* –ø–æ 0.05)
                  ('ru', 1, '–û—Ç–µ—Ü', 0.4::numeric),
                  ('ru', 2, '–ú–∞—Ç—å', 0.4),
                  ('ru', 3, '–û–±–∞', 0.2),
                  ('en', 1, 'Father', 0.4),
                  ('en', 2, 'Mother', 0.4),
                  ('en', 3, 'Both', 0.2)
           ) AS v(lang, num, parent, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_parents_who_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;

-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è –æ–ø—Ü–∏–π (–û—Ç–µ—Ü/–ú–∞—Ç—å/–û–±–∞)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_parents_who' AS qu_id
                , 'character' AS entity)
, parent_options AS (
  SELECT 'ru' AS lang, parent_ru.*
    FROM (VALUES
            (1, '–û—Ç–µ—Ü'),
            (2, '–ú–∞—Ç—å'),
            (3, '–û–±–∞')
          ) AS parent_ru(num, parent)
  UNION ALL
  SELECT 'en' AS lang, parent_en.*
    FROM (VALUES
            (1, 'Father'),
            (2, 'Mother'),
            (3, 'Both')
          ) AS parent_en(num, parent)
)
, ins_parent AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(parent_options.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'parents_fate_who') AS id
       , meta.entity, 'parents_fate_who', parent_options.lang, parent_options.parent
    FROM parent_options
    CROSS JOIN meta
)
SELECT 1; -- –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è CTE

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_parents_who' AS qu_id
                , 'character' AS entity)
, vals AS (
    SELECT num
    FROM (VALUES (1), (2), (3)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_past_parents_who_o' || to_char(vals.num, 'FM9900'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.parents_fate_who'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'parents_fate_who')::text)
    )
  )
FROM vals
CROSS JOIN meta;
  
-- –°–≤—è–∑–∏
WITH
  r AS (INSERT INTO rules(name, body) VALUES (NULL,
'{
  "!": {
    "or": [
      { "var": "answers.byAnswer.wcc_past_parents_fate_o0102" },
      { "var": "answers.byAnswer.wcc_past_parents_fate_o0104" },
      { "var": "answers.byAnswer.wcc_past_parents_fate_o0201" },
      { "var": "answers.byAnswer.wcc_past_parents_fate_o0202" },
      { "var": "answers.byAnswer.wcc_past_parents_fate_o0308" }
    ]
  }
}'::jsonb) RETURNING ru_id)
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_past_parents_fate', 'wcc_past_parents_who', r.ru_id, 1 FROM r;
-- <<< END sql/014_past_parents_who.sql

-- >>> BEGIN sql/015_past_family_status.sql

\echo '015_past_family_status.sql'
-- –£–∑–µ–ª: –ü–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ–º—å–∏ (wcc_past_family_status) ‚Äî –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —è—á–µ–µ–∫ —Å–æ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ–º

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_family_status' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–í—Ä–µ–º—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–∞—à–µ–π —Å–µ–º—å–∏.'),
                            ('en', 'Time to determine your family status.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ü–æ–ª–æ–∂–µ–Ω–∏–µ'),
                                     ('ru', 3, '–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Status'),
                                     ('en', 3, 'Starting Gear'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_family_status' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.family_status')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            -- group 1: –°–µ–≤–µ—Ä—è–Ω–∏–Ω
            (1, 1, 0.1, '<b>–ê—Ä–∏—Å—Ç–æ–∫—Ä–∞—Ç–∏—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –±–æ–≥–∞—Ç–æ–º –æ—Å–æ–±–Ω—è–∫–µ, –≥–¥–µ —Å–ª—É–≥–∏ –∏—Å–ø–æ–ª–Ω—è–ª–∏ –ª—é–±—É—é –≤–∞—à—É –ø—Ä–∏—Ö–æ—Ç—å. –û—Ç –≤–∞—Å –æ–∂–∏–¥–∞–ª–∏ —Ö–æ—Ä–æ—à–µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏ —É–º–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ.', '–î–≤–æ—Ä—è–Ω—Å–∫–∞—è –≥—Ä–∞–º–æ—Ç–∞<br>(+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏)'),
            (1, 2, 0.1, '<b>–ü–æ–¥ –æ–ø–µ–∫–æ–π –º–∞–≥–∞</b> –í —é–Ω–æ–º –≤–æ–∑—Ä–∞—Å—Ç–µ –≤–∞—Å –æ—Ç–¥–∞–ª–∏ –ø–æ–¥ –æ–ø–µ–∫—É –º–∞–≥–∞. –í—ã –∂–∏–ª–∏ –≤ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö, –Ω–æ –æ–ø–µ–∫—É–Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –≤–∏–¥–µ–ª–∏ ‚Äî –æ–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –±—ã–ª –∑–∞–Ω—è—Ç.', '–õ–µ—Ç–æ–ø–∏—Å—å<br>(+1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é)'),
            (1, 3, 0.1, '<b>–†—ã—Ü–∞—Ä—Å—Ç–≤–æ</b> –í—ã –∂–∏–ª–∏ –≤ –æ—Å–æ–±–Ω—è–∫–µ, –≥–¥–µ –∏–∑ –≤–∞—Å —Ä–∞—Å—Ç–∏–ª–∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ª–æ—Ä–¥–∞ –∏–ª–∏ –ª–µ–¥–∏. –í–∞—à–∞ —Å—É–¥—å–±–∞ –±—ã–ª–∞ –ø—Ä–µ–¥—Ä–µ—à–µ–Ω–∞ —Å —Ä–æ–∂–¥–µ–Ω–∏—è.', '–õ–∏—á–Ω—ã–π –≥–µ—Ä–±<br>(+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏)'),
            (1, 4, 0.1, '<b>–°–µ–º—å—è —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –∫—É–ø–µ—á–µ—Å–∫–æ–π —Å—Ä–µ–¥–µ, –ø–æ–¥ –∫—Ä–∏–∫–∏ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –∏ –∑–≤–æ–Ω –º–æ–Ω–µ—Ç.', '2 –∑–Ω–∞–∫–æ–º—ã—Ö'),
            (1, 5, 0.1, '<b>–°–µ–º—å—è –º–∞—Å—Ç–µ—Ä–æ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–æ–π –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π, –≥–¥–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å—Ç—É—á–∞–ª–∏ –º–æ–ª–æ—Ç–∫–∏ –∏–ª–∏ —Ä–∞–∑–¥–∞–≤–∞–ª–∏—Å—å –¥—Ä—É–≥–∏–µ –∑–≤—É–∫–∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞.', '3 –æ–±—ã—á–Ω—ã—Ö —á–µ—Ä—Ç–µ–∂–∞/—Ñ–æ—Ä–º—É–ª—ã'),
            (1, 6, 0.2, '<b>–°–µ–º—å—è –∞—Ä—Ç–∏—Å—Ç–æ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –∞–∫—Ç—ë—Ä—Å–∫–æ–π —Ç—Ä—É–ø–ø–µ. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º–∏ —Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–≤–∞–ª–∏ –∏–ª–∏ –∂–µ –≤—ã—Å—Ç—É–ø–∞–ª–∏ –≤ —Ç–µ–∞—Ç—Ä–µ.', '1 –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ 1 –¥—Ä—É–≥'),
            (1, 8 ,0.3, '<b>–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∞—è —Å–µ–º—å—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –Ω–∞ —Ñ–µ—Ä–º–µ –≤ —Å–µ–ª—å—Å–∫–æ–π –≥–ª—É—à–∏. –ó–∞ –¥—É—à–æ–π —É –≤–∞—Å –ø–æ—á—Ç–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç, –∞ –∂–∏–∑–Ω—å –±—ã–ª–∞ –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –æ–ø–∞—Å–Ω–æ–π.', '–°—á–∞—Å—Ç–ª–∏–≤—ã–π —Ç–∞–ª–∏—Å–º–∞–Ω<br>(+1 –∫ –£–¥–∞—á–µ)'),

            -- group 2: –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–µ—Ü
            (2, 1, 0.1, '<b>–ê—Ä–∏—Å—Ç–æ–∫—Ä–∞—Ç–∏—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –±–æ–≥–∞—Ç–æ–º –æ—Å–æ–±–Ω—è–∫–µ, –≥–¥–µ –≤–∞—Å –Ω–µ–ø–ª–æ—Ö–æ –Ω–∞—É—á–∏–ª–∏ –≤—ã–∂–∏–≤–∞—Ç—å –≤ –º–∏—Ä–µ –ø—Ä–∏–¥–≤–æ—Ä–Ω—ã—Ö –∏–Ω—Ç—Ä–∏–≥. –†–æ—Å–∫–æ—à—å —Å–ª—É–∂–∏–ª–∞ –ª–∏—à—å —Å—Ç–∏–º—É–ª–æ–º –∫ –æ–±—É—á–µ–Ω–∏—é.', '–î–≤–æ—Ä—è–Ω—Å–∫–∞—è –≥—Ä–∞–º–æ—Ç–∞<br>(+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏)'),
            (2, 2, 0.1, '<b>–í—ã—Å—à–µ–µ –∂—Ä–µ—á–µ—Å—Ç–≤–æ</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ —Å—Ä–µ–¥–∏ –∂—Ä–µ—Ü–æ–≤ –í–µ–ª–∏–∫–æ–≥–æ –°–æ–ª–Ω—Ü–∞. –í—ã –±—ã–ª–∏ –Ω–∞–±–æ–∂–Ω—ã–º —Ä–µ–±—ë–Ω–∫–æ–º, —É–≤–µ—Ä–µ–Ω–Ω—ã–º, —á—Ç–æ —Ü–µ—Ä–∫–æ–≤—å –≤—Å–µ–≥–¥–∞ —É–∫–∞–∂–µ—Ç –≤–µ—Ä–Ω—ã–π –ø—É—Ç—å.', '–°–≤—è—â–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª<br>(+1 –∫ –•—Ä–∞–±—Ä–æ—Å—Ç–∏)'),
            (2, 3, 0.1, '<b>–†—ã—Ü–∞—Ä—Å—Ç–≤–æ</b> –í—ã —Ä–æ—Å–ª–∏, –∑–Ω–∞—è, —á—Ç–æ –≤–∞—à –¥–æ–ª–≥ ‚Äî —Å–ª—É–∂–∏—Ç—å –∏–º–ø–µ—Ä–∞—Ç–æ—Ä—É, –∏ —Ä–æ—Å–∫–æ—à—å ‚Äî –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ –±—É–¥—É—â—É—é —Å–ª—É–∂–±—É.', '–õ–∏—á–Ω—ã–π –≥–µ—Ä–±<br>(+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏)'),
            (2, 4, 0.1, '<b>–°–µ–º—å—è –º–∞—Å—Ç–µ—Ä–æ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π, —É—á–∞—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ü–µ–Ω–∏–ª–∏—Å—å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ.', '3 –æ–±—ã—á–Ω—ã—Ö —á–µ—Ä—Ç–µ–∂–∞/—Ñ–æ—Ä–º—É–ª—ã'),
            (2, 5, 0.1, '<b>–°–µ–º—å—è —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤</b> –í—ã —Ä–æ—Å–ª–∏, –ø—Ä–æ–¥–∞–≤–∞—è —Ç–æ–≤–∞—Ä—ã –ø–æ –≤—Å–µ–π –ò–º–ø–µ—Ä–∏–∏, –∏ –ø–æ–≤–∏–¥–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–¥–µ–ª–∏—è —Å–æ –≤—Å–µ–≥–æ –º–∏—Ä–∞.', '2 –∑–Ω–∞–∫–æ–º—ã—Ö'),
            (2, 6, 0.2, '<b>–†–∞–±—Å—Ç–≤–æ</b> –í—ã —Ä–∞–± —Å —Ä–æ–∂–¥–µ–Ω–∏—è. –í—ã –∂–∏–ª–∏ –≤ –ø—Ä–æ—Å—Ç–æ–π –∫–æ–º–Ω–∞—Ç—É—à–∫–µ –∏ –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞–ª–∏, –∞ —Å–∫–∞—Ä–± –±—ã–ª —Å–∫—É–¥–µ–Ω.', '–û–±—É—á–µ–Ω–Ω–∞—è –ø—Ç–∏—Ü–∞ –∏–ª–∏ –∑–º–µ–π'),
            (2, 8 ,0.3, '<b>–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∞—è —Å–µ–º—å—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –Ω–∞ –æ–¥–Ω–æ–π –∏–∑ —Ç—ã—Å—è—á —Ñ–µ—Ä–º –ò–º–ø–µ—Ä–∏–∏. –ó–∞ –¥—É—à–æ–π —É –≤–∞—Å –ø–æ—á—Ç–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç, –Ω–æ –∂–∏–∑–Ω—å –±—ã–ª–∞ –ø—Ä–æ—Å—Ç–æ–π.', '–°—á–∞—Å—Ç–ª–∏–≤—ã–π —Ç–∞–ª–∏—Å–º–∞–Ω<br>(+1 –∫ –£–¥–∞—á–µ)'),

            -- group 3: –ù–µ–ª—é–¥—å (Elderland)
            (3, 1, 0.1, '<b>–ê—Ä–∏—Å—Ç–æ–∫—Ä–∞—Ç–∏—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤–æ –¥–≤–æ—Ä—Ü–µ, –≥–¥–µ –≤–∞–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–∞–ø–æ–º–∏–Ω–∞–ª–∏ –æ —Å–ª–∞–≤–Ω–æ–º –ø—Ä–æ—à–ª–æ–º, –æ–∂–∏–¥–∞—è, —á—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ –¥–æ—Å—Ç–æ–π–Ω—ã —Å–≤–æ–∏—Ö –ø—Ä–µ–¥–∫–æ–≤.', '–î–≤–æ—Ä—è–Ω—Å–∫–∞—è –≥—Ä–∞–º–æ—Ç–∞<br>(+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏)'),
            (3, 2, 0.1, '<b>–ë–ª–∞–≥–æ—Ä–æ–¥–Ω—ã–π –≤–æ–∏–Ω</b> –í—ã –¥–∏—Ç—è –±–ª–∞–≥–æ—Ä–æ–¥–Ω–æ–≥–æ –≤–æ–∏–Ω–∞. –û—Ç –≤–∞—Å –æ–∂–∏–¥–∞—é—Ç, —á—Ç–æ –≤—ã –æ–ø—Ä–∞–≤–¥–∞–µ—Ç–µ —Ä–µ–ø—É—Ç–∞—Ü–∏—é —Å–µ–º—å–∏ –∏ –Ω–µ –æ–ø–æ–∑–æ—Ä–∏—Ç–µ —Å–≤–æ—ë –Ω–∞—Å–ª–µ–¥–∏–µ.', '–õ–∏—á–Ω—ã–π –≥–µ—Ä–±<br>(+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏)'),
            (3, 3, 0.1, '<b>–°–µ–º—å—è —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ —Å–µ–º—å–µ —Å—Ç—Ä–∞–Ω—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤. –ò–Ω–æ–≥–¥–∞ –∂–∏–∑–Ω—å –±—ã–ª–∞ —Ç—Ä—É–¥–Ω–∞, –Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –Ω–µ–ª—é–¥—è–º–∏ —Ç–æ–≤–∞—Ä—ã –≤—Å–µ–≥–¥–∞ —Ü–µ–Ω—è—Ç—Å—è.', '2 –∑–Ω–∞–∫–æ–º—ã—Ö'),
            (3, 4, 0.1, '<b>–°–µ–º—å—è –≥—Ä–∞–º–æ—Ç–µ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ —Å–µ–º—å–µ –≥—Ä–∞–º–æ—Ç–µ–≤. –í–∞—à–∏ —Ä–æ–¥–∏—Ç–µ–ª–∏ –±–µ—Ä–µ–≥–ª–∏ –ª–µ—Ç–æ–ø–∏—Å–∏ –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤, —Å—Ç–∞—Ä–∞—Ç–µ–ª—å–Ω–æ –∏—Ö –∑–∞–ø–∏—Å—ã–≤–∞—è –∏ —Ö—Ä–∞–Ω—è.', '–õ–µ—Ç–æ–ø–∏—Å—å<br>(+1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é)'),
            (3, 5, 0.1, '<b>–ê—Ä—Ç–∏—Å—Ç—ã</b> –° –¥–µ—Ç—Å—Ç–≤–∞ –≤—ã –∏—Å–ø–æ–ª–Ω—è–ª–∏ –ø–µ—Å–Ω–∏ –∏ –∏–≥—Ä–∞–ª–∏ –Ω–∞ —Å—Ü–µ–Ω–µ, –∞ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ–º–æ–≥–∞–ª–∏ –ø–∏—Å–∞—Ç—å –ø–µ—Å–Ω–∏ –∏ —á–∏–Ω–∏–ª–∏ –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.', '1 –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ 1 –¥—Ä—É–≥'),
            (3, 6, 0.2, '<b>–°–µ–º—å—è –º–∞—Å—Ç–µ—Ä–æ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ —Å–µ–º—å–µ –º–∞—Å—Ç–µ—Ä–æ–≤, –ø–æ—Å–µ—â–∞–ª–∏ –¥—Ä–µ–≤–Ω–∏–µ –¥–≤–æ—Ä—Ü—ã –¥–ª—è –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –ø—Ä–æ–≤–æ–¥–∏–ª–∏ –∑–∞ —Ä–∞–±–æ—Ç–æ–π –º–Ω–æ–≥–æ —á–∞—Å–æ–≤.', '3 –æ–±—ã—á–Ω—ã—Ö —á–µ—Ä—Ç–µ–∂–∞/—Ñ–æ—Ä–º—É–ª—ã'),
            (3, 8 ,0.3, '<b>–ù–∏–∑–∫–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ</b> –í—ã –∏–∑ –ø—Ä–æ—Å—Ç–æ–π —Å–µ–º—å–∏ –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ –Ω–∞ –∂–∏–∑–Ω—å, –ø—Ä–∏—Å–ª—É–∂–∏–≤–∞—è –≤ —á—É–∂–∏—Ö –¥–æ–º–∞—Ö –ª–∏–±–æ –ø–µ—Ä–µ–±–∏–≤–∞—è—Å—å —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Ä–∞–±–æ—Ç–∞–º–∏ –≤ —Ä–æ–¥–Ω–æ–º –≥–æ—Ä–æ–¥–µ.', '–°—á–∞—Å—Ç–ª–∏–≤—ã–π —Ç–∞–ª–∏—Å–º–∞–Ω<br>(+1 –∫ –£–¥–∞—á–µ)')
          ) AS raw_data_ru(group_id, num, probability, status_txt, gear)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            -- group 1: Northern
            (1, 1, 0.1, '<b>Aristocracy</b> You grew up in a noble manor with servants to wait on you, but you were always expected to behave and impress.', 'Paper of Nobility<br>(+2 Reputation)'),
            (1, 2, 0.1, '<b>Adopted by a Mage</b> You were given to a mage at a young age. You lived in comfort but barely saw your caretaker, who was always busy.', 'A Chronicle<br>(+1 Education)'),
            (1, 3, 0.1, '<b>Knights</b> You grew up in a manor where you learned to be a proper lady or lord. Your fate was set from birth.', 'Personal Heraldry<br>(+1 Reputation)'),
            (1, 4, 0.1, '<b>Merchant Family</b> You grew up among merchants, always surrounded by yelling, haggling, and money.', '2 Acquaintances'),
            (1, 5, 0.1, '<b>Artisan Family</b> You grew up in an artisan‚Äôs workshop. Your days were filled with the incessant sounds of creation.', '3 Common Diagrams/Formulae'),
            (1, 6, 0.2, '<b>Entertainer Family</b> You grew up with a band of performers. You may have traveled or you may have performed at a theater.', '1 Instrument & 1 Friend'),
            (1, 8 ,0.3, '<b>Peasant Family</b> You grew up on a farm in the countryside. You didn‚Äôt have much to your name and life was simple, but dangerous.', 'A Lucky Token (+1 Luck)'),

            -- group 2: Nilfgaardian
            (2, 1, 0.1, '<b>Aristocracy</b> You grew up in a manor, trained to be well-versed in the world of the court. The luxury was just your incentive.', 'Paper of Nobility<br>(+2 Reputation)'),
            (2, 2, 0.1, '<b>High Clergy</b> You were raised among the clergy of the Great Sun. You grew up pious and always aware that the Church would guide you.', 'A Holy Symbol<br>(+1 Courage)'),
            (2, 3, 0.1, '<b>Knights</b> You grew up knowing that your duty was to the Emperor, and that all of your luxury was reward for your eventual service.', 'Personal Heraldry<br>(+1 Reputation)'),
            (2, 4, 0.1, '<b>Artisan Family</b> You grew up in an artisan‚Äôs shop, learning to craft products valued for their quality.', '3 Common Diagrams/Formulae'),
            (2, 5, 0.1, '<b>Merchant Family</b> You grew up selling products around the Empire. You saw exotic goods from all around the world.', '2 Acquaintances'),
            (2, 6, 0.2, '<b>Born into Servitude</b> You were born into servitude and lived in simple quarters. You owned very little and toiled often.', 'A trained bird or serpent'),
            (2, 8 ,0.3, '<b>Peasant Family</b> You grew up on one of the thousands of farms across the Empire. You had little to your name but life was simple.', 'A Lucky Token<br>(+1 Luck)'),

            -- group 3: Elderland (non-human)
            (3, 1, 0.1, '<b>Aristocracy</b> You grew up in a palace and were constantly reminded of the glory of the past. You were expected to live up to your heritage.', 'Paper of Nobility<br>(+2 Reputation)'),
            (3, 2, 0.1, '<b>Noble Warrior</b> You grew up as a noble warrior‚Äôs child, expected to rise to your family‚Äôs reputation and to never dishonor your heritage.', 'Personal Heraldry<br>(+1 Reputation)'),
            (3, 3, 0.1, '<b>Merchants</b> You grew up among traveling merchants. Life was difficult sometimes but non-human crafts are always valuable.', '2 Acquaintances'),
            (3, 4, 0.1, '<b>Scribe Family</b> You grew up as the child of scribes, recording and protecting elderfolk history.', 'A Chronicle<br>(+1 Education)'),
            (3, 5, 0.1, '<b>Entertainers</b> You grew up singing songs and performing plays. You worked backstage, helped write songs, and fixed instruments.', '1 Instrument & 1 Friend'),
            (3, 6, 0.2, '<b>Artisan Family</b> You grew up in a family of artisans, visiting ancient palaces for inspiration and spending hours every day on projects.', '3 Common Diagrams/Formulae'),
            (3, 8 ,0.3, '<b>Lowborn Family</b> You grew up in a lowborn family, tending to the manors of others or working small jobs around your home city.', 'A Lucky Token<br>(+1 Luck)')
         ) AS raw_data_en(group_id, num, probability, status_txt, gear)
),
vals AS (
         SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                 '<td>' || status_txt || '</td>' ||
                 '<td>' || gear || '</td>') AS text,
                num,
                probability,
                lang,
                group_id
         FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_family_status' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, rules_vals(group_id, body, name, id) AS (
  SELECT CASE name WHEN 'is_nordman' THEN 1
                   WHEN 'is_nilfgaardian' THEN 2
                   WHEN 'is_elderland' THEN 3 END
       , body, name, ru_id FROM rules WHERE name in ('is_nordman','is_nilfgaardian', 'is_elderland')
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id, metadata)
SELECT 'wcc_past_family_status_o' || to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
       vals.num AS sort_order,
       rules_vals.id AS visible_ru_ru_id,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
FROM vals
CROSS JOIN meta
JOIN rules_vals ON rules_vals.group_id = vals.group_id
ON CONFLICT (an_id) DO NOTHING;

-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è status_txt –∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏–∑ gear
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_family_status' AS qu_id
                , 'character' AS entity)
, status_data AS (
  SELECT 'ru' AS lang, status_ru.*
    FROM (VALUES
            (1, 1, '<b>–ê—Ä–∏—Å—Ç–æ–∫—Ä–∞—Ç–∏—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –±–æ–≥–∞—Ç–æ–º –æ—Å–æ–±–Ω—è–∫–µ, –≥–¥–µ —Å–ª—É–≥–∏ –∏—Å–ø–æ–ª–Ω—è–ª–∏ –ª—é–±—É—é –≤–∞—à—É –ø—Ä–∏—Ö–æ—Ç—å. –û—Ç –≤–∞—Å –æ–∂–∏–¥–∞–ª–∏ —Ö–æ—Ä–æ—à–µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏ —É–º–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ.'),
            (1, 2, '<b>–ü–æ–¥ –æ–ø–µ–∫–æ–π –º–∞–≥–∞</b> –í —é–Ω–æ–º –≤–æ–∑—Ä–∞—Å—Ç–µ –≤–∞—Å –æ—Ç–¥–∞–ª–∏ –ø–æ–¥ –æ–ø–µ–∫—É –º–∞–≥–∞. –í—ã –∂–∏–ª–∏ –≤ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö, –Ω–æ –æ–ø–µ–∫—É–Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –≤–∏–¥–µ–ª–∏ ‚Äî –æ–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –±—ã–ª –∑–∞–Ω—è—Ç.'),
            (1, 3, '<b>–†—ã—Ü–∞—Ä—Å—Ç–≤–æ</b> –í—ã –∂–∏–ª–∏ –≤ –æ—Å–æ–±–Ω—è–∫–µ, –≥–¥–µ –∏–∑ –≤–∞—Å —Ä–∞—Å—Ç–∏–ª–∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ª–æ—Ä–¥–∞ –∏–ª–∏ –ª–µ–¥–∏. –í–∞—à–∞ —Å—É–¥—å–±–∞ –±—ã–ª–∞ –ø—Ä–µ–¥—Ä–µ—à–µ–Ω–∞ —Å —Ä–æ–∂–¥–µ–Ω–∏—è.'),
            (1, 4, '<b>–°–µ–º—å—è —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –∫—É–ø–µ—á–µ—Å–∫–æ–π —Å—Ä–µ–¥–µ, –ø–æ–¥ –∫—Ä–∏–∫–∏ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –∏ –∑–≤–æ–Ω –º–æ–Ω–µ—Ç.'),
            (1, 5, '<b>–°–µ–º—å—è –º–∞—Å—Ç–µ—Ä–æ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–æ–π –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π, –≥–¥–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å—Ç—É—á–∞–ª–∏ –º–æ–ª–æ—Ç–∫–∏ –∏–ª–∏ —Ä–∞–∑–¥–∞–≤–∞–ª–∏—Å—å –¥—Ä—É–≥–∏–µ –∑–≤—É–∫–∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞.'),
            (1, 6, '<b>–°–µ–º—å—è –∞—Ä—Ç–∏—Å—Ç–æ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –∞–∫—Ç—ë—Ä—Å–∫–æ–π —Ç—Ä—É–ø–ø–µ. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º–∏ —Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–≤–∞–ª–∏ –∏–ª–∏ –∂–µ –≤—ã—Å—Ç—É–ø–∞–ª–∏ –≤ —Ç–µ–∞—Ç—Ä–µ.'),
            (1, 8, '<b>–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∞—è —Å–µ–º—å—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –Ω–∞ —Ñ–µ—Ä–º–µ –≤ —Å–µ–ª—å—Å–∫–æ–π –≥–ª—É—à–∏. –ó–∞ –¥—É—à–æ–π —É –≤–∞—Å –ø–æ—á—Ç–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç, –∞ –∂–∏–∑–Ω—å –±—ã–ª–∞ –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –æ–ø–∞—Å–Ω–æ–π.'),
            (2, 1, '<b>–ê—Ä–∏—Å—Ç–æ–∫—Ä–∞—Ç–∏—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –±–æ–≥–∞—Ç–æ–º –æ—Å–æ–±–Ω—è–∫–µ, –≥–¥–µ –≤–∞—Å –Ω–µ–ø–ª–æ—Ö–æ –Ω–∞—É—á–∏–ª–∏ –≤—ã–∂–∏–≤–∞—Ç—å –≤ –º–∏—Ä–µ –ø—Ä–∏–¥–≤–æ—Ä–Ω—ã—Ö –∏–Ω—Ç—Ä–∏–≥. –†–æ—Å–∫–æ—à—å —Å–ª—É–∂–∏–ª–∞ –ª–∏—à—å —Å—Ç–∏–º—É–ª–æ–º –∫ –æ–±—É—á–µ–Ω–∏—é.'),
            (2, 2, '<b>–í—ã—Å—à–µ–µ –∂—Ä–µ—á–µ—Å—Ç–≤–æ</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ —Å—Ä–µ–¥–∏ –∂—Ä–µ—Ü–æ–≤ –í–µ–ª–∏–∫–æ–≥–æ –°–æ–ª–Ω—Ü–∞. –í—ã –±—ã–ª–∏ –Ω–∞–±–æ–∂–Ω—ã–º —Ä–µ–±—ë–Ω–∫–æ–º, —É–≤–µ—Ä–µ–Ω–Ω—ã–º, —á—Ç–æ —Ü–µ—Ä–∫–æ–≤—å –≤—Å–µ–≥–¥–∞ —É–∫–∞–∂–µ—Ç –≤–µ—Ä–Ω—ã–π –ø—É—Ç—å.'),
            (2, 3, '<b>–†—ã—Ü–∞—Ä—Å—Ç–≤–æ</b> –í—ã —Ä–æ—Å–ª–∏, –∑–Ω–∞—è, —á—Ç–æ –≤–∞—à –¥–æ–ª–≥ ‚Äî —Å–ª—É–∂–∏—Ç—å –∏–º–ø–µ—Ä–∞—Ç–æ—Ä—É, –∏ —Ä–æ—Å–∫–æ—à—å ‚Äî –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ –±—É–¥—É—â—É—é —Å–ª—É–∂–±—É.'),
            (2, 4, '<b>–°–µ–º—å—è –º–∞—Å—Ç–µ—Ä–æ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π, —É—á–∞—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ü–µ–Ω–∏–ª–∏—Å—å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ.'),
            (2, 5, '<b>–°–µ–º—å—è —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤</b> –í—ã —Ä–æ—Å–ª–∏, –ø—Ä–æ–¥–∞–≤–∞—è —Ç–æ–≤–∞—Ä—ã –ø–æ –≤—Å–µ–π –ò–º–ø–µ—Ä–∏–∏, –∏ –ø–æ–≤–∏–¥–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–¥–µ–ª–∏—è —Å–æ –≤—Å–µ–≥–æ –º–∏—Ä–∞.'),
            (2, 6, '<b>–†–∞–±—Å—Ç–≤–æ</b> –í—ã —Ä–∞–± —Å —Ä–æ–∂–¥–µ–Ω–∏—è. –í—ã –∂–∏–ª–∏ –≤ –ø—Ä–æ—Å—Ç–æ–π –∫–æ–º–Ω–∞—Ç—É—à–∫–µ –∏ –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞–ª–∏, –∞ —Å–∫–∞—Ä–± –±—ã–ª —Å–∫—É–¥–µ–Ω.'),
            (2, 8, '<b>–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∞—è —Å–µ–º—å—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –Ω–∞ –æ–¥–Ω–æ–π –∏–∑ —Ç—ã—Å—è—á —Ñ–µ—Ä–º –ò–º–ø–µ—Ä–∏–∏. –ó–∞ –¥—É—à–æ–π —É –≤–∞—Å –ø–æ—á—Ç–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç, –Ω–æ –∂–∏–∑–Ω—å –±—ã–ª–∞ –ø—Ä–æ—Å—Ç–æ–π.'),
            (3, 1, '<b>–ê—Ä–∏—Å—Ç–æ–∫—Ä–∞—Ç–∏—è</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤–æ –¥–≤–æ—Ä—Ü–µ, –≥–¥–µ –≤–∞–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–∞–ø–æ–º–∏–Ω–∞–ª–∏ –æ —Å–ª–∞–≤–Ω–æ–º –ø—Ä–æ—à–ª–æ–º, –æ–∂–∏–¥–∞—è, —á—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ –¥–æ—Å—Ç–æ–π–Ω—ã —Å–≤–æ–∏—Ö –ø—Ä–µ–¥–∫–æ–≤.'),
            (3, 2, '<b>–ë–ª–∞–≥–æ—Ä–æ–¥–Ω—ã–π –≤–æ–∏–Ω</b> –í—ã –¥–∏—Ç—è –±–ª–∞–≥–æ—Ä–æ–¥–Ω–æ–≥–æ –≤–æ–∏–Ω–∞. –û—Ç –≤–∞—Å –æ–∂–∏–¥–∞—é—Ç, —á—Ç–æ –≤—ã –æ–ø—Ä–∞–≤–¥–∞–µ—Ç–µ —Ä–µ–ø—É—Ç–∞—Ü–∏—é —Å–µ–º—å–∏ –∏ –Ω–µ –æ–ø–æ–∑–æ—Ä–∏—Ç–µ —Å–≤–æ—ë –Ω–∞—Å–ª–µ–¥–∏–µ.'),
            (3, 3, '<b>–°–µ–º—å—è —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ —Å–µ–º—å–µ —Å—Ç—Ä–∞–Ω—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤. –ò–Ω–æ–≥–¥–∞ –∂–∏–∑–Ω—å –±—ã–ª–∞ —Ç—Ä—É–¥–Ω–∞, –Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –Ω–µ–ª—é–¥—è–º–∏ —Ç–æ–≤–∞—Ä—ã –≤—Å–µ–≥–¥–∞ —Ü–µ–Ω—è—Ç—Å—è.'),
            (3, 4, '<b>–°–µ–º—å—è –≥—Ä–∞–º–æ—Ç–µ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ —Å–µ–º—å–µ –≥—Ä–∞–º–æ—Ç–µ–≤. –í–∞—à–∏ —Ä–æ–¥–∏—Ç–µ–ª–∏ –±–µ—Ä–µ–≥–ª–∏ –ª–µ—Ç–æ–ø–∏—Å–∏ –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤, —Å—Ç–∞—Ä–∞—Ç–µ–ª—å–Ω–æ –∏—Ö –∑–∞–ø–∏—Å—ã–≤–∞—è –∏ —Ö—Ä–∞–Ω—è.'),
            (3, 5, '<b>–ê—Ä—Ç–∏—Å—Ç—ã</b> –° –¥–µ—Ç—Å—Ç–≤–∞ –≤—ã –∏—Å–ø–æ–ª–Ω—è–ª–∏ –ø–µ—Å–Ω–∏ –∏ –∏–≥—Ä–∞–ª–∏ –Ω–∞ —Å—Ü–µ–Ω–µ, –∞ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ–º–æ–≥–∞–ª–∏ –ø–∏—Å–∞—Ç—å –ø–µ—Å–Ω–∏ –∏ —á–∏–Ω–∏–ª–∏ –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.'),
            (3, 6, '<b>–°–µ–º—å—è –º–∞—Å—Ç–µ—Ä–æ–≤</b> –í—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ —Å–µ–º—å–µ –º–∞—Å—Ç–µ—Ä–æ–≤, –ø–æ—Å–µ—â–∞–ª–∏ –¥—Ä–µ–≤–Ω–∏–µ –¥–≤–æ—Ä—Ü—ã –¥–ª—è –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –ø—Ä–æ–≤–æ–¥–∏–ª–∏ –∑–∞ —Ä–∞–±–æ—Ç–æ–π –º–Ω–æ–≥–æ —á–∞—Å–æ–≤.'),
            (3, 8, '<b>–ù–∏–∑–∫–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ</b> –í—ã –∏–∑ –ø—Ä–æ—Å—Ç–æ–π —Å–µ–º—å–∏ –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ –Ω–∞ –∂–∏–∑–Ω—å, –ø—Ä–∏—Å–ª—É–∂–∏–≤–∞—è –≤ —á—É–∂–∏—Ö –¥–æ–º–∞—Ö –ª–∏–±–æ –ø–µ—Ä–µ–±–∏–≤–∞—è—Å—å —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Ä–∞–±–æ—Ç–∞–º–∏ –≤ —Ä–æ–¥–Ω–æ–º –≥–æ—Ä–æ–¥–µ.')
          ) AS status_ru(group_id, num, status_txt)
  UNION ALL
  SELECT 'en' AS lang, status_en.*
    FROM (VALUES
            (1, 1, '<b>Aristocracy</b> You grew up in a noble manor with servants to wait on you, but you were always expected to behave and impress.'),
            (1, 2, '<b>Adopted by a Mage</b> You were given to a mage at a young age. You lived in comfort but barely saw your caretaker, who was always busy.'),
            (1, 3, '<b>Knights</b> You grew up in a manor where you learned to be a proper lady or lord. Your fate was set from birth.'),
            (1, 4, '<b>Merchant Family</b> You grew up among merchants, always surrounded by yelling, haggling, and money.'),
            (1, 5, '<b>Artisan Family</b> You grew up in an artisan''s workshop. Your days were filled with the incessant sounds of creation.'),
            (1, 6, '<b>Entertainer Family</b> You grew up with a band of performers. You may have traveled or you may have performed at a theater.'),
            (1, 8, '<b>Peasant Family</b> You grew up on a farm in the countryside. You didn''t have much to your name and life was simple, but dangerous.'),
            (2, 1, '<b>Aristocracy</b> You grew up in a manor, trained to be well-versed in the world of the court. The luxury was just your incentive.'),
            (2, 2, '<b>High Clergy</b> You were raised among the clergy of the Great Sun. You grew up pious and always aware that the Church would guide you.'),
            (2, 3, '<b>Knights</b> You grew up knowing that your duty was to the Emperor, and that all of your luxury was reward for your eventual service.'),
            (2, 4, '<b>Artisan Family</b> You grew up in an artisan''s shop, learning to craft products valued for their quality.'),
            (2, 5, '<b>Merchant Family</b> You grew up selling products around the Empire. You saw exotic goods from all around the world.'),
            (2, 6, '<b>Born into Servitude</b> You were born into servitude and lived in simple quarters. You owned very little and toiled often.'),
            (2, 8, '<b>Peasant Family</b> You grew up on one of the thousands of farms across the Empire. You had little to your name but life was simple.'),
            (3, 1, '<b>Aristocracy</b> You grew up in a palace and were constantly reminded of the glory of the past. You were expected to live up to your heritage.'),
            (3, 2, '<b>Noble Warrior</b> You grew up as a noble warrior''s child, expected to rise to your family''s reputation and to never dishonor your heritage.'),
            (3, 3, '<b>Merchants</b> You grew up among traveling merchants. Life was difficult sometimes but non-human crafts are always valuable.'),
            (3, 4, '<b>Scribe Family</b> You grew up as the child of scribes, recording and protecting elderfolk history.'),
            (3, 5, '<b>Entertainers</b> You grew up singing songs and performing plays. You worked backstage, helped write songs, and fixed instruments.'),
            (3, 6, '<b>Artisan Family</b> You grew up in a family of artisans, visiting ancient palaces for inspiration and spending hours every day on projects.'),
            (3, 8, '<b>Lowborn Family</b> You grew up in a lowborn family, tending to the manors of others or working small jobs around your home city.')
         ) AS status_en(group_id, num, status_txt)
)
, ins_status_txt AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*status_data.group_id+status_data.num, 'FM0000') ||'.'|| meta.entity ||'.'|| 'family_status') AS id
       , meta.entity, 'family_status', status_data.lang, status_data.status_txt
    FROM status_data
    CROSS JOIN meta
)
, gear_data AS (
  SELECT 'ru' AS lang, gear_ru.*
    FROM (VALUES
            (1, 1, 1, '–î–≤–æ—Ä—è–Ω—Å–∫–∞—è –≥—Ä–∞–º–æ—Ç–∞', '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏', NULL),
            (1, 2, 1, '–õ–µ—Ç–æ–ø–∏—Å—å', '+1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é', NULL),
            (1, 3, 1, '–õ–∏—á–Ω—ã–π –≥–µ—Ä–±', '+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏', NULL),
            (1, 4, 1, '–∑–Ω–∞–∫–æ–º—ã–π', NULL, 2),
            (1, 5, 1, '–æ–±—ã—á–Ω—ã–π —á–µ—Ä—Ç–µ–∂/—Ñ–æ—Ä–º—É–ª–∞', NULL, 3),
            (1, 6, 1, '–º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç', NULL, 1),
            (1, 6, 2, '–¥—Ä—É–≥', NULL, 1),
            (1, 8, 1, '–°—á–∞—Å—Ç–ª–∏–≤—ã–π —Ç–∞–ª–∏—Å–º–∞–Ω', '+1 –∫ –£–¥–∞—á–µ', NULL),
            (2, 1, 1, '–î–≤–æ—Ä—è–Ω—Å–∫–∞—è –≥—Ä–∞–º–æ—Ç–∞', '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏', NULL),
            (2, 2, 1, '–°–≤—è—â–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª', '+1 –∫ –•—Ä–∞–±—Ä–æ—Å—Ç–∏', NULL),
            (2, 3, 1, '–õ–∏—á–Ω—ã–π –≥–µ—Ä–±', '+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏', NULL),
            (2, 4, 1, '–æ–±—ã—á–Ω—ã–π —á–µ—Ä—Ç–µ–∂/—Ñ–æ—Ä–º—É–ª–∞', NULL, 3),
            (2, 5, 1, '–∑–Ω–∞–∫–æ–º—ã–π', NULL, 2),
            (2, 6, 1, '–û–±—É—á–µ–Ω–Ω–∞—è –ø—Ç–∏—Ü–∞ –∏–ª–∏ –∑–º–µ–π', NULL, NULL),
            (2, 8, 1, '–°—á–∞—Å—Ç–ª–∏–≤—ã–π —Ç–∞–ª–∏—Å–º–∞–Ω', '+1 –∫ –£–¥–∞—á–µ', NULL),
            (3, 1, 1, '–î–≤–æ—Ä—è–Ω—Å–∫–∞—è –≥—Ä–∞–º–æ—Ç–∞', '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏', NULL),
            (3, 2, 1, '–õ–∏—á–Ω—ã–π –≥–µ—Ä–±', '+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏', NULL),
            (3, 3, 1, '–∑–Ω–∞–∫–æ–º—ã–π', NULL, 2),
            (3, 4, 1, '–õ–µ—Ç–æ–ø–∏—Å—å', '+1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é', NULL),
            (3, 5, 1, '–º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç', NULL, 1),
            (3, 5, 2, '–¥—Ä—É–≥', NULL, 1),
            (3, 6, 1, '–æ–±—ã—á–Ω—ã–π —á–µ—Ä—Ç–µ–∂/—Ñ–æ—Ä–º—É–ª–∞', NULL, 3),
            (3, 8, 1, '–°—á–∞—Å—Ç–ª–∏–≤—ã–π —Ç–∞–ª–∏—Å–º–∞–Ω', '+1 –∫ –£–¥–∞—á–µ', NULL)
          ) AS gear_ru(group_id, num, item_num, gear_name, gear_notes, gear_amount)
  UNION ALL
  SELECT 'en' AS lang, gear_en.*
    FROM (VALUES
            (1, 1, 1, 'Paper of Nobility', '+2 Reputation', NULL),
            (1, 2, 1, 'A Chronicle', '+1 Education', NULL),
            (1, 3, 1, 'Personal Heraldry', '+1 Reputation', NULL),
            (1, 4, 1, 'Acquaintance', NULL, 2),
            (1, 5, 1, 'Common Diagram/Formula', NULL, 3),
            (1, 6, 1, 'Instrument', NULL, 1),
            (1, 6, 2, 'Friend', NULL, 1),
            (1, 8, 1, 'A Lucky Token', '+1 Luck', NULL),
            (2, 1, 1, 'Paper of Nobility', '+2 Reputation', NULL),
            (2, 2, 1, 'A Holy Symbol', '+1 Courage', NULL),
            (2, 3, 1, 'Personal Heraldry', '+1 Reputation', NULL),
            (2, 4, 1, 'Common Diagram/Formula', NULL, 3),
            (2, 5, 1, 'Acquaintance', NULL, 2),
            (2, 6, 1, 'A trained bird or serpent', NULL, NULL),
            (2, 8, 1, 'A Lucky Token', '+1 Luck', NULL),
            (3, 1, 1, 'Paper of Nobility', '+2 Reputation', NULL),
            (3, 2, 1, 'Personal Heraldry', '+1 Reputation', NULL),
            (3, 3, 1, 'Acquaintance', NULL, 2),
            (3, 4, 1, 'A Chronicle', '+1 Education', NULL),
            (3, 5, 1, 'Instrument', NULL, 1),
            (3, 5, 2, 'Friend', NULL, 1),
            (3, 6, 1, 'Common Diagram/Formula', NULL, 3),
            (3, 8, 1, 'A Lucky Token', '+1 Luck', NULL)
         ) AS gear_en(group_id, num, item_num, gear_name, gear_notes, gear_amount)
)
, ins_gear_name AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*gear_data.group_id+gear_data.num, 'FM0000') ||'.'|| 'gear' ||'.'|| gear_data.item_num ||'.'|| 'name') AS id
       , 'character', 'gear_name', gear_data.lang, gear_data.gear_name
    FROM gear_data
    CROSS JOIN meta
)
, ins_gear_notes AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*gear_data.group_id+gear_data.num, 'FM0000') ||'.'|| 'gear' ||'.'|| gear_data.item_num ||'.'|| 'notes') AS id
       , 'character', 'gear_notes', gear_data.lang, gear_data.gear_notes
    FROM gear_data
    CROSS JOIN meta
    WHERE gear_data.gear_notes IS NOT NULL
)
-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
, raw_data AS (
  SELECT DISTINCT group_id, num
  FROM (VALUES
          (1, 1), (1, 2), (1, 3), (1, 4), (1, 5), (1, 6), (1, 8),
          (2, 1), (2, 2), (2, 3), (2, 4), (2, 5), (2, 6), (2, 8),
          (3, 1), (3, 2), (3, 3), (3, 4), (3, 5), (3, 6), (3, 8)
        ) AS v(group_id, num)
)
, gear_items AS (
  SELECT DISTINCT group_id, num, item_num, CASE WHEN gear_notes IS NOT NULL THEN 1 ELSE 0 END AS is_gear_notes, gear_amount
  FROM gear_data
)
INSERT INTO effects (scope, an_an_id, body)
-- –≠—Ñ—Ñ–µ–∫—Ç: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ family_status
SELECT 'character', 'wcc_past_family_status_o' || to_char(raw_data.group_id, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.family_status'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| meta.entity ||'.'|| 'family_status')::text)
    )
  )
FROM raw_data
CROSS JOIN meta
UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ gear
SELECT 'character', 'wcc_past_family_status_o' || to_char(gear_items.group_id, 'FM00') || to_char(gear_items.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      (
        jsonb_build_object(
          'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*gear_items.group_id+gear_items.num, 'FM0000') ||'.'|| 'gear' ||'.'|| gear_items.item_num ||'.'|| 'name')::text),
          'weight', 0
        ) ||
        CASE WHEN gear_items.is_gear_notes IS NOT NULL 
          THEN jsonb_build_object('notes', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*gear_items.group_id+gear_items.num, 'FM0000') ||'.'|| 'gear' ||'.'|| gear_items.item_num ||'.'|| 'notes')::text))
          ELSE '{}'::jsonb
        END ||
        CASE WHEN gear_items.gear_amount IS NOT NULL 
          THEN jsonb_build_object('amount', gear_items.gear_amount)
          ELSE '{}'::jsonb
        END
      )
    )
  )
FROM gear_items
CROSS JOIN meta;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_past_family_fate' , 'wcc_past_family_status' UNION ALL
  SELECT 'wcc_past_parents'     , 'wcc_past_family_status' UNION ALL
  SELECT 'wcc_past_parents_fate', 'wcc_past_family_status' UNION ALL
  SELECT 'wcc_past_parents_who' , 'wcc_past_family_status';
-- <<< END sql/015_past_family_status.sql

-- >>> BEGIN sql/016_past_friend.sql

\echo '016_past_friend.sql'
-- –£–∑–µ–ª: –ü–æ–≤–ª–∏—è–≤—à–∏–π –¥—Ä—É–≥

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_friend' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–ö—Ç–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–≤–ª–∏—è–ª –Ω–∞ –≤–∞—à–µ –º–∏—Ä–æ–≤–æ–∑–∑—Ä–µ–Ω–∏–µ?'),
                            ('en', 'Who influenced your worldview the most?')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–î—Ä—É–≥/–í–ª–∏—è–Ω–∏–µ'),
                                     ('ru', 3, '–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Friend/Influence'),
                                     ('en', 3, 'Starting Gear'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_friend' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.friend')::text
           )
         )
    FROM meta;


-- –û—Ç–≤–µ—Ç—ã (–∫–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç 10%)
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            -- group 1: –°–µ–≤–µ—Ä—è–Ω–∏–Ω
            (1, 1, 0.1, '<b>–¶–µ—Ä–∫–æ–≤—å</b> –ù–∞ –≤–∞—Å —Å–∏–ª—å–Ω–æ –ø–æ–≤–ª–∏—è–ª–∞ –º–µ—Å—Ç–Ω–∞—è —Ä–µ–ª–∏–≥–∏—è. –í—ã –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –ø—Ä–æ–≤–æ–¥–∏–ª–∏ –º–Ω–æ–≥–æ —á–∞—Å–æ–≤ –≤ —Ü–µ—Ä–∫–≤–∏.', '–°–≤—è—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç'),
            (1, 2, 0.1, '<b>–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫</b> –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º –≤–∞–º —Å–ª—É–∂–∏–ª —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Ü–µ–Ω–∏—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ.', '–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –≤–∞–º–∏ —Å—É–≤–µ–Ω–∏—Ä'),
            (1, 3, 0.1, '<b>–ì—Ä–∞—Ñ</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –≥—Ä–∞—Ñ (–≥—Ä–∞—Ñ–∏–Ω—è), –Ω–∞—É—á–∏–≤—à–∏–π –±—Ä–∞—Ç—å —Å–µ–±—è –≤ —Ä—É–∫–∏.', '–°–µ—Ä–µ–±—Ä—è–Ω–æ–µ –∫–æ–ª—å—Ü–æ'),
            (1, 4, 0.1, '<b>–ú–∞–≥</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª –º–∞–≥, –Ω–∞—É—á–∏–≤—à–∏–π –Ω–µ –±–æ—è—Ç—å—Å—è –º–∞–≥–∏–∏ –∏ –≤—Å—ë –ø–æ–¥–≤–µ—Ä–≥–∞—Ç—å —Å–æ–º–Ω–µ–Ω–∏—é.', '–ü–æ–¥–≤–µ—Å–∫–∞'),
            (1, 5, 0.1, '<b>–í–µ–¥—å–º–∞</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª–∞ –¥–µ—Ä–µ–≤–µ–Ω—Å–∫–∞—è –≤–µ–¥—å–º–∞, –ø–æ–∫–∞–∑–∞–≤—à–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –∑–Ω–∞–Ω–∏–π.', '–ö—É–∫–ª–∞ –¥–ª—è —á—ë—Ä–Ω–æ–π –º–∞–≥–∏–∏'),
            (1, 6, 0.1, '<b>–ü—Ä–æ–∫–ª—è—Ç—ã–π</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª —á–µ–ª–æ–≤–µ–∫, —Å—Ç—Ä–∞–¥–∞–≤—à–∏–π –æ—Ç –ø—Ä–æ–∫–ª—è—Ç–∏—è; –æ–Ω –Ω–∞—É—á–∏–ª –≤–∞—Å –Ω–∏–∫–æ–≥–¥–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ —Å—É–¥–∏—Ç—å —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–æ.', '–†–µ–∑–Ω–æ–π —Ç–æ—Ç–µ–º'),
            (1, 7, 0.1, '<b>–ê—Ä—Ç–∏—Å—Ç</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∞—Ä—Ç–∏—Å—Ç, —á—Ç–æ –Ω–∞—É—á–∏–ª –º–Ω–æ–∂–µ—Å—Ç–≤—É —Å–ø–æ—Å–æ–±–æ–≤ –ø—Ä–∏–≤–ª–µ—á—å –∫ —Å–µ–±–µ –≤–Ω–∏–º–∞–Ω–∏–µ.', '–ê—Ñ–∏—à–∞ –∏–ª–∏ –±–∏–ª–µ—Ç'),
            (1, 8, 0.1, '<b>–¢–æ—Ä–≥–æ–≤–µ—Ü</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª —Ç–æ—Ä–≥–æ–≤–µ—Ü, –Ω–∞—É—á–∏–≤—à–∏–π –∏–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç–∏ –∏ —Å–æ–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.', '–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –≤–∞–º–∏ –º–æ–Ω–µ—Ç–∫–∞'),
            (1, 9, 0.1, '<b>–ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å, –∫–∞–∫ –æ —Å–µ–±–µ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è.', '–ú–∞—Å–∫–∞'),
            (1,10, 0.1, '<b>–í–æ–∏–Ω</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª —Å–æ–ª–¥–∞—Ç, –Ω–∞—É—á–∏–≤—à–∏–π –∑–∞—â–∏—â–∞—Ç—å—Å—è.', '–ë–æ–µ–≤–æ–π —Ç—Ä–æ—Ñ–µ–π'),

            -- group 2: –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–µ—Ü
            (2, 1, 0.1, '<b>–ö—É–ª—å—Ç –í–µ–ª–∏–∫–æ–≥–æ –°–æ–ª–Ω—Ü–∞</b> –ù–∞ –≤–∞—Å —Å–∏–ª—å–Ω–æ –ø–æ–≤–ª–∏—è–ª–∞ —Ü–µ—Ä–∫–æ–≤—å. –í—ã –ø–æ—Å–≤—è—Ç–∏–ª–∏ –≥–æ–¥—ã –∏–∑—É—á–µ–Ω–∏—é —Ä–∏—Ç—É–∞–ª–æ–≤ –∏ –ø–µ—Å–Ω–æ–ø–µ–Ω–∏–π.', '–¶–µ—Ä–µ–º–æ–Ω–∏–∞–ª—å–Ω–∞—è –º–∞—Å–∫–∞'),
            (2, 2, 0.1, '<b>–ò–∑–≥–Ω–∞–Ω–Ω–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∏–∑–≥–Ω–∞–Ω–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è –≤ —É—Å—Ç–æ—è—Ö –æ–±—â–µ—Å—Ç–≤–∞.', '–Ø—Ä–∫–∏–π —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–π –∑–Ω–∞—á–æ–∫'),
            (2, 3, 0.1, '<b>–ì—Ä–∞—Ñ</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –≥—Ä–∞—Ñ, –Ω–∞—É—á–∏–≤—à–∏–π –≤–µ—Å—Ç–∏ –¥—Ä—É–≥–∏—Ö –∑–∞ —Å–æ–±–æ–π –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ª—é–¥—å–º–∏.', '–°–µ—Ä–µ–±—Ä—è–Ω–æ–µ –æ–∂–µ—Ä–µ–ª—å–µ'),
            (2, 4, 0.1, '<b>–ú–∞–≥</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –º–∞–≥, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—Ä—è–¥–∫–∞ –∏ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏.', '–≠–º–±–ª–µ–º–∞'),
            (2, 5, 0.1, '<b>–°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∏–º–ø–µ—Ä—Å–∫–∏–π –¥–µ—Ç–µ–∫—Ç–∏–≤; –≤—ã –ø—Ä–æ–≤–µ–ª–∏ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ —Ä–∞–∑–≥–∞–¥—ã–≤–∞–Ω–∏–µ–º —Ç–∞–π–Ω.', '–õ—É–ø–∞'),
            (2, 6, 0.1, '<b>–û—Ö–æ—Ç–Ω–∏–∫ –Ω–∞ –º–∞–≥–æ–≤</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª –æ—Ö–æ—Ç–Ω–∏–∫ –Ω–∞ –º–∞–≥–æ–≤, –Ω–∞—É—á–∏–≤—à–∏–π –æ—Å—Ç–µ—Ä–µ–≥–∞—Ç—å—Å—è –º–∞–≥–∏–∏ –∏ –º–∞–≥–æ–≤.', '–ö–æ–ª—å—Ü–æ —Å –¥–∏–º–µ—Ä–∏—Ç–æ–º'),
            (2, 7, 0.1, '<b>–í–æ–∏–Ω</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª —Å–æ–ª–¥–∞—Ç, —Ç—Ä–∞–≤–∏–≤—à–∏–π –±–∞–π–∫–∏ –æ–± –æ–ø–∞—Å–Ω–æ—Å—Ç—è—Ö –∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è—Ö.', '–ë–æ–µ–≤–æ–π —Ç—Ä–æ—Ñ–µ–π'),
            (2, 8, 0.1, '<b>–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫</b> –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º –≤–∞–º —Å–ª—É–∂–∏–ª —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Ü–µ–Ω–∏—Ç—å –Ω–∞–≤—ã–∫–∏ –∏ —Ç–æ—á–Ω–æ—Å—Ç—å.', '–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–∞—è –≤–∞–º–∏ –±–µ–∑–¥–µ–ª—É—à–∫–∞'),
            (2, 9, 0.1, '<b>–†–∞–∑—É–º–Ω–æ–µ —á—É–¥–æ–≤–∏—â–µ</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª–æ —Ä–∞–∑—É–º–Ω–æ–µ —á—É–¥–æ–≤–∏—â–µ, –Ω–∞—É—á–∏–≤—à–µ–µ –≤–∞—Å, —á—Ç–æ –Ω–µ –≤—Å–µ —á—É–¥–æ–≤–∏—â–∞ ‚Äî –∑–ª–æ.', '–°—Ç—Ä–∞–Ω–Ω—ã–π —Ç–æ—Ç–µ–º'),
            (2,10, 0.1, '<b>–ê—Ä—Ç–∏—Å—Ç</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∞—Ä—Ç–∏—Å—Ç, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –Ω–∞—É—á–∏–ª–∏—Å—å —Å–∞–º–æ–≤—ã—Ä–∞–∂–∞—Ç—å—Å—è.', '–ü–æ–¥–∞—Ä–æ–∫ –æ—Ç –ø–æ–∫–ª–æ–Ω–Ω–∏–∫–∞'),

            -- group 3: –ù–µ–ª—é–¥—å (Elderland)
            (3, 1, 0.1, '<b>–ß–µ–ª–æ–≤–µ–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª —á–µ–ª–æ–≤–µ–∫, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã —É–∑–Ω–∞–ª–∏, —á—Ç–æ —Ä–∞—Å–∏–∑–º –Ω–µ –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –æ—Å–Ω–æ–≤–∞–Ω–∏—è.', '–°–æ–ª–æ–º–µ–Ω–Ω–∞—è –∫—É–∫–ª–∞'),
            (3, 2, 0.1, '<b>–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫</b> –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º –≤–∞–º —Å–ª—É–∂–∏–ª —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Ü–µ–Ω–∏—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–æ –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤.', '–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –≤–∞–º–∏ –Ω–µ–±–æ–ª—å—à–æ–π —Å—É–≤–µ–Ω–∏—Ä'),
            (3, 3, 0.1, '<b>–ë–ª–∞–≥–æ—Ä–æ–¥–Ω—ã–π –≤–æ–∏–Ω</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –±–æ–µ–≤–æ–π —Ç–∞–Ω—Ü–æ—Ä –∏–ª–∏ –∑–∞—â–∏—Ç–Ω–∏–∫ –ú–∞—Ö–∞–∫–∞–º–∞, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å –ø–æ–Ω—è—Ç–∏—é —á–µ—Å—Ç–∏.', '–ü–æ–¥–∞—Ä–æ–∫ –≤ –ø–∞–º—è—Ç—å –æ –±–∏—Ç–≤–µ'),
            (3, 4, 0.1, '<b>–í—ã—Å–æ–∫–æ—Ä–æ–∂–¥–µ–Ω–Ω—ã–π</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª –≤—ã—Å–æ–∫–æ—Ä–æ–∂–¥–µ–Ω–Ω—ã–π, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å –≥–æ—Ä–¥–æ—Å—Ç–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞–º —ç—Ç–∏–∫–µ—Ç–∞.', '–ö–æ–ª—å—Ü–æ-–ø–µ—á–∞—Ç–∫–∞'),
            (3, 5, 0.1, '<b>–ê—Ä—Ç–∏—Å—Ç—ã</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª–∏ –∞—Ä—Ç–∏—Å—Ç—ã, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä—ã–º –≤—ã –ø–æ–∑–Ω–∞–ª–∏ –≤–∞–∂–Ω–æ—Å—Ç—å —Å—á–∞—Å—Ç—å—è –∏ –∫—Ä–∞—Å–æ—Ç—ã.', '–ê—Ñ–∏—à–∞ –∏–ª–∏ –±–∏–ª–µ—Ç'),
            (3, 6, 0.1, '<b>–ù–∞–ª—ë—Ç—á–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –Ω–∞–ª—ë—Ç—á–∏–∫, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø–æ–Ω—è–ª–∏, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–æ –±—Ä–∞—Ç—å —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ.', '–ù–∞–ø–ª–µ—á–Ω–∞—è —Å—É–º–∫–∞'),
            (3, 7, 0.1, '<b>–ú—É–¥—Ä–µ—Ü</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –º—É–¥—Ä–µ—Ü, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø–æ–∑–Ω–∞–ª–∏ –≤–∞–∂–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏–∏ –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤.', '–ö–Ω–∏–≥–∞ —Å–∫–∞–∑–æ–∫'),
            (3, 8, 0.1, '<b>–ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.', '–ú–∞—Å–∫–∞'),
            (3, 9, 0.1, '<b>–û—Ö–æ—Ç–Ω–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –æ—Ö–æ—Ç–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å –≤—ã–∂–∏–≤–∞—Ç—å –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ.', '–û—Ö–æ—Ç–Ω–∏—á–∏–π —Ç—Ä–æ—Ñ–µ–π'),
            (3,10, 0.1, '<b>–ö—Ä–µ—Å—Ç—å—è–Ω–∏–Ω –∏–∑ –Ω–∏–∑–∏–Ω</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∫—Ä–µ—Å—Ç—å—è–Ω–∏–Ω –∏–∑ –Ω–∏–∑–∏–Ω, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å –∂–∏—Ç—å —Å—á–∞—Å—Ç–ª–∏–≤–æ.', '–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∞—è –ª–æ–ø–∞—Ç–∞')
          ) AS raw_data_ru(group_id, num, probability, friend_txt, gear)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            -- group 1: Northern
            (1, 1, 0.1, '<b>A Church</b> You grew up with influence from your local religion and spent hours a day at church.', 'A Holy Text'),
            (1, 2, 0.1, '<b>An Artisan</b> Your greatest influence was an artisan who taught you to appreciate art and skill.', 'A Token You Made'),
            (1, 3, 0.1, '<b>A Count</b> Your greatest influence was a count or countess who taught you how to compose yourself.', 'A Silver Ring'),
            (1, 4, 0.1, '<b>A Mage</b> Your greatest influence was a mage who taught you not to fear magic and to always question.', 'A Small Pendant'),
            (1, 5, 0.1, '<b>A Witch</b> Your greatest influence was a village witch who taught you the importance of knowledge.', 'A Black Magic Doll'),
            (1, 6, 0.1, '<b>A Cursed Person</b> Your greatest influence was a cursed person who taught you to never judge others too harshly.', 'A Carved Totem'),
            (1, 7, 0.1, '<b>An Entertainer</b> Your greatest influence was an entertainer who taught you plenty about showmanship.', 'A Playbill or Ticket'),
            (1, 8, 0.1, '<b>A Merchant</b> Your greatest influence was a merchant who taught you how to be shrewd and clever.', 'A Coin You Earned'),
            (1, 9, 0.1, '<b>A Criminal</b> Your greatest influence was a criminal who taught you how to take care of yourself.', 'A Mask'),
            (1,10, 0.1, '<b>A Man At Arms</b> Your greatest influence was a soldier who taught you how to defend yourself.', 'A Battle Trophy'),

            -- group 2: Nilfgaardian
            (2, 1, 0.1, '<b>The Cult of the Great Sun</b> Your greatest influence was the Church. You spent years learning chants and rituals.', 'A Ceremonial Mask'),
            (2, 2, 0.1, '<b>An Outcast</b> Your greatest influence was a social outcast who taught you to always question society.', 'A Bright Colorful Badge'),
            (2, 3, 0.1, '<b>A Count</b> Your greatest influence was a count who taught you how to lead and instill order.', 'A Silver Necklace'),
            (2, 4, 0.1, '<b>A Mage</b> Your greatest influence was a mage who taught you the importance of order and caution.', 'An Emblem'),
            (2, 5, 0.1, '<b>A Solicitor</b> Your greatest influence was an imperial detective. You spent a lot of time solving mysteries.', 'A Magnifying Lens'),
            (2, 6, 0.1, '<b>A Mage Hunter</b> Your greatest influence was a mage hunter who taught you to be cautious of magic and mages.', 'A Ring with Dimeritium'),
            (2, 7, 0.1, '<b>A Man At Arms</b> Your greatest influence was a soldier who shared stories of danger and excitement.', 'A Trophy of Battle'),
            (2, 8, 0.1, '<b>An Artisan</b> Your greatest influence was an artisan who taught you to appreciate skill and precision.', 'A Trinket You Made'),
            (2, 9, 0.1, '<b>A Sentient Monster</b> Your greatest influence was a sentient monster that taught you that not all monsters are evil.', 'A Strange Totem'),
            (2,10, 0.1, '<b>An Entertainer</b> Your greatest influence was an entertainer who taught you to express yourself.', 'A Token from a Fan'),

            -- group 3: Elderland (non-human)
            (3, 1, 0.1, '<b>A Human</b> Your greatest influence was a human who taught you that sometimes racism is unfounded.', 'A Straw Doll'),
            (3, 2, 0.1, '<b>An Artisan</b> Your greatest influence was an artisan who taught you great elderfolk art.', 'A Small Token You Made'),
            (3, 3, 0.1, '<b>A Noble Warrior</b> Your greatest influence was a War Dancer or a Mahakaman Defender who taught you honor.', 'A Token of Battle'),
            (3, 4, 0.1, '<b>A Highborn</b> Your greatest influence was a highborn who taught you pride and how to comport yourself.', 'A Signet Ring'),
            (3, 5, 0.1, '<b>An Entertainer</b> Your greatest influence was an entertainer who taught you the importance of happiness and beauty.', 'A Playbill or Ticket'),
            (3, 6, 0.1, '<b>A Raider</b> Your greatest influence was a raider who taught you that you have the right to take what you need.', 'A Satchel'),
            (3, 7, 0.1, '<b>A Sage</b> Your greatest influence was a sage who taught you about the importance of elderfolk history.', 'A Book of Tales'),
            (3, 8, 0.1, '<b>A Criminal</b> Your greatest influence was a criminal who taught you to follow your own rules.', 'A Mask'),
            (3, 9, 0.1, '<b>A Hunter</b> Your greatest influence was a hunter who taught you how to survive in the wilderness.', 'A Trophy of a Hunt'),
            (3,10, 0.1, '<b>A Lowland Farmer</b> Your greatest influence was a lowland farmer who taught you how to live happily.', 'A Farmer''s Spade')
         ) AS raw_data_en(group_id, num, probability, friend_txt, gear)
),
vals AS (
         SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                 '<td>' || friend_txt || '</td>' ||
                 '<td>' || gear || '</td>') AS text,
                num,
                probability,
                lang,
                group_id
         FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_friend' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, rules_vals(group_id, body, name, id) AS (
  SELECT CASE name WHEN 'is_nordman' THEN 1
                   WHEN 'is_nilfgaardian' THEN 2
                   WHEN 'is_elderland' THEN 3 END
       , body, name, ru_id FROM rules WHERE name in ('is_nordman','is_nilfgaardian', 'is_elderland')
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id, metadata)
SELECT 'wcc_past_friend_o' || to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
       vals.num AS sort_order,
       rules_vals.id AS visible_ru_ru_id,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
FROM vals
CROSS JOIN meta
JOIN rules_vals ON rules_vals.group_id = vals.group_id
ON CONFLICT (an_id) DO NOTHING;

-- i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è friend_txt –∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏–∑ gear
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_friend' AS qu_id
                , 'character' AS entity)
, friend_data AS (
  SELECT 'ru' AS lang, friend_ru.*
    FROM (VALUES
            (1, 1, '<b>–¶–µ—Ä–∫–æ–≤—å</b> –ù–∞ –≤–∞—Å —Å–∏–ª—å–Ω–æ –ø–æ–≤–ª–∏—è–ª–∞ –º–µ—Å—Ç–Ω–∞—è —Ä–µ–ª–∏–≥–∏—è. –í—ã –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –ø—Ä–æ–≤–æ–¥–∏–ª–∏ –º–Ω–æ–≥–æ —á–∞—Å–æ–≤ –≤ —Ü–µ—Ä–∫–≤–∏.'),
            (1, 2, '<b>–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫</b> –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º –≤–∞–º —Å–ª—É–∂–∏–ª —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Ü–µ–Ω–∏—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ.'),
            (1, 3, '<b>–ì—Ä–∞—Ñ</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –≥—Ä–∞—Ñ (–≥—Ä–∞—Ñ–∏–Ω—è), –Ω–∞—É—á–∏–≤—à–∏–π –±—Ä–∞—Ç—å —Å–µ–±—è –≤ —Ä—É–∫–∏.'),
            (1, 4, '<b>–ú–∞–≥</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª –º–∞–≥, –Ω–∞—É—á–∏–≤—à–∏–π –Ω–µ –±–æ—è—Ç—å—Å—è –º–∞–≥–∏–∏ –∏ –≤—Å—ë –ø–æ–¥–≤–µ—Ä–≥–∞—Ç—å —Å–æ–º–Ω–µ–Ω–∏—é.'),
            (1, 5, '<b>–í–µ–¥—å–º–∞</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª–∞ –¥–µ—Ä–µ–≤–µ–Ω—Å–∫–∞—è –≤–µ–¥—å–º–∞, –ø–æ–∫–∞–∑–∞–≤—à–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –∑–Ω–∞–Ω–∏–π.'),
            (1, 6, '<b>–ü—Ä–æ–∫–ª—è—Ç—ã–π</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª —á–µ–ª–æ–≤–µ–∫, —Å—Ç—Ä–∞–¥–∞–≤—à–∏–π –æ—Ç –ø—Ä–æ–∫–ª—è—Ç–∏—è; –æ–Ω –Ω–∞—É—á–∏–ª –≤–∞—Å –Ω–∏–∫–æ–≥–¥–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ —Å—É–¥–∏—Ç—å —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–æ.'),
            (1, 7, '<b>–ê—Ä—Ç–∏—Å—Ç</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∞—Ä—Ç–∏—Å—Ç, —á—Ç–æ –Ω–∞—É—á–∏–ª –º–Ω–æ–∂–µ—Å—Ç–≤—É —Å–ø–æ—Å–æ–±–æ–≤ –ø—Ä–∏–≤–ª–µ—á—å –∫ —Å–µ–±–µ –≤–Ω–∏–º–∞–Ω–∏–µ.'),
            (1, 8, '<b>–¢–æ—Ä–≥–æ–≤–µ—Ü</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª —Ç–æ—Ä–≥–æ–≤–µ—Ü, –Ω–∞—É—á–∏–≤—à–∏–π –∏–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç–∏ –∏ —Å–æ–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.'),
            (1, 9, '<b>–ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å, –∫–∞–∫ –æ —Å–µ–±–µ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è.'),
            (1,10, '<b>–í–æ–∏–Ω</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª —Å–æ–ª–¥–∞—Ç, –Ω–∞—É—á–∏–≤—à–∏–π –∑–∞—â–∏—â–∞—Ç—å—Å—è.'),
            (2, 1, '<b>–ö—É–ª—å—Ç –í–µ–ª–∏–∫–æ–≥–æ –°–æ–ª–Ω—Ü–∞</b> –ù–∞ –≤–∞—Å —Å–∏–ª—å–Ω–æ –ø–æ–≤–ª–∏—è–ª–∞ —Ü–µ—Ä–∫–æ–≤—å. –í—ã –ø–æ—Å–≤—è—Ç–∏–ª–∏ –≥–æ–¥—ã –∏–∑—É—á–µ–Ω–∏—é —Ä–∏—Ç—É–∞–ª–æ–≤ –∏ –ø–µ—Å–Ω–æ–ø–µ–Ω–∏–π.'),
            (2, 2, '<b>–ò–∑–≥–Ω–∞–Ω–Ω–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∏–∑–≥–Ω–∞–Ω–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è –≤ —É—Å—Ç–æ—è—Ö –æ–±—â–µ—Å—Ç–≤–∞.'),
            (2, 3, '<b>–ì—Ä–∞—Ñ</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –≥—Ä–∞—Ñ, –Ω–∞—É—á–∏–≤—à–∏–π –≤–µ—Å—Ç–∏ –¥—Ä—É–≥–∏—Ö –∑–∞ —Å–æ–±–æ–π –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ª—é–¥—å–º–∏.'),
            (2, 4, '<b>–ú–∞–≥</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –º–∞–≥, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—Ä—è–¥–∫–∞ –∏ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏.'),
            (2, 5, '<b>–°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∏–º–ø–µ—Ä—Å–∫–∏–π –¥–µ—Ç–µ–∫—Ç–∏–≤; –≤—ã –ø—Ä–æ–≤–µ–ª–∏ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ —Ä–∞–∑–≥–∞–¥—ã–≤–∞–Ω–∏–µ–º —Ç–∞–π–Ω.'),
            (2, 6, '<b>–û—Ö–æ—Ç–Ω–∏–∫ –Ω–∞ –º–∞–≥–æ–≤</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª –æ—Ö–æ—Ç–Ω–∏–∫ –Ω–∞ –º–∞–≥–æ–≤, –Ω–∞—É—á–∏–≤—à–∏–π –æ—Å—Ç–µ—Ä–µ–≥–∞—Ç—å—Å—è –º–∞–≥–∏–∏ –∏ –º–∞–≥–æ–≤.'),
            (2, 7, '<b>–í–æ–∏–Ω</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª —Å–æ–ª–¥–∞—Ç, —Ç—Ä–∞–≤–∏–≤—à–∏–π –±–∞–π–∫–∏ –æ–± –æ–ø–∞—Å–Ω–æ—Å—Ç—è—Ö –∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è—Ö.'),
            (2, 8, '<b>–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫</b> –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º –≤–∞–º —Å–ª—É–∂–∏–ª —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Ü–µ–Ω–∏—Ç—å –Ω–∞–≤—ã–∫–∏ –∏ —Ç–æ—á–Ω–æ—Å—Ç—å.'),
            (2, 9, '<b>–†–∞–∑—É–º–Ω–æ–µ —á—É–¥–æ–≤–∏—â–µ</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª–æ —Ä–∞–∑—É–º–Ω–æ–µ —á—É–¥–æ–≤–∏—â–µ, –Ω–∞—É—á–∏–≤—à–µ–µ –≤–∞—Å, —á—Ç–æ –Ω–µ –≤—Å–µ —á—É–¥–æ–≤–∏—â–∞ ‚Äî –∑–ª–æ.'),
            (2,10, '<b>–ê—Ä—Ç–∏—Å—Ç</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∞—Ä—Ç–∏—Å—Ç, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –Ω–∞—É—á–∏–ª–∏—Å—å —Å–∞–º–æ–≤—ã—Ä–∞–∂–∞—Ç—å—Å—è.'),
            (3, 1, '<b>–ß–µ–ª–æ–≤–µ–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª —á–µ–ª–æ–≤–µ–∫, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã —É–∑–Ω–∞–ª–∏, —á—Ç–æ —Ä–∞—Å–∏–∑–º –Ω–µ –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –æ—Å–Ω–æ–≤–∞–Ω–∏—è.'),
            (3, 2, '<b>–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫</b> –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º –≤–∞–º —Å–ª—É–∂–∏–ª —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Ü–µ–Ω–∏—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–æ –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤.'),
            (3, 3, '<b>–ë–ª–∞–≥–æ—Ä–æ–¥–Ω—ã–π –≤–æ–∏–Ω</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –±–æ–µ–≤–æ–π —Ç–∞–Ω—Ü–æ—Ä –∏–ª–∏ –∑–∞—â–∏—Ç–Ω–∏–∫ –ú–∞—Ö–∞–∫–∞–º–∞, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å –ø–æ–Ω—è—Ç–∏—é —á–µ—Å—Ç–∏.'),
            (3, 4, '<b>–í—ã—Å–æ–∫–æ—Ä–æ–∂–¥–µ–Ω–Ω—ã–π</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑–∞–ª –≤—ã—Å–æ–∫–æ—Ä–æ–∂–¥–µ–Ω–Ω—ã–π, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å –≥–æ—Ä–¥–æ—Å—Ç–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞–º —ç—Ç–∏–∫–µ—Ç–∞.'),
            (3, 5, '<b>–ê—Ä—Ç–∏—Å—Ç—ã</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª–∏ –∞—Ä—Ç–∏—Å—Ç—ã, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä—ã–º –≤—ã –ø–æ–∑–Ω–∞–ª–∏ –≤–∞–∂–Ω–æ—Å—Ç—å —Å—á–∞—Å—Ç—å—è –∏ –∫—Ä–∞—Å–æ—Ç—ã.'),
            (3, 6, '<b>–ù–∞–ª—ë—Ç—á–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –Ω–∞–ª—ë—Ç—á–∏–∫, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø–æ–Ω—è–ª–∏, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–æ –±—Ä–∞—Ç—å —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ.'),
            (3, 7, '<b>–ú—É–¥—Ä–µ—Ü</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –º—É–¥—Ä–µ—Ü, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø–æ–∑–Ω–∞–ª–∏ –≤–∞–∂–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏–∏ –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤.'),
            (3, 8, '<b>–ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π —Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.'),
            (3, 9, '<b>–û—Ö–æ—Ç–Ω–∏–∫</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –æ—Ö–æ—Ç–Ω–∏–∫, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å –≤—ã–∂–∏–≤–∞—Ç—å –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ.'),
            (3,10, '<b>–ö—Ä–µ—Å—Ç—å—è–Ω–∏–Ω –∏–∑ –Ω–∏–∑–∏–Ω</b> –ù–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—Å –æ–∫–∞–∑–∞–ª –∫—Ä–µ—Å—Ç—å—è–Ω–∏–Ω –∏–∑ –Ω–∏–∑–∏–Ω, –Ω–∞—É—á–∏–≤—à–∏–π –≤–∞—Å –∂–∏—Ç—å —Å—á–∞—Å—Ç–ª–∏–≤–æ.')
          ) AS friend_ru(group_id, num, friend_txt)
  UNION ALL
  SELECT 'en' AS lang, friend_en.*
    FROM (VALUES
            (1, 1, '<b>A Church</b> You grew up with influence from your local religion and spent hours a day at church.'),
            (1, 2, '<b>An Artisan</b> Your greatest influence was an artisan who taught you to appreciate art and skill.'),
            (1, 3, '<b>A Count</b> Your greatest influence was a count or countess who taught you how to compose yourself.'),
            (1, 4, '<b>A Mage</b> Your greatest influence was a mage who taught you not to fear magic and to always question.'),
            (1, 5, '<b>A Witch</b> Your greatest influence was a village witch who taught you the importance of knowledge.'),
            (1, 6, '<b>A Cursed Person</b> Your greatest influence was a cursed person who taught you to never judge others too harshly.'),
            (1, 7, '<b>An Entertainer</b> Your greatest influence was an entertainer who taught you plenty about showmanship.'),
            (1, 8, '<b>A Merchant</b> Your greatest influence was a merchant who taught you how to be shrewd and clever.'),
            (1, 9, '<b>A Criminal</b> Your greatest influence was a criminal who taught you how to take care of yourself.'),
            (1,10, '<b>A Man At Arms</b> Your greatest influence was a soldier who taught you how to defend yourself.'),
            (2, 1, '<b>The Cult of the Great Sun</b> Your greatest influence was the Church. You spent years learning chants and rituals.'),
            (2, 2, '<b>An Outcast</b> Your greatest influence was a social outcast who taught you to always question society.'),
            (2, 3, '<b>A Count</b> Your greatest influence was a count who taught you how to lead and instill order.'),
            (2, 4, '<b>A Mage</b> Your greatest influence was a mage who taught you the importance of order and caution.'),
            (2, 5, '<b>A Solicitor</b> Your greatest influence was an imperial detective. You spent a lot of time solving mysteries.'),
            (2, 6, '<b>A Mage Hunter</b> Your greatest influence was a mage hunter who taught you to be cautious of magic and mages.'),
            (2, 7, '<b>A Man At Arms</b> Your greatest influence was a soldier who shared stories of danger and excitement.'),
            (2, 8, '<b>An Artisan</b> Your greatest influence was an artisan who taught you to appreciate skill and precision.'),
            (2, 9, '<b>A Sentient Monster</b> Your greatest influence was a sentient monster that taught you that not all monsters are evil.'),
            (2,10, '<b>An Entertainer</b> Your greatest influence was an entertainer who taught you to express yourself.'),
            (3, 1, '<b>A Human</b> Your greatest influence was a human who taught you that sometimes racism is unfounded.'),
            (3, 2, '<b>An Artisan</b> Your greatest influence was an artisan who taught you great elderfolk art.'),
            (3, 3, '<b>A Noble Warrior</b> Your greatest influence was a War Dancer or a Mahakaman Defender who taught you honor.'),
            (3, 4, '<b>A Highborn</b> Your greatest influence was a highborn who taught you pride and how to comport yourself.'),
            (3, 5, '<b>An Entertainer</b> Your greatest influence was an entertainer who taught you the importance of happiness and beauty.'),
            (3, 6, '<b>A Raider</b> Your greatest influence was a raider who taught you that you have the right to take what you need.'),
            (3, 7, '<b>A Sage</b> Your greatest influence was a sage who taught you about the importance of elderfolk history.'),
            (3, 8, '<b>A Criminal</b> Your greatest influence was a criminal who taught you to follow your own rules.'),
            (3, 9, '<b>A Hunter</b> Your greatest influence was a hunter who taught you how to survive in the wilderness.'),
            (3,10, '<b>A Lowland Farmer</b> Your greatest influence was a lowland farmer who taught you how to live happily.')
         ) AS friend_en(group_id, num, friend_txt)
)
, ins_friend_txt AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*friend_data.group_id+friend_data.num, 'FM0000') ||'.'|| meta.entity ||'.'|| 'friend') AS id
       , meta.entity, 'friend', friend_data.lang, friend_data.friend_txt
    FROM friend_data
    CROSS JOIN meta
)
, gear_data AS (
  SELECT 'ru' AS lang, gear_ru.*
    FROM (VALUES
            (1, 1, '–°–≤—è—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç'),
            (1, 2, '–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –≤–∞–º–∏ —Å—É–≤–µ–Ω–∏—Ä'),
            (1, 3, '–°–µ—Ä–µ–±—Ä—è–Ω–æ–µ –∫–æ–ª—å—Ü–æ'),
            (1, 4, '–ü–æ–¥–≤–µ—Å–∫–∞'),
            (1, 5, '–ö—É–∫–ª–∞ –¥–ª—è —á—ë—Ä–Ω–æ–π –º–∞–≥–∏–∏'),
            (1, 6, '–†–µ–∑–Ω–æ–π —Ç–æ—Ç–µ–º'),
            (1, 7, '–ê—Ñ–∏—à–∞ –∏–ª–∏ –±–∏–ª–µ—Ç'),
            (1, 8, '–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –≤–∞–º–∏ –º–æ–Ω–µ—Ç–∫–∞'),
            (1, 9, '–ú–∞—Å–∫–∞'),
            (1,10, '–ë–æ–µ–≤–æ–π —Ç—Ä–æ—Ñ–µ–π'),
            (2, 1, '–¶–µ—Ä–µ–º–æ–Ω–∏–∞–ª—å–Ω–∞—è –º–∞—Å–∫–∞'),
            (2, 2, '–Ø—Ä–∫–∏–π —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–π –∑–Ω–∞—á–æ–∫'),
            (2, 3, '–°–µ—Ä–µ–±—Ä—è–Ω–æ–µ –æ–∂–µ—Ä–µ–ª—å–µ'),
            (2, 4, '–≠–º–±–ª–µ–º–∞'),
            (2, 5, '–õ—É–ø–∞'),
            (2, 6, '–ö–æ–ª—å—Ü–æ —Å –¥–∏–º–µ—Ä–∏—Ç–æ–º'),
            (2, 7, '–ë–æ–µ–≤–æ–π —Ç—Ä–æ—Ñ–µ–π'),
            (2, 8, '–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–∞—è –≤–∞–º–∏ –±–µ–∑–¥–µ–ª—É—à–∫–∞'),
            (2, 9, '–°—Ç—Ä–∞–Ω–Ω—ã–π —Ç–æ—Ç–µ–º'),
            (2,10, '–ü–æ–¥–∞—Ä–æ–∫ –æ—Ç –ø–æ–∫–ª–æ–Ω–Ω–∏–∫–∞'),
            (3, 1, '–°–æ–ª–æ–º–µ–Ω–Ω–∞—è –∫—É–∫–ª–∞'),
            (3, 2, '–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –≤–∞–º–∏ –Ω–µ–±–æ–ª—å—à–æ–π —Å—É–≤–µ–Ω–∏—Ä'),
            (3, 3, '–ü–æ–¥–∞—Ä–æ–∫ –≤ –ø–∞–º—è—Ç—å –æ –±–∏—Ç–≤–µ'),
            (3, 4, '–ö–æ–ª—å—Ü–æ-–ø–µ—á–∞—Ç–∫–∞'),
            (3, 5, '–ê—Ñ–∏—à–∞ –∏–ª–∏ –±–∏–ª–µ—Ç'),
            (3, 6, '–ù–∞–ø–ª–µ—á–Ω–∞—è —Å—É–º–∫–∞'),
            (3, 7, '–ö–Ω–∏–≥–∞ —Å–∫–∞–∑–æ–∫'),
            (3, 8, '–ú–∞—Å–∫–∞'),
            (3, 9, '–û—Ö–æ—Ç–Ω–∏—á–∏–π —Ç—Ä–æ—Ñ–µ–π'),
            (3,10, '–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∞—è –ª–æ–ø–∞—Ç–∞')
          ) AS gear_ru(group_id, num, gear_name)
  UNION ALL
  SELECT 'en' AS lang, gear_en.*
    FROM (VALUES
            (1, 1, 'A Holy Text'),
            (1, 2, 'A Token You Made'),
            (1, 3, 'A Silver Ring'),
            (1, 4, 'A Small Pendant'),
            (1, 5, 'A Black Magic Doll'),
            (1, 6, 'A Carved Totem'),
            (1, 7, 'A Playbill or Ticket'),
            (1, 8, 'A Coin You Earned'),
            (1, 9, 'A Mask'),
            (1,10, 'A Battle Trophy'),
            (2, 1, 'A Ceremonial Mask'),
            (2, 2, 'A Bright Colorful Badge'),
            (2, 3, 'A Silver Necklace'),
            (2, 4, 'An Emblem'),
            (2, 5, 'A Magnifying Lens'),
            (2, 6, 'A Ring with Dimeritium'),
            (2, 7, 'A Trophy of Battle'),
            (2, 8, 'A Trinket You Made'),
            (2, 9, 'A Strange Totem'),
            (2,10, 'A Token from a Fan'),
            (3, 1, 'A Straw Doll'),
            (3, 2, 'A Small Token You Made'),
            (3, 3, 'A Token of Battle'),
            (3, 4, 'A Signet Ring'),
            (3, 5, 'A Playbill or Ticket'),
            (3, 6, 'A Satchel'),
            (3, 7, 'A Book of Tales'),
            (3, 8, 'A Mask'),
            (3, 9, 'A Trophy of a Hunt'),
            (3,10, 'A Farmer''s Spade')
         ) AS gear_en(group_id, num, gear_name)
)
, ins_gear_name AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*gear_data.group_id+gear_data.num, 'FM0000') ||'.'|| 'gear' ||'.'|| 'name') AS id
       , 'character', 'gear_name', gear_data.lang, gear_data.gear_name
    FROM gear_data
    CROSS JOIN meta
)
-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
, raw_data AS (
  SELECT DISTINCT group_id, num
  FROM (VALUES
          (1, 1), (1, 2), (1, 3), (1, 4), (1, 5), (1, 6), (1, 7), (1, 8), (1, 9), (1,10),
          (2, 1), (2, 2), (2, 3), (2, 4), (2, 5), (2, 6), (2, 7), (2, 8), (2, 9), (2,10),
          (3, 1), (3, 2), (3, 3), (3, 4), (3, 5), (3, 6), (3, 7), (3, 8), (3, 9), (3,10)
        ) AS v(group_id, num)
)
, gear_items AS (
  SELECT DISTINCT group_id, num
  FROM gear_data
)
INSERT INTO effects (scope, an_an_id, body)
-- –≠—Ñ—Ñ–µ–∫—Ç: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ friend
SELECT 'character', 'wcc_past_friend_o' || to_char(raw_data.group_id, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.friend'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| meta.entity ||'.'|| 'friend')::text)
    )
  )
FROM raw_data
CROSS JOIN meta
UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ gear
SELECT 'character', 'wcc_past_friend_o' || to_char(gear_items.group_id, 'FM00') || to_char(gear_items.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      jsonb_build_object(
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*gear_items.group_id+gear_items.num, 'FM0000') ||'.'|| 'gear' ||'.'|| 'name')::text),
        'weight', 0
      )
    )
  )
FROM gear_items
CROSS JOIN meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_past_family_status', 'wcc_past_friend';
-- <<< END sql/016_past_friend.sql

-- >>> BEGIN sql/017_past_siblings_amount.sql

\echo '017_past_siblings_amount.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_amount' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏–º –∫–∞–∫–∏–µ –±—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã –µ—Å—Ç—å —É –≤–∞—Å.'),
                            ('en', 'Determine what siblings you have.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Amount'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_siblings_amount' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.siblings')::text,
             ck_id('witcher_cc.hierarchy.siblings_amount')::text
           )
         )
    FROM meta;


-- –û—Ç–≤–µ—Ç—ã (–∫–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç 10%)
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            -- group 1: –°–µ–≤–µ—Ä—è–Ω–∏–Ω
            (1, 1, 0.2, '–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–±–µ–Ω–æ–∫'),
            (1, 2, 0.1, '1'),
            (1, 3, 0.1, '2'),
            (1, 4, 0.1, '3'),
            (1, 5, 0.1, '4'),
            (1, 6, 0.1, '5'),
            (1, 7, 0.1, '6'),
            (1, 8, 0.1, '7'),
            (1, 9, 0.1, '8'),

            -- group 2: –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–µ—Ü –∏ –ö—Ä–∞—Å–Ω–æ–ª—é–¥
            (2, 1, 0.5, '–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–±–µ–Ω–æ–∫'),
            (2, 2, 0.1, '1'),
            (2, 3, 0.1, '2'),
            (2, 4, 0.1, '3'),
            (2, 5, 0.1, '4'),
            (2, 6, 0.1, '5'),

            -- group 3: –≠–ª—å—Ñ—ã
            (3, 1, 0.6, '–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–±–µ–Ω–æ–∫'),
            (3, 2, 0.2, '1'),
            (3, 3, 0.2, '2')
          ) AS raw_data_ru(group_id, num, probability, amount)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            -- group 1: Northern
            (1, 1, 0.2, 'Only Child'),
            (1, 2, 0.1, '1'),
            (1, 3, 0.1, '2'),
            (1, 4, 0.1, '3'),
            (1, 5, 0.1, '4'),
            (1, 6, 0.1, '5'),
            (1, 7, 0.1, '6'),
            (1, 8, 0.1, '7'),
            (1, 9, 0.1, '8'),

            -- group 2: Nilfgaardian or Dwarf
            (2, 1, 0.5, 'Only Child'),
            (2, 2, 0.1, '1'),
            (2, 3, 0.1, '2'),
            (2, 4, 0.1, '3'),
            (2, 5, 0.1, '4'),
            (2, 6, 0.1, '5'),

            -- group 3: Elf
            (3, 1, 0.6, 'Only Child'),
            (3, 2, 0.2, '1'),
            (3, 3, 0.2, '2')
         ) AS raw_data_en(group_id, num, probability, amount)
),
vals AS (
         SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                 '<td>' || amount || '</td>') AS text,
                num,
                probability,
                lang,
                group_id
         FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_amount' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, rules_vals(group_id, id, body) AS (
  SELECT 1, gen_random_uuid(),
('{
  "and": [
    ' || body::text || ',
    {"in":[{"var":"characterRaw.logicFields.race"},["Witcher","Human"]]}
  ]
}')::jsonb FROM rules WHERE name = 'is_nordman' UNION ALL
  SELECT 2, gen_random_uuid(),
('{
  "or": [
    {
      "and": [
        ' || body::text || ',
        {"in":[{"var":"characterRaw.logicFields.race"},["Witcher","Human"]]}
      ]
    },
    {"in":[{"var":"characterRaw.logicFields.race"},["Dwarf"]]}
  ]
}')::jsonb FROM rules WHERE name = 'is_nilfgaardian' UNION ALL
  SELECT 3, ru_id, body FROM rules WHERE name = 'is_elf'
)
, ins_rules AS (
  INSERT INTO rules(ru_id, body) SELECT r.id, r.body FROM rules_vals r WHERE group_id !=3
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id, metadata)
SELECT 'wcc_past_siblings_amount_o' || to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
       vals.num AS sort_order,
       rules_vals.id AS visible_ru_ru_id,
         jsonb_build_object(
           'probability', vals.probability,
           'counterSet', jsonb_build_array(
                           jsonb_build_object('id','siblingsAmount','value', greatest(0, vals.num - 1)),
                           jsonb_build_object('id','siblingsCounter','value', 1)
                         )
         ) AS metadata
FROM vals
CROSS JOIN meta
JOIN rules_vals ON rules_vals.group_id = vals.group_id
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_past_friend', 'wcc_past_siblings_amount';

-- –ü—Ä–∞–≤–∏–ª–∞
INSERT INTO rules(name, body) VALUES ('is_there_more_siblings',
'{
  "<=": [
    {
      "var": "counters.siblingsCounter"
    },
    {
      "var": "counters.siblingsAmount"
    }
  ]
}'::jsonb);
-- <<< END sql/017_past_siblings_amount.sql

-- >>> BEGIN sql/018_past_siblings_gender.sql

\echo '018_past_siblings_gender.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –ü–æ–ª

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_gender' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–í—ã–±–µ—Ä–µ—Ç–µ –ø–æ–ª –±—Ä–∞—Ç–∞/—Å–µ—Å—Ç—Ä—ã.'),
                            ('en', 'Choose sibling''s gender.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ü–æ–ª'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Gender'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_siblings_gender' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.siblings')::text,
             jsonb_build_object('var', 'counters.siblingsCounter'),
             ck_id('witcher_cc.hierarchy.gender')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_gender' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–ú—É–∂—Å–∫–æ–π', 0.5::numeric),
                  ('ru', 2, '–ñ–µ–Ω—Å–∫–∏–π', 0.5),
                  ('en', 1, 'Male', 0.5),
                  ('en', 2, 'Female', 0.5)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_siblings_gender_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_past_siblings_amount', 'wcc_past_siblings_gender', r.ru_id, 3
    FROM rules r WHERE name = 'is_there_more_siblings';
-- <<< END sql/018_past_siblings_gender.sql

-- >>> BEGIN sql/019_past_siblings_age.sql

\echo '019_past_siblings_age.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –≤–æ–∑—Ä–∞—Å—Ç

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_age' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–í—ã–±–µ—Ä–µ—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç –±—Ä–∞—Ç–∞/—Å–µ—Å—Ç—Ä—ã.'),
                            ('en', 'Choose sibling''s age.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–í–æ–∑—Ä–∞—Å—Ç'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Age'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_siblings_age' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.siblings')::text,
             jsonb_build_object('var', 'counters.siblingsCounter'),
             ck_id('witcher_cc.hierarchy.age')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_age' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–ú–ª–∞–¥—à–µ –≤–∞—Å', 0.5::numeric),
                  ('ru', 2, '–°—Ç–∞—Ä—à–µ –≤–∞—Å', 0.4),
                  ('ru', 3, '–í–∞—à –±–ª–∏–∑–Ω–µ—Ü', 0.1),
                  ('en', 1, 'Younger', 0.5),
                  ('en', 2, 'Older', 0.4),
                  ('en', 3, 'Twin', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_siblings_age_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_past_siblings_gender', 'wcc_past_siblings_age';
-- <<< END sql/019_past_siblings_age.sql

-- >>> BEGIN sql/020_past_siblings_attitude.sql

\echo '020_past_siblings_attitude.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_attitude' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–í—ã–±–µ—Ä–µ—Ç–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –≤–∞–º.'),
                            ('en', 'Choose sibling''s feelings about you.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ö–∞–∫ –∫ –≤–∞–º –æ—Ç–Ω–æ—Å–∏—Ç—Å—è'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Feelings about you'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_siblings_attitude' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.siblings')::text,
             jsonb_build_object('var', 'counters.siblingsCounter'),
             ck_id('witcher_cc.hierarchy.attitude')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_attitude' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  -- RU: Northern Kingdoms (10* –ø–æ 0.05)
                  ('ru', 1, '–ñ–µ–ª–∞–µ—Ç –≤–∞–º —Å–º–µ—Ä—Ç–∏', 0.1::numeric),
                  ('ru', 2, '–ù–µ–Ω–∞–≤–∏–¥–∏—Ç –≤–∞—Å', 0.1),
                  ('ru', 3, '–ó–∞–≤–∏–¥—É–µ—Ç –≤–∞–º', 0.1),
                  ('ru', 4, '–ù–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ', 0.4),
                  ('ru', 5, '–í—ã –Ω—Ä–∞–≤–∏—Ç–µ—Å—å', 0.1),
                  ('ru', 6, '–†–∞–≤–Ω—è–µ—Ç—Å—è –Ω–∞ –≤–∞—Å', 0.1),
                  ('ru', 7, '–†–µ–≤–Ω—É–µ—Ç –≤–∞—Å', 0.1),
                  ('en', 1, 'Wants you dead', 0.1),
                  ('en', 2, 'Can''t stand You', 0.1),
                  ('en', 3, 'Jealous of you', 0.1),
                  ('en', 4, 'No feelings about you', 0.4),
                  ('en', 5, 'Likes you', 0.1),
                  ('en', 6, 'Looks up to you', 0.1),
                  ('en', 7, 'Possessive of you', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_siblings_attitude_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_past_siblings_age', 'wcc_past_siblings_attitude';
-- <<< END sql/020_past_siblings_attitude.sql

-- >>> BEGIN sql/021_past_siblings_personality.sql

\echo '021_past_siblings_personality.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –û—Å–Ω–æ–≤–Ω–∞—è —á–µ—Ä—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_personality' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–í—ã–±–µ—Ä–µ—Ç–µ –ø–æ–ª –±—Ä–∞—Ç–∞/—Å–µ—Å—Ç—Ä—ã.'),
                            ('en', 'Choose sibling''s gender.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–û—Å–Ω–æ–≤–Ω–∞—è —á–µ—Ä—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Personality'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_past_siblings_personality' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'counterIncrement', jsonb_build_object(
             'id', 'siblingsCounter',
             'step', 1
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.family')::text,
             ck_id('witcher_cc.hierarchy.siblings')::text,
             jsonb_build_object('var', 'counters.siblingsCounter'),
             ck_id('witcher_cc.hierarchy.personality')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_personality' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  -- RU: Northern Kingdoms (10* –ø–æ 0.05)
                  ('ru', 1, '–°–∫—Ä–æ–º–Ω–æ—Å—Ç—å', 0.1::numeric),
                  ('ru', 2, '–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å', 0.1),
                  ('ru', 3, '–î–æ–±—Ä–æ—Ç–∞', 0.1),
                  ('ru', 4, '–° –ø—Ä–∏—á—É–¥–∞–º–∏', 0.1),
                  ('ru', 5, '–í–¥—É–º—á–∏–≤–æ—Å—Ç—å', 0.1),
                  ('ru', 6, '–ë–æ–ª—Ç–ª–∏–≤–æ—Å—Ç—å', 0.1),
                  ('ru', 7, '–†–æ–º–∞–Ω—Ç–∏—á–Ω–æ—Å—Ç—å', 0.1),
                  ('ru', 8, '–°—Ç—Ä–æ–≥–æ—Å—Ç—å', 0.1),
                  ('ru', 9, '–£–Ω—ã–Ω–∏–µ', 0.1),
                  ('ru', 10, '–ò–Ω—Ñ–∞–Ω—Ç–∏–ª—å–Ω–æ—Å—Ç—å', 0.1),
                  ('en', 1, 'Shy', 0.1),
                  ('en', 2, 'Aggressive', 0.1),
                  ('en', 3, 'Kind', 0.1),
                  ('en', 4, 'Strange', 0.1),
                  ('en', 5, 'Thoughtful', 0.1),
                  ('en', 6, 'Talkative', 0.1),
                  ('en', 7, 'Romantic', 0.1),
                  ('en', 8, 'Stern', 0.1),
                  ('en', 9, 'Depressive', 0.1),
                  ('en', 10, 'Immature', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_past_siblings_personality_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_past_siblings_personality' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
    SELECT num FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS v(num)
)

INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_past_siblings_personality_o' || to_char(vals.num, 'FM9900'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.siblings'),
      jsonb_build_object(
        'gender',      jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_past_siblings_gender'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'age',         jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_past_siblings_age'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'attitude',    jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_past_siblings_attitude'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'personality', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value')::text)
      )
    )
  )
FROM vals
CROSS JOIN meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_past_siblings_attitude', 'wcc_past_siblings_personality';

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_past_siblings_personality', 'wcc_past_siblings_gender', r.ru_id, 3
    FROM rules r WHERE name = 'is_there_more_siblings';
-- <<< END sql/021_past_siblings_personality.sql

-- >>> BEGIN sql/022_life_events_event.sql

\echo '022_life_events_event.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –°–æ–±—ã—Ç–∏–µ
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_event' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–∞ —ç—Ç–æ–º –æ—Ç—Ä–µ–∑–∫–µ –∂–∏–∑–Ω–∏?'),
                            ('en', 'What happened during this stage of your life?')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–°–æ–±—ã—Ç–∏–µ'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Event'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
              SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                   , meta.entity, 'column_name', c_vals.lang, c_vals.text
				        FROM c_vals
				      	CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_event' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_event')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_event' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–£–¥–∞—á–∞ –∏–ª–∏ –Ω–µ—É–¥–∞—á–∞', 0.4::numeric),
                  ('ru', 2, '–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏', 0.3),
                  ('ru', 3, '–õ—é–±–æ–≤—å', 0.3),
                  ('en', 1, 'Fortune or Misfortune', 0.4),
                  ('en', 2, 'Allies and Enemies', 0.3),
                  ('en', 3, 'Romance', 0.3)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_event_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏

WITH
  r AS (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid')
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_past_siblings_personality', 'wcc_life_events_event', r.ru_id, 1 FROM r UNION ALL
  SELECT 'wcc_past_siblings_amount', 'wcc_life_events_event', r.ru_id, 1 FROM r;
















-- <<< END sql/022_life_events_event.sql

-- >>> BEGIN sql/023_life_events_fortune_or_not.sql

\echo '023_life_events_fortune_or_not.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –£–¥–∞—á–∞ –∏–ª–∏ –Ω–µ—É–¥–∞—á–∞
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , jsonb_build_object('dice','d0') AS metadata)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–∞–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å–ª—É—á–∏–ª–æ—Å—å —Å –≤–∞–º–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –¥–µ–∫–∞–¥–µ.', 'body'),
                ('en', 'Determine what event occurred to you during that decade.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
          'path', jsonb_build_array(
            ck_id('witcher_cc.hierarchy.life_events')::text,
            jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
            ck_id('witcher_cc.hierarchy.life_events_fortune_or_not')::text
          )
        )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES ('ru', 1, '–£–¥–∞—á–∞'),
               ('ru', 2, '–ù–µ—É–¥–∞—á–∞'),
               ('en', 1, 'Fortune'),
               ('en', 2, 'Misfortune')
         ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_fortune_or_not_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_life_events_event', 'wcc_life_events_fortune_or_not', 'wcc_life_events_event_o01';
-- <<< END sql/023_life_events_fortune_or_not.sql

-- >>> BEGIN sql/024_life_events_fortune.sql

\echo '024_life_events_fortune.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , jsonb_build_object('dice','d0') AS metadata)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —É–¥–∞—á–∞ —Å –≤–∞–º–∏ –ø—Ä–∏–∫–ª—é—á–∏–ª–∞—Å—å.', 'body'),
                ('en', 'Determine how fortune came your way.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
          'path', jsonb_build_array(
            ck_id('witcher_cc.hierarchy.life_events')::text,
            jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
            ck_id('witcher_cc.hierarchy.life_events_fortune')::text,
            ck_id('witcher_cc.hierarchy.life_events_fortune_kind')::text
          )
        )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*, c.*
  FROM (VALUES ('ru', 1, '<b>–î–∂–µ–∫–ø–æ—Ç:</b><br>–ë–ª–∞–≥–æ–¥–∞—Ä—è –∫–∞–∫–æ–º—É-—Ç–æ —Å–æ–±—ã—Ç–∏—é –∏–ª–∏ –ø–æ —Å—á–∞—Å—Ç–ª–∏–≤–æ–π —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ IdlO —Ö 100 –∫—Ä–æ–Ω.'),
               ('ru', 2, '<b>–£—á–∏—Ç–µ–ª—å:</b><br>–í—ã –æ–±—É—á–∞–ª–∏—Å—å –ø–æ–¥ –æ–ø–µ–∫–æ–π —É—á–∏—Ç–µ–ª—è. –ü–æ–ª—É—á–∏—Ç–µ +1 –∫ –ª—é–±–æ–º—É –Ω–∞–≤—ã–∫—É –ò–Ω—Ç –∏–ª–∏ –∂–µ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ –ò–Ω—Ç —Å –±–æ–Ω—É—Å–æ–º +2.'),
               ('ru', 3, '<b>–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –¥–≤–æ—Ä—è–Ω–∏–Ω–∞</b><br>–í—ã —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞–ª–∏ –¥–ª—è –¥–≤–æ—Ä—è–Ω–∏–Ω–∞, –∏ —Ç–µ–ø–µ—Ä—å –æ–Ω –≤–∞–º –¥–æ–ª–∂–µ–Ω 1 —É—Å–ª—É–≥—É.'),
               ('ru', 4, '<b>–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:</b><br>–í—ã —É—á–∏–ª–∏—Å—å –±–æ–µ–≤—ã–º –∏—Å–∫—É—Å—Å—Ç–≤–∞–º —É –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –≤–æ–∏–Ω–∞. –ü–æ–ª—É—á–∏—Ç–µ +1 –∫ –ª—é–±–æ–º—É –±–æ–µ–≤–æ–º—É –Ω–∞–≤—ã–∫—É –∏–ª–∏ –∂–µ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –±–æ–µ–≤–æ–π –Ω–∞–≤—ã–∫ —Å –±–æ–Ω—É—Å–æ–º +2.'),
               ('ru', 5, '<b>–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –≤–µ–¥—å–º–∞–∫–∞:</b><br>–ö–∞–∫-—Ç–æ —Ä–∞–∑ –≤—ã –ø–æ–≤—Å—Ç—Ä–µ—á–∞–ª–∏ –≤–µ–¥—å–º–∞–∫–∞ –∏ –æ–∫–∞–∑–∞–ª–∏ –µ–º—É —É—Å–ª—É–≥—É. –¢–µ–ø–µ—Ä—å –æ–Ω –≤–∞–º –¥–æ–ª–∂–µ–Ω —É—Å–ª—É–≥—É –≤ –æ—Ç–≤–µ—Ç.'),
               ('ru', 6, '<b>–î—Ä—É–∂–±–∞ —Å —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞–º–∏:</b><br>–í—ã –ø–æ–¥—Ä—É–∂–∏–ª–∏—Å—å —Å —Ä–∞–∑–±–æ–π–Ω–∏—á—å–µ–π —à–∞–π–∫–æ–π. –†–∞–∑ –≤ –º–µ—Å—è—Ü –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –∏—Ö –æ–± 1 —É—Å–ª—É–≥–µ.'),
               ('ru', 7, '<b>–ü—Ä–∏—Ä—É—á—ë–Ω–Ω—ã–π –∑–≤–µ—Ä—å:</b><br>–í—ã —Å—É–º–µ–ª–∏ –ø—Ä–∏—Ä—É—á–∏—Ç—å –¥–∏–∫–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ. –°–æ–≤–µ—Ä—à–∏—Ç–µ –±—Ä–æ—Å–æ–∫ IdlO: –æ—Ç 1 –¥–æ 7 ‚Äî –¥–∏–∫–∞—è —Å–æ–±–∞–∫–∞ (—Å–º. –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–±–∞–∫–∏ –Ω–∞ —Å—Ç—Ä. 310), –æ—Ç 8 –¥–æ 10 ‚Äî –≤–æ–ª–∫ (—Å–º. —Å—Ç—Ä. 286).'),
               ('ru', 8, '<b>–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –º–∞–≥–∞:</b><br>–ú–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∞–≥, –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø–æ–º–æ–≥–ª–∏, –¥–æ–ª–∂–µ–Ω –≤–∞–º 1 —É—Å–ª—É–≥—É.'),
               ('ru', 9, '<b>–ë–ª–∞–≥–æ—Å–ª–æ–≤–ª–µ–Ω–∏–µ –∂—Ä–µ—Ü–∞:</b><br>–£ –≤–∞—Å –µ—Å—Ç—å —Å–≤—è—â–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–∫–∞–∑–∞—Ç—å –µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º, –∏—Å–ø–æ–≤–µ–¥—É—é—â–∏–º —Ç—É –∂–µ –≤–µ—Ä—É, –∏ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å +2 –∫ –•–∞—Ä–∏–∑–º–µ –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ —Å –Ω–∏–º–∏.'),
               ('ru', 10, '<b>–†—ã—Ü–∞—Ä—Å—Ç–≤–æ:</b><br>–í —Å–ª—É—á–∞–π–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ –≤–∞—Å –∑–∞ —Ö—Ä–∞–±—Ä–æ—Å—Ç—å –ø–æ—Å–≤—è—Ç–∏–ª–∏ –≤ —Ä—ã—Ü–∞—Ä–∏. –í —ç—Ç–æ–º –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ +2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –∏ —Å—á–∏—Ç–∞–µ—Ç–µ—Å—å —Ä—ã—Ü–∞—Ä–µ–º.'),
               ('en', 1, '<b>Jackpot:</b><br>Some major event or stroke of luck brought you 1d10x100 crowns.'),
               ('en', 2, '<b>Find a Teacher:</b><br>You trained with a teacher. Gain +1 in any INT skill or start a new INT skill at +2.'),
               ('en', 3, '<b>A Noble Owes You:</b><br>Something you did gained you 1 favor from a nobleman/noblewoman.'),
               ('en', 4, '<b>Find a Combat Teacher:</b><br>You trained with a soldier. Gain +1 in any combat skill or start a new combat skill at +2.'),
               ('en', 5, '<b>A Witcher Owes You:</b><br>You encountered a witcher at some point and managed to garner a favor from them.'),
               ('en', 6, '<b>Fell in with Bandits:</b><br>You fell in with a bandit gang. Once per month you can ask these bandits for 1 favor.'),
               ('en', 7, '<b>Tamed a Wild Animal:</b><br>You tamed a wild animal you encountered in the wilderness. Roll 1d10. 1-7: Wild Dog (See Dog on Pg.310), 8-10: Wolf (See Wolf on Pg.286).'),
               ('en', 8, '<b>A Mage Owes You:</b><br>You managed to garner 1 favor from a powerful mage you helped.'),
               ('en', 9, '<b>Blessed by a Priest:</b><br>You were given a holy symbol that you can show to people of that faith to gain a +2 to Charisma with them.'),
               ('en', 10, '<b>Knighted:</b><br>You were knighted for valor in a random kingdom. In this kingdom you gain +2 reputation and are recognized as a knight.')
         ) AS v(lang, num, text)
  LEFT JOIN (VALUES ('"counterIncrement":
                       {
                         "id": "lifeEventsCounter",
                         "step": 10
                       }')) as c(counter_txt) ON v.num in (3,5,6,8,9)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_fortune_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         ('{' || coalesce(vals.counter_txt,'') || '}')::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –≠—Ñ—Ñ–µ–∫—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è eventType "Fortune"/"–£–¥–∞—á–∞"
, ins_event_type AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_fortune') AS id
         , meta.entity, 'event_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–£–¥–∞—á–∞'),
        ('en', 'Fortune')
      ) AS v(lang, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è description (–≤–∞—Ä–∏–∞–Ω—Ç—ã 3, 5, 6, 8, 9)
, ins_desc_03 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '03' ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –¥–≤–æ—Ä—è–Ω–∏–Ω–∞: –≤—ã –ø–æ–º–æ–≥–ª–∏ –¥–≤–æ—Ä—è–Ω–∏–Ω—É, –∏ –æ–Ω –ø–æ–æ–±–µ—â–∞–ª –≤–∞–º —É—Å–ª—É–≥—É.'),
        ('en', 'A Noble Owes You: you helped a noble, who promised you a favor.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_desc_05 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '05' ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –≤–µ–¥—å–º–∞–∫–∞: –≤—ã –ø–æ–≤—Å—Ç—Ä–µ—á–∞–ª–∏ –≤–µ–¥—å–º–∞–∫–∞ –∏ –æ–∫–∞–∑–∞–ª–∏ –µ–º—É —É—Å–ª—É–≥—É.'),
        ('en', 'A Witcher Owes You: you encountered a witcher and helped them.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_desc_06 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '06' ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–î—Ä—É–∂–±–∞ —Å —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞–º–∏: –≤—ã –ø–æ–¥—Ä—É–∂–∏–ª–∏—Å—å —Å —Ä–∞–∑–±–æ–π–Ω–∏—á—å–µ–π —à–∞–π–∫–æ–π.'),
        ('en', 'Fell in with Bandits: you befriended a bandit gang.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_desc_08 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '08' ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –º–∞–≥–∞: –≤—ã –ø–æ–º–æ–≥–ª–∏ –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É –º–∞–≥—É.'),
        ('en', 'A Mage Owes You: you helped a powerful mage.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_desc_09 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '09' ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–ë–ª–∞–≥–æ—Å–ª–æ–≤–ª–µ–Ω–∏–µ –∂—Ä–µ—Ü–∞: –æ—Ç –∂—Ä–µ—Ü–∞ –≤—ã –ø–æ–ª—É—á–∏–ª–∏ —Å–≤—è—â–µ–Ω–Ω—ã–π –¥–ª—è –µ–≥–æ —Ä–µ–ª–∏–≥–∏–∏ —Å–∏–º–≤–æ–ª.'),
        ('en', 'Blessed by a Priest: a priest gave you a holy symbol of their faith.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è gear items
, ins_gear_03 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '03' ||'.'|| 'gear_name') AS id
         , 'gear', 'name', v.lang, v.text
      FROM (VALUES
        ('ru', '–£—Å–ª—É–≥–∞ –¥–≤–æ—Ä—è–Ω–∏–Ω–∞'),
        ('en', 'Nobleman Service')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_gear_05 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '05' ||'.'|| 'gear_name') AS id
         , 'gear', 'name', v.lang, v.text
      FROM (VALUES
        ('ru', '–£—Å–ª—É–≥–∞ –≤–µ–¥—å–º–∞–∫–∞'),
        ('en', 'Witcher Service')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_gear_06 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '06' ||'.'|| 'gear_name') AS id
         , 'gear', 'name', v.lang, v.text
      FROM (VALUES
        ('ru', '–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è —É—Å–ª—É–≥–∞ —Ä–∞–∑–±–æ–π–Ω–∏–∫–æ–≤'),
        ('en', 'Monthly Bandit Service')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_gear_08 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '08' ||'.'|| 'gear_name') AS id
         , 'gear', 'name', v.lang, v.text
      FROM (VALUES
        ('ru', '–£—Å–ª—É–≥–∞ –º–∞–≥–∞'),
        ('en', 'Mage Service')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_gear_09_name AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '09' ||'.'|| 'gear_name') AS id
         , 'gear', 'name', v.lang, v.text
      FROM (VALUES
        ('ru', '–°–≤—è—â–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª'),
        ('en', 'Sacred Symbol')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_gear_09_notes AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '09' ||'.'|| 'gear_notes') AS id
         , 'gear', 'notes', v.lang, v.text
      FROM (VALUES
        ('ru', '–ü–æ–ª—É—á–∞–µ–º +2 –∫ –Ω–∞–≤—ã–∫—É —Ö–∞—Ä–∏–∑–º—ã –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ —Å –µ–¥–∏–Ω–æ–≤–µ—Ä—Ü–∞–º–∏.'),
        ('en', 'Gain +2 to Charisma skill when communicating with co-religionists.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, event_items AS (
  SELECT num FROM (VALUES (3), (5), (6), (8), (9)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
-- 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ lifeEvents (–≤–∞—Ä–∏–∞–Ω—Ç—ã 3, 5, 6, 8, 9)
SELECT 'character', 'wcc_life_events_fortune_o' || to_char(event_items.num, 'FM9900'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_fortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(event_items.num, 'FM9900') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM event_items
CROSS JOIN meta
UNION ALL
-- 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ gear (–≤–∞—Ä–∏–∞–Ω—Ç—ã 3, 5, 6, 8, 9)
SELECT 'character', 'wcc_life_events_fortune_o' || to_char(event_items.num, 'FM9900'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      (
        jsonb_build_object(
          'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(event_items.num, 'FM9900') ||'.'|| 'gear_name')::text),
          'weight', 0
        ) ||
        CASE WHEN event_items.num = 9 THEN
          jsonb_build_object('notes', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '09' ||'.'|| 'gear_notes')::text))
        ELSE
          '{}'::jsonb
        END
      )
    )
  )
FROM event_items
CROSS JOIN meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_life_events_fortune_or_not', 'wcc_life_events_fortune', 'wcc_life_events_fortune_or_not_o01';

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_fortune', 'wcc_life_events_event', r.ru_id, 1
  FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/024_life_events_fortune.sql

-- >>> BEGIN sql/025_life_events_misfortune.sql

\echo '025_life_events_misfortune.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_misfortune' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , jsonb_build_object('dice','d0') AS metadata)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –Ω–µ—É–¥–∞—á–∞ —Å –≤–∞–º–∏ –ø—Ä–∏–∫–ª—é—á–∏–ª–∞—Å—å.', 'body'),
                ('en', 'Determine how misfortune came your way.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
          'path', jsonb_build_array(
            ck_id('witcher_cc.hierarchy.life_events')::text,
            jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
            ck_id('witcher_cc.hierarchy.life_events_misfortune')::text,
            ck_id('witcher_cc.hierarchy.life_events_misfortune_kind')::text
          )
        )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_misfortune' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES ('ru', 1, '<b>–î–æ–ª–≥:</b><br>–í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ –æ—Ç 100 –¥–æ 1000 –∫—Ä–æ–Ω.'),
               ('ru', 2, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:</b><br>–ó–∞ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–æ—Å—Ç—É–ø–æ–∫ (–∏–ª–∏ –ø–æ –ª–æ–∂–Ω–æ–º—É –æ–±–≤–∏–Ω–µ–Ω–∏—é) –≤—ã –ø–æ–ø–∞–ª–∏ –≤ —Ç—é—Ä—å–º—É –Ω–∞ —Å—Ä–æ–∫ –æ—Ç 1 –¥–æ 10 –º–µ—Å—è—Ü–µ–≤.'),
               ('ru', 3, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:</b><br>–£ –≤–∞—Å –µ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –Ω–∞ –≤–∞—à –≤—ã–±–æ—Ä:<br> - –ê–ª–∫–æ–≥–æ–ª—å<br> - –¢–∞–±–∞–∫<br> - –§–∏—Å—à—Ç–µ—Ö<br> - –ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã<br> - –ö–ª–µ–ø—Ç–æ–º–∞–Ω–∏—è<br> - –ü–æ—Ö–æ—Ç—å<br> - –û–±–∂–æ—Ä—Å—Ç–≤–æ<br> - –ê–¥—Ä–µ–Ω–∞–ª–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å<br> - –î—Ä—É–≥–æ–µ (–º–æ–∂–µ—Ç–µ –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–∞–º–∏)'),
               ('ru', 4, '<b>–õ—é–±–∏–º—ã–π, –¥—Ä—É–≥ –∏–ª–∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫ —É–±–∏—Ç:</b><br>–ü—Ä–æ–∏–∑–æ—à–ª–æ –æ–¥–Ω–æ –∏–∑ —Å–ø–∏—Å–∫–∞:<br> - —ç—Ç–æ –±—ã–ª –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π<br> - —É–±–∏—Ç —á—É–¥–æ–≤–∏—â–∞–º–∏<br> - —É–±–∏—Ç —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞–º–∏'),
               ('ru', 5, '<b>–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ:</b><br>–ü—Ä–æ–∏–∑–æ—à–ª–æ –æ–¥–Ω–æ –∏–∑ —Å–ø–∏—Å–∫–∞:<br> - –≤–æ—Ä–æ–≤—Å—Ç–≤–æ<br> - —Ç—Ä—É—Å–æ—Å—Ç—å –∏–ª–∏ –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ<br> - —É–±–∏–π—Å—Ç–≤–æ<br> - –∏–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ<br> - –Ω–µ–ª–µ–≥–∞–ª—å–Ω–æ–µ –∫–æ–ª–¥–æ–≤—Å—Ç–≤–æ'),
               ('ru', 6, '<b>–í —Ä–æ–∑—ã—Å–∫–µ:</b><br>–í–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞—é—Ç...<br> - ...–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–∂–Ω–∏–∫–æ–≤<br> - ...–≤ –ø–æ—Å—ë–ª–∫–µ<br> - ...–≤ –≥–æ—Ä–æ–¥–µ<br> - ...–≤–æ –≤—Å—ë–º –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ'),
               ('ru', 7, '<b>–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ:</b><br>–ü—Ä–æ–∏–∑–æ—à–ª–æ –æ–¥–Ω–æ –∏–∑ —Å–ø–∏—Å–∫–∞:<br> - –≤–∞—Å —à–∞–Ω—Ç–∞–∂–∏—Ä—É—é—Ç<br> - –≤–∞—à–∞ —Ç–∞–π–Ω–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∞<br> - –≤–∞—Å –ø—Ä–µ–¥–∞–ª –∫—Ç–æ—Ç–æ –∏–∑ –±–ª–∏–∑–∫–∏—Ö.'),
               ('ru', 8, '<b>–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π:</b><br>–ü—Ä–æ–∏–∑–æ—à–ª–æ –æ–¥–Ω–æ –∏–∑ —Å–ø–∏—Å–∫–∞:<br> - –≤—ã –∏–∑—É—Ä–æ–¥–æ–≤–∞–Ω—ã, –∏–∑–º–µ–Ω–∏—Ç–µ –≤–∞—à —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –Ω–∞ –æ–ø–∞—Å–µ–Ω–∏–µ<br> - –≤—ã –ª–µ—á–∏–ª–∏—Å—å –æ—Ç 1 –¥–æ 10 –º–µ—Å—è—Ü–µ–≤<br> - –≤—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö (–æ—Ç 1 –¥–æ 10) –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞<br> - –≤–∞—Å –º—É—á–∞—é—Ç –∂—É—Ç–∫–∏–µ –∫–æ—à–º–∞—Ä—ã (–≤–µ—Ä–æ—è—Ç–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤–æ –≤—Ä–µ–º—è —Å–Ω–∞)'),
               ('ru', 9, '<b>–§–∏–∑–∏—á–µ—Å–∫–∞—è –∏–ª–∏ –ø—Å–∏—Ö–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≤–º–∞:</b><br>–ü—Ä–æ–∏–∑–æ—à–ª–æ –æ–¥–Ω–æ –∏–∑ —Å–ø–∏—Å–∫–∞:<br> - –í–∞—Å –æ—Ç—Ä–∞–≤–∏–ª–∏, –Ω–∞–≤—Å–µ–≥–¥–∞ –ø–æ—Ç–µ—Ä—è–π—Ç–µ 5 –ü–ó.<br> - –í—ã —Å—Ç—Ä–∞–¥–∞–µ—Ç–µ –æ—Ç –ø–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∞—Ç–∞–∫ –∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–µ—Ä—à–∞—Ç—å –∏—Å–ø—ã—Ç–∞–Ω–∏–µ –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (–∫–∞–∂–¥—ã–µ 5 —Ä–∞—É–Ω–¥–æ–≤) –≤ —Å—Ç—Ä–µ—Å—Å–æ–≤–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.<br> - –£ –≤–∞—Å —Å–µ—Ä—å—ë–∑–Ω–æ–µ –¥—É—à–µ–≤–Ω–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –≤—ã –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã, –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã –∏ –¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã, –∞ —Ç–∞–∫–∂–µ —Å–ª—ã—à–∏—Ç–µ –≥–æ–ª–æ—Å–∞, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤–µ–¥—É—â–∏–π.'),
               ('ru', 10, '<b>–ü—Ä–æ–∫–ª—è—Ç–∏–µ:</b><br>–í–∞—Å –ø—Ä–æ–∫–ª—è–ª–∏ –æ–¥–Ω–∏–º –ø—Ä–æ–∫–ª—è—Ç–∏–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞:<br> - –ü—Ä–æ–∫–ª—è—Ç–∏–µ —á—É–¥–æ–≤–∏—â–Ω–æ—Å—Ç–∏<br> - –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤<br> - –ü—Ä–æ–∫–ª—è—Ç–∏–µ –∑–∞—Ä–∞–∑—ã<br> - –ü—Ä–æ–∫–ª—è—Ç–∏–µ —Å—Ç—Ä–∞–Ω–Ω–∏–∫–∞<br> - –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–∏<br> - –î—Ä—É–≥–æ–µ (–º–æ–∂–µ—Ç–µ –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–∞–º–∏)'),
               ('en', 1, '<b>Debt:</b><br>You owe between 100 and 1,000 crowns.'),
               ('en', 2, '<b>Imprisonment:</b><br>Something you did (or a false accusation) landed you in prison for a period of 1 to 10 months.'),
               ('en', 3, '<b>Addiction:</b><br>You have an addiction of your choice:<br> - Alcohol<br> - Tobacco<br> - Fisstech<br> - Gambling<br> - Kleptomania<br> - Lust<br> - Gluttony<br> - Other (create your own)'),
               ('en', 4, '<b>Lover, Friend or Relative Killed:</b><br>One of the following occurred:<br> - They died in an accident<br> - They were slain by monsters<br> - They were murdered by bandits'),
               ('en', 5, '<b>False Accusation:</b><br>One of the following occurred:<br> - Theft<br> - Cowardice or betrayal<br> - Murder<br> - Rape<br> - Illegal witchcraft'),
               ('en', 6, '<b>Wanted:</b><br>You are wanted...<br> - ...by a few guards<br> - ...in a small village<br> - ...in a major city<br> - ...throughout the entire kingdom'),
               ('en', 7, '<b>Betrayal:</b><br>One of the following occurred:<br> - You are being blackmailed<br> - Your secret was exposed<br> - You were betrayed by someone close to you'),
               ('en', 8, '<b>Accident:</b><br>One of the following occurred:<br> - You were disfigured; change your social status to Feared<br> - You were recovering for a period of 1 to 10 months<br> - You lost several (1 to 10) months of memory from that year<br> - You suffer from dreadful nightmares (likely every time you sleep)'),
               ('en', 9, '<b>Physical or Mental Trauma:</b><br>One of the following occurred:<br> - You were poisoned; permanently lose 5 HP<br> - You suffer from panic attacks and must make Stun saves (every 5 rounds) in stressful situations<br> - You have a severe mental disorder; you are aggressive, irrational, depressive, and hear voices controlled by the GM'),
               ('en', 10, '<b>Curse:</b><br>You have been afflicted by one of the following curses:<br> - Curse of Monstrosity<br> - Curse of the Phantom<br> - Curse of Pestilence<br> - Curse of the Wanderer<br> - Curse of Lycanthropy<br> - Other (create your own)')
         ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_misfortune_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_life_events_fortune_or_not', 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_o02';

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_event', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/025_life_events_misfortune.sql

-- >>> BEGIN sql/026_life_events_fortune_or_not_details.sql

\echo '026_life_events_fortune_or_not_details.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–µ–≥–æ —Å–æ–±—ã—Ç–∏—è.'),
                            ('en', 'Determine the details of what happened.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–£—Ç–æ—á–Ω–µ–Ω–∏–µ'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Clarification'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune_or_not_details' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           jsonb_build_object('jsonlogic_expression',
             jsonb_build_object('if',
               jsonb_build_array(
                 jsonb_build_object('==',
                   jsonb_build_array(
                     jsonb_build_object('var', 'answers.lastAnswer.questionId'),
                    'wcc_life_events_fortune'
                   )
                 ),
                 ck_id('witcher_cc.hierarchy.life_events_fortune')::text,
                 ck_id('witcher_cc.hierarchy.life_events_misfortune')::text
               )
             )
           ),
             ck_id('witcher_cc.hierarchy.life_events_misfortune_details')::text
           )
         )
    FROM meta;


-- –û—Ç–≤–µ—Ç—ã (–∫–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç 10%)
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            -- group 1: –£–¥–∞—á–∞ - –î–∂–µ–∫–ø–æ—Ç (o1)
            (1, 1, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 100 –∫—Ä–æ–Ω'),
            (1, 2, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 200 –∫—Ä–æ–Ω'),
            (1, 3, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 300 –∫—Ä–æ–Ω'),
            (1, 4, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 400 –∫—Ä–æ–Ω'),
            (1, 5, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 500 –∫—Ä–æ–Ω'),
            (1, 6, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 600 –∫—Ä–æ–Ω'),
            (1, 7, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 700 –∫—Ä–æ–Ω'),
            (1, 8, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 800 –∫—Ä–æ–Ω'),
            (1, 9, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 900 –∫—Ä–æ–Ω'),
            (1, 10, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 1000 –∫—Ä–æ–Ω'),

            -- group 2: –£–¥–∞—á–∞ - –£—á–∏—Ç–µ–ª—å (o2) - –Ω–∞–≤—ã–∫–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞
            (2, 1, 0.0909, '–í–Ω–∏–º–∞–Ω–∏–µ'),
            (2, 2, 0.0909, '–í—ã–∂–∏–≤–∞–Ω–∏–µ –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ'),
            (2, 3, 0.0909, '–î–µ–¥—É–∫—Ü–∏—è'),
            (2, 4, 0.0909, '–ú–æ–Ω—Å—Ç—Ä–æ–ª–æ–≥–∏—è'),
            (2, 5, 0.0909, '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ'),
            (2, 6, 0.0909, '–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≥–æ—Ä–æ–¥–µ'),
            (2, 7, 0.0909, '–ü–µ—Ä–µ–¥–∞—á–∞ –∑–Ω–∞–Ω–∏–π'),
            (2, 8, 0.0909, '–¢–∞–∫—Ç–∏–∫–∞'),
            (2, 9, 0.0909, '–¢–æ—Ä–≥–æ–≤–ª—è'),
            (2, 10, 0.0909, '–≠—Ç–∏–∫–µ—Ç'),
            (2, 11, 0.0303, '–Ø–∑—ã–∫ - —Å–µ–≤–µ—Ä–Ω—ã–π'),
            (2, 12, 0.0303, '–Ø–∑—ã–∫ - –¥–≤–∞—Ä—Ñ–∏–π—Å–∫–∏–π'),
            (2, 13, 0.0303, '–Ø–∑—ã–∫ - —Å—Ç–∞—Ä—à–∞—è —Ä–µ—á—å'),

            -- group 4: –£–¥–∞—á–∞ - –ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (o4) - –±–æ–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏
            (4, 1, 0.1, '–ê—Ç–ª–µ—Ç–∏–∫–∞'),
            (4, 2, 0.1, '–ë–ª–∏–∂–Ω–∏–π –±–æ–π'),
            (4, 3, 0.1, '–ë–æ—Ä—å–±–∞'),
            (4, 4, 0.1, '–í–µ—Ä—Ö–æ–≤–∞—è –µ–∑–¥–∞'),
            (4, 5, 0.1, '–í–ª–∞–¥–µ–Ω–∏–µ –¥—Ä–µ–≤–∫–æ–≤—ã–º –æ—Ä—É–∂–∏–µ–º'),
            (4, 6, 0.1, '–í–ª–∞–¥–µ–Ω–∏–µ –ª—ë–≥–∫–∏–º–∏ –∫–ª–∏–Ω–∫–∞–º–∏'),
            (4, 7, 0.1, '–í–ª–∞–¥–µ–Ω–∏–µ –º–µ—á–æ–º'),
            (4, 8, 0.1, '–°—Ç—Ä–µ–ª—å–±–∞ –∏–∑ –∞—Ä–±–∞–ª–µ—Ç–∞'),
            (4, 9, 0.1, '–°—Ç—Ä–µ–ª—å–±–∞ –∏–∑ –ª—É–∫–∞'),
            (4, 10, 0.1, '–¢–∞–∫—Ç–∏–∫–∞'),

            -- group 7: –£–¥–∞—á–∞ - –ü—Ä–∏—Ä—É—á–µ–Ω–Ω—ã–π –∑–≤–µ—Ä—å (o7)
            (7, 1, 0.7, '–î–∏–∫–∞—è —Å–æ–±–∞–∫–∞'),
            (7, 2, 0.3, '–í–æ–ª–∫'),

            -- group 10: –£–¥–∞—á–∞ - –†—ã—Ü–∞—Ä—Å—Ç–≤–æ (o10) - –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞
            (10, 1, 0.041, '–†–µ–¥–∞–Ω–∏—è'),
            (10, 2, 0.041, '–ö–∞—ç–¥–≤–µ–Ω'),
            (10, 3, 0.041, '–¢–µ–º–µ—Ä–∏—è'),
            (10, 4, 0.041, '–ê—ç–¥–∏—Ä–Ω'),
            (10, 5, 0.041, '–õ–∏—Ä–∏—è'),
            (10, 6, 0.041, '–†–∏–≤–∏—è'),
            (10, 7, 0.041, '–ö–æ–≤–∏—Ä'),
            (10, 8, 0.041, '–ü–æ–≤–∏—Å'),
            (10, 9, 0.041, '–°–∫–µ–ª–ª–∏–≥–µ'),
            (10, 10, 0.041, '–¶–∏–¥–∞—Ä–∏—Å'),
            (10, 11, 0.041, '–í–µ—Ä–¥—ç–Ω'),
            (10, 12, 0.041, '–¶–∏–Ω—Ç—Ä–∞'),
            (10, 13, 0.041, '–°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞'),
            (10, 14, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –í–∏–∫–æ–≤–∞—Ä–æ'),
            (10, 15, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ê–∏–≥—Ä–µ–Ω'),
            (10, 16, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ù–∞–∑–∞–∏—Ä'),
            (10, 17, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–µ—Ç–∏–∏–Ω–∞'),
            (10, 18, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–∞–≥ –¢—É—Ä–≥–∞'),
            (10, 19, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ì–µ—Å–æ'),
            (10, 20, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –≠–±–±–∏–Ω–≥'),
            (10, 21, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–µ—Ö—Ç'),
            (10, 22, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ì–µ–º–º–µ—Ä–∞'),
            (10, 23, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –≠—Ç–æ–ª–∏—è'),
            (10, 24, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –¢—É—Å—Å–µ–Ω—Ç'),
            (10, 25, 0.0, '–î—Ä—É–≥–æ–µ'),

            -- group 11: –ù–µ–¥–∞—á–∞ - –î–æ–ª–≥ (o1)
            (11, 1, 0.1, '–î–æ–ª–≥ 100 –∫—Ä–æ–Ω'),
            (11, 2, 0.1, '–î–æ–ª–≥ 200 –∫—Ä–æ–Ω'),
            (11, 3, 0.1, '–î–æ–ª–≥ 300 –∫—Ä–æ–Ω'),
            (11, 4, 0.1, '–î–æ–ª–≥ 400 –∫—Ä–æ–Ω'),
            (11, 5, 0.1, '–î–æ–ª–≥ 500 –∫—Ä–æ–Ω'),
            (11, 6, 0.1, '–î–æ–ª–≥ 600 –∫—Ä–æ–Ω'),
            (11, 7, 0.1, '–î–æ–ª–≥ 700 –∫—Ä–æ–Ω'),
            (11, 8, 0.1, '–î–æ–ª–≥ 800 –∫—Ä–æ–Ω'),
            (11, 9, 0.1, '–î–æ–ª–≥ 900 –∫—Ä–æ–Ω'),
            (11, 10, 0.1, '–î–æ–ª–≥ 1000 –∫—Ä–æ–Ω'),

            -- group 12: –ù–µ–¥–∞—á–∞ - –ó–∞–∫–ª—é—á–µ–Ω–∏–µ (o2)
            (12, 1, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 1 –º–µ—Å—è—Ü'),
            (12, 2, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 2 –º–µ—Å—è—Ü–∞'),
            (12, 3, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 3 –º–µ—Å—è—Ü–∞'),
            (12, 4, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 4 –º–µ—Å—è—Ü–∞'),
            (12, 5, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 5 –º–µ—Å—è—Ü–µ–≤'),
            (12, 6, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 6 –º–µ—Å—è—Ü–µ–≤'),
            (12, 7, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 7 –º–µ—Å—è—Ü–µ–≤'),
            (12, 8, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 8 –º–µ—Å—è—Ü–µ–≤'),
            (12, 9, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 9 –º–µ—Å—è—Ü–µ–≤'),
            (12, 10, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 10 –º–µ—Å—è—Ü–µ–≤'),

            -- group 13: –ù–µ–¥–∞—á–∞ - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (o3)
            (13, 1, 0.125, '–ê–ª–∫–æ–≥–æ–ª—å'),
            (13, 2, 0.125, '–¢–∞–±–∞–∫'),
            (13, 3, 0.125, '–§–∏—Å—à—Ç–µ—Ö'),
            (13, 4, 0.125, '–ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã'),
            (13, 5, 0.125, '–ö–ª–µ–ø—Ç–æ–º–∞–Ω–∏—è'),
            (13, 6, 0.125, '–ü–æ—Ö–æ—Ç—å'),
            (13, 7, 0.125, '–û–±–∂–æ—Ä—Å—Ç–≤–æ'),
            (13, 8, 0.125, '–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
            (13, 10, 0.0, '–î—Ä—É–≥–æ–µ (–º–æ–∂–µ—Ç–µ –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–∞–º–∏)'),

            -- group 14: –ù–µ–¥–∞—á–∞ - –õ—é–±–∏–º—ã–π, –¥—Ä—É–≥ –∏–ª–∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–Ω–∏–∫ —É–±–∏—Ç (o4)
            (14, 1, 0.5, '–≠—Ç–æ –±—ã–ª –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π'),
            (14, 2, 0.3, '–£–±–∏—Ç —á—É–¥–æ–≤–∏—â–∞–º–∏'),
            (14, 3, 0.2, '–£–±–∏—Ç —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞–º–∏'),

            -- group 15: –ù–µ–¥–∞—á–∞ - –õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ (o5)
            (15, 1, 0.3, '–í–æ—Ä–æ–≤—Å—Ç–≤–æ'),
            (15, 2, 0.2, '–¢—Ä—É—Å–æ—Å—Ç—å –∏–ª–∏ –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ'),
            (15, 3, 0.3, '–£–±–∏–π—Å—Ç–≤–æ'),
            (15, 4, 0.3, '–ò–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ'),
            (15, 5, 0.3, '–ù–µ–ª–µ–≥–∞–ª—å–Ω–æ–µ –∫–æ–ª–¥–æ–≤—Å—Ç–≤–æ'),

            -- group 16: –ù–µ–¥–∞—á–∞ - –í —Ä–æ–∑—ã—Å–∫–µ (o6)
            (16, 1, 0.3, '–í–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–∂–Ω–∏–∫–æ–≤'),
            (16, 2, 0.3, '–í–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞—é—Ç –≤ –ø–æ—Å—ë–ª–∫–µ'),
            (16, 3, 0.2, '–í–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞—é—Ç –≤ –≥–æ—Ä–æ–¥–µ'),
            (16, 4, 0.2, '–í–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞—é—Ç –≤–æ –≤—Å—ë–º –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ'),

            -- group 17: –ù–µ–¥–∞—á–∞ - –ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ (o7)
            (17, 1, 0.3, '–í–∞—Å —à–∞–Ω—Ç–∞–∂–∏—Ä—É—é—Ç'),
            (17, 2, 0.4, '–í–∞—à–∞ —Ç–∞–π–Ω–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∞'),
            (17, 3, 0.3, '–í–∞—Å –ø—Ä–µ–¥–∞–ª –∫—Ç–æ—Ç–æ –∏–∑ –±–ª–∏–∑–∫–∏—Ö'),

            -- group 18: –ù–µ–¥–∞—á–∞ - –ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π (o8)
            (18, 1, 0.4, '–í—ã –∏–∑—É—Ä–æ–¥–æ–≤–∞–Ω—ã, –∏–∑–º–µ–Ω–∏—Ç–µ –≤–∞—à —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –Ω–∞ <i>–æ–ø–∞—Å–µ–Ω–∏–µ</i>'),
            (18, 2, 0.2, '–í—ã –ª–µ—á–∏–ª–∏—Å—å –æ—Ç 1 –¥–æ 10 –º–µ—Å—è—Ü–µ–≤'),
            (18, 3, 0.2, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö (–æ—Ç 1 –¥–æ 10) –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (18, 4, 0.2, '–í–∞—Å –º—É—á–∞—é—Ç –∂—É—Ç–∫–∏–µ –∫–æ—à–º–∞—Ä—ã'),

            -- group 19: –ù–µ–¥–∞—á–∞ - –§–∏–∑–∏—á–µ—Å–∫–∞—è –∏–ª–∏ –ø—Å–∏—Ö–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≤–º–∞ (o9)
            (19, 1, 0.3, '–í–∞—Å –æ—Ç—Ä–∞–≤–∏–ª–∏, –Ω–∞–≤—Å–µ–≥–¥–∞ –ø–æ—Ç–µ—Ä—è–π—Ç–µ 5 –ü–ó.'),
            (19, 2, 0.4, '–í—ã —Å—Ç—Ä–∞–¥–∞–µ—Ç–µ –æ—Ç –ø–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∞—Ç–∞–∫ –∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–µ—Ä—à–∞—Ç—å –∏—Å–ø—ã—Ç–∞–Ω–∏–µ –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (–∫–∞–∂–¥—ã–µ 5 —Ä–∞—É–Ω–¥–æ–≤) –≤ —Å—Ç—Ä–µ—Å—Å–æ–≤–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.'),
            (19, 3, 0.3, '–£ –≤–∞—Å —Å–µ—Ä—å—ë–∑–Ω–æ–µ –¥—É—à–µ–≤–Ω–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –≤—ã –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã, –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã –∏ –¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã, –∞ —Ç–∞–∫–∂–µ —Å–ª—ã—à–∏—Ç–µ –≥–æ–ª–æ—Å–∞, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤–µ–¥—É—â–∏–π.'),

            -- group 20: –ù–µ–¥–∞—á–∞ - –ü—Ä–æ–∫–ª—è—Ç–∏–µ (o10)
            (20, 1, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ —á—É–¥–æ–≤–∏—â–Ω–æ—Å—Ç–∏</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –°—Ä–µ–¥–Ω—è—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –ñ–µ—Ä—Ç–≤–∞ –≤—ã–≥–ª—è–¥–∏—Ç —á—É–¥–æ–≤–∏—â–Ω–æ –¥–ª—è –≤—Å–µ—Ö, –∫—Ç–æ –µ—ë –≤–∏–¥–∏—Ç. –û–Ω–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≥—É–º–∞–Ω–æ–∏–¥–æ–º, –Ω–æ —á–µ—Ä—Ç—ã –ª–∏—Ü–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—é—Ç —Å—Ö–æ–¥—Å—Ç–≤–æ —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º –∂–∏–≤–æ—Ç–Ω—ã–º. –°–¥–µ–ª–∞–π—Ç–µ –±—Ä–æ—Å–æ–∫ IdlO, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –∑–∞ –∂–∏–≤–æ—Ç–Ω–æ–µ: 1 –∏–ª–∏ 2 ‚Äî –º–µ–¥–≤–µ–¥—å, 3 –∏–ª–∏ 4 ‚Äî –∫–∞–±–∞–Ω, 5 –∏–ª–∏ 6 ‚Äî –ø—Ç–∏—Ü–∞, 7 –∏–ª–∏ 8 ‚Äî –∑–º–µ—è, 9 –∏–ª–∏ 10 ‚Äî –Ω–∞—Å–µ–∫–æ–º–æ–µ. –°–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–∫–ª—è—Ç–æ–≥–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ ¬´–Ω–µ–Ω–∞–≤–∏—Å—Ç—å –∏ –æ–ø–∞—Å–µ–Ω–∏–µ¬ª –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–∏–º –æ–Ω –±—ã–ª —Ä–∞–Ω—å—à–µ. –ü—Ä–æ–∫–ª—è—Ç—ã–π –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á—É–¥–æ–≤–∏—â–µ–º –∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —É—Ä–æ–Ω–∞ –æ—Ç —Å–µ—Ä–µ–±—Ä–∞, –Ω–æ —Å –≤–∏–¥—É –ø–æ—Ö–æ–∂ –Ω–∞ —á—É–¥–æ–≤–∏—â–µ, –∏ –µ–≥–æ –º–æ–∂–Ω–æ —Å–ø—É—Ç–∞—Ç—å —Å —á—É–¥–æ–≤–∏—â–µ–º, –µ—Å–ª–∏ –ø—Ä–æ–≤–∞–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–æ –°–õ 18.'),
            (20, 2, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –°—Ä–µ–¥–Ω—è—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –î–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–æ–Ω—É, –ø—Ä–∏–∑—ã–≤–∞—è –≤ –≤–∏–¥–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ –≤—Å–µ—Ö, –∫ –∫–æ–º—É –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ –æ—Ç–Ω–µ—Å–ª–∏—Å—å –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ –ø—Ä–æ–∫–ª—è—Ç–∏—è —Å–¥–µ–ª–∞–π—Ç–µ –±—Ä–æ—Å–æ–∫ 5d6, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ —è–≤–∏—Ç—Å—è. –ï—Å–ª–∏ –∑–æ–Ω–∞ –æ—Å–æ–±–µ–Ω–Ω–æ —É–∂–∞—Å–Ω–∞, –±—Ä–æ—Å—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ 2d6. –ï—Å–ª–∏ –∑–æ–Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–ø–æ–∫–æ–π–Ω–∞—è, –±—Ä–æ—Å—å—Ç–µ —Ç–æ–ª—å–∫–æ 2d6. –ü—Ä–∏–∑—Ä–∞–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –∑–æ–Ω–µ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç —É–±–∏—Ç—ã, –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–æ—á—å. –û–Ω–∏ –Ω–∞–ø–∞–¥–∞—é—Ç –Ω–∞ –≤—Å—ë, —á—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –∑–æ–Ω—É –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–∫–ª—è—Ç–∏—è. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–Ω—è—Ç—å –ø—Ä–æ–∫–ª—è—Ç–∏–µ ‚Äî –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å—é —Ç—É –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å, —á—Ç–æ —Å–ª—É—á–∏–ª–∞—Å—å –≤ —ç—Ç–æ–π –∑–æ–Ω–µ.'),
            (20, 3, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ –∑–∞—Ä–∞–∑—ã</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –í—ã—Å–æ–∫–∞—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –î–µ–ª–∞–µ—Ç –∂–µ—Ä—Ç–≤—É –ø—Ä–æ–∫–ª—è—Ç–∏—è –Ω–æ—Å–∏—Ç–µ–ª–µ–º –æ–ø–∞—Å–Ω–æ–π –±–æ–ª–µ–∑–Ω–∏. –ë–æ–ª–µ–∑–Ω—å –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–æ—Å–∏—Ç–µ–ª—è, –Ω–æ –ª—é–±–æ–π, –∫—Ç–æ –¥–æ—Ç—Ä–æ–Ω–µ—Ç—Å—è –¥–æ –Ω–µ–≥–æ –∏ –ø—Ä–æ–≤–∞–ª–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 18, –∑–∞—Ä–∞–∂–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –Ω–æ—Å–∏—Ç–µ–ª—å –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –∑–¥–∞–Ω–∏–∏ –¥–æ–ª—å—à–µ 3 –¥–Ω–µ–π, —Ç–æ –≤—Å–µ, –∫—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —ç—Ç–æ–º –∑–¥–∞–Ω–∏–∏, –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 16. –ï—Å–ª–∏ –Ω–æ—Å–∏—Ç–µ–ª—å –ø—Ä–æ–≤–æ–¥–∏—Ç –≤ –≥–æ—Ä–æ–¥–µ –±–æ–ª—å—à–µ –Ω–µ–¥–µ–ª–∏, —Ç–æ –≤—Å–µ –≤ –≥–æ—Ä–æ–¥–µ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 14.'),
            (20, 4, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ —Å—Ç—Ä–∞–Ω–Ω–∏–∫–∞</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –í—ã—Å–æ–∫–∞—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –û–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –∂–µ—Å—Ç–æ–∫–∏—Ö –ø—Ä–æ–∫–ª—è—Ç–∏–π. –°–∞–º–æ–π –∂–µ—Ä—Ç–≤–µ –æ–Ω–æ –≤—Ä–µ–¥–∞ –Ω–µ –ø—Ä–∏—á–∏–Ω—è–µ—Ç, –Ω–æ –¥–∞–∂–µ —Å–∞–º—ã–π –≤–µ—Ä–Ω—ã–π –¥—Ä—É–≥, –±–ª–∏–∑–∫–∏–π —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫ –∏–ª–∏ —Ç–æ–≤–∞—Ä–∏—â –æ—Ç –Ω–µ—ë –æ—Ç–≤–µ—Ä–Ω—ë—Ç—Å—è. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ª—é–¥–∏ –ø–æ–∫–∏–¥–∞—é—Ç –∂–µ—Ä—Ç–≤—É –∏–∑-–∑–∞ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π, —Å—Å–æ—Ä, –ø–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–∏—á–∏–Ω–∞–º –∏–ª–∏ –∏–∑-–∑–∞ –ø–æ—Ö–∏—â–µ–Ω–∏–π, –ø–æ–∫–∞ (–µ—Å–ª–∏ –Ω–æ—Å–∏—Ç–µ–ª—å –ø—Ä–æ–∫–ª—è—Ç–∏—è –¥–æ–ª—å—à–µ –º–µ—Å—è—Ü–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ) —Å–∞–º–∞ —Å—É–¥—å–±–∞ –Ω–µ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —É–±–∏—Ç—å –Ω–µ—Å—á–∞—Å—Ç–Ω–æ–≥–æ.'),
            (20, 5, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–∏</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –í—ã—Å–æ–∫–∞—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –ü—Ä–æ–∫–ª—è—Ç—ã–π –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–µ–π —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 30 % –∫–∞–∂–¥—É—é –Ω–æ—á—å –Ω–∞ –≤–æ—Å—Ö–æ–¥–µ –ª—É–Ω—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–æ–ª–∫–æ–ª–∞–∫–∞. –ü–æ—Å–ª–µ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∂–µ—Å—Ç–æ–∫–∏–º —Ö–∏—â–Ω–∏–∫–æ–º —Å —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π —Ö–∏—Ç—Ä–æ—Å—Ç—å—é –∏ —Å –∂–µ–ª–∞–Ω–∏–µ–º —É–±–∏–≤–∞—Ç—å. –ï—Å–ª–∏ –æ–±—Ä–∞—Ç–∏–≤—à–∏–π—Å—è ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–∂ –∏–≥—Ä–æ–∫–∞, —Ç–æ –¥–æ –≤–æ—Å—Ö–æ–¥–∞ —Å–æ–ª–Ω—Ü–∞ –∏–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ–¥—É—â–∏–π. –ë—É–¥—É—á–∏ –≤–æ–ª–∫–æ–ª–∞–∫–æ–º, –ø–µ—Ä—Å–æ–Ω–∞–∂ –ø–æ—Ç–∞–∫–∞–µ—Ç —Å–∞–º—ã–º —É–∂–∞—Å–Ω—ã–º —Å–≤–æ–∏–º –ø–æ—Ä—ã–≤–∞–º, –±–µ–∑ –∂–∞–ª–æ—Å—Ç–∏ —É–±–∏–≤–∞—è –ª—é–±–æ–≥–æ, –∫—Ç–æ –≤—Å—Ç–∞–Ω–µ—Ç –Ω–∞ –ø—É—Ç–∏. –ù–∞—Ö–æ–¥—è—Å—å –≤ –∑–≤–µ—Ä–∏–Ω–æ–º –æ–±–ª–∏–∫–µ, –ø—Ä–æ–∫–ª—è—Ç—ã–π –ø–æ–ª—É—á–∞–µ—Ç –≤—Å—ë –æ—Ä—É–∂–∏–µ, –±—Ä–æ–Ω—é –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤–æ–ª–∫–æ–ª–∞–∫–∞. –ü–µ—Ä—Å–æ–Ω–∞–∂ —Ç–∞–∫–∂–µ –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç –±–æ–Ω—É—Å –∫ —á–µ—Ç—ã—Ä—ë–º —Å–≤–æ–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –Ω–∏–∂–µ.<br><b>–ë–æ–Ω—É—Å—ã –≤–æ–ª–∫–æ–ª–∞–∫–∞:</b> –†–µ–∞–∫—Ü–∏—è +2, –¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ +3, –°–∫–æ—Ä–æ—Å—Ç—å +4, –≠–º–ø–∞—Ç–∏—è -5'),
            (20, 6, 0.0, '<b style="font-size: 1.17em;">–î—Ä—É–≥–æ–µ</b><br>–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ!')
          ) AS raw_data_ru(group_id, num, probability, option_txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            -- group 1: Fortune ‚Äî Jackpot (o1)
            (1, 1, 0.1, 'Receive 100 crowns'),
            (1, 2, 0.1, 'Receive 200 crowns'),
            (1, 3, 0.1, 'Receive 300 crowns'),
            (1, 4, 0.1, 'Receive 400 crowns'),
            (1, 5, 0.1, 'Receive 500 crowns'),
            (1, 6, 0.1, 'Receive 600 crowns'),
            (1, 7, 0.1, 'Receive 700 crowns'),
            (1, 8, 0.1, 'Receive 800 crowns'),
            (1, 9, 0.1, 'Receive 900 crowns'),
            (1, 10, 0.1, 'Receive 1,000 crowns'),

            -- group 2: Fortune ‚Äî Find a Teacher (o2) - INT skills
            (2, 1, 0.0909, 'Awareness'),
            (2, 2, 0.0909, 'Wilderness Survival'),
            (2, 3, 0.0909, 'Deduction'),
            (2, 4, 0.0909, 'Monster Lore'),
            (2, 5, 0.0909, 'Education'),
            (2, 6, 0.0909, 'Streetwise'),
            (2, 7, 0.0909, 'Teaching'),
            (2, 8, 0.0909, 'Tactics'),
            (2, 9, 0.0909, 'Business'),
            (2, 10, 0.0909, 'Social Etiquette'),
            (2, 11, 0.0303, 'Language - Northern'),
            (2, 12, 0.0303, 'Language - Dwarvish'),
            (2, 13, 0.0303, 'Language - Elder Speech'),

            -- group 4: Fortune ‚Äî Find a Combat Teacher (o4) - combat skills
            (4, 1, 0.1, 'Athletics'),
            (4, 2, 0.1, 'Melee'),
            (4, 3, 0.1, 'Brawling'),
            (4, 4, 0.1, 'Riding'),
            (4, 5, 0.1, 'Staff'),
            (4, 6, 0.1, 'Small Blades'),
            (4, 7, 0.1, 'Swordsmanship'),
            (4, 8, 0.1, 'Crossbow'),
            (4, 9, 0.1, 'Archery'),
            (4, 10, 0.1, 'Tactics'),

            -- group 7: Fortune ‚Äî Tamed a Wild Animal (o7)
            (7, 1, 0.7, 'Wild Dog'),
            (7, 2, 0.3, 'Wolf'),

            -- group 10: Fortune ‚Äî Knighted (o10) - kingdoms
            (10, 1, 0.041, 'Redania'),
            (10, 2, 0.041, 'Kaedwen'),
            (10, 3, 0.041, 'Temeria'),
            (10, 4, 0.041, 'Aedirn'),
            (10, 5, 0.041, 'Lyria'),
            (10, 6, 0.041, 'Rivia'),
            (10, 7, 0.041, 'Kovir'),
            (10, 8, 0.041, 'Poviss'),
            (10, 9, 0.041, 'Skellige'),
            (10, 10, 0.041, 'Cidaris'),
            (10, 11, 0.041, 'Verden'),
            (10, 12, 0.041, 'Cintra'),
            (10, 13, 0.041, 'The Heart of Nilfgaard'),
            (10, 14, 0.041, 'Nilfgaardian Vassal State - Vicovaro'),
            (10, 15, 0.041, 'Nilfgaardian Vassal State - Angren'),
            (10, 16, 0.041, 'Nilfgaardian Vassal State - Nazair'),
            (10, 17, 0.041, 'Nilfgaardian Vassal State - Mettina'),
            (10, 18, 0.041, 'Nilfgaardian Vassal State - Mag Turga'),
            (10, 19, 0.041, 'Nilfgaardian Vassal State - Gheso'),
            (10, 20, 0.041, 'Nilfgaardian Vassal State - Ebbing'),
            (10, 21, 0.041, 'Nilfgaardian Vassal State - Maecht'),
            (10, 22, 0.041, 'Nilfgaardian Vassal State - Gemmeria'),
            (10, 23, 0.041, 'Nilfgaardian Vassal State - Etolia'),
            (10, 24, 0.041, 'Nilfgaardian Vassal State - Toussaint'),
            (10, 25, 0.0, 'Other'),

            -- group 11: Misfortune ‚Äî Debt (o1)
            (11, 1, 0.1, 'Debt 100 crowns'),
            (11, 2, 0.1, 'Debt 200 crowns'),
            (11, 3, 0.1, 'Debt 300 crowns'),
            (11, 4, 0.1, 'Debt 400 crowns'),
            (11, 5, 0.1, 'Debt 500 crowns'),
            (11, 6, 0.1, 'Debt 600 crowns'),
            (11, 7, 0.1, 'Debt 700 crowns'),
            (11, 8, 0.1, 'Debt 800 crowns'),
            (11, 9, 0.1, 'Debt 900 crowns'),
            (11, 10, 0.1, 'Debt 1,000 crowns'),

            -- group 12: Misfortune ‚Äî Imprisonment (o2)
            (12, 1, 0.1, 'You served 1 month in prison'),
            (12, 2, 0.1, 'You served 2 months in prison'),
            (12, 3, 0.1, 'You served 3 months in prison'),
            (12, 4, 0.1, 'You served 4 months in prison'),
            (12, 5, 0.1, 'You served 5 months in prison'),
            (12, 6, 0.1, 'You served 6 months in prison'),
            (12, 7, 0.1, 'You served 7 months in prison'),
            (12, 8, 0.1, 'You served 8 months in prison'),
            (12, 9, 0.1, 'You served 9 months in prison'),
            (12, 10, 0.1, 'You served 10 months in prison'),

            -- group 13: Misfortune ‚Äî Addiction (o3)
            (13, 1, 0.125, 'Alcohol'),
            (13, 2, 0.125, 'Tobacco'),
            (13, 3, 0.125, 'Fisstech'),
            (13, 4, 0.125, 'Gambling'),
            (13, 5, 0.125, 'Kleptomania'),
            (13, 6, 0.125, 'Lust'),
            (13, 7, 0.125, 'Gluttony'),
            (13, 8, 0.125, 'Adrenaline addiction'),
            (13, 10, 0.0,  'Other (create your own)'),

            -- group 14: Misfortune ‚Äî Lover, Friend or Relative Killed (o4)
            (14, 1, 0.5, 'It was an accident'),
            (14, 2, 0.3, 'Murdered by monsters'),
            (14, 3, 0.2, 'Murdered by bandits'),

            -- group 15: Misfortune ‚Äî False Accusation (o5)
            (15, 1, 0.3, 'Theft'),
            (15, 2, 0.2, 'Cowardice or betrayal'),
            (15, 3, 0.3, 'Murder'),
            (15, 4, 0.3, 'Rape'),
            (15, 5, 0.3, 'Illegal witchcraft'),

            -- group 16: Misfortune ‚Äî Wanted (o6)
            (16, 1, 0.3, 'Wanted by a few guards'),
            (16, 2, 0.3, 'Wanted in a village'),
            (16, 3, 0.2, 'Wanted in a major city'),
            (16, 4, 0.2, 'Wanted throughout the entire kingdom'),

            -- group 17: Misfortune ‚Äî Betrayal (o7)
            (17, 1, 0.3, 'You are being blackmailed'),
            (17, 2, 0.4, 'Your secret was exposed'),
            (17, 3, 0.3, 'You were betrayed by someone close'),

            -- group 18: Misfortune ‚Äî Accident (o8)
            (18, 1, 0.4, 'You were disfigured; change your social status to <i>Feared</i>'),
            (18, 2, 0.2, 'You were recovering for a period of 1 to 10 months'),
            (18, 3, 0.2, 'You lost several (1 to 10) months of memory from that year'),
            (18, 4, 0.2, 'You suffer dreadful nightmares'),

            -- group 19: Misfortune ‚Äî Physical or Mental Trauma (o9)
            (19, 1, 0.3, 'You were poisoned; permanently lose 5 HP'),
            (19, 2, 0.4, 'You suffer panic attacks and must make Stun saves (every 5 rounds) in stressful situations'),
            (19, 3, 0.3, 'You have a severe mental disorder; you are aggressive, irrational, and depressive, and you hear voices controlled by the GM'),

            -- group 20: Misfortune ‚Äî Curse (o10)
            (20, 1, 0.2, '<b style="font-size: 1.17em;">Curse of Monstrosity</b><br><b>Intensity:</b> Moderate<br><b>Effect:</b> The victim appears monstrous to all who see them. They remain humanoid, but their features resemble a random animal. Roll 1d10 to determine the animal: 1‚Äì2 bear, 3‚Äì4 boar, 5‚Äì6 bird, 7‚Äì8 snake, 9‚Äì10 insect. The victim‚Äôs social status becomes ‚ÄúHated & Feared.‚Äù They are not actually a monster and do not take damage from silver, but can be mistaken for one on a failed Education check DC 18.'),
            (20, 2, 0.2, '<b style="font-size: 1.17em;">Curse of Phantoms</b><br><b>Intensity:</b> Moderate<br><b>Effect:</b> Affects an area, summoning as ghosts all who were wronged there. When casting, roll 5d6 to determine how many appear (add 2d6 if the area is especially horrific; only 2d6 if it is rather calm). Ghosts remain until destroyed and return the next night. They attack anything entering the cursed zone. The only way to lift the curse is to somehow right all the wrongs done there.'),
            (20, 3, 0.2, '<b style="font-size: 1.17em;">Curse of Pestilence</b><br><b>Intensity:</b> High<br><b>Effect:</b> The victim becomes a carrier of a dangerous disease. It does not affect the carrier, but anyone who touches them and fails a Physique check DC 18 is infected. If the carrier stays inside a building for more than 3 days, everyone inside must make a Physique check DC 16. If the carrier remains in a city for more than a week, everyone in the city must make a Physique check DC 14.'),
            (20, 4, 0.2, '<b style="font-size: 1.17em;">Curse of the Wanderer</b><br><b>Intensity:</b> High<br><b>Effect:</b> One of the cruelest curses. It does not harm the victim directly, but even the truest friend or closest kin will eventually abandon them. People drift away due to quarrels, distance, circumstance, or kidnappings until‚Äîif the victim stays in one place longer than a month‚Äîfate itself tries to kill them.'),
            (20, 5, 0.2, '<b style="font-size: 1.17em;">Curse of Lycanthropy</b><br><b>Intensity:</b> High<br><b>Effect:</b> Each night at moonrise there is a 30% chance the victim transforms into a werewolf. While transformed, the character becomes a brutal predator with human cunning and a lust for killing. If it is a PC, the GM controls them until sunrise. In beast form, the character gains the werewolf‚Äôs weapons, armor, and abilities plus the following bonuses:<br><b>Werewolf Bonuses:</b> Reflex +2, Body +3, Speed +4, Empathy ‚àí5'),
            (20, 6, 0.0,  '<b style="font-size: 1.17em;">Other</b><br>Create your own!')
          ) AS raw_data_en(group_id, num, probability, option_txt)

),
vals AS (
         SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                 '<td>' || option_txt || '</td>') AS text,
                num,
                probability,
                lang,
                group_id
         FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, rules_vals(group_id, id, body) AS (
    SELECT v.num
         , gen_random_uuid()
         , ('{
               "and":
                 [
                   { "==":
                       [
                         { "var": "answers.lastAnswer.questionId" },
                         "wcc_life_events_' || case when v.num > 10 then 'mis' else '' end
                                            || 'fortune"
                       ]
                   },
                   { "in":
                       [
                         "wcc_life_events_' || case when v.num > 10 then 'mis' else '' end
                                            || 'fortune_o'
                                            || to_char(case when v.num > 10 then v.num - 10 else v.num end, 'FM00')
                                            || '" ,
                         { "var": "answers.lastAnswer.answerIds" }
                       ]
                   }
                 ]
             }')::jsonb FROM (SELECT DISTINCT group_id FROM raw_data) v(num)
)
, ins_rules AS (
  INSERT INTO rules(ru_id, body) SELECT r.id, r.body FROM rules_vals r
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id, metadata)
SELECT 'wcc_life_events_fortune_or_not_details_o' || to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
       vals.num AS sort_order,
       rules_vals.id AS visible_ru_ru_id,
       jsonb_build_object(
           'probability', vals.probability
       ) || CASE WHEN to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00')
                  IN ('1802','1803','1310','2006') THEN '{}'::jsonb
                  ELSE jsonb_build_object( 'counterIncrement'
                                         , jsonb_build_object('id', 'lifeEventsCounter', 'step', 10))
           END AS metadata
FROM vals
CROSS JOIN meta
LEFT JOIN rules_vals ON rules_vals.group_id = vals.group_id
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã
WITH
  raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            -- group 1: –£–¥–∞—á–∞ - –î–∂–µ–∫–ø–æ—Ç (o1)
            (1, 1, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 100 –∫—Ä–æ–Ω'),
            (1, 2, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 200 –∫—Ä–æ–Ω'),
            (1, 3, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 300 –∫—Ä–æ–Ω'),
            (1, 4, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 400 –∫—Ä–æ–Ω'),
            (1, 5, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 500 –∫—Ä–æ–Ω'),
            (1, 6, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 600 –∫—Ä–æ–Ω'),
            (1, 7, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 700 –∫—Ä–æ–Ω'),
            (1, 8, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 800 –∫—Ä–æ–Ω'),
            (1, 9, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 900 –∫—Ä–æ–Ω'),
            (1, 10, 0.1, '–ü–æ–ª—É—á–∞–µ—Ç–µ 1000 –∫—Ä–æ–Ω'),

            -- group 2: –£–¥–∞—á–∞ - –£—á–∏—Ç–µ–ª—å (o2) - –Ω–∞–≤—ã–∫–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞
            (2, 1, 0.0909, '–í–Ω–∏–º–∞–Ω–∏–µ'),
            (2, 2, 0.0909, '–í—ã–∂–∏–≤–∞–Ω–∏–µ –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ'),
            (2, 3, 0.0909, '–î–µ–¥—É–∫—Ü–∏—è'),
            (2, 4, 0.0909, '–ú–æ–Ω—Å—Ç—Ä–æ–ª–æ–≥–∏—è'),
            (2, 5, 0.0909, '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ'),
            (2, 6, 0.0909, '–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≥–æ—Ä–æ–¥–µ'),
            (2, 7, 0.0909, '–ü–µ—Ä–µ–¥–∞—á–∞ –∑–Ω–∞–Ω–∏–π'),
            (2, 8, 0.0909, '–¢–∞–∫—Ç–∏–∫–∞'),
            (2, 9, 0.0909, '–¢–æ—Ä–≥–æ–≤–ª—è'),
            (2, 10, 0.0909, '–≠—Ç–∏–∫–µ—Ç'),
            (2, 11, 0.0303, '–Ø–∑—ã–∫ - —Å–µ–≤–µ—Ä–Ω—ã–π'),
            (2, 12, 0.0303, '–Ø–∑—ã–∫ - –¥–≤–∞—Ä—Ñ–∏–π—Å–∫–∏–π'),
            (2, 13, 0.0303, '–Ø–∑—ã–∫ - —Å—Ç–∞—Ä—à–∞—è —Ä–µ—á—å'),

            -- group 4: –£–¥–∞—á–∞ - –ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (o4) - –±–æ–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏
            (4, 1, 0.1, '–ê—Ç–ª–µ—Ç–∏–∫–∞'),
            (4, 2, 0.1, '–ë–ª–∏–∂–Ω–∏–π –±–æ–π'),
            (4, 3, 0.1, '–ë–æ—Ä—å–±–∞'),
            (4, 4, 0.1, '–í–µ—Ä—Ö–æ–≤–∞—è –µ–∑–¥–∞'),
            (4, 5, 0.1, '–í–ª–∞–¥–µ–Ω–∏–µ –¥—Ä–µ–≤–∫–æ–≤—ã–º –æ—Ä—É–∂–∏–µ–º'),
            (4, 6, 0.1, '–í–ª–∞–¥–µ–Ω–∏–µ –ª—ë–≥–∫–∏–º–∏ –∫–ª–∏–Ω–∫–∞–º–∏'),
            (4, 7, 0.1, '–í–ª–∞–¥–µ–Ω–∏–µ –º–µ—á–æ–º'),
            (4, 8, 0.1, '–°—Ç—Ä–µ–ª—å–±–∞ –∏–∑ –∞—Ä–±–∞–ª–µ—Ç–∞'),
            (4, 9, 0.1, '–°—Ç—Ä–µ–ª—å–±–∞ –∏–∑ –ª—É–∫–∞'),
            (4, 10, 0.1, '–¢–∞–∫—Ç–∏–∫–∞'),

            -- group 7: –£–¥–∞—á–∞ - –ü—Ä–∏—Ä—É—á–µ–Ω–Ω—ã–π –∑–≤–µ—Ä—å (o7)
            (7, 1, 0.7, '–î–∏–∫–∞—è —Å–æ–±–∞–∫–∞'),
            (7, 2, 0.3, '–í–æ–ª–∫'),

            -- group 10: –£–¥–∞—á–∞ - –†—ã—Ü–∞—Ä—Å—Ç–≤–æ (o10) - –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞
            (10, 1, 0.041, '–†–µ–¥–∞–Ω–∏—è'),
            (10, 2, 0.041, '–ö–∞—ç–¥–≤–µ–Ω'),
            (10, 3, 0.041, '–¢–µ–º–µ—Ä–∏—è'),
            (10, 4, 0.041, '–ê—ç–¥–∏—Ä–Ω'),
            (10, 5, 0.041, '–õ–∏—Ä–∏—è'),
            (10, 6, 0.041, '–†–∏–≤–∏—è'),
            (10, 7, 0.041, '–ö–æ–≤–∏—Ä'),
            (10, 8, 0.041, '–ü–æ–≤–∏—Å'),
            (10, 9, 0.041, '–°–∫–µ–ª–ª–∏–≥–µ'),
            (10, 10, 0.041, '–¶–∏–¥–∞—Ä–∏—Å'),
            (10, 11, 0.041, '–í–µ—Ä–¥—ç–Ω'),
            (10, 12, 0.041, '–¶–∏–Ω—Ç—Ä–∞'),
            (10, 13, 0.041, '–°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞'),
            (10, 14, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –í–∏–∫–æ–≤–∞—Ä–æ'),
            (10, 15, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ê–∏–≥—Ä–µ–Ω'),
            (10, 16, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ù–∞–∑–∞–∏—Ä'),
            (10, 17, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–µ—Ç–∏–∏–Ω–∞'),
            (10, 18, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–∞–≥ –¢—É—Ä–≥–∞'),
            (10, 19, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ì–µ—Å–æ'),
            (10, 20, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –≠–±–±–∏–Ω–≥'),
            (10, 21, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–µ—Ö—Ç'),
            (10, 22, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ì–µ–º–º–µ—Ä–∞'),
            (10, 23, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –≠—Ç–æ–ª–∏—è'),
            (10, 24, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –¢—É—Å—Å–µ–Ω—Ç'),
            (10, 25, 0.0, '–î—Ä—É–≥–æ–µ'),

            -- group 11: –ù–µ–¥–∞—á–∞ - –î–æ–ª–≥ (o1)
            (11, 1, 0.1, '–î–æ–ª–≥ 100 –∫—Ä–æ–Ω'),
            (11, 2, 0.1, '–î–æ–ª–≥ 200 –∫—Ä–æ–Ω'),
            (11, 3, 0.1, '–î–æ–ª–≥ 300 –∫—Ä–æ–Ω'),
            (11, 4, 0.1, '–î–æ–ª–≥ 400 –∫—Ä–æ–Ω'),
            (11, 5, 0.1, '–î–æ–ª–≥ 500 –∫—Ä–æ–Ω'),
            (11, 6, 0.1, '–î–æ–ª–≥ 600 –∫—Ä–æ–Ω'),
            (11, 7, 0.1, '–î–æ–ª–≥ 700 –∫—Ä–æ–Ω'),
            (11, 8, 0.1, '–î–æ–ª–≥ 800 –∫—Ä–æ–Ω'),
            (11, 9, 0.1, '–î–æ–ª–≥ 900 –∫—Ä–æ–Ω'),
            (11, 10, 0.1, '–î–æ–ª–≥ 1000 –∫—Ä–æ–Ω'),

            -- group 12: –ù–µ–¥–∞—á–∞ - –ó–∞–∫–ª—é—á–µ–Ω–∏–µ (o2)
            (12, 1, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 1 –º–µ—Å—è—Ü'),
            (12, 2, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 2 –º–µ—Å—è—Ü–∞'),
            (12, 3, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 3 –º–µ—Å—è—Ü–∞'),
            (12, 4, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 4 –º–µ—Å—è—Ü–∞'),
            (12, 5, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 5 –º–µ—Å—è—Ü–µ–≤'),
            (12, 6, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 6 –º–µ—Å—è—Ü–µ–≤'),
            (12, 7, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 7 –º–µ—Å—è—Ü–µ–≤'),
            (12, 8, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 8 –º–µ—Å—è—Ü–µ–≤'),
            (12, 9, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 9 –º–µ—Å—è—Ü–µ–≤'),
            (12, 10, 0.1, '–û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 10 –º–µ—Å—è—Ü–µ–≤'),

            -- group 13: –ù–µ–¥–∞—á–∞ - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (o3)
            (13, 1, 0.125, '–ê–ª–∫–æ–≥–æ–ª—å'),
            (13, 2, 0.125, '–¢–∞–±–∞–∫'),
            (13, 3, 0.125, '–§–∏—Å—à—Ç–µ—Ö'),
            (13, 4, 0.125, '–ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã'),
            (13, 5, 0.125, '–ö–ª–µ–ø—Ç–æ–º–∞–Ω–∏—è'),
            (13, 6, 0.125, '–ü–æ—Ö–æ—Ç—å'),
            (13, 7, 0.125, '–û–±–∂–æ—Ä—Å—Ç–≤–æ'),
            (13, 8, 0.125, '–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
            (13, 10, 0.0, '–î—Ä—É–≥–æ–µ (–º–æ–∂–µ—Ç–µ –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–∞–º–∏)'),

            -- group 14: –ù–µ–¥–∞—á–∞ - –õ—é–±–∏–º—ã–π, –¥—Ä—É–≥ –∏–ª–∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–Ω–∏–∫ —É–±–∏—Ç (o4)
            (14, 1, 0.5, '–≠—Ç–æ –±—ã–ª –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π'),
            (14, 2, 0.3, '–£–±–∏—Ç —á—É–¥–æ–≤–∏—â–∞–º–∏'),
            (14, 3, 0.2, '–£–±–∏—Ç —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞–º–∏'),

            -- group 15: –ù–µ–¥–∞—á–∞ - –õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ (o5)
            (15, 1, 0.3, '–í–æ—Ä–æ–≤—Å—Ç–≤–æ'),
            (15, 2, 0.2, '–¢—Ä—É—Å–æ—Å—Ç—å –∏–ª–∏ –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ'),
            (15, 3, 0.3, '–£–±–∏–π—Å—Ç–≤–æ'),
            (15, 4, 0.3, '–ò–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ'),
            (15, 5, 0.3, '–ù–µ–ª–µ–≥–∞–ª—å–Ω–æ–µ –∫–æ–ª–¥–æ–≤—Å—Ç–≤–æ'),

            -- group 16: –ù–µ–¥–∞—á–∞ - –í —Ä–æ–∑—ã—Å–∫–µ (o6)
            (16, 1, 0.3, '–í–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–∂–Ω–∏–∫–æ–≤'),
            (16, 2, 0.3, '–í–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞—é—Ç –≤ –ø–æ—Å—ë–ª–∫–µ'),
            (16, 3, 0.2, '–í–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞—é—Ç –≤ –≥–æ—Ä–æ–¥–µ'),
            (16, 4, 0.2, '–í–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞—é—Ç –≤–æ –≤—Å—ë–º –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ'),

            -- group 17: –ù–µ–¥–∞—á–∞ - –ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ (o7)
            (17, 1, 0.3, '–í–∞—Å —à–∞–Ω—Ç–∞–∂–∏—Ä—É—é—Ç'),
            (17, 2, 0.4, '–í–∞—à–∞ —Ç–∞–π–Ω–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∞'),
            (17, 3, 0.3, '–í–∞—Å –ø—Ä–µ–¥–∞–ª –∫—Ç–æ—Ç–æ –∏–∑ –±–ª–∏–∑–∫–∏—Ö'),

            -- group 18: –ù–µ–¥–∞—á–∞ - –ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π (o8)
            (18, 1, 0.4, '–í—ã –∏–∑—É—Ä–æ–¥–æ–≤–∞–Ω—ã, –∏–∑–º–µ–Ω–∏—Ç–µ –≤–∞—à —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –Ω–∞ <i>–æ–ø–∞—Å–µ–Ω–∏–µ</i>'),
            (18, 2, 0.2, '–í—ã –ª–µ—á–∏–ª–∏—Å—å –æ—Ç 1 –¥–æ 10 –º–µ—Å—è—Ü–µ–≤'),
            (18, 3, 0.2, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö (–æ—Ç 1 –¥–æ 10) –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (18, 4, 0.2, '–í–∞—Å –º—É—á–∞—é—Ç –∂—É—Ç–∫–∏–µ –∫–æ—à–º–∞—Ä—ã'),

            -- group 19: –ù–µ–¥–∞—á–∞ - –§–∏–∑–∏—á–µ—Å–∫–∞—è –∏–ª–∏ –ø—Å–∏—Ö–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≤–º–∞ (o9)
            (19, 1, 0.3, '–í–∞—Å –æ—Ç—Ä–∞–≤–∏–ª–∏, –Ω–∞–≤—Å–µ–≥–¥–∞ –ø–æ—Ç–µ—Ä—è–π—Ç–µ 5 –ü–ó.'),
            (19, 2, 0.4, '–í—ã —Å—Ç—Ä–∞–¥–∞–µ—Ç–µ –æ—Ç –ø–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∞—Ç–∞–∫ –∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–µ—Ä—à–∞—Ç—å –∏—Å–ø—ã—Ç–∞–Ω–∏–µ –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (–∫–∞–∂–¥—ã–µ 5 —Ä–∞—É–Ω–¥–æ–≤) –≤ —Å—Ç—Ä–µ—Å—Å–æ–≤–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.'),
            (19, 3, 0.3, '–£ –≤–∞—Å —Å–µ—Ä—å—ë–∑–Ω–æ–µ –¥—É—à–µ–≤–Ω–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –≤—ã –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã, –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã –∏ –¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã, –∞ —Ç–∞–∫–∂–µ —Å–ª—ã—à–∏—Ç–µ –≥–æ–ª–æ—Å–∞, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤–µ–¥—É—â–∏–π.'),

            -- group 20: –ù–µ–¥–∞—á–∞ - –ü—Ä–æ–∫–ª—è—Ç–∏–µ (o10)
            (20, 1, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ —á—É–¥–æ–≤–∏—â–Ω–æ—Å—Ç–∏</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –°—Ä–µ–¥–Ω—è—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –ñ–µ—Ä—Ç–≤–∞ –≤—ã–≥–ª—è–¥–∏—Ç —á—É–¥–æ–≤–∏—â–Ω–æ –¥–ª—è –≤—Å–µ—Ö, –∫—Ç–æ –µ—ë –≤–∏–¥–∏—Ç. –û–Ω–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≥—É–º–∞–Ω–æ–∏–¥–æ–º, –Ω–æ —á–µ—Ä—Ç—ã –ª–∏—Ü–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—é—Ç —Å—Ö–æ–¥—Å—Ç–≤–æ —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º –∂–∏–≤–æ—Ç–Ω—ã–º. –°–¥–µ–ª–∞–π—Ç–µ –±—Ä–æ—Å–æ–∫ IdlO, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –∑–∞ –∂–∏–≤–æ—Ç–Ω–æ–µ: 1 –∏–ª–∏ 2 ‚Äî –º–µ–¥–≤–µ–¥—å, 3 –∏–ª–∏ 4 ‚Äî –∫–∞–±–∞–Ω, 5 –∏–ª–∏ 6 ‚Äî –ø—Ç–∏—Ü–∞, 7 –∏–ª–∏ 8 ‚Äî –∑–º–µ—è, 9 –∏–ª–∏ 10 ‚Äî –Ω–∞—Å–µ–∫–æ–º–æ–µ. –°–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–∫–ª—è—Ç–æ–≥–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ ¬´–Ω–µ–Ω–∞–≤–∏—Å—Ç—å –∏ –æ–ø–∞—Å–µ–Ω–∏–µ¬ª –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–∏–º –æ–Ω –±—ã–ª —Ä–∞–Ω—å—à–µ. –ü—Ä–æ–∫–ª—è—Ç—ã–π –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á—É–¥–æ–≤–∏—â–µ–º –∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —É—Ä–æ–Ω–∞ –æ—Ç —Å–µ—Ä–µ–±—Ä–∞, –Ω–æ —Å –≤–∏–¥—É –ø–æ—Ö–æ–∂ –Ω–∞ —á—É–¥–æ–≤–∏—â–µ, –∏ –µ–≥–æ –º–æ–∂–Ω–æ —Å–ø—É—Ç–∞—Ç—å —Å —á—É–¥–æ–≤–∏—â–µ–º, –µ—Å–ª–∏ –ø—Ä–æ–≤–∞–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–æ –°–õ 18.'),
            (20, 2, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –°—Ä–µ–¥–Ω—è—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –î–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–æ–Ω—É, –ø—Ä–∏–∑—ã–≤–∞—è –≤ –≤–∏–¥–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ –≤—Å–µ—Ö, –∫ –∫–æ–º—É –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ –æ—Ç–Ω–µ—Å–ª–∏—Å—å –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ –ø—Ä–æ–∫–ª—è—Ç–∏—è —Å–¥–µ–ª–∞–π—Ç–µ –±—Ä–æ—Å–æ–∫ 5d6, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ —è–≤–∏—Ç—Å—è. –ï—Å–ª–∏ –∑–æ–Ω–∞ –æ—Å–æ–±–µ–Ω–Ω–æ —É–∂–∞—Å–Ω–∞, –±—Ä–æ—Å—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ 2d6. –ï—Å–ª–∏ –∑–æ–Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–ø–æ–∫–æ–π–Ω–∞—è, –±—Ä–æ—Å—å—Ç–µ —Ç–æ–ª—å–∫–æ 2d6. –ü—Ä–∏–∑—Ä–∞–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –∑–æ–Ω–µ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç —É–±–∏—Ç—ã, –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–æ—á—å. –û–Ω–∏ –Ω–∞–ø–∞–¥–∞—é—Ç –Ω–∞ –≤—Å—ë, —á—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –∑–æ–Ω—É –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–∫–ª—è—Ç–∏—è. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–Ω—è—Ç—å –ø—Ä–æ–∫–ª—è—Ç–∏–µ ‚Äî –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å—é —Ç—É –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å, —á—Ç–æ —Å–ª—É—á–∏–ª–∞—Å—å –≤ —ç—Ç–æ–π –∑–æ–Ω–µ.'),
            (20, 3, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ –∑–∞—Ä–∞–∑—ã</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –í—ã—Å–æ–∫–∞—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –î–µ–ª–∞–µ—Ç –∂–µ—Ä—Ç–≤—É –ø—Ä–æ–∫–ª—è—Ç–∏—è –Ω–æ—Å–∏—Ç–µ–ª–µ–º –æ–ø–∞—Å–Ω–æ–π –±–æ–ª–µ–∑–Ω–∏. –ë–æ–ª–µ–∑–Ω—å –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–æ—Å–∏—Ç–µ–ª—è, –Ω–æ –ª—é–±–æ–π, –∫—Ç–æ –¥–æ—Ç—Ä–æ–Ω–µ—Ç—Å—è –¥–æ –Ω–µ–≥–æ –∏ –ø—Ä–æ–≤–∞–ª–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 18, –∑–∞—Ä–∞–∂–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –Ω–æ—Å–∏—Ç–µ–ª—å –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –∑–¥–∞–Ω–∏–∏ –¥–æ–ª—å—à–µ 3 –¥–Ω–µ–π, —Ç–æ –≤—Å–µ, –∫—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —ç—Ç–æ–º –∑–¥–∞–Ω–∏–∏, –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 16. –ï—Å–ª–∏ –Ω–æ—Å–∏—Ç–µ–ª—å –ø—Ä–æ–≤–æ–¥–∏—Ç –≤ –≥–æ—Ä–æ–¥–µ –±–æ–ª—å—à–µ –Ω–µ–¥–µ–ª–∏, —Ç–æ –≤—Å–µ –≤ –≥–æ—Ä–æ–¥–µ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 14.'),
            (20, 4, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ —Å—Ç—Ä–∞–Ω–Ω–∏–∫–∞</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –í—ã—Å–æ–∫–∞—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –û–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –∂–µ—Å—Ç–æ–∫–∏—Ö –ø—Ä–æ–∫–ª—è—Ç–∏–π. –°–∞–º–æ–π –∂–µ—Ä—Ç–≤–µ –æ–Ω–æ –≤—Ä–µ–¥–∞ –Ω–µ –ø—Ä–∏—á–∏–Ω—è–µ—Ç, –Ω–æ –¥–∞–∂–µ —Å–∞–º—ã–π –≤–µ—Ä–Ω—ã–π –¥—Ä—É–≥, –±–ª–∏–∑–∫–∏–π —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫ –∏–ª–∏ —Ç–æ–≤–∞—Ä–∏—â –æ—Ç –Ω–µ—ë –æ—Ç–≤–µ—Ä–Ω—ë—Ç—Å—è. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ª—é–¥–∏ –ø–æ–∫–∏–¥–∞—é—Ç –∂–µ—Ä—Ç–≤—É –∏–∑-–∑–∞ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π, —Å—Å–æ—Ä, –ø–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–∏—á–∏–Ω–∞–º –∏–ª–∏ –∏–∑-–∑–∞ –ø–æ—Ö–∏—â–µ–Ω–∏–π, –ø–æ–∫–∞ (–µ—Å–ª–∏ –Ω–æ—Å–∏—Ç–µ–ª—å –ø—Ä–æ–∫–ª—è—Ç–∏—è –¥–æ–ª—å—à–µ –º–µ—Å—è—Ü–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ) —Å–∞–º–∞ —Å—É–¥—å–±–∞ –Ω–µ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —É–±–∏—Ç—å –Ω–µ—Å—á–∞—Å—Ç–Ω–æ–≥–æ.'),
            (20, 5, 0.2, '<b style="font-size: 1.17em;">–ü—Ä–æ–∫–ª—è—Ç–∏–µ –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–∏</b><br><b>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å:</b> –í—ã—Å–æ–∫–∞—è<br><b>–≠—Ñ—Ñ–µ–∫—Ç:</b> –ü—Ä–æ–∫–ª—è—Ç—ã–π –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–µ–π —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 30 % –∫–∞–∂–¥—É—é –Ω–æ—á—å –Ω–∞ –≤–æ—Å—Ö–æ–¥–µ –ª—É–Ω—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–æ–ª–∫–æ–ª–∞–∫–∞. –ü–æ—Å–ª–µ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∂–µ—Å—Ç–æ–∫–∏–º —Ö–∏—â–Ω–∏–∫–æ–º —Å —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π —Ö–∏—Ç—Ä–æ—Å—Ç—å—é –∏ —Å –∂–µ–ª–∞–Ω–∏–µ–º —É–±–∏–≤–∞—Ç—å. –ï—Å–ª–∏ –æ–±—Ä–∞—Ç–∏–≤—à–∏–π—Å—è ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–∂ –∏–≥—Ä–æ–∫–∞, —Ç–æ –¥–æ –≤–æ—Å—Ö–æ–¥–∞ —Å–æ–ª–Ω—Ü–∞ –∏–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ–¥—É—â–∏–π. –ë—É–¥—É—á–∏ –≤–æ–ª–∫–æ–ª–∞–∫–æ–º, –ø–µ—Ä—Å–æ–Ω–∞–∂ –ø–æ—Ç–∞–∫–∞–µ—Ç —Å–∞–º—ã–º —É–∂–∞—Å–Ω—ã–º —Å–≤–æ–∏–º –ø–æ—Ä—ã–≤–∞–º, –±–µ–∑ –∂–∞–ª–æ—Å—Ç–∏ —É–±–∏–≤–∞—è –ª—é–±–æ–≥–æ, –∫—Ç–æ –≤—Å—Ç–∞–Ω–µ—Ç –Ω–∞ –ø—É—Ç–∏. –ù–∞—Ö–æ–¥—è—Å—å –≤ –∑–≤–µ—Ä–∏–Ω–æ–º –æ–±–ª–∏–∫–µ, –ø—Ä–æ–∫–ª—è—Ç—ã–π –ø–æ–ª—É—á–∞–µ—Ç –≤—Å—ë –æ—Ä—É–∂–∏–µ, –±—Ä–æ–Ω—é –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤–æ–ª–∫–æ–ª–∞–∫–∞. –ü–µ—Ä—Å–æ–Ω–∞–∂ —Ç–∞–∫–∂–µ –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç –±–æ–Ω—É—Å –∫ —á–µ—Ç—ã—Ä—ë–º —Å–≤–æ–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –Ω–∏–∂–µ.<br><b>–ë–æ–Ω—É—Å—ã –≤–æ–ª–∫–æ–ª–∞–∫–∞:</b> –†–µ–∞–∫—Ü–∏—è +2, –¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ +3, –°–∫–æ—Ä–æ—Å—Ç—å +4, –≠–º–ø–∞—Ç–∏—è -5'),
            (20, 6, 0.0, '<b style="font-size: 1.17em;">–î—Ä—É–≥–æ–µ</b><br>–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ!')
          ) AS raw_data_ru(group_id, num, probability, option_txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            -- group 1: Fortune ‚Äî Jackpot (o1)
            (1, 1, 0.1, 'Receive 100 crowns'),
            (1, 2, 0.1, 'Receive 200 crowns'),
            (1, 3, 0.1, 'Receive 300 crowns'),
            (1, 4, 0.1, 'Receive 400 crowns'),
            (1, 5, 0.1, 'Receive 500 crowns'),
            (1, 6, 0.1, 'Receive 600 crowns'),
            (1, 7, 0.1, 'Receive 700 crowns'),
            (1, 8, 0.1, 'Receive 800 crowns'),
            (1, 9, 0.1, 'Receive 900 crowns'),
            (1, 10, 0.1, 'Receive 1,000 crowns'),

            -- group 2: Fortune ‚Äî Find a Teacher (o2) - INT skills
            (2, 1, 0.0909, 'Awareness'),
            (2, 2, 0.0909, 'Wilderness Survival'),
            (2, 3, 0.0909, 'Deduction'),
            (2, 4, 0.0909, 'Monster Lore'),
            (2, 5, 0.0909, 'Education'),
            (2, 6, 0.0909, 'Streetwise'),
            (2, 7, 0.0909, 'Teaching'),
            (2, 8, 0.0909, 'Tactics'),
            (2, 9, 0.0909, 'Business'),
            (2, 10, 0.0909, 'Social Etiquette'),
            (2, 11, 0.0303, 'Language - Northern'),
            (2, 12, 0.0303, 'Language - Dwarvish'),
            (2, 13, 0.0303, 'Language - Elder Speech'),

            -- group 4: Fortune ‚Äî Find a Combat Teacher (o4) - combat skills
            (4, 1, 0.1, 'Athletics'),
            (4, 2, 0.1, 'Melee'),
            (4, 3, 0.1, 'Brawling'),
            (4, 4, 0.1, 'Riding'),
            (4, 5, 0.1, 'Staff'),
            (4, 6, 0.1, 'Small Blades'),
            (4, 7, 0.1, 'Swordsmanship'),
            (4, 8, 0.1, 'Crossbow'),
            (4, 9, 0.1, 'Archery'),
            (4, 10, 0.1, 'Tactics'),

            -- group 7: Fortune ‚Äî Tamed a Wild Animal (o7)
            (7, 1, 0.7, 'Wild Dog'),
            (7, 2, 0.3, 'Wolf'),

            -- group 10: Fortune ‚Äî Knighted (o10) - kingdoms
            (10, 1, 0.041, 'Redania'),
            (10, 2, 0.041, 'Kaedwen'),
            (10, 3, 0.041, 'Temeria'),
            (10, 4, 0.041, 'Aedirn'),
            (10, 5, 0.041, 'Lyria'),
            (10, 6, 0.041, 'Rivia'),
            (10, 7, 0.041, 'Kovir'),
            (10, 8, 0.041, 'Poviss'),
            (10, 9, 0.041, 'Skellige'),
            (10, 10, 0.041, 'Cidaris'),
            (10, 11, 0.041, 'Verden'),
            (10, 12, 0.041, 'Cintra'),
            (10, 13, 0.041, 'The Heart of Nilfgaard'),
            (10, 14, 0.041, 'Nilfgaardian Vassal State - Vicovaro'),
            (10, 15, 0.041, 'Nilfgaardian Vassal State - Angren'),
            (10, 16, 0.041, 'Nilfgaardian Vassal State - Nazair'),
            (10, 17, 0.041, 'Nilfgaardian Vassal State - Mettina'),
            (10, 18, 0.041, 'Nilfgaardian Vassal State - Mag Turga'),
            (10, 19, 0.041, 'Nilfgaardian Vassal State - Gheso'),
            (10, 20, 0.041, 'Nilfgaardian Vassal State - Ebbing'),
            (10, 21, 0.041, 'Nilfgaardian Vassal State - Maecht'),
            (10, 22, 0.041, 'Nilfgaardian Vassal State - Gemmeria'),
            (10, 23, 0.041, 'Nilfgaardian Vassal State - Etolia'),
            (10, 24, 0.041, 'Nilfgaardian Vassal State - Toussaint'),
            (10, 25, 0.0, 'Other'),

            -- group 11: Misfortune ‚Äî Debt (o1)
            (11, 1, 0.1, 'Debt 100 crowns'),
            (11, 2, 0.1, 'Debt 200 crowns'),
            (11, 3, 0.1, 'Debt 300 crowns'),
            (11, 4, 0.1, 'Debt 400 crowns'),
            (11, 5, 0.1, 'Debt 500 crowns'),
            (11, 6, 0.1, 'Debt 600 crowns'),
            (11, 7, 0.1, 'Debt 700 crowns'),
            (11, 8, 0.1, 'Debt 800 crowns'),
            (11, 9, 0.1, 'Debt 900 crowns'),
            (11, 10, 0.1, 'Debt 1,000 crowns'),

            -- group 12: Misfortune ‚Äî Imprisonment (o2)
            (12, 1, 0.1, 'You served 1 month in prison'),
            (12, 2, 0.1, 'You served 2 months in prison'),
            (12, 3, 0.1, 'You served 3 months in prison'),
            (12, 4, 0.1, 'You served 4 months in prison'),
            (12, 5, 0.1, 'You served 5 months in prison'),
            (12, 6, 0.1, 'You served 6 months in prison'),
            (12, 7, 0.1, 'You served 7 months in prison'),
            (12, 8, 0.1, 'You served 8 months in prison'),
            (12, 9, 0.1, 'You served 9 months in prison'),
            (12, 10, 0.1, 'You served 10 months in prison'),

            -- group 13: Misfortune ‚Äî Addiction (o3)
            (13, 1, 0.125, 'Alcohol'),
            (13, 2, 0.125, 'Tobacco'),
            (13, 3, 0.125, 'Fisstech'),
            (13, 4, 0.125, 'Gambling'),
            (13, 5, 0.125, 'Kleptomania'),
            (13, 6, 0.125, 'Lust'),
            (13, 7, 0.125, 'Gluttony'),
            (13, 8, 0.125, 'Adrenaline addiction'),
            (13, 10, 0.0,  'Other (create your own)'),

            -- group 14: Misfortune ‚Äî Lover, Friend or Relative Killed (o4)
            (14, 1, 0.5, 'It was an accident'),
            (14, 2, 0.3, 'Murdered by monsters'),
            (14, 3, 0.2, 'Murdered by bandits'),

            -- group 15: Misfortune ‚Äî False Accusation (o5)
            (15, 1, 0.3, 'Theft'),
            (15, 2, 0.2, 'Cowardice or betrayal'),
            (15, 3, 0.3, 'Murder'),
            (15, 4, 0.3, 'Rape'),
            (15, 5, 0.3, 'Illegal witchcraft'),

            -- group 16: Misfortune ‚Äî Wanted (o6)
            (16, 1, 0.3, 'Wanted by a few guards'),
            (16, 2, 0.3, 'Wanted in a village'),
            (16, 3, 0.2, 'Wanted in a major city'),
            (16, 4, 0.2, 'Wanted throughout the entire kingdom'),

            -- group 17: Misfortune ‚Äî Betrayal (o7)
            (17, 1, 0.3, 'You are being blackmailed'),
            (17, 2, 0.4, 'Your secret was exposed'),
            (17, 3, 0.3, 'You were betrayed by someone close'),

            -- group 18: Misfortune ‚Äî Accident (o8)
            (18, 1, 0.4, 'You were disfigured; change your social status to <i>Feared</i>'),
            (18, 2, 0.2, 'You were recovering for a period of 1 to 10 months'),
            (18, 3, 0.2, 'You lost several (1 to 10) months of memory from that year'),
            (18, 4, 0.2, 'You suffer dreadful nightmares'),

            -- group 19: Misfortune ‚Äî Physical or Mental Trauma (o9)
            (19, 1, 0.3, 'You were poisoned; permanently lose 5 HP'),
            (19, 2, 0.4, 'You suffer panic attacks and must make Stun saves (every 5 rounds) in stressful situations'),
            (19, 3, 0.3, 'You have a severe mental disorder; you are aggressive, irrational, and depressive, and you hear voices controlled by the GM'),

            -- group 20: Misfortune ‚Äî Curse (o10)
            (20, 1, 0.2, '<b style="font-size: 1.17em;">Curse of Monstrosity</b><br><b>Intensity:</b> Moderate<br><b>Effect:</b> The victim appears monstrous to all who see them. They remain humanoid, but their features resemble a random animal. Roll 1d10 to determine the animal: 1‚Äì2 bear, 3‚Äì4 boar, 5‚Äì6 bird, 7‚Äì8 snake, 9‚Äì10 insect. The victim''s social status becomes "Hated & Feared." They are not actually a monster and do not take damage from silver, but can be mistaken for one on a failed Education check DC 18.'),
            (20, 2, 0.2, '<b style="font-size: 1.17em;">Curse of Phantoms</b><br><b>Intensity:</b> Moderate<br><b>Effect:</b> Affects an area, summoning as ghosts all who were wronged there. When casting, roll 5d6 to determine how many appear (add 2d6 if the area is especially horrific; only 2d6 if it is rather calm). Ghosts remain until destroyed and return the next night. They attack anything entering the cursed zone. The only way to lift the curse is to somehow right all the wrongs done there.'),
            (20, 3, 0.2, '<b style="font-size: 1.17em;">Curse of Pestilence</b><br><b>Intensity:</b> High<br><b>Effect:</b> The victim becomes a carrier of a dangerous disease. It does not affect the carrier, but anyone who touches them and fails a Physique check DC 18 is infected. If the carrier stays inside a building for more than 3 days, everyone inside must make a Physique check DC 16. If the carrier remains in a city for more than a week, everyone in the city must make a Physique check DC 14.'),
            (20, 4, 0.2, '<b style="font-size: 1.17em;">Curse of the Wanderer</b><br><b>Intensity:</b> High<br><b>Effect:</b> One of the cruelest curses. It does not harm the victim directly, but even the truest friend or closest kin will eventually abandon them. People drift away due to quarrels, distance, circumstance, or kidnappings until‚Äîif the victim stays in one place longer than a month‚Äîfate itself tries to kill them.'),
            (20, 5, 0.2, '<b style="font-size: 1.17em;">Curse of Lycanthropy</b><br><b>Intensity:</b> High<br><b>Effect:</b> Each night at moonrise there is a 30% chance the victim transforms into a werewolf. While transformed, the character becomes a brutal predator with human cunning and a lust for killing. If it is a PC, the GM controls them until sunrise. In beast form, the character gains the werewolf''s weapons, armor, and abilities plus the following bonuses:<br><b>Werewolf Bonuses:</b> Reflex +2, Body +3, Speed +4, Empathy ‚àí5'),
            (20, 6, 0.0,  '<b style="font-size: 1.17em;">Other</b><br>Create your own!')
          ) AS raw_data_en(group_id, num, probability, option_txt)

)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è event_type_misfortune
, ins_event_type_misfortune AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_misfortune') AS id
         , meta.entity, 'event_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–ù–µ—É–¥–∞—á–∞'),
        ('en', 'Misfortune')
      ) AS v(lang, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è —Ç–∏–ø–æ–≤ –±–æ–ª–µ–∑–Ω–µ–π (–ü—Ä–æ–∫–ª—è—Ç–∏–µ –∏ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)
, ins_disease_type_curse AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'disease_type_curse') AS id
         , 'character', 'disease_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–ü—Ä–æ–∫–ª—è—Ç–∏–µ'),
        ('en', 'Curse')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_disease_type_addiction AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'disease_type_addiction') AS id
         , 'character', 'disease_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
        ('en', 'Addiction')
      ) AS v(lang, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≥—Ä—É–ø–ø–∞ 13)
, ins_addiction_desc_13 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*13+vals.num, 'FM0000') ||'.'|| 'addiction_desc') AS id
         , 'character', 'disease_description', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ê–ª–∫–æ–≥–æ–ª—å'),
        ('ru', 2, '–¢–∞–±–∞–∫'),
        ('ru', 3, '–§–∏—Å—à—Ç–µ—Ö'),
        ('ru', 4, '–ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã'),
        ('ru', 5, '–ö–ª–µ–ø—Ç–æ–º–∞–Ω–∏—è'),
        ('ru', 6, '–ü–æ—Ö–æ—Ç—å'),
        ('ru', 7, '–û–±–∂–æ—Ä—Å—Ç–≤–æ'),
        ('ru', 8, '–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
        ('ru', 9, '–ö–∞—Å—Ç–æ–º–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
        ('en', 1, 'Alcohol'),
        ('en', 2, 'Tobacco'),
        ('en', 3, 'Fisstech'),
        ('en', 4, 'Gambling'),
        ('en', 5, 'Kleptomania'),
        ('en', 6, 'Lust'),
        ('en', 7, 'Gluttony'),
        ('en', 8, 'Adrenaline addiction'),
        ('en', 9, 'Custom addiction')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π (–≤—Å–µ –≥—Ä—É–ø–ø—ã 1-20)
-- –ì—Ä—É–ø–ø–∞ 1: –î–∂–µ–∫–ø–æ—Ç —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å—É–º–º—ã
, ins_desc_01 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*1+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 100 –∫—Ä–æ–Ω.'),
        ('ru', 2, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 200 –∫—Ä–æ–Ω.'),
        ('ru', 3, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 300 –∫—Ä–æ–Ω.'),
        ('ru', 4, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 400 –∫—Ä–æ–Ω.'),
        ('ru', 5, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 500 –∫—Ä–æ–Ω.'),
        ('ru', 6, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 600 –∫—Ä–æ–Ω.'),
        ('ru', 7, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 700 –∫—Ä–æ–Ω.'),
        ('ru', 8, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 800 –∫—Ä–æ–Ω.'),
        ('ru', 9, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 900 –∫—Ä–æ–Ω.'),
        ('ru', 10, '–î–∂–µ–∫–ø–æ—Ç: –ü–æ–ª—É—á–∏–ª–∏ 1000 –∫—Ä–æ–Ω.'),
        ('en', 1, 'Jackpot: Received 100 crowns.'),
        ('en', 2, 'Jackpot: Received 200 crowns.'),
        ('en', 3, 'Jackpot: Received 300 crowns.'),
        ('en', 4, 'Jackpot: Received 400 crowns.'),
        ('en', 5, 'Jackpot: Received 500 crowns.'),
        ('en', 6, 'Jackpot: Received 600 crowns.'),
        ('en', 7, 'Jackpot: Received 700 crowns.'),
        ('en', 8, 'Jackpot: Received 800 crowns.'),
        ('en', 9, 'Jackpot: Received 900 crowns.'),
        ('en', 10, 'Jackpot: Received 1,000 crowns.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 2: –£—á–∏—Ç–µ–ª—å —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–∞–≤—ã–∫–∞
, ins_desc_02 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*2+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –í–Ω–∏–º–∞–Ω–∏—é –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 2, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –í—ã–∂–∏–≤–∞–Ω–∏—é –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 3, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –î–µ–¥—É–∫—Ü–∏–∏ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 4, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –ú–æ–Ω—Å—Ç—Ä–æ–ª–æ–≥–∏–∏ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 5, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 6, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤ –≥–æ—Ä–æ–¥–µ –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 7, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –ü–µ—Ä–µ–¥–∞—á–µ –∑–Ω–∞–Ω–∏–π –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 8, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –¢–∞–∫—Ç–∏–∫–µ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 9, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –¢–æ—Ä–≥–æ–≤–ª–µ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 10, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –≠—Ç–∏–∫–µ—Ç—É –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 11, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –Ø–∑—ã–∫—É - —Å–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 12, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –Ø–∑—ã–∫—É - –¥–≤–∞—Ä—Ñ–∏–π—Å–∫–∏–π –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 13, '–£—á–∏—Ç–µ–ª—å: +1 –∫ –Ø–∑—ã–∫—É - —Å—Ç–∞—Ä—à–∞—è —Ä–µ—á—å –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('en', 1, 'Find a Teacher: +1 Awareness or new skill +2.'),
        ('en', 2, 'Find a Teacher: +1 Wilderness Survival or new +2.'),
        ('en', 3, 'Find a Teacher: +1 Deduction or new skill +2.'),
        ('en', 4, 'Find a Teacher: +1 Monster Lore or new skill +2.'),
        ('en', 5, 'Find a Teacher: +1 Education or new skill +2.'),
        ('en', 6, 'Find a Teacher: +1 Streetwise or new skill +2.'),
        ('en', 7, 'Find a Teacher: +1 Teaching or new skill +2.'),
        ('en', 8, 'Find a Teacher: +1 Tactics or new skill +2.'),
        ('en', 9, 'Find a Teacher: +1 Business or new skill +2.'),
        ('en', 10, 'Find a Teacher: +1 Social Etiquette or new +2.'),
        ('en', 11, 'Find a Teacher: +1 Language - Northern or new +2.'),
        ('en', 12, 'Find a Teacher: +1 Language - Dwarvish or new +2.'),
        ('en', 13, 'Find a Teacher: +1 Language - Elder Speech or new +2.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 4: –ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–∞–≤—ã–∫–∞
, ins_desc_04 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*4+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –ê—Ç–ª–µ—Ç–∏–∫–µ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 2, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –ë–ª–∏–∂–Ω–µ–º—É –±–æ—é –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 3, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –ë–æ—Ä—å–±–µ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 4, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –í–µ—Ä—Ö–æ–≤–æ–π –µ–∑–¥–µ –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 5, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –í–ª–∞–¥–µ–Ω–∏—é –¥—Ä–µ–≤–∫–æ–≤—ã–º –æ—Ä—É–∂–∏–µ–º –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 6, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –í–ª–∞–¥–µ–Ω–∏—é –ª—ë–≥–∫–∏–º–∏ –∫–ª–∏–Ω–∫–∞–º–∏ –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 7, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –í–ª–∞–¥–µ–Ω–∏—é –º–µ—á–æ–º –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 8, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –°—Ç—Ä–µ–ª—å–±–µ –∏–∑ –∞—Ä–±–∞–ª–µ—Ç–∞ –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 9, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –°—Ç—Ä–µ–ª—å–±–µ –∏–∑ –ª—É–∫–∞ –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 10, '–ë–æ–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: +1 –∫ –¢–∞–∫—Ç–∏–∫–µ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('en', 1, 'Find a Combat Teacher: +1 Athletics or new skill +2.'),
        ('en', 2, 'Find a Combat Teacher: +1 Melee or new skill +2.'),
        ('en', 3, 'Find a Combat Teacher: +1 Brawling or new skill +2.'),
        ('en', 4, 'Find a Combat Teacher: +1 Riding or new skill +2.'),
        ('en', 5, 'Find a Combat Teacher: +1 Staff or new skill +2.'),
        ('en', 6, 'Find a Combat Teacher: +1 Small Blades or new +2.'),
        ('en', 7, 'Find a Combat Teacher: +1 Swordsmanship or new +2.'),
        ('en', 8, 'Find a Combat Teacher: +1 Crossbow or new skill +2.'),
        ('en', 9, 'Find a Combat Teacher: +1 Archery or new skill +2.'),
        ('en', 10, 'Find a Combat Teacher: +1 Tactics or new skill +2.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 7: –ü—Ä–∏—Ä—É—á–µ–Ω–Ω—ã–π –∑–≤–µ—Ä—å —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
, ins_desc_07 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*7+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ü—Ä–∏—Ä—É—á—ë–Ω–Ω—ã–π –∑–≤–µ—Ä—å: –î–∏–∫–∞—è —Å–æ–±–∞–∫–∞.'),
        ('ru', 2, '–ü—Ä–∏—Ä—É—á—ë–Ω–Ω—ã–π –∑–≤–µ—Ä—å: –í–æ–ª–∫.'),
        ('en', 1, 'Tamed a Wild Animal: Wild Dog.'),
        ('en', 2, 'Tamed a Wild Animal: Wolf.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 10: –†—ã—Ü–∞—Ä—Å—Ç–≤–æ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞
, ins_desc_10 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*10+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –†–µ–¥–∞–Ω–∏–∏ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 2, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ö–∞—ç–¥–≤–µ–Ω–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 3, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –¢–µ–º–µ—Ä–∏–∏ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 4, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ê—ç–¥–∏—Ä–Ω–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 5, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –õ–∏—Ä–∏–∏ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 6, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –†–∏–≤–∏–∏ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 7, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ö–æ–≤–∏—Ä–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 8, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ü–æ–≤–∏—Å—Å–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 9, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –°–∫–µ–ª–ª–∏–≥–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 10, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –¶–∏–¥–∞—Ä–∏—Å–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 11, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –í–µ—Ä–¥–µ–Ω–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 12, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –¶–∏–Ω—Ç—Ä–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 13, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 14, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –í–∏–∫–æ–≤–∞—Ä–æ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 15, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ê–∏–≥—Ä–µ–Ω–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 16, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ù–∞–∑–∞–∏—Ä–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 17, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ú–µ—Ç–∏–∏–Ω–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 18, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ú–∞–≥ –¢—É—Ä–≥–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 19, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ì–µ—Å–æ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 20, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –≠–±–±–∏–Ω–≥–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 21, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ú–µ—Ö—Ç–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 22, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ì–µ–º–º–µ—Ä–∏–∏ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 23, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –≠—Ç–æ–ª–∏–∏ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('ru', 24, '–†—ã—Ü–∞—Ä—Å—Ç–≤–æ: –ü–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –¢—É—Å—Å–µ–Ω—Ç–µ (+2 —Ä–µ–ø—É—Ç–∞—Ü–∏—è).'),
        ('en', 1, 'Knighted: Knighted in Redania (+2 reputation).'),
        ('en', 2, 'Knighted: Knighted in Kaedwen (+2 reputation).'),
        ('en', 3, 'Knighted: Knighted in Temeria (+2 reputation).'),
        ('en', 4, 'Knighted: Knighted in Aedirn (+2 reputation).'),
        ('en', 5, 'Knighted: Knighted in Lyria (+2 reputation).'),
        ('en', 6, 'Knighted: Knighted in Rivia (+2 reputation).'),
        ('en', 7, 'Knighted: Knighted in Kovir (+2 reputation).'),
        ('en', 8, 'Knighted: Knighted in Poviss (+2 reputation).'),
        ('en', 9, 'Knighted: Knighted in Skellige (+2 reputation).'),
        ('en', 10, 'Knighted: Knighted in Cidaris (+2 reputation).'),
        ('en', 11, 'Knighted: Knighted in Verden (+2 reputation).'),
        ('en', 12, 'Knighted: Knighted in Cintra (+2 reputation).'),
        ('en', 13, 'Knighted: Knighted in The Heart of Nilfgaard (+2 reputation).'),
        ('en', 14, 'Knighted: Knighted in Vicovaro (+2 reputation).'),
        ('en', 15, 'Knighted: Knighted in Angren (+2 reputation).'),
        ('en', 16, 'Knighted: Knighted in Nazair (+2 reputation).'),
        ('en', 17, 'Knighted: Knighted in Mettina (+2 reputation).'),
        ('en', 18, 'Knighted: Knighted in Mag Turga (+2 reputation).'),
        ('en', 19, 'Knighted: Knighted in Gheso (+2 reputation).'),
        ('en', 20, 'Knighted: Knighted in Ebbing (+2 reputation).'),
        ('en', 21, 'Knighted: Knighted in Maecht (+2 reputation).'),
        ('en', 22, 'Knighted: Knighted in Gemmeria (+2 reputation).'),
        ('en', 23, 'Knighted: Knighted in Etolia (+2 reputation).'),
        ('en', 24, 'Knighted: Knighted in Toussaint (+2 reputation).')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –≥—Ä—É–ø–ø 11-20 (–æ–ø–∏—Å–∞–Ω–∏—è –∏–∑ –Ω–æ–¥—ã 026 —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π)
-- –ì—Ä—É–ø–ø–∞ 11: –î–æ–ª–≥
, ins_desc_11 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*11+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 100 –∫—Ä–æ–Ω.'),
        ('ru', 2, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 200 –∫—Ä–æ–Ω.'),
        ('ru', 3, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 300 –∫—Ä–æ–Ω.'),
        ('ru', 4, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 400 –∫—Ä–æ–Ω.'),
        ('ru', 5, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 500 –∫—Ä–æ–Ω.'),
        ('ru', 6, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 600 –∫—Ä–æ–Ω.'),
        ('ru', 7, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 700 –∫—Ä–æ–Ω.'),
        ('ru', 8, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 800 –∫—Ä–æ–Ω.'),
        ('ru', 9, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 900 –∫—Ä–æ–Ω.'),
        ('ru', 10, '–î–æ–ª–≥: –í—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ 1000 –∫—Ä–æ–Ω.'),
        ('en', 1, 'Debt: You owe 100 crowns.'),
        ('en', 2, 'Debt: You owe 200 crowns.'),
        ('en', 3, 'Debt: You owe 300 crowns.'),
        ('en', 4, 'Debt: You owe 400 crowns.'),
        ('en', 5, 'Debt: You owe 500 crowns.'),
        ('en', 6, 'Debt: You owe 600 crowns.'),
        ('en', 7, 'Debt: You owe 700 crowns.'),
        ('en', 8, 'Debt: You owe 800 crowns.'),
        ('en', 9, 'Debt: You owe 900 crowns.'),
        ('en', 10, 'Debt: You owe 1,000 crowns.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 12: –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
, ins_desc_12 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*12+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 1 –º–µ—Å—è—Ü.'),
        ('ru', 2, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 2 –º–µ—Å—è—Ü–∞.'),
        ('ru', 3, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 3 –º–µ—Å—è—Ü–∞.'),
        ('ru', 4, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 4 –º–µ—Å—è—Ü–∞.'),
        ('ru', 5, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 5 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 6, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 6 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 7, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 7 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 8, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 8 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 9, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 9 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 10, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –û—Ç—Å–∏–¥–µ–ª–∏ –≤ —Ç—é—Ä—å–º–µ 10 –º–µ—Å—è—Ü–µ–≤.'),
        ('en', 1, 'Imprisonment: Served 1 month in prison.'),
        ('en', 2, 'Imprisonment: Served 2 months in prison.'),
        ('en', 3, 'Imprisonment: Served 3 months in prison.'),
        ('en', 4, 'Imprisonment: Served 4 months in prison.'),
        ('en', 5, 'Imprisonment: Served 5 months in prison.'),
        ('en', 6, 'Imprisonment: Served 6 months in prison.'),
        ('en', 7, 'Imprisonment: Served 7 months in prison.'),
        ('en', 8, 'Imprisonment: Served 8 months in prison.'),
        ('en', 9, 'Imprisonment: Served 9 months in prison.'),
        ('en', 10, 'Imprisonment: Served 10 months in prison.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 13: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
, ins_desc_13 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*13+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –ê–ª–∫–æ–≥–æ–ª—å.'),
        ('ru', 2, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –¢–∞–±–∞–∫.'),
        ('ru', 3, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –§–∏—Å—à—Ç–µ—Ö.'),
        ('ru', 4, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã.'),
        ('ru', 5, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –ö–ª–µ–ø—Ç–æ–º–∞–Ω–∏—è.'),
        ('ru', 6, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –ü–æ—Ö–æ—Ç—å.'),
        ('ru', 7, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –û–±–∂–æ—Ä—Å—Ç–≤–æ.'),
        ('ru', 8, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –ê–¥—Ä–µ–Ω–∞–ª–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.'),
        ('en', 1, 'Addiction: Alcohol.'),
        ('en', 2, 'Addiction: Tobacco.'),
        ('en', 3, 'Addiction: Fisstech.'),
        ('en', 4, 'Addiction: Gambling.'),
        ('en', 5, 'Addiction: Kleptomania.'),
        ('en', 6, 'Addiction: Lust.'),
        ('en', 7, 'Addiction: Gluttony.'),
        ('en', 8, 'Addiction: Adrenaline addiction.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 14: –õ—é–±–∏–º—ã–π, –¥—Ä—É–≥ –∏–ª–∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫ —É–±–∏—Ç
, ins_desc_14 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*14+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–õ—é–±–∏–º—ã–π/–¥—Ä—É–≥/—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫ —É–±–∏—Ç: –ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π.'),
        ('ru', 2, '–õ—é–±–∏–º—ã–π/–¥—Ä—É–≥/—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫ —É–±–∏—Ç: –£–±–∏—Ç —á—É–¥–æ–≤–∏—â–∞–º–∏.'),
        ('ru', 3, '–õ—é–±–∏–º—ã–π/–¥—Ä—É–≥/—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫ —É–±–∏—Ç: –£–±–∏—Ç —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞–º–∏.'),
        ('en', 1, 'Lover/Friend/Relative Killed: Accident.'),
        ('en', 2, 'Lover/Friend/Relative Killed: Slain by monsters.'),
        ('en', 3, 'Lover/Friend/Relative Killed: Murdered by bandits.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 15: –õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ
, ins_desc_15 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*15+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ: –í–æ—Ä–æ–≤—Å—Ç–≤–æ.'),
        ('ru', 2, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ: –¢—Ä—É—Å–æ—Å—Ç—å –∏–ª–∏ –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ.'),
        ('ru', 3, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ: –£–±–∏–π—Å—Ç–≤–æ.'),
        ('ru', 4, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ: –ò–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ.'),
        ('ru', 5, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ: –ù–µ–ª–µ–≥–∞–ª—å–Ω–æ–µ –∫–æ–ª–¥–æ–≤—Å—Ç–≤–æ.'),
        ('en', 1, 'False Accusation: Theft.'),
        ('en', 2, 'False Accusation: Cowardice or betrayal.'),
        ('en', 3, 'False Accusation: Murder.'),
        ('en', 4, 'False Accusation: Rape.'),
        ('en', 5, 'False Accusation: Illegal witchcraft.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 16: –í —Ä–æ–∑—ã—Å–∫–µ
, ins_desc_16 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*16+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–í —Ä–æ–∑—ã—Å–∫–µ: –ù–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–∂–Ω–∏–∫–æ–≤.'),
        ('ru', 2, '–í —Ä–æ–∑—ã—Å–∫–µ: –í –ø–æ—Å—ë–ª–∫–µ.'),
        ('ru', 3, '–í —Ä–æ–∑—ã—Å–∫–µ: –í –≥–æ—Ä–æ–¥–µ.'),
        ('ru', 4, '–í —Ä–æ–∑—ã—Å–∫–µ: –í–æ –≤—Å—ë–º –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ.'),
        ('en', 1, 'Wanted: A few guards.'),
        ('en', 2, 'Wanted: In a village.'),
        ('en', 3, 'Wanted: In a major city.'),
        ('en', 4, 'Wanted: Throughout the entire kingdom.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 17: –ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ
, ins_desc_17 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*17+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ: –®–∞–Ω—Ç–∞–∂.'),
        ('ru', 2, '–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ: –†–∞—Å–∫—Ä—ã—Ç–∞ –≤–∞—à–∞ —Ç–∞–π–Ω–∞.'),
        ('ru', 3, '–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ: –ü—Ä–µ–¥–∞–Ω –±–ª–∏–∑–∫–∏–º.'),
        ('en', 1, 'Betrayal: Blackmailed.'),
        ('en', 2, 'Betrayal: Secret exposed.'),
        ('en', 3, 'Betrayal: Betrayed by someone close.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 18: –ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π
, ins_desc_18 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*18+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ò–∑—É—Ä–æ–¥–æ–≤–∞–Ω—ã (—Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å: –æ–ø–∞—Å–µ–Ω–∏–µ).'),
        ('ru', 2, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 1-10 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 3, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ 1-10 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 4, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ñ—É—Ç–∫–∏–µ –∫–æ—à–º–∞—Ä—ã.'),
        ('en', 1, 'Accident: Disfigured (social status: Feared).'),
        ('en', 2, 'Accident: Recovering 1-10 months.'),
        ('en', 3, 'Accident: Lost memory 1-10 months.'),
        ('en', 4, 'Accident: Dreadful nightmares.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 19: –§–∏–∑–∏—á–µ—Å–∫–∞—è –∏–ª–∏ –ø—Å–∏—Ö–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≤–º–∞
, ins_desc_19 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*19+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–¢—Ä–∞–≤–º–∞: –û—Ç—Ä–∞–≤–ª–µ–Ω–∏–µ (-5 –ü–ó –Ω–∞–≤—Å–µ–≥–¥–∞).'),
        ('ru', 2, '–¢—Ä–∞–≤–º–∞: –ü–∞–Ω–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–µ 5 —Ä–∞—É–Ω–¥–æ–≤).'),
        ('ru', 3, '–¢—Ä–∞–≤–º–∞: –î—É—à–µ–≤–Ω–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–∞–≥—Ä–µ—Å—Å–∏—è, –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –¥–µ–ø—Ä–µ—Å—Å–∏—è, –≥–æ–ª–æ—Å–∞).'),
        ('en', 1, 'Trauma: Poisoned (-5 HP permanently).'),
        ('en', 2, 'Trauma: Panic attacks (Stun save every 5 rounds).'),
        ('en', 3, 'Trauma: Severe mental disorder (aggressive, irrational, depressive, voices).')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ì—Ä—É–ø–ø–∞ 20: –ü—Ä–æ–∫–ª—è—Ç–∏–µ (—Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è lifeEvents)
, ins_desc_20 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*20+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ: –ü—Ä–æ–∫–ª—è—Ç–∏–µ —á—É–¥–æ–≤–∏—â–Ω–æ—Å—Ç–∏ (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è).'),
        ('ru', 2, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ: –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è).'),
        ('ru', 3, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ: –ü—Ä–æ–∫–ª—è—Ç–∏–µ –∑–∞—Ä–∞–∑—ã (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è).'),
        ('ru', 4, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ: –ü—Ä–æ–∫–ª—è—Ç–∏–µ —Å—Ç—Ä–∞–Ω–Ω–∏–∫–∞ (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è).'),
        ('ru', 5, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ: –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–∏ (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è).'),
        ('ru', 6, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ: –ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–æ–∫–ª—è—Ç–∏–µ.'),
        ('en', 1, 'Curse: Curse of Monstrosity (Intensity: Moderate).'),
        ('en', 2, 'Curse: Curse of Phantoms (Intensity: Moderate).'),
        ('en', 3, 'Curse: Curse of Pestilence (Intensity: High).'),
        ('en', 4, 'Curse: Curse of the Wanderer (Intensity: High).'),
        ('en', 5, 'Curse: Curse of Lycanthropy (Intensity: High).'),
        ('en', 6, 'Curse: Custom curse.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è gear: –∑–≤–µ—Ä–∏ (–≥—Ä—É–ø–ø–∞ 7)
, ins_gear_07_name AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*7+vals.num, 'FM0000') ||'.'|| 'gear_name') AS id
         , 'gear', 'name', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–î–∏–∫–∞—è —Å–æ–±–∞–∫–∞'),
        ('ru', 2, '–í–æ–ª–∫'),
        ('en', 1, 'Wild Dog'),
        ('en', 2, 'Wolf')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
, ins_gear_07_notes AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| '07' ||'.'|| 'gear_notes') AS id
         , 'gear', 'notes', vals.lang, vals.text
      FROM (VALUES
        ('ru', '–ó–≤–µ—Ä—å —Å –æ—Ä—É–∂–∏–µ–º "–£–∫—É—Å" –Ω–∞ 2d6 —É—Ä–æ–Ω–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é –∞—Ç–∞–∫–∏ 1'),
        ('en', 'Beast with "Bite" weapon dealing 2d6 damage and attack speed 1')
      ) AS vals(lang, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è gear: —Ä—ã—Ü–∞—Ä—Å–∫–∏–π —Ç–∏—Ç—É–ª (–≥—Ä—É–ø–ø–∞ 10)
, ins_gear_10_name AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| '10' ||'.'|| 'gear_name') AS id
         , 'gear', 'name', vals.lang, vals.text
      FROM (VALUES
        ('ru', '–†—ã—Ü–∞—Ä—Å–∫–∏–π —Ç–∏—Ç—É–ª'),
        ('en', 'Knight Title')
      ) AS vals(lang, text)
      CROSS JOIN meta
)
, ins_gear_10_notes AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*10+vals.num, 'FM0000') ||'.'|| 'gear_notes') AS id
         , 'gear', 'notes', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –†–µ–¥–∞–Ω–∏–∏'),
        ('ru', 2, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ö–∞—ç–¥–≤–µ–Ω–µ'),
        ('ru', 3, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –¢–µ–º–µ—Ä–∏–∏'),
        ('ru', 4, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ê—ç–¥–∏—Ä–Ω–µ'),
        ('ru', 5, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –õ–∏—Ä–∏–∏'),
        ('ru', 6, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –†–∏–≤–∏–∏'),
        ('ru', 7, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ö–æ–≤–∏—Ä–µ'),
        ('ru', 8, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ü–æ–≤–∏—Å—Å–µ'),
        ('ru', 9, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –°–∫–µ–ª–ª–∏–≥–µ'),
        ('ru', 10, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –¶–∏–¥–∞—Ä–∏—Å–µ'),
        ('ru', 11, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –í–µ—Ä–¥–µ–Ω–µ'),
        ('ru', 12, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –¶–∏–Ω—Ç—Ä–µ'),
        ('ru', 13, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞'),
        ('ru', 14, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –í–∏–∫–æ–≤–∞—Ä–æ'),
        ('ru', 15, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ê–∏–≥—Ä–µ–Ω–µ'),
        ('ru', 16, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ù–∞–∑–∞–∏—Ä–µ'),
        ('ru', 17, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ú–µ—Ç–∏–∏–Ω–µ'),
        ('ru', 18, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ú–∞–≥ –¢—É—Ä–≥–µ'),
        ('ru', 19, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ì–µ—Å–æ'),
        ('ru', 20, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –≠–±–±–∏–Ω–≥–µ'),
        ('ru', 21, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ú–µ—Ö—Ç–µ'),
        ('ru', 22, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –ì–µ–º–º–µ—Ä–∏–∏'),
        ('ru', 23, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –≠—Ç–æ–ª–∏–∏'),
        ('ru', 24, '+2 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –¢—É—Å—Å–µ–Ω—Ç–µ'),
        ('en', 1, '+2 reputation in Redania'),
        ('en', 2, '+2 reputation in Kaedwen'),
        ('en', 3, '+2 reputation in Temeria'),
        ('en', 4, '+2 reputation in Aedirn'),
        ('en', 5, '+2 reputation in Lyria'),
        ('en', 6, '+2 reputation in Rivia'),
        ('en', 7, '+2 reputation in Kovir'),
        ('en', 8, '+2 reputation in Poviss'),
        ('en', 9, '+2 reputation in Skellige'),
        ('en', 10, '+2 reputation in Cidaris'),
        ('en', 11, '+2 reputation in Verden'),
        ('en', 12, '+2 reputation in Cintra'),
        ('en', 13, '+2 reputation in The Heart of Nilfgaard'),
        ('en', 14, '+2 reputation in Nilfgaardian Vassal State - Vicovaro'),
        ('en', 15, '+2 reputation in Nilfgaardian Vassal State - Angren'),
        ('en', 16, '+2 reputation in Nilfgaardian Vassal State - Nazair'),
        ('en', 17, '+2 reputation in Nilfgaardian Vassal State - Mettina'),
        ('en', 18, '+2 reputation in Nilfgaardian Vassal State - Mag Turga'),
        ('en', 19, '+2 reputation in Nilfgaardian Vassal State - Gheso'),
        ('en', 20, '+2 reputation in Nilfgaardian Vassal State - Ebbing'),
        ('en', 21, '+2 reputation in Nilfgaardian Vassal State - Maecht'),
        ('en', 22, '+2 reputation in Nilfgaardian Vassal State - Gemmeria'),
        ('en', 23, '+2 reputation in Nilfgaardian Vassal State - Etolia'),
        ('en', 24, '+2 reputation in Nilfgaardian Vassal State - Toussaint')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –ø—Ä–æ–∫–ª—è—Ç–∏–π (–≥—Ä—É–ø–ø–∞ 20) - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è curses
, ins_curse_20 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*20+vals.num, 'FM0000') ||'.'|| 'curse_name') AS id
         , 'curses', 'name', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ —á—É–¥–æ–≤–∏—â–Ω–æ—Å—Ç–∏'),
        ('ru', 2, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤'),
        ('ru', 3, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ –∑–∞—Ä–∞–∑—ã'),
        ('ru', 4, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ —Å—Ç—Ä–∞–Ω–Ω–∏–∫–∞'),
        ('ru', 5, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–∏'),
        ('en', 1, 'Curse of Monstrosity'),
        ('en', 2, 'Curse of Phantoms'),
        ('en', 3, 'Curse of Pestilence'),
        ('en', 4, 'Curse of the Wanderer'),
        ('en', 5, 'Curse of Lycanthropy')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
, ins_curse_20_intensity AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*20+vals.num, 'FM0000') ||'.'|| 'curse_intensity') AS id
         , 'curses', 'intensity', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–°—Ä–µ–¥–Ω—è—è'),
        ('ru', 2, '–°—Ä–µ–¥–Ω—è—è'),
        ('ru', 3, '–í—ã—Å–æ–∫–∞—è'),
        ('ru', 4, '–í—ã—Å–æ–∫–∞—è'),
        ('ru', 5, '–í—ã—Å–æ–∫–∞—è'),
        ('en', 1, 'Moderate'),
        ('en', 2, 'Moderate'),
        ('en', 3, 'High'),
        ('en', 4, 'High'),
        ('en', 5, 'High')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
, ins_curse_20_desc AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*20+vals.num, 'FM0000') ||'.'|| 'curse_desc') AS id
         , 'curses', 'description', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ñ–µ—Ä—Ç–≤–∞ –≤—ã–≥–ª—è–¥–∏—Ç —á—É–¥–æ–≤–∏—â–Ω–æ –¥–ª—è –≤—Å–µ—Ö, –∫—Ç–æ –µ—ë –≤–∏–¥–∏—Ç. –û–Ω–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≥—É–º–∞–Ω–æ–∏–¥–æ–º, –Ω–æ —á–µ—Ä—Ç—ã –ª–∏—Ü–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—é—Ç —Å—Ö–æ–¥—Å—Ç–≤–æ —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º –∂–∏–≤–æ—Ç–Ω—ã–º. –°–¥–µ–ª–∞–π—Ç–µ –±—Ä–æ—Å–æ–∫ IdlO, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –∑–∞ –∂–∏–≤–æ—Ç–Ω–æ–µ: 1 –∏–ª–∏ 2 ‚Äî –º–µ–¥–≤–µ–¥—å, 3 –∏–ª–∏ 4 ‚Äî –∫–∞–±–∞–Ω, 5 –∏–ª–∏ 6 ‚Äî –ø—Ç–∏—Ü–∞, 7 –∏–ª–∏ 8 ‚Äî –∑–º–µ—è, 9 –∏–ª–∏ 10 ‚Äî –Ω–∞—Å–µ–∫–æ–º–æ–µ. –°–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–∫–ª—è—Ç–æ–≥–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ ¬´–Ω–µ–Ω–∞–≤–∏—Å—Ç—å –∏ –æ–ø–∞—Å–µ–Ω–∏–µ¬ª –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–∏–º –æ–Ω –±—ã–ª —Ä–∞–Ω—å—à–µ. –ü—Ä–æ–∫–ª—è—Ç—ã–π –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á—É–¥–æ–≤–∏—â–µ–º –∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —É—Ä–æ–Ω–∞ –æ—Ç —Å–µ—Ä–µ–±—Ä–∞, –Ω–æ —Å –≤–∏–¥—É –ø–æ—Ö–æ–∂ –Ω–∞ —á—É–¥–æ–≤–∏—â–µ, –∏ –µ–≥–æ –º–æ–∂–Ω–æ —Å–ø—É—Ç–∞—Ç—å —Å —á—É–¥–æ–≤–∏—â–µ–º, –µ—Å–ª–∏ –ø—Ä–æ–≤–∞–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–æ –°–õ 18.'),
        ('ru', 2, '–î–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–æ–Ω—É, –ø—Ä–∏–∑—ã–≤–∞—è –≤ –≤–∏–¥–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ –≤—Å–µ—Ö, –∫ –∫–æ–º—É –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ –æ—Ç–Ω–µ—Å–ª–∏—Å—å –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ –ø—Ä–æ–∫–ª—è—Ç–∏—è —Å–¥–µ–ª–∞–π—Ç–µ –±—Ä–æ—Å–æ–∫ 5d6, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ —è–≤–∏—Ç—Å—è. –ï—Å–ª–∏ –∑–æ–Ω–∞ –æ—Å–æ–±–µ–Ω–Ω–æ —É–∂–∞—Å–Ω–∞, –±—Ä–æ—Å—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ 2d6. –ï—Å–ª–∏ –∑–æ–Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–ø–æ–∫–æ–π–Ω–∞—è, –±—Ä–æ—Å—å—Ç–µ —Ç–æ–ª—å–∫–æ 2d6. –ü—Ä–∏–∑—Ä–∞–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –∑–æ–Ω–µ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç —É–±–∏—Ç—ã, –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–æ—á—å. –û–Ω–∏ –Ω–∞–ø–∞–¥–∞—é—Ç –Ω–∞ –≤—Å—ë, —á—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –∑–æ–Ω—É –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–∫–ª—è—Ç–∏—è. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–Ω—è—Ç—å –ø—Ä–æ–∫–ª—è—Ç–∏–µ ‚Äî –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å—é —Ç—É –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å, —á—Ç–æ —Å–ª—É—á–∏–ª–∞—Å—å –≤ —ç—Ç–æ–π –∑–æ–Ω–µ.'),
        ('ru', 3, '–î–µ–ª–∞–µ—Ç –∂–µ—Ä—Ç–≤—É –ø—Ä–æ–∫–ª—è—Ç–∏—è –Ω–æ—Å–∏—Ç–µ–ª–µ–º –æ–ø–∞—Å–Ω–æ–π –±–æ–ª–µ–∑–Ω–∏. –ë–æ–ª–µ–∑–Ω—å –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–æ—Å–∏—Ç–µ–ª—è, –Ω–æ –ª—é–±–æ–π, –∫—Ç–æ –¥–æ—Ç—Ä–æ–Ω–µ—Ç—Å—è –¥–æ –Ω–µ–≥–æ –∏ –ø—Ä–æ–≤–∞–ª–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 18, –∑–∞—Ä–∞–∂–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –Ω–æ—Å–∏—Ç–µ–ª—å –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –∑–¥–∞–Ω–∏–∏ –¥–æ–ª—å—à–µ 3 –¥–Ω–µ–π, —Ç–æ –≤—Å–µ, –∫—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —ç—Ç–æ–º –∑–¥–∞–Ω–∏–∏, –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 16. –ï—Å–ª–∏ –Ω–æ—Å–∏—Ç–µ–ª—å –ø—Ä–æ–≤–æ–¥–∏—Ç –≤ –≥–æ—Ä–æ–¥–µ –±–æ–ª—å—à–µ –Ω–µ–¥–µ–ª–∏, —Ç–æ –≤—Å–µ –≤ –≥–æ—Ä–æ–¥–µ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 14.'),
        ('ru', 4, '–û–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –∂–µ—Å—Ç–æ–∫–∏—Ö –ø—Ä–æ–∫–ª—è—Ç–∏–π. –°–∞–º–æ–π –∂–µ—Ä—Ç–≤–µ –æ–Ω–æ –≤—Ä–µ–¥–∞ –Ω–µ –ø—Ä–∏—á–∏–Ω—è–µ—Ç, –Ω–æ –¥–∞–∂–µ —Å–∞–º—ã–π –≤–µ—Ä–Ω—ã–π –¥—Ä—É–≥, –±–ª–∏–∑–∫–∏–π —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫ –∏–ª–∏ —Ç–æ–≤–∞—Ä–∏—â –æ—Ç –Ω–µ—ë –æ—Ç–≤–µ—Ä–Ω—ë—Ç—Å—è. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ª—é–¥–∏ –ø–æ–∫–∏–¥–∞—é—Ç –∂–µ—Ä—Ç–≤—É –∏–∑-–∑–∞ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π, —Å—Å–æ—Ä, –ø–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–∏—á–∏–Ω–∞–º –∏–ª–∏ –∏–∑-–∑–∞ –ø–æ—Ö–∏—â–µ–Ω–∏–π, –ø–æ–∫–∞ (–µ—Å–ª–∏ –Ω–æ—Å–∏—Ç–µ–ª—å –ø—Ä–æ–∫–ª—è—Ç–∏—è –¥–æ–ª—å—à–µ –º–µ—Å—è—Ü–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ) —Å–∞–º–∞ —Å—É–¥—å–±–∞ –Ω–µ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —É–±–∏—Ç—å –Ω–µ—Å—á–∞—Å—Ç–Ω–æ–≥–æ.'),
        ('ru', 5, '–ü—Ä–æ–∫–ª—è—Ç—ã–π –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–µ–π —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 30 % –∫–∞–∂–¥—É—é –Ω–æ—á—å –Ω–∞ –≤–æ—Å—Ö–æ–¥–µ –ª—É–Ω—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–æ–ª–∫–æ–ª–∞–∫–∞. –ü–æ—Å–ª–µ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∂–µ—Å—Ç–æ–∫–∏–º —Ö–∏—â–Ω–∏–∫–æ–º —Å —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π —Ö–∏—Ç—Ä–æ—Å—Ç—å—é –∏ —Å –∂–µ–ª–∞–Ω–∏–µ–º —É–±–∏–≤–∞—Ç—å. –ï—Å–ª–∏ –æ–±—Ä–∞—Ç–∏–≤—à–∏–π—Å—è ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–∂ –∏–≥—Ä–æ–∫–∞, —Ç–æ –¥–æ –≤–æ—Å—Ö–æ–¥–∞ —Å–æ–ª–Ω—Ü–∞ –∏–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ–¥—É—â–∏–π. –ë—É–¥—É—á–∏ –≤–æ–ª–∫–æ–ª–∞–∫–æ–º, –ø–µ—Ä—Å–æ–Ω–∞–∂ –ø–æ—Ç–∞–∫–∞–µ—Ç —Å–∞–º—ã–º —É–∂–∞—Å–Ω—ã–º —Å–≤–æ–∏–º –ø–æ—Ä—ã–≤–∞–º, –±–µ–∑ –∂–∞–ª–æ—Å—Ç–∏ —É–±–∏–≤–∞—è –ª—é–±–æ–≥–æ, –∫—Ç–æ –≤—Å—Ç–∞–Ω–µ—Ç –Ω–∞ –ø—É—Ç–∏. –ù–∞—Ö–æ–¥—è—Å—å –≤ –∑–≤–µ—Ä–∏–Ω–æ–º –æ–±–ª–∏–∫–µ, –ø—Ä–æ–∫–ª—è—Ç—ã–π –ø–æ–ª—É—á–∞–µ—Ç –≤—Å—ë –æ—Ä—É–∂–∏–µ, –±—Ä–æ–Ω—é –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤–æ–ª–∫–æ–ª–∞–∫–∞. –ü–µ—Ä—Å–æ–Ω–∞–∂ —Ç–∞–∫–∂–µ –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç –±–æ–Ω—É—Å –∫ —á–µ—Ç—ã—Ä—ë–º —Å–≤–æ–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –Ω–∏–∂–µ. –ë–æ–Ω—É—Å—ã –≤–æ–ª–∫–æ–ª–∞–∫–∞: –†–µ–∞–∫—Ü–∏—è +2, –¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ +3, –°–∫–æ—Ä–æ—Å—Ç—å +4, –≠–º–ø–∞—Ç–∏—è -5'),
        ('en', 1, 'The victim appears monstrous to all who see them. They remain humanoid, but their features resemble a random animal. Roll 1d10 to determine the animal: 1‚Äì2 bear, 3‚Äì4 boar, 5‚Äì6 bird, 7‚Äì8 snake, 9‚Äì10 insect. The victim''s social status becomes "Hated & Feared." They are not actually a monster and do not take damage from silver, but can be mistaken for one on a failed Education check DC 18.'),
        ('en', 2, 'Affects an area, summoning as ghosts all who were wronged there. When casting, roll 5d6 to determine how many appear (add 2d6 if the area is especially horrific; only 2d6 if it is rather calm). Ghosts remain until destroyed and return the next night. They attack anything entering the cursed zone. The only way to lift the curse is to somehow right all the wrongs done there.'),
        ('en', 3, 'The victim becomes a carrier of a dangerous disease. It does not affect the carrier, but anyone who touches them and fails a Physique check DC 18 is infected. If the carrier stays inside a building for more than 3 days, everyone inside must make a Physique check DC 16. If the carrier remains in a city for more than a week, everyone in the city must make a Physique check DC 14.'),
        ('en', 4, 'One of the cruelest curses. It does not harm the victim directly, but even the truest friend or closest kin will eventually abandon them. People drift away due to quarrels, distance, circumstance, or kidnappings until‚Äîif the victim stays in one place longer than a month‚Äîfate itself tries to kill them.'),
        ('en', 5, 'Each night at moonrise there is a 30% chance the victim transforms into a werewolf. While transformed, the character becomes a brutal predator with human cunning and a lust for killing. If it is a PC, the GM controls them until sunrise. In beast form, the character gains the werewolf''s weapons, armor, and abilities plus the following bonuses: Reflex +2, Body +3, Speed +4, Empathy ‚àí5')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
, all_groups AS (
  SELECT DISTINCT group_id FROM raw_data
)
, skill_mapping_group2 AS (
  SELECT 1 AS num, 'awareness' AS skill_path
  UNION ALL SELECT 2, 'wilderness_survival'
  UNION ALL SELECT 3, 'deduction'
  UNION ALL SELECT 4, 'monster_lore'
  UNION ALL SELECT 5, 'education'
  UNION ALL SELECT 6, 'streetwise'
  UNION ALL SELECT 7, 'teaching'
  UNION ALL SELECT 8, 'tactics'
  UNION ALL SELECT 9, 'business'
  UNION ALL SELECT 10, 'social_etiquette'
  UNION ALL SELECT 11, 'language_northern'
  UNION ALL SELECT 12, 'language_dwarvish'
  UNION ALL SELECT 13, 'language_elder_speech'
)
, skill_mapping_group4 AS (
  SELECT 1 AS num, 'athletics' AS skill_path
  UNION ALL SELECT 2, 'melee'
  UNION ALL SELECT 3, 'brawling'
  UNION ALL SELECT 4, 'riding'
  UNION ALL SELECT 5, 'staff'
  UNION ALL SELECT 6, 'small_blades'
  UNION ALL SELECT 7, 'swordsmanship'
  UNION ALL SELECT 8, 'crossbow'
  UNION ALL SELECT 9, 'archery'
  UNION ALL SELECT 10, 'tactics'
)
INSERT INTO effects (scope, an_an_id, body)
-- 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ lifeEvents –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø (1-20)
SELECT DISTINCT
  'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(raw_data.group_id, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        CASE WHEN raw_data.group_id <= 10 THEN
          jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune')::text)
        ELSE
          jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_misfortune')::text)
        END,
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id IN (1,2,4,7,10) --AND raw_data.lang = 'en' -- –ì—Ä—É–ø–ø—ã —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏–∑ 025
UNION ALL
-- –ì—Ä—É–ø–ø—ã 11-20: –æ–ø–∏—Å–∞–Ω–∏—è –∏–∑ 026 —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
SELECT DISTINCT
  'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(raw_data.group_id, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_misfortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id BETWEEN 11 AND 20 
  AND NOT (raw_data.group_id = 18 AND raw_data.num IN (2, 3)) --AND raw_data.lang = 'en'
UNION ALL
-- 2. –ì—Ä—É–ø–ø–∞ 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ–Ω–µ–≥ (100-1000 –∫—Ä–æ–Ω)
SELECT DISTINCT
  'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(raw_data.group_id, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.money.crowns'),
      raw_data.num * 100
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 1 --AND raw_data.lang = 'en'
UNION ALL
-- 3. –ì—Ä—É–ø–ø–∞ 2: –ù–∞–≤—ã–∫–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ (+1 –∏–ª–∏ +2 –µ—Å–ª–∏ –Ω–æ–≤—ã–π)
SELECT 'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(2, 'FM00') || to_char(skill_mapping_group2.num, 'FM00'),
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.' || skill_mapping_group2.skill_path || '.bonus'),
      1
    )
  )
FROM skill_mapping_group2
CROSS JOIN meta
UNION ALL
SELECT 'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(2, 'FM00') || to_char(skill_mapping_group2.num, 'FM00'),
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.' || skill_mapping_group2.skill_path || '.bonus_if_new'),
      1
    )
  )
FROM skill_mapping_group2
CROSS JOIN meta
UNION ALL
-- 4. –ì—Ä—É–ø–ø–∞ 4: –ë–æ–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ (+1 –∫ bonus –∏ +1 –∫ bonus_if_new)
SELECT 'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(4, 'FM00') || to_char(skill_mapping_group4.num, 'FM00'),
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.' || skill_mapping_group4.skill_path || '.bonus'),
      1
    )
  )
FROM skill_mapping_group4
CROSS JOIN meta
UNION ALL
SELECT 'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(4, 'FM00') || to_char(skill_mapping_group4.num, 'FM00'),
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.' || skill_mapping_group4.skill_path || '.bonus_if_new'),
      1
    )
  )
FROM skill_mapping_group4
CROSS JOIN meta
UNION ALL
-- 5. –ì—Ä—É–ø–ø–∞ 7: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–≤–µ—Ä—è –≤ gear
SELECT DISTINCT
  'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(raw_data.group_id, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      jsonb_build_object(
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| 'gear_name')::text),
        'weight', 0,
        'notes', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| '07' ||'.'|| 'gear_notes')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 7 --AND raw_data.lang = 'en'
UNION ALL
-- 6. –ì—Ä—É–ø–ø–∞ 10: –†—ã—Ü–∞—Ä—Å–∫–∏–π —Ç–∏—Ç—É–ª
SELECT DISTINCT
  'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(raw_data.group_id, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      jsonb_build_object(
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| '10' ||'.'|| 'gear_name')::text),
        'weight', 0,
        'notes', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| 'gear_notes')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 10 AND raw_data.num <= 24 --AND raw_data.lang = 'en'
UNION ALL
-- 7. –ì—Ä—É–ø–ø–∞ 19, –æ—Ç–≤–µ—Ç 1: –®—Ç—Ä–∞—Ñ -5 –∫ max HP
SELECT 'character', 'wcc_life_events_fortune_or_not_details_o1901',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.statistics.calculated.max_HP.bonus'),
      -5
    )
  )
FROM meta
UNION ALL
-- 8. –ì—Ä—É–ø–ø–∞ 20: –ü—Ä–æ–∫–ª—è—Ç–∏—è (–ø–µ—Ä–µ–Ω–æ—Å–∏–º –≤ diseases_and_curses —Å —Ç–∏–ø–æ–º "–ü—Ä–æ–∫–ª—è—Ç–∏–µ")
SELECT DISTINCT
  'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(raw_data.group_id, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.diseases_and_curses'),
      jsonb_build_object(
        'type', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'disease_type_curse')::text),
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| 'curse_name')::text),
        'intensity', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| 'curse_intensity')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| 'curse_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 20 AND raw_data.num <= 5 --AND raw_data.lang = 'en'
UNION ALL
-- 9. –ì—Ä—É–ø–ø–∞ 13: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–¥–æ–±–∞–≤–ª—è–µ–º –≤ diseases_and_curses —Å —Ç–∏–ø–æ–º "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
SELECT DISTINCT
  'character', 'wcc_life_events_fortune_or_not_details_o' || to_char(raw_data.group_id, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.diseases_and_curses'),
      jsonb_build_object(
        'type', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'disease_type_addiction')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*raw_data.group_id+raw_data.num, 'FM0000') ||'.'|| 'addiction_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 13 AND raw_data.num <= 8 ;--AND raw_data.lang = 'en';

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_fortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_fortune_o01', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_fortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_fortune_o02', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_fortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_fortune_o04', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_fortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_fortune_o07', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_fortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_fortune_o10', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o01', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o02', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o03', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o04', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o05', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o06', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o07', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o08', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o09', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_misfortune', 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_misfortune_o10', 2;

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_event', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/026_life_events_fortune_or_not_details.sql

-- >>> BEGIN sql/027_life_events_fortune_or_not_details_dice.sql

\echo '027_life_events_fortune_or_not_details_dice.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details_dice' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–µ–≥–æ —Å–æ–±—ã—Ç–∏—è.'),
                            ('en', 'Determine the additional details of what happened.')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–£—Ç–æ—á–Ω–µ–Ω–∏–µ'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Clarification'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune_or_not_details_dice' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'counterIncrement', jsonb_build_object(
             'id','lifeEventsCounter',
             'step',10
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_misfortune')::text,
             ck_id('witcher_cc.hierarchy.life_events_misfortune_details_2')::text
           )
         )
    FROM meta;


-- –û—Ç–≤–µ—Ç—ã (–∫–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç 10%)
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            (1802, 1, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 1 –º–µ—Å—è—Ü'),
            (1802, 2, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 2 –º–µ—Å—è—Ü–∞'),
            (1802, 3, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 3 –º–µ—Å—è—Ü–∞'),
            (1802, 4, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 4 –º–µ—Å—è—Ü–∞'),
            (1802, 5, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 5 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 6, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 6 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 7, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 7 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 8, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 8 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 9, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 9 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 10, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 10 –º–µ—Å—è—Ü–µ–≤'),

            (1803, 1, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 1 –º–µ—Å—è—Ü–µ —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 2, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 2 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 3, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 3 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 4, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 4 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 5, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 5 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 6, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 6 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 7, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 7 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 8, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 8 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 9, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 9 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 10, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 10 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞')
          ) AS raw_data_ru(group_id, num, probability, option_txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
          (1802, 1, 0.1, 'You were recovering for 1 month'),
          (1802, 2, 0.1, 'You were recovering for 2 months'),
          (1802, 3, 0.1, 'You were recovering for 3 months'),
          (1802, 4, 0.1, 'You were recovering for 4 months'),
          (1802, 5, 0.1, 'You were recovering for 5 months'),
          (1802, 6, 0.1, 'You were recovering for 6 months'),
          (1802, 7, 0.1, 'You were recovering for 7 months'),
          (1802, 8, 0.1, 'You were recovering for 8 months'),
          (1802, 9, 0.1, 'You were recovering for 9 months'),
          (1802, 10, 0.1, 'You were recovering for 10 months'),

          (1803, 1, 0.1, 'You lost 1 month of memory from that year'),
          (1803, 2, 0.1, 'You lost 2 months of memory from that year'),
          (1803, 3, 0.1, 'You lost 3 months of memory from that year'),
          (1803, 4, 0.1, 'You lost 4 months of memory from that year'),
          (1803, 5, 0.1, 'You lost 5 months of memory from that year'),
          (1803, 6, 0.1, 'You lost 6 months of memory from that year'),
          (1803, 7, 0.1, 'You lost 7 months of memory from that year'),
          (1803, 8, 0.1, 'You lost 8 months of memory from that year'),
          (1803, 9, 0.1, 'You lost 9 months of memory from that year'),
          (1803, 10, 0.1, 'You lost 10 months of memory from that year')
       ) AS raw_data_en(group_id, num, probability, option_txt)

),
vals AS (
         SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                 '<td>' || option_txt || '</td>') AS text,
                num,
                probability,
                lang,
                group_id
         FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details_dice' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.group_id, 'FM0000') || to_char(vals.num, 'FM00') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, rules_vals(group_id, id, body) AS (
    SELECT v.num
         , gen_random_uuid()
         , ('{
               "and":
                 [
                   { "==":
                       [
                         { "var": "answers.lastAnswer.questionId" },
                         "wcc_life_events_fortune_or_not_details"
                       ]
                   },
                   { "in":
                       [
                         "wcc_life_events_fortune_or_not_details_o' || to_char(num, 'FM9900')
                                                                    || '" ,
                         { "var": "answers.lastAnswer.answerIds" }
                       ]
                   }
                 ]
             }')::jsonb FROM (SELECT DISTINCT group_id FROM raw_data) v(num)
)
, ins_rules AS (
  INSERT INTO rules(ru_id, body) SELECT r.id, r.body FROM rules_vals r
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id, metadata)
SELECT 'wcc_life_events_fortune_or_not_details_dice_o' || to_char(vals.group_id, 'FM9900') || to_char(vals.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.group_id, 'FM0000') || to_char(vals.num, 'FM00') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
       vals.num AS sort_order,
       rules_vals.id AS visible_ru_ru_id,
       jsonb_build_object(
           'probability', vals.probability
       ) AS metadata
FROM vals
CROSS JOIN meta
LEFT JOIN rules_vals ON rules_vals.group_id = vals.group_id
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã
WITH
  raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            (1802, 1, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 1 –º–µ—Å—è—Ü'),
            (1802, 2, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 2 –º–µ—Å—è—Ü–∞'),
            (1802, 3, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 3 –º–µ—Å—è—Ü–∞'),
            (1802, 4, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 4 –º–µ—Å—è—Ü–∞'),
            (1802, 5, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 5 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 6, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 6 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 7, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 7 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 8, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 8 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 9, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 9 –º–µ—Å—è—Ü–µ–≤'),
            (1802, 10, 0.1, '–í—ã –ª–µ—á–∏–ª–∏—Å—å 10 –º–µ—Å—è—Ü–µ–≤'),

            (1803, 1, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 1 –º–µ—Å—è—Ü–µ —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 2, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 2 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 3, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 3 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 4, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 4 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 5, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 5 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 6, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 6 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 7, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 7 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 8, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 8 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 9, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 9 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞'),
            (1803, 10, 0.1, '–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–º—è—Ç—å –æ–± 10 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞')
          ) AS raw_data_ru(group_id, num, probability, option_txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
          (1802, 1, 0.1, 'You were recovering for 1 month'),
          (1802, 2, 0.1, 'You were recovering for 2 months'),
          (1802, 3, 0.1, 'You were recovering for 3 months'),
          (1802, 4, 0.1, 'You were recovering for 4 months'),
          (1802, 5, 0.1, 'You were recovering for 5 months'),
          (1802, 6, 0.1, 'You were recovering for 6 months'),
          (1802, 7, 0.1, 'You were recovering for 7 months'),
          (1802, 8, 0.1, 'You were recovering for 8 months'),
          (1802, 9, 0.1, 'You were recovering for 9 months'),
          (1802, 10, 0.1, 'You were recovering for 10 months'),

          (1803, 1, 0.1, 'You lost 1 month of memory from that year'),
          (1803, 2, 0.1, 'You lost 2 months of memory from that year'),
          (1803, 3, 0.1, 'You lost 3 months of memory from that year'),
          (1803, 4, 0.1, 'You lost 4 months of memory from that year'),
          (1803, 5, 0.1, 'You lost 5 months of memory from that year'),
          (1803, 6, 0.1, 'You lost 6 months of memory from that year'),
          (1803, 7, 0.1, 'You lost 7 months of memory from that year'),
          (1803, 8, 0.1, 'You lost 8 months of memory from that year'),
          (1803, 9, 0.1, 'You lost 9 months of memory from that year'),
          (1803, 10, 0.1, 'You lost 10 months of memory from that year')
       ) AS raw_data_en(group_id, num, probability, option_txt)
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details_dice' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π (–≥—Ä—É–ø–ø—ã 1802 –∏ 1803)
, ins_desc_1802 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(1802, 'FM0000') || to_char(vals.num, 'FM00') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 1 –º–µ—Å—è—Ü.'),
        ('ru', 2, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 2 –º–µ—Å—è—Ü–∞.'),
        ('ru', 3, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 3 –º–µ—Å—è—Ü–∞.'),
        ('ru', 4, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 4 –º–µ—Å—è—Ü–∞.'),
        ('ru', 5, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 5 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 6, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 6 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 7, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 7 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 8, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 8 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 9, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 9 –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 10, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –õ–µ—á–∏–ª–∏—Å—å 10 –º–µ—Å—è—Ü–µ–≤.'),
        ('en', 1, 'Accident: Recovering for 1 month.'),
        ('en', 2, 'Accident: Recovering for 2 months.'),
        ('en', 3, 'Accident: Recovering for 3 months.'),
        ('en', 4, 'Accident: Recovering for 4 months.'),
        ('en', 5, 'Accident: Recovering for 5 months.'),
        ('en', 6, 'Accident: Recovering for 6 months.'),
        ('en', 7, 'Accident: Recovering for 7 months.'),
        ('en', 8, 'Accident: Recovering for 8 months.'),
        ('en', 9, 'Accident: Recovering for 9 months.'),
        ('en', 10, 'Accident: Recovering for 10 months.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
, ins_desc_1803 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(1803, 'FM0000') || to_char(vals.num, 'FM00') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ–± 1 –º–µ—Å—è—Ü–µ —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('ru', 2, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ 2 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('ru', 3, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ 3 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('ru', 4, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ 4 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('ru', 5, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ 5 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('ru', 6, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ 6 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('ru', 7, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ 7 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('ru', 8, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ 8 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('ru', 9, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ 9 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('ru', 10, '–ù–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π: –ü–æ—Ç–µ—Ä—è –ø–∞–º—è—Ç–∏ –æ 10 –º–µ—Å—è—Ü–∞—Ö —Ç–æ–≥–æ –≥–æ–¥–∞.'),
        ('en', 1, 'Accident: Lost 1 month of memory from that year.'),
        ('en', 2, 'Accident: Lost 2 months of memory from that year.'),
        ('en', 3, 'Accident: Lost 3 months of memory from that year.'),
        ('en', 4, 'Accident: Lost 4 months of memory from that year.'),
        ('en', 5, 'Accident: Lost 5 months of memory from that year.'),
        ('en', 6, 'Accident: Lost 6 months of memory from that year.'),
        ('en', 7, 'Accident: Lost 7 months of memory from that year.'),
        ('en', 8, 'Accident: Lost 8 months of memory from that year.'),
        ('en', 9, 'Accident: Lost 9 months of memory from that year.'),
        ('en', 10, 'Accident: Lost 10 months of memory from that year.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è event_type_misfortune (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ –Ω–æ–¥–µ 27)
, ins_event_type_misfortune AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_fortune_or_not_details' ||'.'|| 'event_type_misfortune') AS id
         , meta.entity, 'event_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–ù–µ—É–¥–∞—á–∞'),
        ('en', 'Misfortune')
      ) AS v(lang, text)
      CROSS JOIN meta
    ON CONFLICT (id, lang) DO NOTHING
)
-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ lifeEvents –¥–ª—è –≥—Ä—É–ø–ø 1802 –∏ 1803
INSERT INTO effects (scope, an_an_id, body)
SELECT DISTINCT
  'character', 'wcc_life_events_fortune_or_not_details_dice_o' || to_char(raw_data.group_id, 'FM0000') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_fortune_or_not_details' ||'.'|| 'event_type_misfortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.group_id, 'FM0000') || to_char(raw_data.num, 'FM00') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_fortune_or_not_details_dice', 'wcc_life_events_fortune_or_not_details_o1802', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_fortune_or_not_details_dice', 'wcc_life_events_fortune_or_not_details_o1803', 2;

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_fortune_or_not_details_dice', 'wcc_life_events_event', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/027_life_events_fortune_or_not_details_dice.sql

-- >>> BEGIN sql/028_life_events_fortune_or_not_details_addiction.sql

\echo '028_life_events_fortune_or_not_details_addiction.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –û—Å–Ω–æ–≤–Ω–∞—è —á–µ—Ä—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details_addiction' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.'),
        ('en', 'Create your own addiction for your characterRaw.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'value_string'
       , (
         jsonb_build_object(
          'defaultValue', '',
          'placeholder' , '',
          'valueTarget' , '_temp.addiction_description',
          'counterIncrement', jsonb_build_object('jsonlogic_expression', jsonb_build_object('if', jsonb_build_array(
            jsonb_build_object('!=', jsonb_build_array(
              jsonb_build_object('var', 'characterRaw.logicFields.race'),
              'Witcher'
            )),
            jsonb_build_object(
              'id', 'lifeEventsCounter',
              'step', 10
            ),
            null
          )))
         ) ||
         jsonb_build_object(
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             -- –£—Å–ª–æ–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç 3: –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞ –∏–ª–∏ –æ–±—ã—á–Ω—ã—Ö —Ä–∞—Å
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('if', jsonb_build_array(
               jsonb_build_object('==', jsonb_build_array(
                 jsonb_build_object('var', 'characterRaw.logicFields.race'),
                 'Witcher'
               )),
               ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
               ck_id('witcher_cc.hierarchy.life_events_misfortune')::text
             ))),
             -- –£—Å–ª–æ–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç 4: –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞ –∏–ª–∏ –æ–±—ã—á–Ω—ã—Ö —Ä–∞—Å
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('if', jsonb_build_array(
               jsonb_build_object('==', jsonb_build_array(
                 jsonb_build_object('var', 'characterRaw.logicFields.race'),
                 'Witcher'
               )),
               ck_id('witcher_cc.hierarchy.witcher_events_danger_events_details_addiction')::text,
               ck_id('witcher_cc.hierarchy.life_events_misfortune_custom_addiction')::text
             )))
           )
         )
       ) AS metadata
  FROM meta;

-- i18n –¥–ª—è event_type_misfortune (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ –Ω–æ–¥–µ 026)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details_addiction' AS qu_id
                , 'character' AS entity)
, ins_event_type_misfortune AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_fortune_or_not_details' ||'.'|| 'event_type_misfortune') AS id
         , meta.entity, 'event_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–ù–µ—É–¥–∞—á–∞'),
        ('en', 'Misfortune')
      ) AS v(lang, text)
      CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è "–ö–∞—Å—Ç–æ–º–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"
, ins_event_desc AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–ö–∞—Å—Ç–æ–º–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
        ('en', 'Custom Addiction')
      ) AS v(lang, text)
      CROSS JOIN meta
)
-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –º–∞—Å—Å–∏–≤ diseases_and_curses –∏ –≤ lifeEvents
-- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –≤–æ–ø—Ä–æ—Å—É (qu_qu_id), –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –≤–æ–ø—Ä–æ—Å–∞
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
-- 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ diseases_and_curses
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.diseases_and_curses'),
      jsonb_build_object(
        'type', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_life_events_fortune_or_not_details.disease_type_addiction')::text),
        'description', jsonb_build_object('var', '_temp.addiction_description')
      )
    )
  )
FROM meta
UNION ALL
-- 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ lifeEvents
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_fortune_or_not_details' ||'.'|| 'event_type_misfortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM meta;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_fortune_or_not_details_addiction', 'wcc_life_events_fortune_or_not_details_o1310', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_fortune_or_not_details_addiction', 'wcc_life_events_event', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/028_life_events_fortune_or_not_details_addiction.sql

-- >>> BEGIN sql/029_life_events_fortune_or_not_details_curse.sql

\echo '029_life_events_fortune_or_not_details_curse.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –û—Å–Ω–æ–≤–Ω–∞—è —á–µ—Ä—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details_curse' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–æ–∫–ª—è—Ç–∏—è –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.'),
        ('en', 'Create your own curse for your characterRaw.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'value_textbox'
       , (
         jsonb_build_object(
          'defaultValue', '',
          'placeholder' , '',
          'valueTarget' , '_temp.curse_description',
          'counterIncrement', jsonb_build_object('jsonlogic_expression', jsonb_build_object('if', jsonb_build_array(
            jsonb_build_object('!=', jsonb_build_array(
              jsonb_build_object('var', 'characterRaw.logicFields.race'),
              'Witcher'
            )),
            jsonb_build_object(
              'id', 'lifeEventsCounter',
              'step', 10
            ),
            null
          )))
         ) ||
         jsonb_build_object(
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             -- –£—Å–ª–æ–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç 3: –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞ –∏–ª–∏ –æ–±—ã—á–Ω—ã—Ö —Ä–∞—Å
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('if', jsonb_build_array(
               jsonb_build_object('==', jsonb_build_array(
                 jsonb_build_object('var', 'characterRaw.logicFields.race'),
                 'Witcher'
               )),
               ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
               ck_id('witcher_cc.hierarchy.life_events_misfortune')::text
             ))),
             -- –£—Å–ª–æ–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç 4: –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞ –∏–ª–∏ –æ–±—ã—á–Ω—ã—Ö —Ä–∞—Å
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('if', jsonb_build_array(
               jsonb_build_object('==', jsonb_build_array(
                 jsonb_build_object('var', 'characterRaw.logicFields.race'),
                 'Witcher'
               )),
               ck_id('witcher_cc.hierarchy.witcher_events_danger_events_details_curse')::text,
               ck_id('witcher_cc.hierarchy.life_events_misfortune_custom_curse')::text
             )))
           )
         )
       ) AS metadata
  FROM meta;

-- i18n –¥–ª—è event_type_misfortune (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ –Ω–æ–¥–µ 026)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_fortune_or_not_details_curse' AS qu_id
                , 'character' AS entity)
, ins_event_type_misfortune AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_fortune_or_not_details' ||'.'|| 'event_type_misfortune') AS id
         , meta.entity, 'event_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–ù–µ—É–¥–∞—á–∞'),
        ('en', 'Misfortune')
      ) AS v(lang, text)
      CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è "–ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–æ–∫–ª—è—Ç–∏–µ"
, ins_event_desc AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–æ–∫–ª—è—Ç–∏–µ'),
        ('en', 'Custom Curse')
      ) AS v(lang, text)
      CROSS JOIN meta
)
-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø—Ä–æ–∫–ª—è—Ç–∏—è –≤ –º–∞—Å—Å–∏–≤ diseases_and_curses –∏ –≤ lifeEvents
-- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –≤–æ–ø—Ä–æ—Å—É (qu_qu_id), –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –≤–æ–ø—Ä–æ—Å–∞
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
-- 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ diseases_and_curses
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.diseases_and_curses'),
      jsonb_build_object(
        'type', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_life_events_fortune_or_not_details.disease_type_curse')::text),
        'description', jsonb_build_object('var', '_temp.curse_description')
      )
    )
  )
FROM meta
UNION ALL
-- 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ lifeEvents
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_fortune_or_not_details' ||'.'|| 'event_type_misfortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM meta;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_fortune_or_not_details', 'wcc_life_events_fortune_or_not_details_curse', 'wcc_life_events_fortune_or_not_details_o2006', 2;

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_fortune_or_not_details_curse', 'wcc_life_events_event', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/029_life_events_fortune_or_not_details_curse.sql

-- >>> BEGIN sql/030_life_events_allies_and_enemies_who.sql

\echo '030_life_events_allies_and_enemies_who.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_allies_and_enemies_who' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , jsonb_build_object('dice','d0') AS metadata)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–æ–≥–æ –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –≤ —ç—Ç–æ–π –¥–µ–∫–∞–¥–µ.', 'body'),
                ('en', 'Determine who you met during this decade.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
          'path', jsonb_build_array(
            ck_id('witcher_cc.hierarchy.life_events')::text,
            jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
            ck_id('witcher_cc.hierarchy.life_events_allies_enemies')::text
          )
        )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_allies_and_enemies_who' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES ('ru', 1, '–°–æ—é–∑–Ω–∏–∫'),
               ('ru', 2, '–í—Ä–∞–≥'),
               ('en', 1, 'Ally'),
               ('en', 2, 'Enemy')
         ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_allies_and_enemies_who_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_life_events_event', 'wcc_life_events_allies_and_enemies_who', 'wcc_life_events_event_o02';
-- <<< END sql/030_life_events_allies_and_enemies_who.sql

-- >>> BEGIN sql/031_life_events_enemy_victim.sql

\echo '031_life_events_enemy_victim.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_victim' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , jsonb_build_object('dice','d0') AS metadata)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫—Ç–æ –±—ã–ª –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–º –≤ –≤–∞—à–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ.', 'body'),
                ('en', 'Determine who was wronged in your conflict.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
          'path', jsonb_build_array(
            ck_id('witcher_cc.hierarchy.life_events')::text,
            jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
            ck_id('witcher_cc.hierarchy.life_events_enemy')::text,
            ck_id('witcher_cc.hierarchy.life_events_enemy_victim')::text
          )
        )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_victim' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES ('ru', 1, '–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–∂ ‚Äî –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∞—è —Å—Ç–æ—Ä–æ–Ω–∞.'),
               ('ru', 2, '–í—Ä–∞–≥ ‚Äî –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∞—è —Å—Ç–æ—Ä–æ–Ω–∞.'),
               ('en', 1, 'You were the one who was wronged.'),
               ('en', 2, 'You wronged someone else.')
         ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
, ins_label_value AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
           , meta.entity, meta.entity_field || '_value', vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_enemy_victim_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_life_events_allies_and_enemies_who', 'wcc_life_events_enemy_victim', 'wcc_life_events_allies_and_enemies_who_o02';
-- <<< END sql/031_life_events_enemy_victim.sql

-- >>> BEGIN sql/032_life_events_enemy_gender.sql

\echo '032_life_events_enemy_gender.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_gender' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ü–æ–ª'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Gender'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_enemy_gender' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_enemy')::text,
             ck_id('witcher_cc.hierarchy.life_events_enemy_gender')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_gender' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–ú—É–∂—Å–∫–æ–π', 0.5::numeric),
                  ('ru', 2, '–ñ–µ–Ω—Å–∫–∏–π', 0.5),
                  ('en', 1, 'Male', 0.5),
                  ('en', 2, 'Female', 0.5)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_enemy_gender_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_enemy_victim', 'wcc_life_events_enemy_gender';
-- <<< END sql/032_life_events_enemy_gender.sql

-- >>> BEGIN sql/033_life_events_enemy_position.sql

\echo '033_life_events_enemy_position.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_position' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ö—Ç–æ –≤–∞—à –≤—Ä–∞–≥'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Position'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_enemy_position' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_enemy')::text,
             ck_id('witcher_cc.hierarchy.life_events_enemy_position')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_position' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–ë—ã–≤—à–∏–π –¥—Ä—É–≥', 0.1::numeric),
                  ('ru', 2, '–ë—ã–≤—à–∏–π –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π', 0.1),
                  ('ru', 3, '–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫', 0.1),
                  ('ru', 4, '–í—Ä–∞–≥ –¥–µ—Ç—Å—Ç–≤–∞', 0.1),
                  ('ru', 5, '–ö—É–ª—å—Ç–∏—Å—Ç', 0.1),
                  ('ru', 6, '–ë–∞—Ä–¥', 0.1),
                  ('ru', 7, '–í–æ–∏–Ω', 0.1),
                  ('ru', 8, '–†–∞–∑–±–æ–π–Ω–∏–∫', 0.1),
                  ('ru', 9, '–ö–Ω—è–∑—å/–∫–Ω—è–≥–∏–Ω—è', 0.1),
                  ('ru', 10, '–ú–∞–≥', 0.1),
                  ('en', 1, 'Ex-Friend', 0.1),
                  ('en', 2, 'Ex-Lover', 0.1),
                  ('en', 3, 'Relative', 0.1),
                  ('en', 4, 'Childhood Enemy', 0.1),
                  ('en', 5, 'A Cultist', 0.1),
                  ('en', 6, 'A Bard', 0.1),
                  ('en', 7, 'A Soldier', 0.1),
                  ('en', 8, 'A Bandit', 0.1),
                  ('en', 9, 'A Duke/Duchess', 0.1),
                  ('en', 10, 'A Mage', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_enemy_position_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_enemy_gender', 'wcc_life_events_enemy_position';
-- <<< END sql/033_life_events_enemy_position.sql

-- >>> BEGIN sql/034_life_events_enemy_cause.sql

\echo '034_life_events_enemy_cause.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_cause' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ü—Ä–∏—á–∏–Ω–∞ –≤—Ä–∞–∂–¥—ã'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'The cause'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_enemy_cause' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_enemy')::text,
             ck_id('witcher_cc.hierarchy.life_events_enemy_cause')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_cause' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–ù–∞–ø–∞–¥–µ–Ω–∏–µ', 0.1::numeric),
                  ('ru', 2, '–ü–æ—Ç–µ—Ä—è –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ', 0.1),
                  ('ru', 3, '–°–µ—Ä—å—ë–∑–Ω–æ–µ —É–Ω–∏–∂–µ–Ω–∏–µ', 0.1),
                  ('ru', 4, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ', 0.1),
                  ('ru', 5, '–û–±–≤–∏–Ω–µ–Ω–∏–µ –≤ –Ω–µ–ª–µ–≥–∞–ª—å–Ω–æ–º –∫–æ–ª–¥–æ–≤—Å—Ç–≤–µ', 0.1),
                  ('ru', 6, '–û—Ç–∫–∞–∑ –≤ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏—Ç—è–∑–∞–Ω–∏—è—Ö', 0.1),
                  ('ru', 7, '–ù–∞–Ω–µ—Å–µ–Ω–∏–µ —Å–µ—Ä—å—ë–∑–Ω–æ–π —Ä–∞–Ω—ã', 0.1),
                  ('ru', 8, '–®–∞–Ω—Ç–∞–∂', 0.1),
                  ('ru', 9, '–°–æ—Ä–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã', 0.1),
                  ('ru', 10, '–ü—Ä–æ–≤–æ–∫–∞—Ü–∏—è –Ω–∞–ø–∞–¥–µ–Ω–∏—è —á—É–¥–æ–≤–∏—â', 0.1),
                  ('en', 1, 'Assaulted the Offended Party', 0.1),
                  ('en', 2, 'Caused the Loss of a Loved One', 0.1),
                  ('en', 3, 'Caused Major Humiliation', 0.1),
                  ('en', 4, 'Caused a Curse', 0.1),
                  ('en', 5, 'Accused of Illegal Witchcraft', 0.1),
                  ('en', 6, 'Turned Down Romantically', 0.1),
                  ('en', 7, 'Caused a Terrible Wound', 0.1),
                  ('en', 8, 'Blackmail', 0.1),
                  ('en', 9, 'Foiled Plans', 0.1),
                  ('en', 10, 'Caused a Monster Attack', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_enemy_cause_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_enemy_position', 'wcc_life_events_enemy_cause';
-- <<< END sql/034_life_events_enemy_cause.sql

-- >>> BEGIN sql/035_life_events_enemy_power_level.sql

\echo '035_life_events_enemy_power_level.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_power_level' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–£—Ä–æ–≤–µ–Ω—å —Å–∏–ª—ã'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Power'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_enemy_power_level' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_enemy')::text,
             ck_id('witcher_cc.hierarchy.life_events_enemy_power_level')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_power_level' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '1', 0.1::numeric),
                  ('ru', 2, '2', 0.1),
                  ('ru', 3, '3', 0.1),
                  ('ru', 4, '4', 0.1),
                  ('ru', 5, '5', 0.1),
                  ('ru', 6, '6', 0.1),
                  ('ru', 7, '7', 0.1),
                  ('ru', 8, '8', 0.1),
                  ('ru', 9, '9', 0.1),
                  ('ru', 10, '10', 0.1),
                  ('en', 1, '1', 0.1),
                  ('en', 2, '2', 0.1),
                  ('en', 3, '3', 0.1),
                  ('en', 4, '4', 0.1),
                  ('en', 5, '5', 0.1),
                  ('en', 6, '6', 0.1),
                  ('en', 7, '7', 0.1),
                  ('en', 8, '8', 0.1),
                  ('en', 9, '9', 0.1),
                  ('en', 10, '10', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_enemy_power_level_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_enemy_cause', 'wcc_life_events_enemy_power_level';
-- <<< END sql/035_life_events_enemy_power_level.sql

-- >>> BEGIN sql/036_life_events_enemy_how_far.sql

\echo '036_life_events_enemy_how_far.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_how_far' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ù–∞—Å–∫–æ–ª—å–∫–æ –¥–∞–ª–µ–∫–æ –≤—Å—ë –∑–∞—à–ª–æ?'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'How far has it escalated?'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_enemy_how_far' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_enemy')::text,
             ck_id('witcher_cc.hierarchy.life_events_enemy_how_far')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_how_far' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–í—Ä–∞–∂–¥–∞ –ø–æ—á—Ç–∏ –∑–∞–±—ã—Ç–∞', 0.2::numeric),
                  ('ru', 2, '–ï—Å—Ç—å –∂–µ–ª–∞–Ω–∏–µ —É–¥–∞—Ä–∏—Ç—å –≤ —Å–ø–∏–Ω—É', 0.2),
                  ('ru', 3, '–ù–∞–ø–∞–¥–µ–Ω–∏–µ –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ', 0.2),
                  ('ru', 4, '–í—ã—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞–¥–∏ –º–µ—Å—Ç–∏', 0.2),
                  ('ru', 5, '–ñ–∞–∂–¥–∞ –∫—Ä–æ–≤–∏ ', 0.2),
                  ('en', 1, 'They/You Have Mostly Forgotten', 0.2),
                  ('en', 2, 'They/You Plan to Backstab', 0.2),
                  ('en', 3, 'They/You Will Attack If Encountered', 0.2),
                  ('en', 4, 'They/You Will Hunt for Revenge', 0.2),
                  ('en', 5, 'They/You Are Out for Blood', 0.2)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_enemy_how_far_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_enemy_power_level', 'wcc_life_events_enemy_how_far';
-- <<< END sql/036_life_events_enemy_how_far.sql

-- >>> BEGIN sql/037_life_events_enemy_the_power.sql

\echo '037_life_events_enemy_the_power.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_the_power' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–í —á–µ–º —Å–∏–ª–∞ –≤—Ä–∞–≥–∞?'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'What is their power?'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_enemy_the_power' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'counterIncrement', jsonb_build_object(
             'id','lifeEventsCounter',
             'step',10
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_enemy')::text,
             ck_id('witcher_cc.hierarchy.life_events_enemy_power')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_the_power' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ñ–µ—Ä–∞', 0.2::numeric),
                  ('ru', 2, '–ó–Ω–∞–Ω–∏–µ', 0.2),
                  ('ru', 3, '–§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞', 0.2),
                  ('ru', 4, '–ü–æ–¥—Ä—É—á–Ω—ã–µ', 0.2),
                  ('ru', 5, '–ú–∞–≥–∏—è', 0.2),
                  ('en', 1, 'Social Power', 0.2),
                  ('en', 2, 'Knowledge', 0.2),
                  ('en', 3, 'Physical', 0.2),
                  ('en', 4, 'Minions', 0.2),
                  ('en', 5, 'Magic', 0.2)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_enemy_the_power_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_the_power' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
    SELECT num FROM (VALUES (1), (2), (3), (4), (5)) AS v(num)
)

INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_life_events_enemy_the_power_o' || to_char(vals.num, 'FM9900'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.enemies'),
      jsonb_build_object(
        'victim',      jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_enemy_victim'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'gender',      jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_enemy_gender'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'position',    jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_enemy_position'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'cause',       jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_enemy_cause'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'power_level', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_enemy_power_level'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'how_far',     jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_enemy_how_far'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'the_power',   jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value')::text)
      )
    )
  )
FROM vals
CROSS JOIN meta;

-- i18n –¥–ª—è eventType "–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏" (—Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–∞–∫–∂–µ –≤ –Ω–æ–¥–µ 43, –∏—Å–ø–æ–ª—å–∑—É–µ–º ON CONFLICT)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏'),
      ('en', 'Allies and Enemies')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ lifeEvents (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–æ–ø—Ä–æ—Å—É)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_enemy_the_power' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è description "–í—Ä–∞–≥"
, ins_desc_enemy AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_enemy') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–í—Ä–∞–≥'),
        ('en', 'Enemy')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_enemy')::text)
      )
    )
  )
FROM meta;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_enemy_how_far', 'wcc_life_events_enemy_the_power';

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_enemy_the_power', 'wcc_life_events_event', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/037_life_events_enemy_the_power.sql

-- >>> BEGIN sql/038_life_events_ally_gender.sql

\echo '038_life_events_ally_gender.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_gender' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ü–æ–ª'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Gender'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_ally_gender' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_ally')::text,
             ck_id('witcher_cc.hierarchy.life_events_ally_gender')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_gender' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–ú—É–∂—Å–∫–æ–π', 0.5::numeric),
                  ('ru', 2, '–ñ–µ–Ω—Å–∫–∏–π', 0.5),
                  ('en', 1, 'Male', 0.5),
                  ('en', 2, 'Female', 0.5)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_ally_gender_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_life_events_allies_and_enemies_who', 'wcc_life_events_ally_gender', 'wcc_life_events_allies_and_enemies_who_o01';
-- <<< END sql/038_life_events_ally_gender.sql

-- >>> BEGIN sql/039_life_events_ally_position.sql

\echo '039_life_events_ally_position.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_position' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ö—Ç–æ –≤–∞—à —Å–æ—é–∑–Ω–∏–∫'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Position'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_ally_position' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_ally')::text,
             ck_id('witcher_cc.hierarchy.life_events_ally_position')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_position' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –≥–æ–ª–æ–≤–∞–º–∏', 0.1::numeric),
                  ('ru', 2, '–ú–∞–≥', 0.1),
                  ('ru', 3, '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –∏–ª–∏ —É—á–∏—Ç–µ–ª—å', 0.1),
                  ('ru', 4, '–î—Ä—É–≥ –¥–µ—Ç—Å—Ç–≤–∞', 0.1),
                  ('ru', 5, '–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫', 0.1),
                  ('ru', 6, '–ë—ã–≤—à–∏–π –≤—Ä–∞–≥', 0.1),
                  ('ru', 7, '–ö–Ω—è–∑—å/–∫–Ω—è–≥–∏–Ω—è', 0.1),
                  ('ru', 8, '–ñ—Ä–µ—Ü/–∂—Ä–∏—Ü–∞', 0.1),
                  ('ru', 9, '–°–æ–ª–¥–∞—Ç', 0.1),
                  ('ru', 10, '–ë–∞—Ä–¥', 0.1),
                  ('en', 1, 'A Bounty Hunter', 0.1),
                  ('en', 2, 'A Mage', 0.1),
                  ('en', 3, 'A Mentor or Teacher', 0.1),
                  ('en', 4, 'A Childhood Friend', 0.1),
                  ('en', 5, 'A Craftsman', 0.1),
                  ('en', 6, 'An Old Enemy', 0.1),
                  ('en', 7, 'A Duke/Duchess', 0.1),
                  ('en', 8, 'A Priest/Priestess', 0.1),
                  ('en', 9, 'A Soldier', 0.1),
                  ('en', 10, 'A Bard', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_ally_position_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_ally_gender', 'wcc_life_events_ally_position';
-- <<< END sql/039_life_events_ally_position.sql

-- >>> BEGIN sql/040_life_events_ally_how_met.sql

\echo '040_life_events_ally_how_met.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_how_met' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ö–∞–∫ –≤—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'How you met'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_ally_how_met' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_ally')::text,
             ck_id('witcher_cc.hierarchy.life_events_ally_how_met')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_how_met' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–í—ã –µ–≥–æ —Å–ø–∞—Å–ª–∏', 0.1::numeric),
                  ('ru', 2, '–í—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –≤ —Ç–∞–≤–µ—Ä–Ω–µ', 0.1),
                  ('ru', 3, '–û–Ω –≤–∞—Å —Å–ø–∞—Å', 0.1),
                  ('ru', 4, '–û–Ω –≤–∞—Å –Ω–∞–Ω—è–ª', 0.1),
                  ('ru', 5, '–í—ã –≤–º–µ—Å—Ç–µ –ø–æ–ø–∞–ª–∏ –≤ –ª–æ–≤—É—à–∫—É', 0.1),
                  ('ru', 6, '–í–∞–º –ø—Ä–∏—à–ª–æ—Å—å —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ', 0.1),
                  ('ru', 7, '–í—ã –µ–≥–æ –Ω–∞–Ω—è–ª–∏', 0.1),
                  ('ru', 8, '–°–ø–µ–ª–∏—Å—å –ø–æ –ø—å—è–Ω–∏', 0.1),
                  ('ru', 9, '–í—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –≤ –¥–æ—Ä–æ–≥–µ', 0.1),
                  ('ru', 10, '–°—Ä–∞–∂–∞–ª–∏—Å—å –≤–º–µ—Å—Ç–µ', 0.1),
                  ('en', 1, 'Saved them from Something', 0.1),
                  ('en', 2, 'Met in a Tavern', 0.1),
                  ('en', 3, 'They Saved You from Something', 0.1),
                  ('en', 4, 'They Hired You for Something', 0.1),
                  ('en', 5, 'You Were Trapped Together', 0.1),
                  ('en', 6, 'You Were Forced to Work Together', 0.1),
                  ('en', 7, 'You Hired them for Something', 0.1),
                  ('en', 8, 'You Met While Drunk and Hit It Off', 0.1),
                  ('en', 9, 'You Met While Traveling', 0.1),
                  ('en', 10, 'You Fought Together', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_ally_how_met_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_ally_position', 'wcc_life_events_ally_how_met';
-- <<< END sql/040_life_events_ally_how_met.sql

-- >>> BEGIN sql/041_life_events_ally_how_close.sql

\echo '041_life_events_ally_how_close.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_how_close' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–ë–ª–∏–∑–æ—Å—Ç—å'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Closeness'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_ally_how_close' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_ally')::text,
             ck_id('witcher_cc.hierarchy.life_events_ally_closeness')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_how_close' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–ó–Ω–∞–∫–æ–º—ã–µ', 0.4::numeric),
                  ('ru', 2, '–î—Ä—É–∑—å—è', 0.2),
                  ('ru', 3, '–ë–ª–∏–∑–∫–∏–µ –¥—Ä—É–∑—å—è', 0.2),
                  ('ru', 4, '–ù–µ —Ä–∞–∑–ª–µ–π –≤–æ–¥–∞', 0.1),
                  ('ru', 5, '–°–≤—è–∑–∞–Ω—ã –≤–∑–∞–∏–º–Ω–æ–π –∫–ª—è—Ç–≤–æ–π ', 0.1),
                  ('en', 1, 'Acquaintances', 0.4),
                  ('en', 2, 'Friends', 0.2),
                  ('en', 3, 'Close Friends', 0.2),
                  ('en', 4, 'Inseperable', 0.1),
                  ('en', 5, 'Bound By Bond', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_ally_how_close_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_ally_how_met', 'wcc_life_events_ally_how_close';
-- <<< END sql/041_life_events_ally_how_close.sql

-- >>> BEGIN sql/042_life_events_ally_where.sql

\echo '042_life_events_ally_where.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_where' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–†–µ–≥–∏–æ–Ω'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Region'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_ally_where' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'counterIncrement', jsonb_build_object(
             'id','lifeEventsCounter',
             'step',10
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_ally')::text,
             ck_id('witcher_cc.hierarchy.life_events_ally_where')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_where' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  txt,
                  num,
                  probability,
                  lang
           FROM (VALUES
                  ('ru', 1, '–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –°–µ–≤–µ—Ä–∞', 0.3::numeric),
                  ('ru', 2, '–ò–º–ø–µ—Ä–∏—è –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥', 0.3),
                  ('ru', 3, '–ó–µ–º–ª–∏ –°—Ç–∞—Ä—à–∏—Ö –ù–∞—Ä–æ–¥–æ–≤', 0.3),
                  ('ru', 4, '–ó–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏', 0.1),
                  ('en', 1, 'The Northern Kingdoms', 0.3),
                  ('en', 2, 'The Empire of Nilfgaard', 0.3),
                  ('en', 3, 'Elder Lands', 0.3),
                  ('en', 4, 'Beyond the Boundaries', 0.1)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_label_value AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
                     , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_ally_where_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_where' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
    SELECT num FROM (VALUES (1), (2), (3), (4)) AS v(num)
)

INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_life_events_ally_where_o' || to_char(vals.num, 'FM9900'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.allies'),
      jsonb_build_object(
        'gender',    jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_ally_gender'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'position',  jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_ally_position'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'how_met',   jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_ally_how_met'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'how_close', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_ally_how_close'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'where',     jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value')::text)
      )
    )
  )
FROM vals
CROSS JOIN meta;

-- i18n –¥–ª—è eventType "–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏" (—Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–∞–∫–∂–µ –≤ –Ω–æ–¥–µ 38, –∏—Å–ø–æ–ª—å–∑—É–µ–º ON CONFLICT)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏'),
      ('en', 'Allies and Enemies')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ lifeEvents (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–æ–ø—Ä–æ—Å—É)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_ally_where' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è description "–°–æ—é–∑–Ω–∏–∫"
, ins_desc_ally AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_ally') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–°–æ—é–∑–Ω–∏–∫'),
        ('en', 'Ally')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_ally')::text)
      )
    )
  )
FROM meta;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_ally_how_close', 'wcc_life_events_ally_where';

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_ally_where', 'wcc_life_events_event', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/042_life_events_ally_where.sql

-- >>> BEGIN sql/043_life_events_lovestory.sql

\echo '043_life_events_lovestory.sql'

-- –£–∑–µ–ª: 
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_relationshipsstory' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–õ—é–±–æ–≤–Ω–∞—è —Å–≤—è–∑—å'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Love Affair'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , NULL
       , 'single_table'
       , jsonb_build_object(
           'dice','d_weighed',
           'columns', (
             SELECT jsonb_agg(
                      ck_id('witcher_cc' ||'.'|| 'wcc_life_events_relationshipsstory' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text
                      ORDER BY num
                    )
               FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
             jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.life_events_relationships')::text,
             ck_id('witcher_cc.hierarchy.life_events_relationships_type')::text
           )
         )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_relationshipsstory' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
           SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                   '<td>' || txt || '</td>') AS text,
                  num,
                  probability,
                  lang,
                  txt
           FROM (VALUES
                  ('ru', 1, '–°—á–∞—Å—Ç–ª–∏–≤–∞—è –ª—é–±–æ–≤—å', 0.1::numeric),
                  ('ru', 2, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è', 0.3),
                  ('ru', 3, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å', 0.2),
                  ('ru', 4, '–®–ª—é—Ö–∏ –∏ —Ä–∞–∑–≥—É–ª', 0.4),
                  ('en', 1, 'A Happy Love Affair', 0.1),
                  ('en', 2, 'A Romantic Tragedy', 0.3),
                  ('en', 3, 'A Problematic Love', 0.2),
                  ('en', 4, 'Whores and Debauchery', 0.4)
           ) AS v(lang, num, txt, probability)
)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_life_events_relationshipsstory_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) || CASE WHEN to_char(vals.num, 'FM00')
                     IN ('02','03') THEN '{}'::jsonb
                     ELSE jsonb_build_object( 'counterIncrement'
                                            , jsonb_build_object('id', 'lifeEventsCounter', 'step', 10))
              END
         AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_event', 'wcc_life_events_relationshipsstory', 'wcc_life_events_event_o03', 2;

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_relationshipsstory', 'wcc_life_events_event', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;

-- i18n –¥–ª—è eventType "–û—Ç–Ω–æ—à–µ–Ω–∏—è" / "Relationships" (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_relationships' ||'.'|| 'event_type_relationships') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–û—Ç–Ω–æ—à–µ–Ω–∏—è'),
      ('en', 'Relationships')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- i18n –¥–ª—è –∫—Ä–∞—Ç–∫–∏—Ö –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π (–≤–∞—Ä–∏–∞–Ω—Ç—ã 1 –∏ 4)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_relationshipsstory' AS qu_id
                , 'character' AS entity)
, desc_vals AS (
  SELECT v.*
  FROM (VALUES
    -- RU: Happy Love Affair (option 1)
    ('ru', 1, '–õ—é–±–æ–≤—å: –°—á–∞—Å—Ç–ª–∏–≤–∞—è –∏ –≤–∑–∞–∏–º–Ω–∞—è –ª—é–±–æ–≤–Ω–∞—è —Å–≤—è–∑—å'),
    -- RU: Whores and Debauchery (option 4)
    ('ru', 4, '–ö—É—Ç—ë–∂: –†–∞–∑–≥—É–ª, –ø—Ä–æ–¥–∞–∂–Ω–∞—è –ª—é–±–æ–≤—å –∏ —Ä–∞–∑–≤—Ä–∞—Ç'),
    -- EN: Happy Love Affair (option 1)
    ('en', 1, 'Love: A Happy and Mutual Love Affair'),
    -- EN: Whores and Debauchery (option 4)
    ('en', 4, 'Prostitution: Whores, Debauchery and Vice')
  ) AS v(lang, num, text)
)
, ins_desc AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(desc_vals.num, 'FM9900') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', desc_vals.lang, desc_vals.text
      FROM desc_vals
      CROSS JOIN meta
)
-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ lifeEvents –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ 1 –∏ 4 (answer-level)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_life_events_relationshipsstory_o' || to_char(event_nums.num, 'FM9900'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_relationships' ||'.'|| 'event_type_relationships')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(event_nums.num, 'FM9900') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM (VALUES (1), (4)) AS event_nums(num)
CROSS JOIN meta;
-- <<< END sql/043_life_events_lovestory.sql

-- >>> BEGIN sql/044_life_events_lovestory_details.sql

\echo '044_life_events_lovestory_details.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_relationshipsstory_details' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , jsonb_build_object(
                    'dice','d0',
                    'counterIncrement', jsonb_build_object(
                      'id','lifeEventsCounter',
                      'step',10
                    )
                  ) AS metadata)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –≤–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –ª—é–±–≤–∏.', 'body'),
                ('en', 'Choose the entry that fits your love story.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
          'path', jsonb_build_array(
            ck_id('witcher_cc.hierarchy.life_events')::text,
            jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
            ck_id('witcher_cc.hierarchy.life_events_relationships')::text,
            ck_id('witcher_cc.hierarchy.life_events_relationships_details')::text
          )
        )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_relationshipsstory_details' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
          -- ====== RU: Romantic Tragedy ======
          ('ru',2,1,'–ù–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –Ω–∞–∑–∞–¥ –≤–∞—à–µ–≥–æ –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ —Å—Ö–≤–∞—Ç–∏–ª–∏ —Ä–∞–∑–±–æ–π–Ω–∏–∫–∏. –û–Ω –¥–æ —Å–∏—Ö –ø–æ—Ä –≤ –ø–ª–µ–Ω—É.'),
          ('ru',2,2,'–û–¥–Ω–∞–∂–¥—ã –≤–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –∏—Å—á–µ–∑. –í—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –æ–Ω.'),
          ('ru',2,3,'–í–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π –ø–æ–ø–∞–ª –≤ —Ç—é—Ä—å–º—É –∏–ª–∏ –±—ã–ª –∏–∑–≥–Ω–∞–Ω –∑–∞ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ —Å–æ–≤–µ—Ä—à–∞–ª.'),
          ('ru',2,4,'–í–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π –ø–∞–ª –∂–µ—Ä—Ç–≤–æ–π –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–∫–ª—è—Ç–∏—è.'),
          ('ru',2,5,'–ß—Ç–æ-—Ç–æ –≤—Å—Ç–∞–ª–æ –º–µ–∂–¥—É –≤–∞–º–∏, –∏ –≤—ã –±—ã–ª–∏ –≤—ã–Ω—É–∂–¥–µ–Ω—ã —É–±–∏—Ç—å —Å–≤–æ–µ–≥–æ –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ.'),
          ('ru',2,6,'–í–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —Å–æ–≤–µ—Ä—à–∏–ª —Å–∞–º–æ—É–±–∏–π—Å—Ç–≤–æ. –í—ã –º–æ–∂–µ—Ç–µ –∏ –Ω–µ –∑–Ω–∞—Ç—å, –ø–æ—á–µ–º—É.'),
          ('ru',2,7,'–í–∞—à–µ–≥–æ –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ –ø–æ—Ö–∏—Ç–∏–ª –¥–≤–æ—Ä—è–Ω–∏–Ω –∏ —Å–¥–µ–ª–∞–ª —Å–≤–æ–µ–π –Ω–∞–ª–æ–∂–Ω–∏—Ü–µ–π.'),
          ('ru',2,8,'–°–æ–ø–µ—Ä–Ω–∏–∫ –≤—ã—Ä–≤–∞–ª –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É –∏ —É–≤—ë–ª –ª—é–±–æ–≤—å –≤–∞—à–µ–≥–æ –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ.'),
          ('ru',2,9,'–í–∞—à–µ–≥–æ –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ —É–±–∏–ª–∏ —á—É–¥–æ–≤–∏—â–∞. –≠—Ç–æ –º–æ–≥ –±—ã—Ç—å –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π –∏–ª–∏ –∑–∞—Ä–∞–Ω–µ–µ —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —É–±–∏–π—Å—Ç–≤–æ.'),
          ('ru',2,10,'–í–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π ‚Äî –º–∞–≥, –≤–µ–¥—å–º–∞–∫ –∏–ª–∏ —Ä–∞–∑—É–º–Ω–æ–µ —á—É–¥–æ–≤–∏—â–µ, —á—Ç–æ —Å—Ç–∞–≤–∏—Ç –∫—Ä–µ—Å—Ç –Ω–∞ –≤–∞—à–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.'),

          -- ====== RU: Problematic Love ======
          ('ru',3,1,'–°–µ–º—å—è –∏–ª–∏ –¥—Ä—É–∑—å—è –≤–∞—à–µ–≥–æ –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ –Ω–µ–Ω–∞–≤–∏–¥—è—Ç –≤–∞—Å –∏ –Ω–µ –æ–¥–æ–±—Ä—è—é—Ç –≤–∞—à—É —Å–≤—è–∑—å.'),
          ('ru',3,2,'–í–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —Ç–æ—Ä–≥—É–µ—Ç —Å–≤–æ–∏–º —Ç–µ–ª–æ–º –∏ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±—Ä–æ—Å–∞—Ç—å —ç—Ç—É —Ä–∞–±–æ—Ç—É.'),
          ('ru',3,3,'–í–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç –º–∞–ª–æ–π –ø–æ—Ä—á–∏ ‚Äî –ø–∞—Ä–∞–Ω–æ–π–∏ –∏–ª–∏ –∂—É—Ç–∫–∏—Ö –∫–æ—à–º–∞—Ä–æ–≤.'),
          ('ru',3,4,'–í–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —Å–ø–∞–ª —Å –∫–µ–º –ø–æ–ø–∞–ª–æ –∏ –æ—Ç–∫–∞–∑–∞–ª—Å—è –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å —ç—Ç–æ, –∫–æ–≥–¥–∞ –≤—ã —É–∑–Ω–∞–ª–∏.'),
          ('ru',3,5,'–í–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —É–∂–∞—Å–Ω–æ —Ä–µ–≤–Ω–∏–≤ –∏ –Ω–µ –≤—ã–Ω–æ—Å–∏—Ç –≤–∞—à–µ–≥–æ —Å–æ—Å–µ–¥—Å—Ç–≤–∞ —Å –ª—é–±—ã–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º —É—Ö–∞–∂—ë—Ä–æ–º.'),
          ('ru',3,6,'–í—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å—Å–æ—Ä–∏—Ç–µ—Å—å –∏ –±—ã—Å—Ç—Ä–æ —Å–∫–∞—Ç—ã–≤–∞–µ—Ç–µ—Å—å –∫ –∫—Ä–∏–∫—É.'),
          ('ru',3,7,'–í—ã —Å –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–º ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–ø–µ—Ä–Ω–∏–∫–∏ –∏ —á–∞—Å—Ç–æ —É–≤–æ–¥–∏—Ç–µ –¥—Ä—É–≥ —É –¥—Ä—É–≥–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤.'),
          ('ru',3,8,'–û–¥–∏–Ω –∏–∑ –≤–∞—Å ‚Äî —á–µ–ª–æ–≤–µ–∫, –∞ –¥—Ä—É–≥–æ–π ‚Äî –Ω–µ–ª—é–¥—å, —á—Ç–æ –æ—Å–ª–æ–∂–Ω—è–µ—Ç –∂–∏–∑–Ω—å.'),
          ('ru',3,9,'–í–∞—à –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —É–∂–µ —Å–æ—Å—Ç–æ–∏—Ç –≤ –±—Ä–∞–∫–µ. –û–Ω –º–æ–∂–µ—Ç —Ö–æ—Ç–µ—Ç—å —É–π—Ç–∏ –æ—Ç —Å—É–ø—Ä—É–≥–∞, –∞ –º–æ–∂–µ—Ç –∏ –Ω–µ—Ç.'),
          ('ru',3,10,'–í–∞—à–∏ –¥—Ä—É–∑—å—è –∏–ª–∏ —Å–µ–º—å—è –Ω–µ–Ω–∞–≤–∏–¥—è—Ç –≤–∞—à–µ–≥–æ –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ –∏ —Ç–æ–∂–µ –Ω–µ –æ–¥–æ–±—Ä—è—é—Ç —ç—Ç—É —Å–≤—è–∑—å.'),

          -- ====== EN: Romantic Tragedy ======
          ('en',2,1,'Your Lover was captured by bandits some time ago and is still their captive.'),
          ('en',2,2,'Your Lover mysteriously vanished one day and you don''t know where they went.'),
          ('en',2,3,'Your Lover was imprisoned or exiled for crimes they may not have committed.'),
          ('en',2,4,'Your Lover was taken from you by a powerful curse.'),
          ('en',2,5,'Something got between you and your Lover and you were forced to kill them.'),
          ('en',2,6,'Your Lover committed suicide. You may not know why they did it.'),
          ('en',2,7,'Your Lover was kidnapped by a noble and made into a concubine.'),
          ('en',2,8,'A rival cut you out of the action and stole your Lover''s affection.'),
          ('en',2,9,'Your Lover was killed by monsters. It may have been an accident or planned.'),
          ('en',2,10,'Your Lover is a mage, a witcher, or a sentient monster, dooming the romance.'),

          -- ====== EN: Problematic Love ======
          ('en',3,1,'Your Lover''s family or friends hate you and do not condone your romance.'),
          ('en',3,2,'Your Lover works as a whore for a living and refuses to give up their job.'),
          ('en',3,3,'Your Lover is under a minor curse such as paranoia or horrible nightmares.'),
          ('en',3,4,'Your Lover slept around and refused to stop when you found out.'),
          ('en',3,5,'Your Lover is insanely jealous and can''t stand you being around any possible rival.'),
          ('en',3,6,'You fight constantly and nothing can stop it for long. You always descend into screaming.'),
          ('en',3,7,'You''re professional rivals of some sort. You steal customers from each other often.'),
          ('en',3,8,'One of you is human and the other is non-human, making your life difficult.'),
          ('en',3,9,'Your Lover is already married. They may or may not be willing to leave their spouse.'),
          ('en',3,10,'Your friends or family hate your Lover and do not condone your romance.')
        ) AS v(lang, group_id, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
, rules_vals(group_id, id, body) AS (
    SELECT v.group_id
         , gen_random_uuid()
         , ('{
               "and":
                 [
                   { "==":
                       [
                         { "var": "answers.lastAnswer.questionId" },
                         "wcc_life_events_relationshipsstory"
                       ]
                   },
                   { "in":
                       [
                         "wcc_life_events_relationshipsstory_o' || to_char(v.group_id, 'FM00')
                                            || '" ,
                         { "var": "answers.lastAnswer.answerIds" }
                       ]
                   }
                 ]
             }')::jsonb FROM (SELECT DISTINCT group_id FROM vals) v(group_id)
)
, ins_rules AS (
  INSERT INTO rules(ru_id, body) SELECT r.id, r.body FROM rules_vals r
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id, metadata)
  SELECT 'wcc_life_events_relationshipsstory_details_o' || to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         r.id,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
    LEFT JOIN rules_vals r ON r.group_id = vals.group_id
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_relationshipsstory', 'wcc_life_events_relationshipsstory_details', 'wcc_life_events_relationshipsstory_o02', 2;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_life_events_relationshipsstory', 'wcc_life_events_relationshipsstory_details', 'wcc_life_events_relationshipsstory_o03', 2;

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_relationshipsstory_details', 'wcc_life_events_event', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;

-- i18n –¥–ª—è eventType "–û—Ç–Ω–æ—à–µ–Ω–∏—è" / "Relationships"
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_relationships' ||'.'|| 'event_type_relationships') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–û—Ç–Ω–æ—à–µ–Ω–∏—è'),
      ('en', 'Relationships')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- i18n –¥–ª—è –∫—Ä–∞—Ç–∫–∏—Ö –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π (–∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ "{—Ç–∏–ø}: {–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ}")
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_life_events_relationshipsstory_details' AS qu_id
                , 'character' AS entity)
, desc_vals AS (
  SELECT v.*
  FROM (VALUES
    -- RU: Romantic Tragedy (group_id=2)
    ('ru', 2, 1, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π –≤ –ø–ª–µ–Ω—É —Ä–∞–∑–±–æ–π–Ω–∏–∫–æ–≤'),
    ('ru', 2, 2, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ –∏—Å—á–µ–∑'),
    ('ru', 2, 3, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π –≤ —Ç—é—Ä—å–º–µ –∏–ª–∏ –∏–∑–≥–Ω–∞–Ω'),
    ('ru', 2, 4, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π –ø–æ–¥ –ø—Ä–æ–∫–ª—è—Ç–∏–µ–º'),
    ('ru', 2, 5, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –í—ã —É–±–∏–ª–∏ –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ'),
    ('ru', 2, 6, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —Å–æ–≤–µ—Ä—à–∏–ª —Å–∞–º–æ—É–±–∏–π—Å—Ç–≤–æ'),
    ('ru', 2, 7, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ –ø–æ—Ö–∏—Ç–∏–ª –¥–≤–æ—Ä—è–Ω–∏–Ω'),
    ('ru', 2, 8, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –°–æ–ø–µ—Ä–Ω–∏–∫ —É–≤—ë–ª –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ'),
    ('ru', 2, 9, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ —É–±–∏–ª–∏ —á—É–¥–æ–≤–∏—â–∞'),
    ('ru', 2, 10, '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π ‚Äî –º–∞–≥ –∏–ª–∏ –≤–µ–¥—å–º–∞–∫'),
    
    -- RU: Problematic Love (group_id=3)
    ('ru', 3, 1, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –°–µ–º—å—è –Ω–µ –æ–¥–æ–±—Ä—è–µ—Ç —Å–≤—è–∑—å'),
    ('ru', 3, 2, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —Ç–æ—Ä–≥—É–µ—Ç —Ç–µ–ª–æ–º'),
    ('ru', 3, 3, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π –ø–æ–¥ –º–∞–ª–æ–π –ø–æ—Ä—á–µ–π'),
    ('ru', 3, 4, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π –∏–∑–º–µ–Ω—è–ª –∏ –Ω–µ –ø—Ä–µ–∫—Ä–∞—Ç–∏–ª'),
    ('ru', 3, 5, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —É–∂–∞—Å–Ω–æ —Ä–µ–≤–Ω–∏–≤'),
    ('ru', 3, 6, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Å—Å–æ—Ä—ã –∏ –∫—Ä–∏–∫–∏'),
    ('ru', 3, 7, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–ø–µ—Ä–Ω–∏–∫–∏'),
    ('ru', 3, 8, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –†–∞–∑–Ω—ã–µ —Ä–∞—Å—ã –æ—Å–ª–æ–∂–Ω—è—é—Ç –∂–∏–∑–Ω—å'),
    ('ru', 3, 9, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –í–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π —É–∂–µ –≤ –±—Ä–∞–∫–µ'),
    ('ru', 3, 10, '–¢—Ä—É–¥–Ω–∞—è –ª—é–±–æ–≤—å: –î—Ä—É–∑—å—è –Ω–µ –æ–¥–æ–±—Ä—è—é—Ç —Å–≤—è–∑—å'),
    
    -- EN: Romantic Tragedy (group_id=2)
    ('en', 2, 1, 'Romantic Tragedy: Lover captured by bandits'),
    ('en', 2, 2, 'Romantic Tragedy: Lover mysteriously vanished'),
    ('en', 2, 3, 'Romantic Tragedy: Lover imprisoned or exiled'),
    ('en', 2, 4, 'Romantic Tragedy: Lover under powerful curse'),
    ('en', 2, 5, 'Romantic Tragedy: You killed your lover'),
    ('en', 2, 6, 'Romantic Tragedy: Lover committed suicide'),
    ('en', 2, 7, 'Romantic Tragedy: Lover kidnapped by noble'),
    ('en', 2, 8, 'Romantic Tragedy: Rival stole lover away'),
    ('en', 2, 9, 'Romantic Tragedy: Lover killed by monsters'),
    ('en', 2, 10, 'Romantic Tragedy: Lover is mage or witcher'),
    
    -- EN: Problematic Love (group_id=3)
    ('en', 3, 1, 'Problematic Love: Family disapproves romance'),
    ('en', 3, 2, 'Problematic Love: Lover works as whore'),
    ('en', 3, 3, 'Problematic Love: Lover under minor curse'),
    ('en', 3, 4, 'Problematic Love: Lover cheated and refused to stop'),
    ('en', 3, 5, 'Problematic Love: Lover insanely jealous'),
    ('en', 3, 6, 'Problematic Love: Constant fighting and screaming'),
    ('en', 3, 7, 'Problematic Love: Professional rivals'),
    ('en', 3, 8, 'Problematic Love: Different races complicate life'),
    ('en', 3, 9, 'Problematic Love: Lover already married'),
    ('en', 3, 10, 'Problematic Love: Friends disapprove romance')
  ) AS v(lang, group_id, num, text)
)
, ins_desc AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(desc_vals.group_id, 'FM00') || to_char(desc_vals.num, 'FM00') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', desc_vals.lang, desc_vals.text
      FROM desc_vals
      CROSS JOIN meta
)
-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ lifeEvents (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–æ–ø—Ä–æ—Å—É)
-- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–≤–µ—Ç –∏–∑ –Ω–æ–¥—ã 45 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_relationships' ||'.'|| 'event_type_relationships')::text),
        'description',
        jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array(
          'witcher_cc.',
          jsonb_build_object('reduce', jsonb_build_array(
            jsonb_build_object('var', 'answers.byQuestion.wcc_life_events_relationshipsstory_details'),
            jsonb_build_object('var', 'current'),
            NULL
          )),
          '.event_desc'
        ))))
      )
    )
  )
FROM meta;
-- <<< END sql/044_life_events_lovestory_details.sql

-- >>> BEGIN sql/045_witcher_graduation_age.sql

\echo '045_witcher_graduation_age.sql'
-- –£–∑–µ–ª: –ë—Ä–∞—Ç—å—è –∏ —Å—ë—Å—Ç—Ä—ã - –û—Å–Ω–æ–≤–Ω–∞—è —á–µ—Ä—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_graduation_age' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–í–æ —Å–∫–æ–ª—å–∫–æ –≤—ã –≤—ã—à–ª–∏ –Ω–∞ –ë–æ–ª—å—à–∞–∫? –í–∞–º –±—ã–ª–æ –æ—Ç 20 –¥–æ 29 –ª–µ—Ç.'),
        ('en', 'At what age did you take the path? You were between 20 and 29 years old.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'value_numeric'
     , jsonb_build_object(
        'type'        , 'int',
        'defaultValue', 29,
        'placeholder' , 'Years',
        'valueTarget' , 'counters.lifeEventsCounter',
        'path', jsonb_build_array(
          ck_id('witcher_cc.hierarchy.witcher')::text,
          ck_id('witcher_cc.hierarchy.witcher_graduation_age')::text
        ),
        'min', 20,
        -- max: 29
        'max', 29,
        -- min_rand: 20
        'min_rand', 20,
        -- max_rand: 29
        'max_rand', 29
      ) AS metadata
  FROM meta;
  
-- –°–≤—è–∑–∏


WITH
  is_witcher_rule AS (SELECT ru_id, body FROM rules WHERE name = 'is_witcher'),
  combined_rule AS (
    INSERT INTO rules(ru_id, body)
      SELECT gen_random_uuid()
          , jsonb_build_object(
              'and', jsonb_build_array(
                is_witcher_rule.body,
                jsonb_build_object(
                  'in', jsonb_build_array(
                    'wcc_past_witcher_q1_o01',
                    jsonb_build_object(
                      'reduce', jsonb_build_array(
                        jsonb_build_object('var', jsonb_build_array('answers.byQuestion.wcc_past_witcher_q1', jsonb_build_array())),
                        jsonb_build_object('var', 'current'),
                        jsonb_build_array()
                      )
                    )
                  )
                )
              )
            )
        FROM is_witcher_rule
      RETURNING ru_id
  )
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_ch_age', 'wcc_witcher_graduation_age', cr.ru_id, 1 FROM combined_rule cr UNION ALL
  SELECT 'wcc_past_siblings_personality', 'wcc_witcher_graduation_age', r.ru_id, 2 FROM is_witcher_rule r UNION ALL
  SELECT 'wcc_past_siblings_amount', 'wcc_witcher_graduation_age', r.ru_id, 2 FROM is_witcher_rule r;
-- <<< END sql/045_witcher_graduation_age.sql

-- >>> BEGIN sql/046_witcher_when.sql

\echo '046_witcher_when.sql'
-- –£–∑–µ–ª: –ü–æ–≤–ª–∏—è–≤—à–∏–π –¥—Ä—É–≥

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_when' AS qu_id
                , 'questions' AS entity)
, ins_body AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
                       , meta.entity, 'body', v.lang, v.text
                    FROM (VALUES
                            ('ru', '–ö–æ–≥–¥–∞ –≤—ã —Å—Ç–∞–ª–∏ –≤–µ–¥—å–º–∞–∫–æ–º?'),
                            ('en', 'When did you become a witcher?')) AS v(lang, text)
                    CROSS JOIN meta)
, c_vals(lang, num, text) AS (VALUES ('ru', 1, '–®–∞–Ω—Å'),
                                     ('ru', 2, '–≠—Ñ—Ñ–µ–∫—Ç'),
                                     ('ru', 3, '–í–æ–∑—Ä–∞—Å—Ç'),
                                     ('en', 1, 'Chance'),
                                     ('en', 2, 'Effect'),
                                     ('en', 3, 'Age'))
, ins_c AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
                       , meta.entity, 'column_name', c_vals.lang, c_vals.text
				    FROM c_vals
					CROSS JOIN meta)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
       , 'single_table'
       , jsonb_build_object(
           'dice', 'd_weighed',
           'columns', (
             SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_when' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
             FROM (SELECT DISTINCT num FROM c_vals) AS cols
           ),
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.witcher')::text,
             ck_id('witcher_cc.hierarchy.witcher_when')::text
           )
         )
    FROM meta;


-- –û—Ç–≤–µ—Ç—ã
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 1, 0.2, '-2 –∫ –ò—Å–ø—ã—Ç–∞–Ω–∏—é —Ç—Ä–∞–≤–∞–º–∏', '<b>–ú–ª–∞–¥–µ–Ω—á–µ—Å—Ç–≤–æ</b><br>–í–∞—Å –∑–∞–±—Ä–∞–ª–∏ –≤ –≤–µ–¥—å–º–∞—á—å—é —à–∫–æ–ª—É –µ—â—ë –º–ª–∞–¥–µ–Ω—Ü–µ–º, –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ –æ—Ç 1 –¥–æ 2 –ª–µ—Ç. –í—ã –Ω–µ –ø–æ–º–Ω–∏—Ç–µ –æ –∂–∏–∑–Ω–∏ –¥–æ –≤–µ–¥—å–º–∞—á–µ—Å—Ç–≤–∞, –∏ –≤–∞–º –Ω–µ –æ —á–µ–º –≤—Å–ø–æ–º–∏–Ω–∞—Ç—å, –∫–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤—Ä–µ–º—è –ò—Å–ø—ã—Ç–∞–Ω–∏—è —Ç—Ä–∞–≤–∞–º–∏.'),
            ( 2, 0.6, '–ù–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∞', '<b>–†–∞–Ω–Ω–µ–µ –¥–µ—Ç—Å—Ç–≤–æ</b><br>–í–∞—Å –∑–∞–±—Ä–∞–ª–∏ –≤ –≤–µ–¥—å–º–∞—á—å—é —à–∫–æ–ª—É –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ –æ—Ç 4 –¥–æ 6 –ª–µ—Ç. –£ –≤–∞—Å –µ—Å—Ç—å –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏, —á—Ç–æ –ø–æ–º–æ–≥–ª–æ –ø—Ä–∏ –ò—Å–ø—ã—Ç–∞–Ω–∏–∏ —Ç—Ä–∞–≤–∞–º–∏.'),
            ( 3, 0.2, '+2 –∫ –ò—Å–ø—ã—Ç–∞–Ω–∏—é —Ç—Ä–∞–≤–∞–º–∏', '<b>–ü–æ–∑–¥–Ω–µ–µ –¥–µ—Ç—Å—Ç–≤–æ</b><br>–í–∞—Å –∑–∞–±—Ä–∞–ª–∏ –≤ –≤–µ–¥—å–º–∞—á—å—é —à–∫–æ–ª—É –¥–æ–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–∏–º, –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ –æ—Ç 8 –¥–æ 11 –ª–µ—Ç. –¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–∞–º –±—ã–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—Ä—É–¥–Ω–µ–µ, –∑–∞—Ç–æ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏ –ø–æ–º–æ–≥–ª–∏ –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –ò—Å–ø—ã—Ç–∞–Ω–∏—è —Ç—Ä–∞–≤–∞–º–∏.')
         ) AS raw_data_ru(num, probability, effect, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 1, 0.2, '-2 to the Trial of the Grasses', '<b>Infancy</b><br>You were taken to become a witcher when you were a toddler, between 1 and 2 years old. You have no memories of life before becoming a witcher and had nothing to cling to when taking the Trial of the Grasses.' ),
            ( 2, 0.6, 'No Modifiers', '<b>Early Childhood</b><br>You were taken to become a witcher when you were young, between 4 and 6 years old. You had some normal memories to aid you when taking the Trial of the Grasses.' ),
            ( 3, 0.2, '+2 to the Trial of the Grasses', '<b>Late Childhood</b><br>You were taken to become a witcher when you were relatively old, between 8 and 11 years old. While training was somewhat harder, your many memories bolstered you when you took the Trial of the Grasses.' )
         ) AS raw_data_en(num, probability, effect, txt)

),
vals AS (
         SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                 '<td>' || effect || '</td>' ||
                 '<td>' || txt || '</td>') AS text,
                num,
                probability,
                lang,
                -- –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ <br>
                CASE 
                  WHEN position('<br>' in txt) > 0 
                  THEN substring(txt from position('<br>' in txt) + 4)
                  ELSE ''
                END AS text_after_br
         FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_when' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
                     , meta.entity, meta.entity_field, vals.lang, vals.text
                  FROM vals
                  CROSS JOIN meta
)
, ins_text_after_br AS (INSERT INTO i18n_text (id, entity, entity_field, lang, text)
                SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'description') AS id
                     , meta.entity, 'description', vals.lang, vals.text_after_br
                  FROM vals
                  CROSS JOIN meta
                  WHERE vals.text_after_br != ''
                ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_witcher_when_o' || to_char(vals.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
       vals.num AS sort_order,
         jsonb_build_object(
           'probability', vals.probability
         ) AS metadata
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –¥–ª—è –ò—Å–ø—ã—Ç–∞–Ω–∏—è —Ç—Ä–∞–≤–∞–º–∏ –≤ values.byQuestion
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_when' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_when_o01',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'values.byQuestion.wcc_witcher_when'),
      -0.2
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_when_o02',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'values.byQuestion.wcc_witcher_when'),
      0.0
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_when_o03',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'values.byQuestion.wcc_witcher_when'),
      0.2
    )
  )
FROM meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å–ª–µ <br> –≤ characterRaw.lore.witcher_initiation_moment
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_when' AS qu_id
                , 'answer_options' AS entity)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_when_o01',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.witcher_initiation_moment'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o01.'|| meta.entity ||'.description')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_when_o02',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.witcher_initiation_moment'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o02.'|| meta.entity ||'.description')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_when_o03',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.witcher_initiation_moment'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o03.'|| meta.entity ||'.description')::text)
    )
  )
FROM meta;


-- –°–≤—è–∑–∏
-- INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
--   SELECT 'wcc_witcher_age', 'wcc_witcher_when';

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_graduation_age', 'wcc_witcher_when';
-- <<< END sql/046_witcher_when.sql

-- >>> BEGIN sql/047_witcher_school.sql

\echo '047_witcher_school.sql'
-- –£–∑–µ–ª: –í –∫–∞–∫–æ–π —à–∫–æ–ª–µ –≤—ã –æ–±—É—á–∞–ª–∏—Å—å?

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_school' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
              ('ru', '–ì–¥–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –æ–±—É—á–µ–Ω–∏–µ –∏ –∫–∞–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —à–∫–æ–ª—ã –≤—ã —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–ª–∏?'),
              ('en', 'Where did you train and what traits of the school did you inherit?')
           ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–≠—Ñ—Ñ–µ–∫—Ç'),
      ('ru', 3, '–®–∫–æ–ª–∞'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Effect'),
      ('en', 3, 'School')
)
, ins_c   AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_school' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.witcher')::text,
           ck_id('witcher_cc.hierarchy.witcher_school')::text
         )
       )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
      (1, 0.2, '–ù–µ—Ç —à—Ç—Ä–∞—Ñ–æ–≤ –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–π –∞—Ç–∞–∫–µ', '<b>–®–∫–æ–ª–∞ –í–æ–ª–∫–∞</b><br>–í—ã —É—á–∏–ª–∏—Å—å –≤ –ö–∞—ç—Ä –ú–æ—Ä—Ö–µ–Ω–µ –≤ –≤—ã—Å–æ–∫–∏—Ö –°–∏–Ω–∏—Ö –≥–æ—Ä–∞—Ö. –û–±—É—á–µ–Ω–∏–µ –±—ã–ª–æ —Ç—Ä—É–¥–Ω—ã–º –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ–¥—Ö–æ–¥–µ –∫ –≤–µ–¥—å–º–∞—á—å–µ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏. –í–∞—Å —É—á–∏–ª–∏ –±–∏—Ç—å —Å–∏–ª—å–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ, —á—Ç–æ–±—ã –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ –∑–∞–∫–æ–Ω—á–∏—Ç—å –æ—Ö–æ—Ç—É.'),
      (2, 0.2, '+2 –∫ –≠–Ω–µ—Ä–≥–∏–∏', '<b>–®–∫–æ–ª–∞ –ì—Ä–∏—Ñ–æ–Ω–∞</b><br>–í–∞—Å –æ–±—É—á–∞–ª–∏ –≤ –ö–∞—ç—Ä –ò –°–µ—Ä–µ–Ω –Ω–∞ –ø–æ–±–µ—Ä–µ–∂—å–µ —É –î—Ä–∞–∫–æ–Ω—å–∏—Ö –≥–æ—Ä. –û–±—É—á–µ–Ω–∏–µ –±—ã–ª–æ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–æ –Ω–∞ —Å—Ä–∞–∂–µ–Ω–∏–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤–∞—à–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π.'),
      (3, 0.2, '–ù–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤–æ—Å—Ç—å –∫–æ –≤—Å–µ–º –Ω–µ–º–∞–≥–∏—á–µ—Å–∫–∏–º –ø–æ–ø—ã—Ç–∫–∞–º –æ–±–æ–ª—å—â–µ–Ω–∏—è', '<b>–®–∫–æ–ª–∞ –ö–æ—Ç–∞</b><br>–í—ã –æ–±—É—á–∞–ª–∏—Å—å –≤ –∫–∞—Ä–∞–≤–∞–Ω–µ –î–∏–Ω –ú–∞—Ä–≤ ‚Äî —Å—Ç—Ä–∞–Ω—Å—Ç–≤—É—é—â–µ–º –æ—Ç—Ä—è–¥–µ –≤–µ–¥—å–º–∞–∫–æ–≤, –≥–æ—Ç–æ–≤—ã—Ö —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ª—é–±–æ–≥–æ, –∫—Ç–æ –∑–∞–ø–ª–∞—Ç–∏—Ç. –ú—É—Ç–∞—Ü–∏–∏ –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏—Å–∫–∞–ª–µ—á–∏–ª–∏ –≤–∞—à—É –ø—Å–∏—Ö–∏–∫—É, –∏ –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å –∏ —Ç—è–≥—É –∫ –Ω–∞—Å–∏–ª–∏—é.'),
      (4, 0.2, '–ù–µ—Ç —à—Ç—Ä–∞—Ñ–æ–≤ –∑–∞ –ø–∞—Ä–Ω–æ–µ –æ—Ä—É–∂–∏–µ', '<b>–®–∫–æ–ª–∞ –ó–º–µ–∏</b><br>–í—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ –ì–æ—Ä—Ç–≥—É—Ä –ì–≤–µ–¥ –≤ –≥–ª—É–±–∏–Ω–Ω—ã—Ö –ø–µ—â–µ—Ä–∞—Ö —Ö—Ä–µ–±—Ç–∞ –¢–∏—Ä –¢–æ—Ö–∞–∏—Ä. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ—á–∏—Ö –≤–µ–¥—å–º–∞–∫–æ–≤, –≤—ã –æ–±—É—á–µ–Ω—ã –≤–ª–∞–¥–µ–Ω–∏—é –¥–≤—É–º—è –∫–ª–∏–Ω–∫–∞–º–∏ –∏ —É–±–∏–π—Å—Ç–≤—É —á—É–¥–æ–≤–∏—â –º–µ—Ç–æ–¥–∞–º–∏ –Ω–∞—ë–º–Ω—ã—Ö —É–±–∏–π—Ü.'),
      (5, 0.2, '-2 –∫ –°–∫–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –î–≤–∏–∂–µ–Ω–∏–π', '<b>–®–∫–æ–ª–∞ –ú–µ–¥–≤–µ–¥—è</b><br>–í—ã –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –∑–∞—Å–Ω–µ–∂–µ–Ω–Ω—ã—Ö –≤–µ—Ä—à–∏–Ω–∞—Ö –≥–æ—Ä –ê–º–µ–ª–ª, –≤ –•—ç—Ä–Ω –ö–∞–¥—É—Ö. –í—ã –∑–∞–∫–∞–ª–∏–ª–∏ —Ç–µ–ª–æ, —á—Ç–æ–±—ã –≤—ã–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ª—é–±—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è, –∏ –Ω–∞—É—á–∏–ª–∏—Å—å –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –≤ —Ç—è–∂—ë–ª–æ–π —Å—Ç–∞–ª—å–Ω–æ–π –±—Ä–æ–Ω–µ.')
    ) AS raw_data_ru(num, probability, effect, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
      (1, 0.2, 'No Penalty For Strong Strikes', '<b>The Wolf School</b><br>You trained at Kaer Morhen in the heights of the Blue Mountains. Your training was tough and structured, focusing on a very rounded approach to the Witcher profession. You were taught to strike hard and fast to end hunts quickly.'),
      (2, 0.2, '+2 Vigor Threshold', '<b>The Gryphon School</b><br>You were trained at Kaer Y Seren along the coastal side of the Dragon Mountains. Your training was heavily focused on fighting any number of opponents and using your limited magical power to its greatest potential.'),
      (3, 0.2, 'Immune to Non-Magical Charm Attempts', '<b>The Cat School</b><br>You trained in the Dyn Marv Caravan, a traveling troop of witchers who sold their skills to anyone who could pay, for any job. Their mutations and training flayed your emotions, and you struggle against violent, cruel impulses.'),
      (4, 0.2, 'No Penalties for Dual Wielding', '<b>The Viper School</b><br>You trained at Gorthwr Gvaed in the deep chasms of the Tir Tochair Mountains. Unlike other witchers, you were trained on twin blades and an assassination-based approach to killing monsters.'),
      (5, 0.2, '-2 to Overall Armor Penalty', '<b>The Bear School</b><br>You trained in the snowy heights of the Amell Mountains at Haern Cadvch. You conditioned your body to endure all manner of punishment and move quickly and efficiently in heavy steel armor.')
    ) AS raw_data_en(num, probability, effect, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || effect || '</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang
  FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_school' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
  FROM vals
  CROSS JOIN meta
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è –ø–µ—Ä–∫–æ–≤ (–Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)
, ins_perks AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    -- –®–∫–æ–ª–∞ –í–æ–ª–∫–∞ (o01)
    (ck_id('witcher_cc.wcc_witcher_school_o01.perks.description'), 'perks', 'description', 'ru', '<b>–®–∫–æ–ª–∞ –í–æ–ª–∫–∞</b>: –ù–µ—Ç —à—Ç—Ä–∞—Ñ–æ–≤ –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–π –∞—Ç–∞–∫–µ.'),
    (ck_id('witcher_cc.wcc_witcher_school_o01.perks.description'), 'perks', 'description', 'en', '<b>The Wolf School</b>: No Penalty For Strong Strikes.'),
    -- –®–∫–æ–ª–∞ –ì—Ä–∏—Ñ–æ–Ω–∞ (o02)
    (ck_id('witcher_cc.wcc_witcher_school_o02.perks.description'), 'perks', 'description', 'ru', '<b>–®–∫–æ–ª–∞ –ì—Ä–∏—Ñ–æ–Ω–∞</b>: [+2 –∫ –≠–Ω–µ—Ä–≥–∏–∏].'),
    (ck_id('witcher_cc.wcc_witcher_school_o02.perks.description'), 'perks', 'description', 'en', '<b>The Gryphon School</b>: [+2 to Vigor Threshold].'),
    -- –®–∫–æ–ª–∞ –ö–æ—Ç–∞ (o03)
    (ck_id('witcher_cc.wcc_witcher_school_o03.perks.description'), 'perks', 'description', 'ru', '<b>–®–∫–æ–ª–∞ –ö–æ—Ç–∞</b>: –ù–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤–æ—Å—Ç—å –∫–æ –≤—Å–µ–º –Ω–µ–º–∞–≥–∏—á–µ—Å–∫–∏–º –ø–æ–ø—ã—Ç–∫–∞–º –æ–±–æ–ª—å—â–µ–Ω–∏—è.'),
    (ck_id('witcher_cc.wcc_witcher_school_o03.perks.description'), 'perks', 'description', 'en', '<b>The Cat School</b>: Immune to Non-Magical Charm Attempts.'),
    -- –®–∫–æ–ª–∞ –ó–º–µ–∏ (o04)
    (ck_id('witcher_cc.wcc_witcher_school_o04.perks.description'), 'perks', 'description', 'ru', '<b>–®–∫–æ–ª–∞ –ó–º–µ–∏</b>: –ù–µ—Ç —à—Ç—Ä–∞—Ñ–æ–≤ –∑–∞ –ø–∞—Ä–Ω–æ–µ –æ—Ä—É–∂–∏–µ.'),
    (ck_id('witcher_cc.wcc_witcher_school_o04.perks.description'), 'perks', 'description', 'en', '<b>The Viper School</b>: No Penalties for Dual Wielding.'),
    -- –®–∫–æ–ª–∞ –ú–µ–¥–≤–µ–¥—è (o05)
    (ck_id('witcher_cc.wcc_witcher_school_o05.perks.description'), 'perks', 'description', 'ru', '<b>–®–∫–æ–ª–∞ –ú–µ–¥–≤–µ–¥—è</b>: -2 –∫ –°–∫–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –î–≤–∏–∂–µ–Ω–∏–π.'),
    (ck_id('witcher_cc.wcc_witcher_school_o05.perks.description'), 'perks', 'description', 'en', '<b>The Bear School</b>: -2 to Overall Armor Penalty.')
  ON CONFLICT (id, lang) DO NOTHING
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è characterRaw.lore.school (–ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)
, ins_school_lore AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    -- –®–∫–æ–ª–∞ –í–æ–ª–∫–∞ (o01)
    (ck_id('witcher_cc.wcc_witcher_school_o01.lore.school'), 'lore', 'school', 'ru', '–í—ã —É—á–∏–ª–∏—Å—å –≤ –®–∫–æ–ª–µ –í–æ–ª–∫–∞, —á—Ç–æ –≤ –ö–∞—ç—Ä –ú–æ—Ä—Ö–µ–Ω–µ, –≤ –≤—ã—Å–æ–∫–∏—Ö –°–∏–Ω–∏—Ö –≥–æ—Ä–∞—Ö. –í–∞—Å —É—á–∏–ª–∏ –±–∏—Ç—å —Å–∏–ª—å–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ, —á—Ç–æ–±—ã –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ –∑–∞–∫–æ–Ω—á–∏—Ç—å –æ—Ö–æ—Ç—É.'),
    (ck_id('witcher_cc.wcc_witcher_school_o01.lore.school'), 'lore', 'school', 'en', 'You trained at the Wolf School, located at Kaer Morhen in the heights of the Blue Mountains. You were taught to strike hard and fast to end hunts quickly.'),
    -- –®–∫–æ–ª–∞ –ì—Ä–∏—Ñ–æ–Ω–∞ (o02)
    (ck_id('witcher_cc.wcc_witcher_school_o02.lore.school'), 'lore', 'school', 'ru', '–í—ã —É—á–∏–ª–∏—Å—å –≤ –®–∫–æ–ª–µ –ì—Ä–∏—Ñ–æ–Ω–∞, —á—Ç–æ –≤ –ö–∞—ç—Ä –ò –°–µ—Ä–µ–Ω, –Ω–∞ –ø–æ–±–µ—Ä–µ–∂—å–µ —É –î—Ä–∞–∫–æ–Ω—å–∏—Ö –≥–æ—Ä. –í–∞—Å —É—á–∏–ª–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–∞—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è—Ö –≤ —Å—Ä–∞–∂–µ–Ω–∏—è—Ö —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞–º–∏.'),
    (ck_id('witcher_cc.wcc_witcher_school_o02.lore.school'), 'lore', 'school', 'en', 'You trained at the Gryphon School, located at Kaer Y Seren along the coastal side of the Dragon Mountains. You were taught to focus on magical abilities in battles against multiple opponents.'),
    -- –®–∫–æ–ª–∞ –ö–æ—Ç–∞ (o03)
    (ck_id('witcher_cc.wcc_witcher_school_o03.lore.school'), 'lore', 'school', 'ru', '–í—ã —É—á–∏–ª–∏—Å—å –≤ –®–∫–æ–ª–µ –ö–æ—Ç–∞, –≤ –∫–∞—Ä–∞–≤–∞–Ω–µ –î–∏–Ω –ú–∞—Ä–≤ ‚Äî —Å—Ç—Ä–∞–Ω—Å—Ç–≤—É—é—â–µ–º –æ—Ç—Ä—è–¥–µ –≤–µ–¥—å–º–∞–∫–æ–≤. –û–±—É—á–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–¥–∏–ª–æ –ø—Å–∏—Ö–∏–∫—É, –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å –∏ —Ç—è–≥—É –∫ –Ω–∞—Å–∏–ª–∏—é.'),
    (ck_id('witcher_cc.wcc_witcher_school_o03.lore.school'), 'lore', 'school', 'en', 'You trained at the Cat School, in the Dyn Marv Caravan, a traveling troop of witchers. The training damaged your psyche, and you must restrain cruelty and the urge for violence.'),
    -- –®–∫–æ–ª–∞ –ó–º–µ–∏ (o04)
    (ck_id('witcher_cc.wcc_witcher_school_o04.lore.school'), 'lore', 'school', 'ru', '–í—ã —É—á–∏–ª–∏—Å—å –≤ –®–∫–æ–ª–µ –ó–º–µ–∏, —á—Ç–æ –≤ –ì–æ—Ä—Ç–≥—É—Ä –ì–≤–µ–¥, –≤ –ø–µ—â–µ—Ä–∞—Ö —Ö—Ä–µ–±—Ç–∞ –¢–∏—Ä –¢–æ—Ö–∞–∏—Ä. –í—ã –æ–±—É—á–µ–Ω—ã –≤–ª–∞–¥–µ–Ω–∏—é –¥–≤—É–º—è –∫–ª–∏–Ω–∫–∞–º–∏ –∏ —É–±–∏–π—Å—Ç–≤—É —á—É–¥–æ–≤–∏—â –º–µ—Ç–æ–¥–∞–º–∏ –Ω–∞—ë–º–Ω—ã—Ö —É–±–∏–π—Ü.'),
    (ck_id('witcher_cc.wcc_witcher_school_o04.lore.school'), 'lore', 'school', 'en', 'You trained at the Viper School, located at Gorthwr Gvaed in the caves of the Tir Tochair Mountains. You were trained in dual blades and killing monsters using assassin methods.'),
    -- –®–∫–æ–ª–∞ –ú–µ–¥–≤–µ–¥—è (o05)
    (ck_id('witcher_cc.wcc_witcher_school_o05.lore.school'), 'lore', 'school', 'ru', '–í—ã —É—á–∏–ª–∏—Å—å –≤ –®–∫–æ–ª–µ –ú–µ–¥–≤–µ–¥—è, —á—Ç–æ –≤ –•—ç—Ä–Ω –ö–∞–¥—É—Ö, –≤ –≥–æ—Ä–∞—Ö –ê–º–µ–ª–ª. –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∑–∞–∫–∞–ª–∏–ª–∏ —Ç–µ–ª–æ –∏ –Ω–∞—É—á–∏–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –≤ —Ç—è–∂—ë–ª–æ–π —Å—Ç–∞–ª—å–Ω–æ–π –±—Ä–æ–Ω–µ.'),
    (ck_id('witcher_cc.wcc_witcher_school_o05.lore.school'), 'lore', 'school', 'en', 'You trained at the Bear School, located at Haern Cadvch in the Amell Mountains. The training hardened your body and taught you to move efficiently in heavy steel armor.')
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_school_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–∫–æ–≤ –≤ characterRaw.perks –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è —à–∫–æ–ª—ã –≤ characterRaw.lore.school
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_school' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_school_o01',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o01.perks.description')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_school_o01',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.school'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o01.lore.school')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_school_o02',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o02.perks.description')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_school_o02',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.school'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o02.lore.school')::text)
    )
  )
FROM meta
UNION ALL
-- –≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è –®–∫–æ–ª—ã –ì—Ä–∏—Ñ–æ–Ω–∞: +2 –∫ vigor.bonus
SELECT 'character', 'wcc_witcher_school_o02',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.statistics.vigor.bonus'),
      2
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_school_o03',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o03.perks.description')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_school_o03',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.school'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o03.lore.school')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_school_o04',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o04.perks.description')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_school_o04',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.school'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o04.lore.school')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_school_o05',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.perks'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o05.perks.description')::text)
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_school_o05',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.school'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o05.lore.school')::text)
    )
  )
FROM meta;

-- –ü—Ä—è–º–∞—è —Å–≤—è–∑—å —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_when', 'wcc_witcher_school';























-- <<< END sql/047_witcher_school.sql

-- >>> BEGIN sql/048_witcher_first_trainings.sql

\echo '048_witcher_first_trainings.sql'
-- –£–∑–µ–ª: –ö–∞–∫ –ø—Ä–æ—à–ª–∏ –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏?

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_first_trainings' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
              ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ –≤—Ä–µ–º—ë–Ω —Ä–∞–Ω–Ω–µ–≥–æ –æ–±—É—á–µ–Ω–∏—è.'),
              ('en', 'Determine an event from your earliest witcher training.')
           ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–≠—Ñ—Ñ–µ–∫—Ç'),
      ('ru', 3, '–°–æ–±—ã—Ç–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Effect'),
      ('en', 3, 'Early Training Event')
)
, ins_c   AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_first_trainings' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.witcher')::text,
           ck_id('witcher_cc.hierarchy.witcher_first_trainings')::text
         )
       )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
      (1, 0.1, '-1 –∫ –°–∫–æ—Ä', '<b>–¢—Ä–∞–≤–º–∞ –Ω–∞ –ú—É—á–∏–ª—å–Ω–µ</b><br>–í—ã –ø–æ–ª—É—á–∏–ª–∏ —Ç—Ä–∞–≤–º—É, –ø—Ä–æ–±–µ–≥–∞—è –ø–æ–ª–æ—Å—É –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –≤–æ–∫—Ä—É–≥ —à–∫–æ–ª—ã. –£ –≤–∞—Å —Å–∏–ª—å–Ω–æ —Å–ª–æ–º–∞–Ω–∞ –Ω–æ–≥–∞, –∏ –¥–∞–∂–µ –ø–æ—Å–ª–µ –∏—Å—Ü–µ–ª–µ–Ω–∏—è –æ–Ω–∞ –≥–Ω—ë—Ç—Å—è —á—É—Ç—å —Ö—É–∂–µ.'),
      (2, 0.1, '+1 –≤–µ–¥—å–º–∞—á–∏–π —á–µ—Ä—Ç—ë–∂', '<b>–£–∫—Ä–∞–¥–µ–Ω–Ω–æ–µ –∑–Ω–∞–Ω–∏–µ</b><br>–û–±—É—á–∞—è—Å—å –≤ —à–∫–æ–ª–µ, –≤—ã –ø—Ä–æ–∫—Ä–∞–ª–∏—Å—å –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∫—Ä–µ–ø–æ—Å—Ç–∏ –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –æ–¥–∏–Ω –∏–∑ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –≤–µ–¥—å–º–∞—á—å–∏—Ö —á–µ—Ä—Ç–µ–∂–µ–π, –∞ –∫–æ–ø–∏—é –≤–∑—è–ª–∏ —Å —Å–æ–±–æ–π.'),
      (3, 0.1, '1 –≤—Ä–∞–≥-–≤–µ–¥—å–º–∞–∫', '<b>–ó–∞–≤—ë–ª —Å–æ–ø–µ—Ä–Ω–∏–∫–∞</b><br>–í —Ö–æ–¥–µ –æ–±—É—á–µ–Ω–∏—è —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–æ —Å–æ–ø–µ—Ä–Ω–∏—á–µ—Å—Ç–≤–æ —Å –¥—Ä—É–≥–∏–º –±—É–¥—É—â–∏–º –≤–µ–¥—å–º–∞–∫–æ–º. –î–∞–∂–µ –ø–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–π –æ–Ω –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤–∞—Å –Ω–µ–Ω–∞–≤–∏–¥–µ—Ç—å.'),
      (4, 0.1, '+2 –∫ –ò—Å–ø—ã—Ç–∞–Ω–∏—é —Ç—Ä–∞–≤–∞–º–∏', '<b>–õ—ë–≥–∫–∏–µ –º—É—Ç–∞—Ü–∏–∏</b><br>–í—ã —Ö–æ—Ä–æ—à–æ –ø—Ä–∏—Å–ø–æ—Å–æ–±–∏–ª–∏—Å—å –∫ –º–∞–ª—ã–º –º—É—Ç–∞—Ü–∏—è–º –∏ –¥–µ–π—Å—Ç–≤–∏—é –º—É—Ç–∞–≥–µ–Ω–Ω—ã—Ö –≥—Ä–∏–±–æ–≤, –∫–æ—Ç–æ—Ä—ã–º–∏ –≤–∞—Å –∫–æ—Ä–º–∏–ª–∏ –≤ –Ω–∞—á–∞–ª–µ –æ–±—É—á–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –ò—Å–ø—ã—Ç–∞–Ω–∏—è —Ç—Ä–∞–≤–∞–º–∏, –≤—ã –±—ã–ª–∏ –≥–æ—Ç–æ–≤—ã.'),
      (5, 0.1, '-1 –∫ –≠–Ω–µ—Ä–≥–∏–∏', '<b>–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –º–∞–≥–∏–∏</b><br>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Ç–≤–æ—Ä—ë–Ω–Ω—ã–π –∑–Ω–∞–∫ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–≤—Ä–µ–¥–∏–ª –≤–∞—à–µ —Ç–µ–ª–æ. –ë—ã–ª–æ —É–∂–∞—Å–Ω–æ –±–æ–ª—å–Ω–æ, –∏ –¥–∞–∂–µ –ø–æ—Å–ª–µ –∏—Å—Ü–µ–ª–µ–Ω–∏—è –≤–∞—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ —Å–Ω–∏–∂–µ–Ω–æ.'),
      (6, 0.1, '+1 –∫ –í–ª–∞–¥–µ–Ω–∏—é –º–µ—á–æ–º', '<b>–õ—É—á—à–∏–π –≤ –∫–ª–∞—Å—Å–µ</b><br>–í—ã –±—ã–ª–∏ –æ–¥–Ω–∏–º –∏–∑ –ª—É—á—à–∏—Ö –º–µ—á–Ω–∏–∫–æ–≤ —Å—Ä–µ–¥–∏ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤, –∏ —Å –≥–æ–¥–∞–º–∏ –≤–∞—à–∏ –Ω–∞–≤—ã–∫–∏ –Ω–µ –ø—Ä–∏—Ç—É–ø–∏–ª–∏—Å—å. –í—ã —Å –ª—ë–≥–∫–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è, –ø–∏—Ä—É—ç—Ç—ã –∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç—ã.'),
      (7, 0.1, '-2 –∫ –ò—Å–ø—ã—Ç–∞–Ω–∏—é —Ç—Ä–∞–≤–∞–º–∏', '<b>–ü–ª–æ—Ö–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –º—É—Ç–∞–≥–µ–Ω—ã</b><br>–£ –≤–∞—Å –±—ã–ª–∞ –∞–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –º—É—Ç–∞–≥–µ–Ω–Ω—ã–µ –≥—Ä–∏–±—ã –∏ —Ö–∏–º–∏—á–µ—Å–∫–∏–µ —Å–æ—Å—Ç–∞–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –¥–∞–≤–∞–ª–∏ –≤ –Ω–∞—á–∞–ª–µ –æ–±—É—á–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –ò—Å–ø—ã—Ç–∞–Ω–∏—è —Ç—Ä–∞–≤–∞–º–∏, –≤–∞–º –ø—Ä–∏—à–ª–æ—Å—å –∫—É–¥–∞ —Ç—Ä—É–¥–Ω–µ–µ.'),
      (8, 0.1, '1 –¥—Ä—É–≥-–≤–µ–¥—å–º–∞–∫', '<b>–ó–∞–≤—ë–ª –¥—Ä—É–≥–∞</b><br>–í–æ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è –≤—ã —Å–¥—Ä—É–∂–∏–ª–∏—Å—å —Å –¥—Ä—É–≥–∏–º –±—É–¥—É—â–∏–º –≤–µ–¥—å–º–∞–∫–æ–º. –°—É—Ä–æ–≤—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ª–∏—à—å –∑–∞–∫–∞–ª–∏–ª–∏ –≤–∞—à—É –¥—Ä—É–∂–±—É.'),
      (9, 0.1, '-1 –∫ –†–µ–∞', '<b>–¢—Ä–∞–≤–º–∞ –Ω–∞ –º–∞—è—Ç–Ω–∏–∫–µ</b><br>–í—ã –ø–æ–ª—É—á–∏–ª–∏ —Ç—Ä–∞–≤–º—É –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –Ω–∞ –º–∞—è—Ç–Ω–∏–∫–µ. –í—ã —É–ø–∞–ª–∏ —Å–æ —Å—Ç–æ–ª–±–æ–≤ –∏ —Å–ª–æ–º–∞–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ—Å—Ç–µ–π, —É–¥–∞—Ä–∏–≤—à–∏—Å—å –æ –∫–∞–º–Ω–∏ –≤–Ω–∏–∑—É. –î–∞–∂–µ –ø–æ—Å–ª–µ –∏—Å—Ü–µ–ª–µ–Ω–∏—è –≤—ã –Ω–µ —Å—Ç–æ–ª—å –≥–∏–±–∫–∏, –∫–∞–∫ —Ä–∞–Ω—å—à–µ.'),
      (10, 0.1, '+1 –∫ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–µ –≤–µ–¥—å–º–∞–∫–∞', '<b>–ì–ª—É–±–æ–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ</b><br>–û–±—É—á–µ–Ω–∏–µ –≤–ª–∞–¥–µ–Ω–∏—é –º–µ—á–æ–º –≤–∞–∂–Ω–æ, –Ω–æ –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã –ø—Ä–æ–≤–æ–¥–∏–ª–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö –∫—Ä–µ–ø–æ—Å—Ç–∏: –∏–∑—É—á–∞–ª–∏ –º–æ–Ω—Å—Ç—Ä–æ–≤ –∏ —á—É–¥–æ–≤–∏—â –∏ –¥–µ–ª–∞–ª–∏ –∑–∞–ø–∏—Å–∏.')
    ) AS raw_data_ru(num, probability, effect, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
      (1, 0.1, '-1 SPD', '<b>Wounded on the Gauntlet</b><br>You were wounded while running the gauntlet around your School. Your leg was broken badly, and even after healing it is still slightly stiff.'),
      (2, 0.1, '+1 Witcher Diagram', '<b>Stolen Knowledge</b><br>While training at your School you snuck into the libraries of the keep and copied one of the secret witcher diagrams, smuggling the information out with you.'),
      (3, 0.1, 'Make 1 Witcher Enemy', '<b>Made a Rival</b><br>While training at the keep you formed a rivalry with another witcher in training. Even after mutations, their hatred of you continues to boil.'),
      (4, 0.1, '+2 to the Trial of the Grasses', '<b>Easy Mutations</b><br>You adapted well to the lesser mutations and mutagenic mushrooms you were fed early in training. When the time came for the Trial of the Grasses, you were well prepared.'),
      (5, 0.1, '-1 Vigor Threshold', '<b>Magical Backfire</b><br>A failure casting a sign caused minor damage to your body. It was horrifically painful, and even after your body healed your Vigor Threshold was lowered.'),
      (6, 0.1, '+1 Swordsmanship', '<b>Top of Your Class</b><br>You were one of the best swordsmen in your class and your skills haven‚Äôt dulled. You perform the complex movements, pirouettes, and spins of the witcher with ease.'),
      (7, 0.1, '-2 to the Trial of the Grasses', '<b>Bad Reaction to Mutagens</b><br>You had allergic reactions to the mutagenic mushrooms and chemical compounds given to you in early training. When the Trial of the Grasses came, it was more difficult.'),
      (8, 0.1, 'Make a Witcher Friend', '<b>Made a Friend</b><br>You made a fast friend in your early years of witcher training. The rough training and dangerous situations sealed your bond.'),
      (9, 0.1, '-1 REF', '<b>Wounded by the Pendulum</b><br>You were wounded while training on the pendulum. You fell from the posts and broke several bones on the rocks below. While healed, you are a little stiffer than before.'),
      (10, 0.1, '+1 Witcher Training', '<b>Extensive Research</b><br>While sword training was important, you spent most of your free time in the libraries of the keep studying the monsters of the world and taking notes.')
    ) AS raw_data_en(num, probability, effect, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || effect || '</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_first_trainings' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_label AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
  FROM vals
  CROSS JOIN meta
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è characterRaw.lore.trainings (–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫)
, ins_trainings_lore AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    -- –í–∞—Ä–∏–∞–Ω—Ç 1: –¢—Ä–∞–≤–º–∞ –Ω–∞ –ú—É—á–∏–ª—å–Ω–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o01.lore.trainings'), 'lore', 'trainings', 'ru', '–¢—Ä–∞–≤–º–∞ –Ω–∞ –ú—É—á–∏–ª—å–Ω–µ. –°–ª–æ–º–∞–Ω–∞ –Ω–æ–≥–∞, –¥–∞–∂–µ –ø–æ—Å–ª–µ –∏—Å—Ü–µ–ª–µ–Ω–∏—è –≥–Ω—ë—Ç—Å—è —Ö—É–∂–µ.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o01.lore.trainings'), 'lore', 'trainings', 'en', 'Wounded on the Gauntlet. Leg broken badly, still slightly stiff after healing.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 2: –£–∫—Ä–∞–¥–µ–Ω–Ω–æ–µ –∑–Ω–∞–Ω–∏–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o02.lore.trainings'), 'lore', 'trainings', 'ru', '–£–∫—Ä–∞–¥–µ–Ω–Ω–æ–µ –∑–Ω–∞–Ω–∏–µ. –°–∫–æ–ø–∏—Ä–æ–≤–∞–ª —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –≤–µ–¥—å–º–∞—á–∏–π —á–µ—Ä—Ç—ë–∂ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫—Ä–µ–ø–æ—Å—Ç–∏.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o02.lore.trainings'), 'lore', 'trainings', 'en', 'Stolen Knowledge. Copied a secret witcher diagram from the keep library.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 3: –ó–∞–≤—ë–ª —Å–æ–ø–µ—Ä–Ω–∏–∫–∞
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.lore.trainings'), 'lore', 'trainings', 'ru', '–ó–∞–≤—ë–ª —Å–æ–ø–µ—Ä–Ω–∏–∫–∞. –°–æ–ø–µ—Ä–Ω–∏—á–µ—Å—Ç–≤–æ —Å –¥—Ä—É–≥–∏–º –±—É–¥—É—â–∏–º –≤–µ–¥—å–º–∞–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –Ω–µ–Ω–∞–≤–∏–¥–µ—Ç—å.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.lore.trainings'), 'lore', 'trainings', 'en', 'Made a Rival. Formed a rivalry with another witcher in training who continues to hate.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 4: –õ—ë–≥–∫–∏–µ –º—É—Ç–∞—Ü–∏–∏
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o04.lore.trainings'), 'lore', 'trainings', 'ru', '–õ—ë–≥–∫–∏–µ –º—É—Ç–∞—Ü–∏–∏. –•–æ—Ä–æ—à–æ –ø—Ä–∏—Å–ø–æ—Å–æ–±–∏–ª—Å—è –∫ –º–∞–ª—ã–º –º—É—Ç–∞—Ü–∏—è–º –∏ –º—É—Ç–∞–≥–µ–Ω–Ω—ã–º –≥—Ä–∏–±–∞–º, –±—ã–ª –≥–æ—Ç–æ–≤ –∫ –ò—Å–ø—ã—Ç–∞–Ω–∏—é —Ç—Ä–∞–≤–∞–º–∏.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o04.lore.trainings'), 'lore', 'trainings', 'en', 'Easy Mutations. Adapted well to lesser mutations and mutagenic mushrooms, was well prepared for the Trial of the Grasses.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 5: –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –º–∞–≥–∏–∏
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o05.lore.trainings'), 'lore', 'trainings', 'ru', '–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –º–∞–≥–∏–∏. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Ç–≤–æ—Ä—ë–Ω–Ω—ã–π –∑–Ω–∞–∫ –ø–æ–≤—Ä–µ–¥–∏–ª —Ç–µ–ª–æ, –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ —Å–Ω–∏–∂–µ–Ω–æ.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o05.lore.trainings'), 'lore', 'trainings', 'en', 'Magical Backfire. A failure casting a sign caused minor damage, Vigor Threshold was lowered.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 6: –õ—É—á—à–∏–π –≤ –∫–ª–∞—Å—Å–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o06.lore.trainings'), 'lore', 'trainings', 'ru', '–õ—É—á—à–∏–π –≤ –∫–ª–∞—Å—Å–µ. –û–¥–∏–Ω –∏–∑ –ª—É—á—à–∏—Ö –º–µ—á–Ω–∏–∫–æ–≤ —Å—Ä–µ–¥–∏ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤, –Ω–∞–≤—ã–∫–∏ –Ω–µ –ø—Ä–∏—Ç—É–ø–∏–ª–∏—Å—å.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o06.lore.trainings'), 'lore', 'trainings', 'en', 'Top of Your Class. One of the best swordsmen in class, skills haven''t dulled.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 7: –ü–ª–æ—Ö–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –º—É—Ç–∞–≥–µ–Ω—ã
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o07.lore.trainings'), 'lore', 'trainings', 'ru', '–ü–ª–æ—Ö–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –º—É—Ç–∞–≥–µ–Ω—ã. –ê–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –º—É—Ç–∞–≥–µ–Ω–Ω—ã–µ –≥—Ä–∏–±—ã –∏ —Ö–∏–º–∏—á–µ—Å–∫–∏–µ —Å–æ—Å—Ç–∞–≤—ã, –ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ç—Ä–∞–≤–∞–º–∏ –±—ã–ª–æ —Ç—Ä—É–¥–Ω–µ–µ.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o07.lore.trainings'), 'lore', 'trainings', 'en', 'Bad Reaction to Mutagens. Allergic reactions to mutagenic mushrooms and compounds, Trial of the Grasses was more difficult.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 8: –ó–∞–≤—ë–ª –¥—Ä—É–≥–∞
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.lore.trainings'), 'lore', 'trainings', 'ru', '–ó–∞–≤—ë–ª –¥—Ä—É–≥–∞. –°–¥—Ä—É–∂–∏–ª—Å—è —Å –¥—Ä—É–≥–∏–º –±—É–¥—É—â–∏–º –≤–µ–¥—å–º–∞–∫–æ–º, —Å—É—Ä–æ–≤—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –∑–∞–∫–∞–ª–∏–ª–∏ –¥—Ä—É–∂–±—É.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.lore.trainings'), 'lore', 'trainings', 'en', 'Made a Friend. Made a fast friend in early training, rough training sealed the bond.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 9: –¢—Ä–∞–≤–º–∞ –Ω–∞ –º–∞—è—Ç–Ω–∏–∫–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o09.lore.trainings'), 'lore', 'trainings', 'ru', '–¢—Ä–∞–≤–º–∞ –Ω–∞ –º–∞—è—Ç–Ω–∏–∫–µ. –£–ø–∞–ª —Å–æ —Å—Ç–æ–ª–±–æ–≤, —Å–ª–æ–º–∞–ª –∫–æ—Å—Ç–∏, –¥–∞–∂–µ –ø–æ—Å–ª–µ –∏—Å—Ü–µ–ª–µ–Ω–∏—è –Ω–µ —Å—Ç–æ–ª—å –≥–∏–±–æ–∫.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o09.lore.trainings'), 'lore', 'trainings', 'en', 'Wounded by the Pendulum. Fell from posts, broke bones, not as flexible after healing.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 10: –ì–ª—É–±–æ–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o10.lore.trainings'), 'lore', 'trainings', 'ru', '–ì–ª—É–±–æ–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ. –ë–æ–ª—å—à—É—é —á–∞—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ–≤–æ–¥–∏–ª –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö, –∏–∑—É—á–∞—è –º–æ–Ω—Å—Ç—Ä–æ–≤ –∏ —á—É–¥–æ–≤–∏—â.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o10.lore.trainings'), 'lore', 'trainings', 'en', 'Extensive Research. Spent most free time in libraries studying monsters and taking notes.')
  ON CONFLICT (id, lang) DO NOTHING
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è eventType (–†–∞–Ω–µ–Ω–∏—è, –£–¥–∞—á–∞, –ù–µ—É–¥–∞—á–∞, –°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏)
, ins_event_types AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_type_wounds'), 'character', 'event_type', 'ru', '–†–∞–Ω–µ–Ω–∏—è'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_type_wounds'), 'character', 'event_type', 'en', 'Wounds'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_type_fortune'), 'character', 'event_type', 'ru', '–£–¥–∞—á–∞'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_type_fortune'), 'character', 'event_type', 'en', 'Fortune'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_type_misfortune'), 'character', 'event_type', 'ru', '–ù–µ—É–¥–∞—á–∞'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_type_misfortune'), 'character', 'event_type', 'en', 'Misfortune')
  ON CONFLICT (id, lang) DO NOTHING
)
-- i18n –¥–ª—è eventType "–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏" (—Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–∞–∫–∂–µ –≤ –¥—Ä—É–≥–∏—Ö –Ω–æ–¥–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º ON CONFLICT)
, ins_event_type_allies_and_enemies AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏'),
      ('en', 'Allies and Enemies')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING
)
-- i18n –¥–ª—è description "–í—Ä–∞–≥" –∏ "–°–æ—é–∑–Ω–∏–∫"
, ins_event_desc_enemy_ally AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_desc_enemy'), 'character', 'event_desc', 'ru', '–í—Ä–∞–≥'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_desc_enemy'), 'character', 'event_desc', 'en', 'Enemy'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_desc_ally'), 'character', 'event_desc', 'ru', '–°–æ—é–∑–Ω–∏–∫'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings.event_desc_ally'), 'character', 'event_desc', 'en', 'Ally')
  ON CONFLICT (id, lang) DO NOTHING
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π (–∫—Ä–∞—Ç–∫–∏–µ –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞)
, ins_event_descriptions AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    -- –í–∞—Ä–∏–∞–Ω—Ç 1: –¢—Ä–∞–≤–º–∞ –Ω–∞ –ú—É—á–∏–ª—å–Ω–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o01.event_desc'), 'character', 'event_desc', 'ru', '–¢—Ä–∞–≤–º–∞ –Ω–∞ –ú—É—á–∏–ª—å–Ω–µ. –°–ª–æ–º–∞–Ω–∞ –Ω–æ–≥–∞. [-1 –∫ –°–∫–æ—Ä]'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o01.event_desc'), 'character', 'event_desc', 'en', 'Wounded on the Gauntlet. Leg broken. [-1 to SPD]'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 2: –£–∫—Ä–∞–¥–µ–Ω–Ω–æ–µ –∑–Ω–∞–Ω–∏–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o02.event_desc'), 'character', 'event_desc', 'ru', '–£–∫—Ä–∞–¥–µ–Ω–Ω–æ–µ –∑–Ω–∞–Ω–∏–µ. –°–∫–æ–ø–∏—Ä–æ–≤–∞–ª —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –≤–µ–¥—å–º–∞—á–∏–π —á–µ—Ä—Ç—ë–∂.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o02.event_desc'), 'character', 'event_desc', 'en', 'Stolen Knowledge. Copied a secret witcher diagram.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 3: –ó–∞–≤—ë–ª —Å–æ–ø–µ—Ä–Ω–∏–∫–∞
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.event_desc'), 'character', 'event_desc', 'ru', '–°–æ–ø–µ—Ä–Ω–∏—á–µ—Å—Ç–≤–æ —Å –¥—Ä—É–≥–∏–º –±—É–¥—É—â–∏–º –≤–µ–¥—å–º–∞–∫–æ–º.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.event_desc'), 'character', 'event_desc', 'en', 'Rivalry with another witcher in training.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 4: –õ—ë–≥–∫–∏–µ –º—É—Ç–∞—Ü–∏–∏
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o04.event_desc'), 'character', 'event_desc', 'ru', '–õ—ë–≥–∫–∏–µ –º—É—Ç–∞—Ü–∏–∏. –•–æ—Ä–æ—à–æ –ø—Ä–∏—Å–ø–æ—Å–æ–±–∏–ª—Å—è –∫ –º—É—Ç–∞–≥–µ–Ω–∞–º.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o04.event_desc'), 'character', 'event_desc', 'en', 'Easy Mutations. Adapted well to mutagens.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 5: –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –º–∞–≥–∏–∏
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o05.event_desc'), 'character', 'event_desc', 'ru', '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Ç–≤–æ—Ä—ë–Ω–Ω—ã–π –∑–Ω–∞–∫ –ø–æ–≤—Ä–µ–¥–∏–ª —Ç–µ–ª–æ. [-1 –∫ –≠–Ω–µ—Ä–≥–∏–∏]'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o05.event_desc'), 'character', 'event_desc', 'en', 'A failure casting a sign caused damage. [-1 to Vigor]'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 6: –õ—É—á—à–∏–π –≤ –∫–ª–∞—Å—Å–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o06.event_desc'), 'character', 'event_desc', 'ru', '–û–¥–∏–Ω –∏–∑ –ª—É—á—à–∏—Ö –º–µ—á–Ω–∏–∫–æ–≤ —Å—Ä–µ–¥–∏ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤. [-1 –∫ –í–ª–∞–¥–µ–Ω–∏—é –º–µ—á–æ–º]'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o06.event_desc'), 'character', 'event_desc', 'en', 'One of the best swordsmen in class. [-1 to Swordsmanship]'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 7: –ü–ª–æ—Ö–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –º—É—Ç–∞–≥–µ–Ω—ã
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o07.event_desc'), 'character', 'event_desc', 'ru', '–ü–ª–æ—Ö–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –º—É—Ç–∞–≥–µ–Ω—ã. –ê–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –º—É—Ç–∞–≥–µ–Ω–Ω—ã–µ –≥—Ä–∏–±—ã.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o07.event_desc'), 'character', 'event_desc', 'en', 'Bad Reaction to Mutagens. Allergic reactions to mutagenic mushrooms.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 8: –ó–∞–≤—ë–ª –¥—Ä—É–≥–∞
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.event_desc'), 'character', 'event_desc', 'ru', '–°–¥—Ä—É–∂–∏–ª—Å—è —Å –¥—Ä—É–≥–∏–º –±—É–¥—É—â–∏–º –≤–µ–¥—å–º–∞–∫–æ–º.'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.event_desc'), 'character', 'event_desc', 'en', 'Made a fast friend in early training.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 9: –¢—Ä–∞–≤–º–∞ –Ω–∞ –º–∞—è—Ç–Ω–∏–∫–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o09.event_desc'), 'character', 'event_desc', 'ru', '–¢—Ä–∞–≤–º–∞ –Ω–∞ –º–∞—è—Ç–Ω–∏–∫–µ. –£–ø–∞–ª —Å–æ —Å—Ç–æ–ª–±–æ–≤, —Å–ª–æ–º–∞–ª –∫–æ—Å—Ç–∏. [-1 –∫ –†–µ–∞–∫—Ü–∏–∏]'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o09.event_desc'), 'character', 'event_desc', 'en', 'Wounded by the Pendulum. Fell from posts, broke bones. [-1 to REF]'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 10: –ì–ª—É–±–æ–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o10.event_desc'), 'character', 'event_desc', 'ru', '–ü—Ä–æ–≤–æ–¥–∏–ª –≤—Ä–µ–º—è –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö, –∏–∑—É—á–∞—è –º–æ–Ω—Å—Ç—Ä–æ–≤. [+1 –∫ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–µ –í–µ–¥—å–º–∞–∫–∞]'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o10.event_desc'), 'character', 'event_desc', 'en', 'Spent time in libraries studying monsters. [+1 to Witcher Training]')
  ON CONFLICT (id, lang) DO NOTHING
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —á–µ—Ä—Ç–µ–∂–∞ –≤–µ–¥—å–º–∞–∫–∞ (gear)
, ins_gear_name AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o02.gear.name'), 'gear', 'name', 'ru', '–í–µ–¥—å–º–∞—á–∏–π —á–µ—Ä—Ç—ë–∂'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o02.gear.name'), 'gear', 'name', 'en', 'Witcher Diagram')
  ON CONFLICT (id, lang) DO NOTHING
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Å–æ—é–∑–Ω–∏–∫–∞ (–≤–∞—Ä–∏–∞–Ω—Ç 8)
, ins_ally_data AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    -- –ü–æ–ª —Å–æ—é–∑–Ω–∏–∫–∞
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.ally.gender'), 'character', 'gender', 'ru', '–ú—É–∂—Å–∫–æ–π'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.ally.gender'), 'character', 'gender', 'en', 'Male'),
    -- –ü–æ–∑–∏—Ü–∏—è —Å–æ—é–∑–Ω–∏–∫–∞
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.ally.position'), 'character', 'position', 'ru', '–í–µ–¥—å–º–∞–∫'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.ally.position'), 'character', 'position', 'en', 'Witcher'),
    -- –ö–∞–∫ –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.ally.how_met'), 'character', 'how_met', 'ru', '–í–º–µ—Å—Ç–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –æ–±—É—á–µ–Ω–∏–µ'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o08.ally.how_met'), 'character', 'how_met', 'en', 'Trained together')
  ON CONFLICT (id, lang) DO NOTHING
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è –≤—Ä–∞–≥–∞ (–≤–∞—Ä–∏–∞–Ω—Ç 3)
, ins_enemy_data AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    -- –ü–æ–ª –≤—Ä–∞–≥–∞
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.gender'), 'character', 'gender', 'ru', '–ú—É–∂—Å–∫–æ–π'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.gender'), 'character', 'gender', 'en', 'Male'),
    -- –ü–æ–∑–∏—Ü–∏—è –≤—Ä–∞–≥–∞
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.position'), 'character', 'position', 'ru', '–í–µ–¥—å–º–∞–∫'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.position'), 'character', 'position', 'en', 'Witcher'),
    -- –ü—Ä–∏—á–∏–Ω–∞ –≤—Ä–∞–∂–¥—ã
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.the_cause'), 'character', 'the_cause', 'ru', '–°–æ–ø–µ—Ä–Ω–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.the_cause'), 'character', 'the_cause', 'en', 'Rivalry during training'),
    -- –ò—Ç–æ–≥ (—ç—Å–∫–∞–ª–∞—Ü–∏—è)
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.escalation_level'), 'character', 'escalation_level', 'ru', '–ù–µ–Ω–∞–≤–∏—Å—Ç—å'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.escalation_level'), 'character', 'escalation_level', 'en', 'Hatred'),
    -- –°—Ç–∞—Ç—É—Å –∂–∏–∑–Ω–∏
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.is_alive'), 'character', 'is_alive', 'ru', '–í—Ä–∞–≥ –∂–∏–≤'),
    (ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.is_alive'), 'character', 'is_alive', 'en', 'Enemy is alive')
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_first_trainings_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –≤ characterRaw.lore.trainings
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_first_trainings' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_first_trainings_o' || to_char(vals.num, 'FM00'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.trainings'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM00') ||'.lore.trainings')::text)
    )
  )
FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS vals(num)
CROSS JOIN meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ lifeEvents –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏–≥—Ä–æ–º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_first_trainings' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
-- –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞–Ω–µ–Ω–∏—è, -1 –∫ SPD.bonus
SELECT 'character', 'wcc_witcher_first_trainings_o01',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_type_wounds')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o01.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o01',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.statistics.SPD.bonus'),
      -1
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 2: –£–¥–∞—á–∞, +1 –≤–µ–¥—å–º–∞—á–∏–π —á–µ—Ä—Ç—ë–∂ –≤ gear
SELECT 'character', 'wcc_witcher_first_trainings_o02',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_type_fortune')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o02.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o02',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.gear'),
      jsonb_build_object(
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o02.gear.name')::text),
        'weight', 0
      )
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏ (–í—Ä–∞–≥), –≤—Ä–∞–≥-–≤–µ–¥—å–º–∞–∫ –≤ enemies
SELECT 'character', 'wcc_witcher_first_trainings_o03',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_life_events_allies_and_enemies.event_type_allies_and_enemies')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_desc_enemy')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o03',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.enemies'),
      jsonb_build_object(
        'gender', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.gender')::text),
        'position', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.position')::text),
        'the_cause', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.the_cause')::text),
        'escalation_level', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.escalation_level')::text),
        'is_alive', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_first_trainings_o03.enemy.is_alive')::text)
      )
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 4: –£–¥–∞—á–∞, –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–∞–π—Å–æ–≤ +0.2
SELECT 'character', 'wcc_witcher_first_trainings_o04',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_type_fortune')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o04.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o04',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'values.byQuestion.wcc_witcher_when'),
      0.2
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 5: –ù–µ—É–¥–∞—á–∞, -1 –∫ vigor.bonus
SELECT 'character', 'wcc_witcher_first_trainings_o05',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_type_misfortune')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o05.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o05',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.statistics.vigor.bonus'),
      -1
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 6: –£–¥–∞—á–∞, +1 –∫ swordsmanship.bonus
SELECT 'character', 'wcc_witcher_first_trainings_o06',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_type_fortune')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o06.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o06',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.skills.common.swordsmanship.bonus'),
      1
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 7: –ù–µ—É–¥–∞—á–∞, –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–∞–π—Å–æ–≤ -0.2
SELECT 'character', 'wcc_witcher_first_trainings_o07',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_type_misfortune')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o07.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o07',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'values.byQuestion.wcc_witcher_when'),
      -0.2
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 8: –°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏ (–°–æ—é–∑–Ω–∏–∫), –¥—Ä—É–≥-–≤–µ–¥—å–º–∞–∫ –≤ allies
SELECT 'character', 'wcc_witcher_first_trainings_o08',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_life_events_allies_and_enemies.event_type_allies_and_enemies')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_desc_ally')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o08',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.allies'),
      jsonb_build_object(
        'gender', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_first_trainings_o08.ally.gender')::text),
        'position', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_first_trainings_o08.ally.position')::text),
        'how_met', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_first_trainings_o08.ally.how_met')::text)
      )
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 9: –†–∞–Ω–µ–Ω–∏—è, -1 –∫ REF.bonus
SELECT 'character', 'wcc_witcher_first_trainings_o09',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_type_wounds')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o09.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o09',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.statistics.REF.bonus'),
      -1
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 10: –£–¥–∞—á–∞, +1 –∫ defining.bonus
SELECT 'character', 'wcc_witcher_first_trainings_o10',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.event_type_fortune')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o10.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_first_trainings_o10',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.skills.defining.bonus'),
      1
    )
  )
FROM meta;

-- –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É–∑–ª–∞
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_school', 'wcc_witcher_first_trainings';























-- <<< END sql/048_witcher_first_trainings.sql

-- >>> BEGIN sql/049_witcher_trials.sql

\echo '049_witcher_trials.sql'
-- –£–∑–µ–ª: –ö–∞–∫ –ø—Ä–æ—à–ª–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏—è?

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_trials' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
    FROM (VALUES
      ('ru', '–†–µ–∑—É–ª—å—Ç–∞—Ç –ò—Å–ø—ã—Ç–∞–Ω–∏—è —Ç—Ä–∞–≤–∞–º–∏.'),
      ('en', 'Result of the Trial of the Grasses.')
    ) AS v(lang, text)
    CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–≠—Ñ—Ñ–µ–∫—Ç'),
      ('ru', 3, '–ò—Å—Ö–æ–¥ –∏—Å–ø—ã—Ç–∞–Ω–∏–π'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Effect'),
      ('en', 3, 'Outcome of the Trials')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
    FROM c_vals
    CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_trials' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'diceModifier', jsonb_build_object(
           'jsonlogic_expression', jsonb_build_object(
             'var', 'values.byQuestion.wcc_witcher_when'
           )
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.witcher')::text,
           ck_id('witcher_cc.hierarchy.witcher_trials')::text
         )
       )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.1, '-1 –∫ –≠–º–ø –∏ -1 –∫ –¢–µ–ª', '<b>–ü–æ—á—Ç–∏ —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ</b><br>–ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ç—Ä–∞–≤–∞–º–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä—É—à–∏–ª–æ –≤–∞—à–µ —Ç–µ–ª–æ. –í—ã –ø–µ—Ä–µ–∂–∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å, –Ω–æ –≤–∞—à–∏ —Ç–µ–ª–æ –∏ —Ä–∞–∑—É–º –Ω–∞–≤—Å–µ–≥–¥–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã.'),
    (2, 0.2, '-1 –∫ –≠–º–ø', '<b>–¢—è–∂—ë–ª—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è</b><br>–ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ç—Ä–∞–≤–∞–º–∏ —É –≤–∞—Å –ø—Ä–æ—à–ª–æ —Ç—è–∂–µ–ª–æ, –∏ –≤–µ–¥—å–º–∞–∫–∏, —Å–ª–µ–¥–∏–≤—à–∏–µ –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–º, –Ω–µ –±—ã–ª–∏ –¥–æ –∫–æ–Ω—Ü–∞ —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –≤—ã —Å–ø—Ä–∞–≤–∏—Ç–µ—Å—å. –í—ã –≤—ã–∂–∏–ª–∏, –Ω–æ —Ä–∞–∑—É–º –≤–∞—à —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω.'),
    (3, 0.6, '–ù–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–æ–≤', '<b>–ü—Ä–∏–µ–º–ª–µ–º—ã–µ –º—É—Ç–∞—Ü–∏–∏</b><br>–ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ç—Ä–∞–≤–∞–º–∏ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ. –í—ã —Å—Ç–∞–ª–∏ –≤–µ–¥—å–º–∞–∫–æ–º –±–µ–∑ —Ç—è–∂—ë–ª—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π, –µ—Å–ª–∏ –Ω–µ —Å—á–∏—Ç–∞—Ç—å –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ–± —É–∂–∞—Å–Ω–æ–π –±–æ–ª–∏.'),
    (4, 0.1, '+1 –∫ –≠–º–ø –∏ +1 –∫ –õ–≤–∫', '<b>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º—É—Ç–∞—Ü–∏–∏</b><br>–í–∞—à–µ —Ç–µ–ª–æ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –æ—Ç–æ–∑–≤–∞–ª–æ—Å—å –Ω–∞ –ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ç—Ä–∞–≤–∞–º–∏, –∏ –≤—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º—É—Ç–∞—Ü–∏–∏. –í—ã —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å–ª–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏—è, –∏ –≤—Å—è –∏—Å–ø—ã—Ç–∞–Ω–Ω–∞—è –±–æ–ª—å —Ç–æ–≥–æ —Å—Ç–æ–∏–ª–∞.')
  ) AS raw_data_ru(num, probability, effect, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.1, '-1 EMP & -1 BODY', '<b>Nearly Fatal</b><br>The Trial of the Grasses nearly destroyed your body. Though you survived the process, your body and mind were damaged permanently.'),
    (2, 0.2, '-1 EMP', '<b>Poorly Accepted</b><br>The Trial of the Grasses went poorly and the witchers in charge of mutation weren‚Äôt entirely sure you would make it. You survived, but not without mental scars.'),
    (3, 0.6, 'No Modifiers', '<b>Passable Mutations</b><br>The Trial of the Grasses went well. You passed into the ranks of witchers with nothing more than memories of horrible pain.'),
    (4, 0.1, '+1 EMP & +1 DEX', '<b>Extra Mutations</b><br>Your body was very receptive to the Trial of the Grasses and you had extra mutations applied to you. Your body handled it well, and all of the pain paid off in the end.')
  ) AS raw_data_en(num, probability, effect, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || effect || '</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang
  FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_trials' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
  FROM vals
  CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_trials_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π (–ù–µ—É–¥–∞—á–∞, –£–¥–∞—á–∞)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_trials' AS qu_id)
, ins_event_types AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    (ck_id('witcher_cc.wcc_witcher_trials.event_type_misfortune'), 'character', 'event_type', 'ru', '–ù–µ—É–¥–∞—á–∞'),
    (ck_id('witcher_cc.wcc_witcher_trials.event_type_misfortune'), 'character', 'event_type', 'en', 'Misfortune'),
    (ck_id('witcher_cc.wcc_witcher_trials.event_type_fortune'), 'character', 'event_type', 'ru', '–£–¥–∞—á–∞'),
    (ck_id('witcher_cc.wcc_witcher_trials.event_type_fortune'), 'character', 'event_type', 'en', 'Fortune')
  ON CONFLICT (id, lang) DO NOTHING
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è –∫—Ä–∞—Ç–∫–∏—Ö –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π
, ins_event_descriptions AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    -- –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ—á—Ç–∏ —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ
    (ck_id('witcher_cc.wcc_witcher_trials_o01.event_desc'), 'character', 'event_desc', 'ru', '–ï–¥–≤–∞ –ø–µ—Ä–µ–∂–∏–ª –∏—Å–ø—ã—Ç–∞–Ω–∏—è —Ç—Ä–∞–≤–∞–º–∏. [-1 –∫ –≠–º–ø–∞—Ç–∏–∏] –∏ [-1 –∫ –¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏—é]'),
    (ck_id('witcher_cc.wcc_witcher_trials_o01.event_desc'), 'character', 'event_desc', 'en', 'Almost survived the Trial of the Grasses. [-1 to EMP] and [-1 to BODY]'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 2: –¢—è–∂—ë–ª—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è
    (ck_id('witcher_cc.wcc_witcher_trials_o02.event_desc'), 'character', 'event_desc', 'ru', '–ò—Å–ø—ã—Ç–∞–Ω–∏—è —Ç—Ä–∞–≤–∞–º–∏ –ø—Ä–æ—à–ª–∏ —Ç—è–∂–µ–ª–æ. [-1 –∫ –≠–º–ø–∞—Ç–∏–∏]'),
    (ck_id('witcher_cc.wcc_witcher_trials_o02.event_desc'), 'character', 'event_desc', 'en', 'The Trial of the Grasses went poorly. [-1 to EMP]'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–∏–µ–º–ª–µ–º—ã–µ –º—É—Ç–∞—Ü–∏–∏
    (ck_id('witcher_cc.wcc_witcher_trials_o04.event_desc'), 'character', 'event_desc', 'ru', '–ò—Å–ø—ã—Ç–∞–Ω–∏—è —Ç—Ä–∞–≤–∞–º–∏ –ø—Ä–æ—à–ª–∏ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ. [+1 –∫ –≠–º–ø–∞—Ç–∏–∏] –∏ [+1 –∫ –õ–æ–≤–∫–æ—Å—Ç–∏]'),
    (ck_id('witcher_cc.wcc_witcher_trials_o04.event_desc'), 'character', 'event_desc', 'en', 'The Trial of the Grasses went perfectly. [+1 to EMP] and [+1 to DEX]')
  ON CONFLICT (id, lang) DO NOTHING
)
SELECT 1 FROM meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_trials' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
-- –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–µ—É–¥–∞—á–∞, -1 EMP.bonus, -1 BODY.bonus
SELECT 'character', 'wcc_witcher_trials_o01',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_trials.event_type_misfortune')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_trials_o01.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_trials_o01',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.statistics.EMP.bonus'),
      -1
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_trials_o01',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.statistics.BODY.bonus'),
      -1
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–µ—É–¥–∞—á–∞, -1 EMP.bonus
SELECT 'character', 'wcc_witcher_trials_o02',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_trials.event_type_misfortune')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_trials_o02.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_trials_o02',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.statistics.EMP.bonus'),
      -1
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 3: –£–¥–∞—á–∞, +1 EMP.bonus, +1 DEX.bonus
SELECT 'character', 'wcc_witcher_trials_o04',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod', jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
            '0-',
            jsonb_build_object('var', 'counters.lifeEventsCounter')
          ))
        ),
        'eventType', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_trials.event_type_fortune')::text),
        'description', jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_trials_o04.event_desc')::text)
      )
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_trials_o04',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.statistics.EMP.bonus'),
      1
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_trials_o04',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.statistics.DEX.bonus'),
      1
    )
  )
FROM meta;

-- –ü–µ—Ä–µ—Ö–æ–¥ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É–∑–ª–∞
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_first_trainings', 'wcc_witcher_trials';























-- <<< END sql/049_witcher_trials.sql

-- >>> BEGIN sql/050_witcher_most_important_event.sql

\echo '050_witcher_most_important_event.sql'
-- –£–∑–µ–ª: –°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_most_important_event' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
    FROM (VALUES
      ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –≤–∞—à–µ–π –≤–µ–¥—å–º–∞—á—å–µ–π –∂–∏–∑–Ω–∏.'),
      ('en', 'Determine a defining event from your witcher''s life.')
    ) AS v(lang, text)
    CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Most Important Event')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
    FROM c_vals
    CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_most_important_event' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.witcher')::text,
           ck_id('witcher_cc.hierarchy.witcher_most_important_event')::text
         )
       )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.1, '<b>–ü–æ–ª—É—á–∏–ª –¥–∏—Ç—è –ø–æ –ü—Ä–∞–≤—É –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏</b><br>–í–æ –≤—Ä–µ–º—è —Å–≤–æ–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –≤—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –ü—Ä–∞–≤–æ–º –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—É—á–∏–ª–∏ –¥–∏—Ç—è. –≠—Ç–æ –º–æ–≥ –±—ã—Ç—å –º–∞–ª—å—á–∏–∫ ‚Äî —Ç–æ–≥–¥–∞ –≤—ã –æ—Ç–¥–∞–ª–∏ –µ–≥–æ –≤ –≤–µ–¥—å–º–∞–∫–∏. –ï—Å–ª–∏ –∂–µ –¥–µ–≤–æ—á–∫–∞, –µ—ë —Å—É–¥—å–±–∞ –±—ã–ª–∞ –≤ –≤–∞—à–∏—Ö —Ä—É–∫–∞—Ö.'),
    (2, 0.1, '<b>–ù–∞–ø–∞–¥–µ–Ω–∏–µ —Ä–∞–∑—É–º–Ω–æ–≥–æ —á—É–¥–æ–≤–∏—â–∞</b><br>–ù–∞ –æ—Ö–æ—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—è –æ–±–µ—Ä–Ω—É–ª–∞—Å—å –ø—Ä–æ—Ç–∏–≤ –≤–∞—Å. –†–∞–∑—É–º–Ω—ã–µ —á—É–¥–æ–≤–∏—â–∞ –≤—Ä–æ–¥–µ –∫–ª–∞–¥–±–∏—â–µ–Ω—Å–∫–∏—Ö –±–∞–± –∏ –∫–∞—Ç–∞–∫–∞–Ω–æ–≤ –∫—Ä–∞–π–Ω–µ –æ–ø–∞—Å–Ω—ã, –∏ –¥–æ–±—ã—á–µ–π –µ–¥–≤–∞ –Ω–µ —Å—Ç–∞–ª–∏ –≤—ã.'),
    (3, 0.1, '<b>–°—Ä–∞–∂–∞–ª—Å—è –ø–ª–µ—á–æ–º –∫ –ø–ª–µ—á—É —Å —Ä—ã—Ü–∞—Ä–µ–º</b><br>–í—ã –¥—Ä–∞–ª–∏—Å—å –≤–º–µ—Å—Ç–µ —Å –±–ª–∞–≥–æ—Ä–æ–¥–Ω—ã–º —Ä—ã—Ü–∞—Ä–µ–º. –°–ª—É—á–∞–π–Ω–æ —ç—Ç–æ –±—ã–ª–æ –∏–ª–∏ –Ω–µ—Ç, –ø–æ—Å–ª–µ —ç—Ç–æ–π –±–∏—Ç–≤—ã –≤—ã –∏–Ω–∞—á–µ —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Ä—ã—Ü–∞—Ä–µ–π –∏ –Ω–∞ —Ä–∞–±–æ—Ç—É –≤–µ–¥—å–º–∞–∫–∞.'),
    (4, 0.1, '<b>–ë—ã–ª —Å—Ö–≤–∞—á–µ–Ω –º–∞–≥–æ–º –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤</b><br>–ú–∞–≥–∏ –∂–∞–∂–¥—É—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å —Ç–∞–π–Ω—ã –≤–µ–¥—å–º–∞—á—å–∏—Ö –º—É—Ç–∞—Ü–∏–π. –û–¥–Ω–∞–∂–¥—ã –≤–∞—Å –∑–∞—Ö–≤–∞—Ç–∏–ª –º–∞–≥ –∏ —Å—Ç–∞–≤–∏–ª –Ω–∞–¥ –≤–∞–º–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã, –ø—ã—Ç–∞—è—Å—å —Ä–∞–∑–≥–∞–¥–∞—Ç—å —Å–µ–∫—Ä–µ—Ç.'),
    (5, 0.1, '<b>–†–∞–±–æ—Ç–∞–ª –Ω–∞ –¥–≤–æ—Ä—è–Ω–∏–Ω–∞</b><br>–ù–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –≤—ã —Å–ª—É–∂–∏–ª–∏ –¥–≤–æ—Ä—è–Ω–∏–Ω—É. –ü–ª–∞—Ç–∏–ª–∏ —Ö–æ—Ä–æ—à–æ, –Ω–æ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å —Å–∫—Ä—ã–≤–∞—Ç—å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ—Å—Ç—É–ø–∫–æ–≤, —á—Ç–æ–±—ã –Ω–µ –ø–æ–∑–æ—Ä–∏—Ç—å –Ω–∞–Ω—è–≤—à—É—é –≤–∞—Å —Å–µ–º—å—é, –≤—ã—Ç–∞—Å–∫–∏–≤–∞—è –∏—Ö —Ç–∞–π–Ω—ã –Ω–∞ —Å–≤–µ—Ç.'),
    (6, 0.1, '<b>–í—ã—Ö–æ–¥ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã</b><br>–í—ã –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞ ‚Äî —á–µ—Ä–µ–∑ –î—Ä–∞–∫–æ–Ω—å–∏ –≥–æ—Ä—ã, –¢–∏—Ä –¢–æ—Ö–∞–∏—Ä, –°–∏–Ω–∏–µ –≥–æ—Ä—ã –∏–ª–∏ –í–µ–ª–∏–∫–æ–µ –º–æ—Ä–µ. –£–≤–∏–¥–µ–ª–∏ –¥–∞–ª—å–Ω–∏–µ –∑–µ–º–ª–∏, –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤—É.'),
    (7, 0.1, '<b>–°–µ—Ä—å—ë–∑–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è</b><br>–û–±—ã—á–Ω–æ –≤–µ–¥—å–º–∞–∫–∏ –∏–∑–±–µ–≥–∞—é—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π, –Ω–æ –≤—ã –≤–ª—é–±–∏–ª–∏—Å—å –∏ –¥–∞–∂–µ –ø–æ–¥—É–º—ã–≤–∞–ª–∏ –æ—Å–µ—Å—Ç—å. –î–æ —Å–∏—Ö –ø–æ—Ä –∏–Ω–æ–≥–¥–∞ –≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç–µ –æ–± —ç—Ç–æ–º.'),
    (8, 0.1, '<b>–°—Ä–∞–∂–µ–Ω–∏–µ –∑–∞ —Å–≤–æ—é –∫—Ä–µ–ø–æ—Å—Ç—å</b><br>–í—ã –ø–µ—Ä–µ–∂–∏–ª–∏ –æ—Å–∞–¥—É –≤–µ–¥—å–º–∞—á—å–µ–≥–æ –∑–∞–º–∫–∞. –í–∞—Å –±—ã–ª–æ –º–∞–ª–æ, –Ω–æ –≤—ã –æ—Å—Ç–∞–ª–∏—Å—å. –í—ã –≤—ã–∂–∏–ª–∏ —Å —Ç—è–∂—ë–ª—ã–º–∏ —Ä–∞–Ω–µ–Ω–∏—è–º–∏, –Ω–∞–±–ª—é–¥–∞—è, –∫–∞–∫ –≥–∏–±–Ω—É—Ç —Ç–æ–≤–∞—Ä–∏—â–∏.'),
    (9, 0.1, '<b>–î—É—Ä–Ω–∞—è —Å–ª–∞–≤–∞</b><br>–í—ã –∏–∑–±–∞–≤–∏–ª–∏ –≥–æ—Ä–æ–¥ –æ—Ç —á—É–¥–æ–≤–∏—â–∞, –Ω–æ –ª—é–¥–∏ –∏—Å–ø—É–≥–∞–ª–∏—Å—å –∏ –æ—Ç–≤–µ—Ä–Ω—É–ª–∏—Å—å. –í–æ–∑–º–æ–∂–Ω–æ, –¥–∞–∂–µ –ø—ã—Ç–∞–ª–∏—Å—å —É–±–∏—Ç—å –≤–∞—Å. –¢–∞–∫ –≤—ã —É–∑–Ω–∞–ª–∏, –∫–∞–∫–æ–π ¬´–Ω–∞–≥—Ä–∞–¥—ã¬ª –º–æ–∂–Ω–æ –∂–¥–∞—Ç—å.'),
    (10, 0.1, '<b>–°–ª–∞–≤–∞ –≥–µ—Ä–æ—è</b><br>–í –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ, –∏–∑–±–∞–≤–∏–≤ –ª—é–¥–µ–π –æ—Ç —á—É–¥–æ–≤–∏—â–∞, –≤—ã –±—ã–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã –∫–∞–∫ –≥–µ—Ä–æ–π. –ù–µ –æ–∂–∏–¥–∞–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤—ã–ø–∏–≤–∫–∏ –∏ –≤–æ—Å—Ö–∏—â—ë–Ω–Ω—ã—Ö –≤–∑–≥–ª—è–¥–æ–≤ ‚Äî –Ω–æ –ø–æ–ª—É—á–∏–ª–∏ –∏—Ö. –ë–æ–ª—å—à–µ —Ç–∞–∫–æ–π –¥–æ–±—Ä–æ—Ç—ã –≤—ã –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–ª–∏.')
  ) AS raw_data_ru(num, probability, txt)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.1, '<b>Given a Child by the Law of Surprises</b><br>Along your travels you invoked the Law of Surprises and received a child. They may have been a boy, in which case they were made into a witcher, or a girl, in which case their fate was up to you.'),
    (2, 0.1, '<b>Hunted by a Sentient Monster</b><br>The tables turned during one of your hunts. Sentient monsters like grave hags and katakan can be dangerous quarry, and you wound up becoming the hunted for a stressful night.'),
    (3, 0.1, '<b>Fought Alongside a Knight</b><br>You did battle alongside a noble knight. This may have been against both of your wishes or even an accident, but fighting beside a noble changed your outlook on knights and your job as a witcher.'),
    (4, 0.1, '<b>Captured by a Mage for Testing</b><br>Mages lust after the secrets of Witcher mutations. At some point you were captured by a mage who experimented on you in an attempt to reverse-engineer them.'),
    (5, 0.1, '<b>Worked for a Nobleman</b><br>For a time you worked for a nobleman. The pay was good, but it was strange and aggravating to have to hide most of your actions to avoid shaming the family by bringing their secrets to light.'),
    (6, 0.1, '<b>Went Beyond the Boundaries</b><br>Once, you traveled beyond the borders of the Continent‚Äîpast the Dragon Mountains, the Tir Tochair or the Blue Mountains, or the Great Sea. You have seen far lands unknown to most others.'),
    (7, 0.1, '<b>Meaningful Romance</b><br>Most witchers remain neutral and avoid meaningful relationships. However, this didn‚Äôt stop you. You fell in love and actually considered settling down. It still occurs to you sometimes.'),
    (8, 0.1, '<b>Fought for Your Keep</b><br>You fought at a siege of your keep. You were outnumbered and overpowered, but you stayed nonetheless. You survived the siege with serious wounds, but saw your brethren dying around you.'),
    (9, 0.1, '<b>Gained Infamy</b><br>After helping a city with a monster, the people became afraid and turned on you. They might even have tried to kill you. Either way, you‚Äôve seen what kind of reward you can expect from people.'),
    (10, 0.1, '<b>Gained Fame</b><br>You were well-received in a town after helping them with a monster. You didn‚Äôt expect free drinks or women casting you glances, but that‚Äôs what you got. You haven‚Äôt seen such kindness again, but it was heartening.')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang,
    -- –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ <br> (—É–±–∏—Ä–∞–µ–º <b>...</b><br>)
    CASE 
      WHEN position('<br>' in txt) > 0 
      THEN substring(txt from position('<br>' in txt) + 4)
      ELSE ''
    END AS text_after_br
  FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_most_important_event' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
  FROM vals
  CROSS JOIN meta
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (–¥–ª—è most_important_event)
, ins_most_important_event_text AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| 'lore' ||'.'|| 'most_important_event') AS id
       , 'lore', 'most_important_event', vals.lang, vals.text_after_br
  FROM vals
  CROSS JOIN meta
  WHERE vals.num > 1 AND vals.text_after_br != ''
  ON CONFLICT (id, lang) DO NOTHING
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_most_important_event_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ–±—ã—Ç–∏—è –≤ characterRaw.lore.most_important_event (–¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ 2-10)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_most_important_event' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_most_important_event_o' || to_char(vals.num, 'FM00'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.most_important_event'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| 'lore' ||'.'|| 'most_important_event')::text)
    )
  )
FROM (SELECT DISTINCT num FROM (VALUES (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS v(num)) AS vals
CROSS JOIN meta;

-- –ü–µ—Ä–µ—Ö–æ–¥ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É–∑–ª–∞
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_trials', 'wcc_witcher_most_important_event';























-- <<< END sql/050_witcher_most_important_event.sql

-- >>> BEGIN sql/051_witcher_child_who.sql

\echo '051_witcher_child_who.sql'
-- –£–∑–µ–ª: –ü–æ–ª —Ä–µ–±—ë–Ω–∫–∞ –ø–æ –ü—Ä–∞–≤—É –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_child_who' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
    FROM (VALUES
      ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–æ–ª —Ä–µ–±—ë–Ω–∫–∞ –ø–æ –ü—Ä–∞–≤—É –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏.'),
      ('en', 'Determine the gender of the Child of Surprise.')
    ) AS v(lang, text)
    CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ü–æ–ª —Ä–µ–±—ë–Ω–∫–∞'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Child Gender')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
    FROM c_vals
    CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_child_who' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.witcher')::text,
           ck_id('witcher_cc.hierarchy.witcher_most_important_event')::text,
           ck_id('witcher_cc.hierarchy.witcher_child_who')::text
         )
       )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã (50/50)
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.5, '–ú—É–∂—Å–∫–æ–π'),
    (2, 0.5, '–ñ–µ–Ω—Å–∫–∏–π')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.5, 'Male'),
    (2, 0.5, 'Female')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang
  FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_child_who' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
  FROM vals
  CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_child_who_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ —Å–æ–±—ã—Ç–∏—è (–≤–∞—Ä–∏–∞–Ω—Ç 2 - –∂–µ–Ω—Å–∫–∏–π)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_child_who' AS qu_id)
, ins_event_text AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    (ck_id('witcher_cc.wcc_witcher_child_who_o02.lore.most_important_event'), 'lore', 'most_important_event', 'ru', '–í–æ –≤—Ä–µ–º—è —Å–≤–æ–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –≤—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –ü—Ä–∞–≤–æ–º –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—É—á–∏–ª–∏ –¥–µ–≤–æ—á–∫—É, –µ—ë —Å—É–¥—å–±–∞ –±—ã–ª–∞ –≤ –≤–∞—à–∏—Ö —Ä—É–∫–∞—Ö.'),
    (ck_id('witcher_cc.wcc_witcher_child_who_o02.lore.most_important_event'), 'lore', 'most_important_event', 'en', 'During your travels, you invoked the Law of Surprise and received a girl, her fate was in your hands.')
  ON CONFLICT (id, lang) DO NOTHING
)
SELECT 1 FROM meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ–±—ã—Ç–∏—è –≤ characterRaw.lore.most_important_event (–¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 2 - –∂–µ–Ω—Å–∫–∏–π)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_child_who' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_child_who_o02',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.most_important_event'),
      jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_child_who_o02.lore.most_important_event')::text)
    )
  )
FROM meta;

-- –ü–µ—Ä–µ—Ö–æ–¥: –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç 01 ¬´–†–µ–±—ë–Ω–æ–∫ –ø–æ –ü—Ä–∞–≤—É –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏¬ª, —Å–Ω–∞—á–∞–ª–∞ —É—Ç–æ—á–Ω—è–µ–º –ø–æ–ª
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_witcher_most_important_event', 'wcc_witcher_child_who', 'wcc_witcher_most_important_event_o01', 1;
-- <<< END sql/051_witcher_child_who.sql

-- >>> BEGIN sql/052_witcher_child_fate.sql

\echo '052_witcher_child_fate.sql'
-- –£–∑–µ–ª: –°—É–¥—å–±–∞ —Ä–µ–±—ë–Ω–∫–∞ –ø–æ –ü—Ä–∞–≤—É –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏ (–º–∞–ª—å—á–∏–∫)

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_child_fate' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
    FROM (VALUES
      ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å—É–¥—å–±—É –º–∞–ª—å—á–∏–∫–∞, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –ø–æ –ü—Ä–∞–≤—É –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏.'),
      ('en', 'Determine the fate of the boy gained by the Law of Surprise.')
    ) AS v(lang, text)
    CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–°—É–¥—å–±–∞ —Ä–µ–±—ë–Ω–∫–∞'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Child''s Fate')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
    FROM c_vals
    CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_child_fate' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.witcher')::text,
           ck_id('witcher_cc.hierarchy.witcher_most_important_event')::text,
           ck_id('witcher_cc.hierarchy.witcher_child_fate')::text
         )
       )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã (30% / 70%)
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.3, '–ú–∞–ª—å—á–∏–∫ —É–º–µ—Ä –≤–æ –≤—Ä–µ–º—è –∏—Å–ø—ã—Ç–∞–Ω–∏–π'),
    (2, 0.7, '–ú–∞–ª—å—á–∏–∫ —Å—Ç–∞–ª –≤–µ–¥—å–º–∞–∫–æ–º')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.3, 'The boy died during the Trials'),
    (2, 0.7, 'The boy became a witcher')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang
  FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_child_fate' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
  FROM vals
  CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_child_fate_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ —Å–æ–±—ã—Ç–∏–π
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_child_fate' AS qu_id)
, ins_event_texts AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  VALUES
    -- –û–ø—Ü–∏—è 1: –ú–∞–ª—å—á–∏–∫ —É–º–µ—Ä –≤–æ –≤—Ä–µ–º—è –∏—Å–ø—ã—Ç–∞–Ω–∏–π
    (ck_id('witcher_cc.wcc_witcher_child_fate_o01.lore.most_important_event'), 'lore', 'most_important_event', 'ru', '–í–æ –≤—Ä–µ–º—è —Å–≤–æ–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –≤—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –ü—Ä–∞–≤–æ–º –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—É—á–∏–ª–∏ –º–∞–ª—å—á–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ—Ä –≤–æ –≤—Ä–µ–º—è –∏—Å–ø—ã—Ç–∞–Ω–∏–π.'),
    (ck_id('witcher_cc.wcc_witcher_child_fate_o01.lore.most_important_event'), 'lore', 'most_important_event', 'en', 'During your travels, you invoked the Law of Surprise and received a boy, who died during the Trials.'),
    -- –û–ø—Ü–∏—è 2: –ú–∞–ª—å—á–∏–∫ —Å—Ç–∞–ª –≤–µ–¥—å–º–∞–∫–æ–º
    (ck_id('witcher_cc.wcc_witcher_child_fate_o02.lore.most_important_event'), 'lore', 'most_important_event', 'ru', '–í–æ –≤—Ä–µ–º—è —Å–≤–æ–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –≤—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –ü—Ä–∞–≤–æ–º –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—É—á–∏–ª–∏ –º–∞–ª—å—á–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–∂–µ —Å—Ç–∞–ª –≤–µ–¥—å–º–∞–∫–æ–º.'),
    (ck_id('witcher_cc.wcc_witcher_child_fate_o02.lore.most_important_event'), 'lore', 'most_important_event', 'en', 'During your travels, you invoked the Law of Surprise and received a boy, who later became a witcher.')
  ON CONFLICT (id, lang) DO NOTHING
)
SELECT 1 FROM meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ–±—ã—Ç–∏—è –≤ characterRaw.lore.most_important_event
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_child_fate' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
-- –û–ø—Ü–∏—è 1: –ú–∞–ª—å—á–∏–∫ —É–º–µ—Ä –≤–æ –≤—Ä–µ–º—è –∏—Å–ø—ã—Ç–∞–Ω–∏–π
SELECT 'character', 'wcc_witcher_child_fate_o01',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.most_important_event'),
      jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_child_fate_o01.lore.most_important_event')::text)
    )
  )
FROM meta
UNION ALL
-- –û–ø—Ü–∏—è 2: –ú–∞–ª—å—á–∏–∫ —Å—Ç–∞–ª –≤–µ–¥—å–º–∞–∫–æ–º
SELECT 'character', 'wcc_witcher_child_fate_o02',
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.most_important_event'),
      jsonb_build_object('i18n_uuid', ck_id('witcher_cc.wcc_witcher_child_fate_o02.lore.most_important_event')::text)
    )
  )
FROM meta;

-- –ü–µ—Ä–µ—Ö–æ–¥: –∏–∑ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ (–º—É–∂—Å–∫–æ–π) –∫ —Å—É–¥—å–±–µ —Ä–µ–±—ë–Ω–∫–∞
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority) 
  SELECT 'wcc_witcher_child_who', 'wcc_witcher_child_fate', 'wcc_witcher_child_who_o01', 1;
-- <<< END sql/052_witcher_child_fate.sql

-- >>> BEGIN sql/053_witcher_current_situation.sql

\echo '053_witcher_current_situation.sql'
-- –£–∑–µ–ª: –ö–∞–∫–æ–≤–æ –≤–∞—à–µ –Ω—ã–Ω–µ—à–Ω–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ?

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_current_situation' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
    FROM (VALUES
      ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–µ–¥—å–º–∞–∫–∞.'),
      ('en', 'Determine your witcher''s current situation.')
    ) AS v(lang, text)
    CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ù—ã–Ω–µ—à–Ω–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Where You Are Now')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
    FROM c_vals
    CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_current_situation' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.witcher')::text,
           ck_id('witcher_cc.hierarchy.witcher_current_situation')::text
         )
       )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.1, '<b>–õ–∏—á–Ω—ã–π –≤–µ–¥—å–º–∞–∫</b><br>–í—ã –ø–æ–¥–ø–∏—Å–∞–ª–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å –≥—Ä—É–ø–ø–æ–π —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤, –∑–Ω–∞—Ç–Ω—ã–º –¥–æ–º–æ–º –∏–ª–∏ –≤–∞–∂–Ω–æ–π –ø–µ—Ä—Å–æ–Ω–æ–π –∏ —Å—Ç–∞–ª–∏ –ª–∏—á–Ω—ã–º –≤–µ–¥—å–º–∞–∫–æ–º. –í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –∑–∞ —Å–∫—Ä–æ–º–Ω—É—é –ø–ª–∞—Ç—É –∏ –æ—Ö–æ—Ç–∏—Ç–µ—Å—å –Ω–∞ –∫–æ–≥–æ —Å–∫–∞–∂—É—Ç. –û–±—ã—á–Ω–æ –Ω–∞ —á—É–¥–æ–≤–∏—â‚Ä¶'),
    (2, 0.1, '<b>–í –ø–æ–∏—Å–∫–∞—Ö —Ä–∞–±–æ—Ç—ã</b><br>–¢—è–∂—ë–ª–∞—è –≤–µ–¥—å–º–∞—á—å—è –∂–∏–∑–Ω—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è. –í—ã –º–Ω–æ–≥–æ —Å—Ç—Ä–∞–Ω—Å—Ç–≤—É–µ—Ç–µ, —Å –≥—Ä—É—Å—Ç—å—é –¥—É–º–∞—è –æ–± –æ—Ç–º–∏—Ä–∞–Ω–∏–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –≤–µ–¥—å–º–∞–∫–∞ –∏ –æ —Ä–µ–¥–∫–æ—Å—Ç–∏ —á—É–¥–æ–≤–∏—â. –í—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤ –¥–æ—Ä–æ–≥–µ, –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç–µ—Å—å –Ω–∞ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.'),
    (3, 0.6, '<b>–û—Ç—à–µ–ª—å–Ω–∏–∫</b><br>–í—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –±—ã—Ç—å –≤–µ–¥—å–º–∞–∫–æ–º –∏ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏—Å—å –≤ –¥–∏–∫–∏–µ –∑–µ–º–ª–∏, —á—Ç–æ–±—ã –∂–∏—Ç—å –∫–∞–∫ –æ—Ç—à–µ–ª—å–Ω–∏–∫. –õ–∏—à—å —Ç–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —á—É–¥–æ–≤–∏—â–∞ —Å—Ç–∞–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è, –≤—ã —Ä–µ—à–∏–ª–∏ –≤–Ω–æ–≤—å –≤—ã–±—Ä–∞—Ç—å—Å—è –≤ –º–∏—Ä.'),
    (4, 0.1, '<b>–ù–æ—Ä–º–∞–ª—å–Ω–∞—è –∂–∏–∑–Ω—å</b><br>–í—ã —É–∂–µ –¥–µ—Å—è—Ç–∫–∏ –ª–µ—Ç –ø—ã—Ç–∞–µ—Ç–µ—Å—å –æ—Å—Ç–∞–≤–∏—Ç—å –∂–∏–∑–Ω—å –≤–µ–¥—å–º–∞–∫–∞. –≠—Ç–æ —Ç—Ä—É–¥–Ω–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –ª—é–¥–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–∏–º—É—Ç –≤–∞—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é, –Ω–æ –≤—ã –∫–æ–µ-–∫–∞–∫ –≤–µ–¥—ë—Ç–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª—å–Ω—É—é –∂–∏–∑–Ω—å. –ñ–µ–ª–∞–µ–º —É—Å–ø–µ—Ö–æ–≤!'),
    (5, 0.1, '<b>–û–ø–∞—Å–Ω—ã–π –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫</b><br>–í –∏—Ç–æ–≥–µ –≤–µ—Å—å –Ω–µ–≥–∞—Ç–∏–≤ –∏ –ª—é–¥—Å–∫–∞—è –Ω–µ–±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –≤–∞—Å –¥–æ–±–∏–ª–∏ ‚Äî –≤—ã —Ä–µ—à–∏–ª–∏, —á—Ç–æ –ø–æ—Å–∫–æ–ª—å–∫—É —á—É–¥–æ–≤–∏—â —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—Å—ë –º–µ–Ω—å—à–µ, —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –ª—é–¥–µ–π. –ú–æ–∂–µ—Ç–µ —Å–∞–º–∏ —Ä–µ—à–∏—Ç—å, —á–µ–º –≤—ã –ø—Ä–æ–º—ã—à–ª—è–ª–∏ —Ä–∞–¥–∏ –≤—ã–∂–∏–≤–∞–Ω–∏—è.')
  ) AS raw_data_ru(num, probability, txt)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.1, '<b>Became a Personal Witcher</b><br>You signed on to work for a merchant group, noble house, or important person as a personal witcher. You work for modest pay and hunt what they tell you to hunt. Mostly it‚Äôs monsters‚Ä¶'),
    (2, 0.1, '<b>Looking For Work</b><br>The hard life of a witcher continues. You spend a lot of time on the road, lamenting the efficiency of your kind and the extinction of monsters. You travel constantly and never settle down.'),
    (3, 0.6, '<b>Became a Hermit</b><br>You gave up on the life of a witcher and traveled out into the wilderness. Now you live as a hermit in the wilds. Only now that monsters are returning have you started to venture out again.'),
    (4, 0.1, '<b>Turned to a Normal Life</b><br>You‚Äôve tried for decades to leave the witcher life behind. It‚Äôs difficult, since people won‚Äôt ever really accept you, but you have managed to cobble together an almost normal life. Good luck.'),
    (5, 0.1, '<b>Became a Dangerous Criminal</b><br>Eventually all the negativity and thankless people got to you‚Äî you decided that with fewer and fewer monsters, it was time to start hunting people. You can determine what you do to survive.')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang,
    -- –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ <br> (—É–±–∏—Ä–∞–µ–º <b>...</b><br>)
    CASE 
      WHEN position('<br>' in txt) > 0 
      THEN substring(txt from position('<br>' in txt) + 4)
      ELSE ''
    END AS text_after_br
  FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_current_situation' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
  FROM vals
  CROSS JOIN meta
)
-- –°–æ–∑–¥–∞–µ–º i18n –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (–¥–ª—è current_situation)
, ins_current_situation_text AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| 'lore' ||'.'|| 'current_situation') AS id
       , 'lore', 'current_situation', vals.lang, vals.text_after_br
  FROM vals
  CROSS JOIN meta
  WHERE vals.text_after_br != ''
  ON CONFLICT (id, lang) DO NOTHING
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_current_situation_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ–±—ã—Ç–∏—è –≤ characterRaw.lore.current_situation
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_current_situation' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_current_situation_o' || to_char(vals.num, 'FM00'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.current_situation'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| 'lore' ||'.'|| 'current_situation')::text)
    )
  )
FROM (SELECT DISTINCT num FROM (VALUES (1), (2), (3), (4), (5)) AS v(num)) AS vals
CROSS JOIN meta;

-- –ü–µ—Ä–µ—Ö–æ–¥ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É–∑–ª–∞
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_most_important_event', 'wcc_witcher_current_situation' UNION ALL
  SELECT 'wcc_witcher_child_who', 'wcc_witcher_current_situation' UNION ALL
  SELECT 'wcc_witcher_child_fate', 'wcc_witcher_current_situation';
-- <<< END sql/053_witcher_current_situation.sql

-- >>> BEGIN sql/054_witcher_events_risk.sql

\echo '054_witcher_events_risk.sql'
-- –£–∑–µ–ª: –ö–∞–∫–æ–≤–æ –≤–∞—à–µ –Ω—ã–Ω–µ—à–Ω–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ?

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_risk' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—É—é –∂–∏–∑–Ω—å –≤–µ–ª –≤–µ–¥—å–º–∞–∫ –≤ —Ç—É –¥–µ–∫–∞–¥—É.'),
        ('en', 'Choose how dangerous a life your witcher led in that decade.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–ü–æ–≤–µ–¥–µ–Ω–∏–µ'),
      ('ru', 2, '–ù–∏—á–µ–≥–æ'),
      ('ru', 3, '–í—ã–≥–æ–¥–∞'),
      ('ru', 4, '–°–æ—é–∑–Ω–∏–∫'),
      ('ru', 5, '–û—Ö–æ—Ç–∞'),
      ('ru', 6, '–†–∏—Å–∫ - –û–ø–∞—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è'),
      ('ru', 7, '–†–∏—Å–∫ - –†–∞–Ω—ã'),
      ('ru', 8, '–†–∏—Å–∫ - –í—Ä–∞–≥'),
      ('en', 1, 'Saftey'),
      ('en', 2, 'Nothing'),
      ('en', 3, 'Benefit'),
      ('en', 4, 'Ally'),
      ('en', 5, 'A hunt'),
      ('en', 6, 'Risk - Danger events'),
      ('en', 7, 'Risk - Wounds'),
      ('en', 8, 'Risk - Enemies')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd0',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_risk' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_risk')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_risk' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, '–û—Å—Ç–æ—Ä–æ–∂–Ω–æ–µ' , '70%', '10%', '10%', '10%', '3%', '3%', '4%'),
    (2, '–ù–æ—Ä–º–∞–ª—å–Ω–æ–µ' , '50%', '10%', '10%', '30%', '7.5%', '7.5%', '10%'),
    (3, '–°—Ä–µ–¥–Ω–µ–µ'    , '20%', '20%', '50%', '10%', '15%', '15%', '20%'),
    (4, '–†–∏—Å–∫–æ–≤–∞–Ω–Ω–æ–µ', '10%', '50%', '20%', '20%', '22.5%', '22.5%', '30%')
  ) AS raw_data_ru(num, Saftey, Nothing, Benefit, Ally, a_hunt, Danger_events, Wounds, Enemies)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 'Cautious'   , '63%', '9%', '9%', '9%', '3%', '3%', '4%'),
    (2, 'Normal'     , '37.5%', '7.5%', '7.5%', '22.5%', '7.5%', '7.5%', '10%'),
    (3, 'Non-Neutral', '10%', '10%', '25%', '5%', '15%', '15%', '20%'),
    (4, 'Risky'      , '2.5%', '12.5%', '5%', '5%', '22.5%', '22.5%', '30%')
  ) AS raw_data_en(num, Saftey, Nothing, Benefit, Ally, a_hunt, Danger_events, Wounds, Enemies)
)
, vals AS (
  SELECT '<td>' || Saftey || '</td>'
         || '<td>' || Nothing || '</td>'
         || '<td>' || Benefit || '</td>'
         || '<td>' || Ally || '</td>'
         || '<td>' || a_hunt || '</td>'
         || '<td style="color: red; text-align: center;"><b>' || Danger_events || '</b></td>'
         || '<td style="color: red; text-align: center;"><b>' || Wounds || '</b></td>'
         || '<td style="color: red; text-align: center;"><b>' || Enemies || '</b></td>' AS text,
     num, lang
   FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_risk_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  '{}'jsonb
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_current_situation', 'wcc_witcher_events_risk';
-- <<< END sql/054_witcher_events_risk.sql

-- >>> BEGIN sql/055_witcher_events_is_in_danger.sql

\echo '055_witcher_events_is_in_danger.sql'
-- –£–∑–µ–ª: –ö–∞–∫–æ–≤–æ –≤–∞—à–µ –Ω—ã–Ω–µ—à–Ω–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ?

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_is_in_danger' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–ü–æ–ø–∞–ª –ª–∏ –≤–µ–¥—å–º–∞–∫ –≤ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç–∏ –≤ —Ç—É –¥–µ–∫–∞–¥—É? –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –±—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞.'),
        ('en', 'Did the witcher get into trouble during that decade? This step requires a mandatory dice roll.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–û—Ç–≤–µ—Ç'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Answer')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_is_in_danger' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_is_in_danger')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_is_in_danger' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 1, 0.9, '–í—Å—ë –æ–±–æ—à–ª–æ—Å—å'),
    (1, 2, 0.03, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –†–∞–Ω—ã'),
    (1, 3, 0.03, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –û–ø–∞—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è'),
    (1, 4, 0.04, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –í—Ä–∞–≥'),

    (2, 1, 0.75, '–í—Å—ë –æ–±–æ—à–ª–æ—Å—å'),
    (2, 2, 0.075, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –†–∞–Ω—ã'),
    (2, 3, 0.075, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –û–ø–∞—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è'),
    (2, 4, 0.1, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –í—Ä–∞–≥'),

    (3, 1, 0.5, '–í—Å—ë –æ–±–æ—à–ª–æ—Å—å'),
    (3, 2, 0.15, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –†–∞–Ω—ã'),
    (3, 3, 0.15, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –û–ø–∞—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è'),
    (3, 4, 0.2, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –í—Ä–∞–≥'),

    (4, 1, 0.25, '–í—Å—ë –æ–±–æ—à–ª–æ—Å—å'),
    (4, 2, 0.225, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –†–∞–Ω—ã'),
    (4, 3, 0.225, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –û–ø–∞—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è'),
    (4, 4, 0.3, '–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è - –í—Ä–∞–≥')
  ) AS raw_data_ru(group_id, num, probability, txt)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 1, 0.9, 'All went well'),
    (1, 2, 0.03, 'Consequences ‚Äì Wounds'),
    (1, 3, 0.03, 'Consequences ‚Äì Dangerous Events'),
    (1, 4, 0.04, 'Consequences ‚Äì Enemy'),

    (2, 1, 0.75, 'All went well'),
    (2, 2, 0.075, 'Consequences ‚Äì Wounds'),
    (2, 3, 0.075, 'Consequences ‚Äì Dangerous Events'),
    (2, 4, 0.1, 'Consequences ‚Äì Enemy'),

    (3, 1, 0.5, 'All went well'),
    (3, 2, 0.15, 'Consequences ‚Äì Wounds'),
    (3, 3, 0.15, 'Consequences ‚Äì Dangerous Events'),
    (3, 4, 0.2, 'Consequences ‚Äì Enemy'),

    (4, 1, 0.25, 'All went well'),
    (4, 2, 0.225, 'Consequences ‚Äì Wounds'),
    (4, 3, 0.225, 'Consequences ‚Äì Dangerous Events'),
    (4, 4, 0.3, 'Consequences ‚Äì Enemy')
  ) AS raw_data_en(group_id, num, probability, txt)
)
, vals AS (
  SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' || 
          '<td>' || txt                                  || '</td>') AS text
    , num
    , group_id
    , probability
    , lang
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, rules_vals(group_id, id, body) AS (
    SELECT v.group_id
         , gen_random_uuid()
         , ('{ "==":
                [
                  { "reduce":
                      [
                        { "var": ["answers.byQuestion.wcc_witcher_events_risk", []] },
                        { "var": "current" },
                        null
                      ]
                  },
                  "wcc_witcher_events_risk_o' || to_char(group_id, 'FM00') || '"
                ]
            }')::jsonb::jsonb FROM (SELECT DISTINCT group_id FROM raw_data) v(group_id)
),
ins_rules AS (
  INSERT INTO rules(ru_id, body) SELECT r.id, r.body FROM rules_vals r
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id, metadata)
SELECT
  'wcc_witcher_events_is_in_danger_o' || to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  r.id,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
JOIN rules_vals r ON vals.group_id = r.group_id
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_events_risk', 'wcc_witcher_events_is_in_danger';
-- <<< END sql/055_witcher_events_is_in_danger.sql

-- >>> BEGIN sql/056_witcher_events_danger_events.sql

\echo '056_witcher_events_danger_events.sql'

-- –£–∑–µ–ª: –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è ‚Äî –û–ø–∞—Å–Ω–æ—Å—Ç–∏
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_events' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , '{"dice":"d0"}'::jsonb AS metadata)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–∞–∫–∏–µ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏–∫–ª—é—á–∏–ª–∏—Å—å —Å –≤–∞–º–∏.', 'body'),
                ('en', 'Determine which dangers befell you.', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
             ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
             ck_id('witcher_cc.hierarchy.witcher_events_danger_events')::text
           )
         )
     FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_events' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES-- RU
          ('ru', 1, '<b>–î–æ–ª–≥</b><br>–ò–∑-–∑–∞ —Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏—è, –∏–≥—Ä –≤ –≥–≤–∏–Ω—Ç –∏ —Ç–æ–º—É –ø–æ–¥–æ–±–Ω–æ–≥–æ –≤—ã –∑–∞–¥–æ–ª–∂–∞–ª–∏ –æ—Ç 100 –¥–æ 1000 –∫—Ä–æ–Ω –∑–∞–≤–µ–¥–µ–Ω–∏—é –∏–ª–∏ –±–ª–∞–≥–æ—Ä–æ–¥–Ω–æ–º—É –¥–æ–º—É.'),
          ('ru', 2, '<b>–†–∞–∑—É–º–Ω–æ–µ —á—É–¥–æ–≤–∏—â–µ —Å–±–µ–∂–∞–ª–æ</b><br>–¢—Ä–æ–ª–ª—å, –∫–∞—Ç–∞–∫–∞–Ω, –≤–æ–ª–∫–æ–ª–∞–∫ –∏–ª–∏ –∏–Ω–æ–µ —Ä–∞–∑—É–º–Ω–æ–µ —á—É–¥–æ–≤–∏—â–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –æ—Ö–æ—Ç–∏–ª–∏—Å—å, —É—à–ª–æ –æ—Ç –≤–∞—Å –∏ –±—Ä–æ–¥–∏—Ç –Ω–∞ —Å–≤–æ–±–æ–¥–µ. –í–æ–∑–º–æ–∂–Ω–æ, –æ–¥–Ω–∞–∂–¥—ã –æ–Ω–æ –≤–µ—Ä–Ω—ë—Ç—Å—è –∑–∞ –≤–∞–º–∏.'),
          ('ru', 3, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b><br>–í—ã –ø–µ—Ä–µ–∂–∏–ª–∏ —Ç—è–∂—ë–ª—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –∏ –ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–∏–ª–∏—Å—å –∫ —á–µ–º—É-—Ç–æ.'),
          ('ru', 4, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b><br>–í—ã –ø—Ä–æ–≤–µ–ª–∏ –æ—Ç 1 –¥–æ 10 –ª–µ—Ç –≤ —Ç—é—Ä—å–º–µ ‚Äî –ø–æ –ª–æ–∂–Ω–æ–º—É –æ–±–≤–∏–Ω–µ–Ω–∏—é –∏–ª–∏ –∑–∞ —Å–æ–≤–µ—Ä—à—ë–Ω–Ω–æ–µ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ.'),
          ('ru', 5, '<b>–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ</b><br>–ö–æ–º—É-—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≤–∞—Å, –ª–∏–±–æ –≤—ã —Å—Ç–∞–ª–∏ —É–¥–æ–±–Ω—ã–º –∫–æ–∑–ª–æ–º –æ—Ç–ø—É—â–µ–Ω–∏—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –æ–±–≤–∏–Ω–µ–Ω–∏—è: –≤–æ—Ä–æ–≤—Å—Ç–≤–æ, –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —É–±–∏–π—Å—Ç–≤–æ, –∏–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ, –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–µ –∫–æ–ª–¥–æ–≤—Å—Ç–≤–æ.'),
          ('ru', 6, '<b>–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ</b><br>–î—Ä—É–≥ –∏–ª–∏ –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–∞–ª –≤–∞—Å. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è: —à–∞–Ω—Ç–∞–∂, —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –≤–∞—à–µ–π —Ç–∞–π–Ω—ã –∏–ª–∏ –Ω–∞–ø–∞–¥–µ–Ω–∏–µ.'),
          ('ru', 7, '<b>–£–±–∏—Ç –¥—Ä—É–≥ –∏–ª–∏ –ª—é–±–∏–º—ã–π</b><br>–ö–æ–≥–æ-—Ç–æ –∏–∑ –≤–∞—à–∏—Ö –±–ª–∏–∑–∫–∏—Ö —É–±–∏–ª–∏. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: —á—É–¥–æ–≤–∏—â–µ, –∫–∞–∑–Ω—å, —É–±–∏–π—Å—Ç–≤–æ –∏–ª–∏ –æ—Ç—Ä–∞–≤–ª–µ–Ω–∏–µ.'),
          ('ru', 8, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ</b><br>–í –∫–∞–∫–æ–π-—Ç–æ —Å—Ç—Ä–∞–Ω–µ –≤—ã —Å—Ç–∞–ª–∏ –≤–Ω–µ –∑–∞–∫–æ–Ω–∞ –∏–∑-–∑–∞ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –∏–ª–∏ –ª–æ–∂–Ω—ã—Ö –æ–±–≤–∏–Ω–µ–Ω–∏–π. –¢–µ–ø–µ—Ä—å –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞.'),
          ('ru', 9, '<b>–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏—è</b><br>–í–∞—Å –æ–±–º–∞–Ω–æ–º –∑–∞—Å—Ç–∞–≤–∏–ª–∏ –Ω–∞—Ä—É—à–∏—Ç—å –Ω–µ–π—Ç—Ä–∞–ª–∏—Ç–µ—Ç. –ö–∞–∫ –∏–º–µ–Ω–Ω–æ ‚Äî —Ä–µ—à–∞–π—Ç–µ —Å–∞–º–∏, –Ω–æ —Ç–µ, –∫—Ç–æ –∑–Ω–∞–µ—Ç –≤–∞—à—É —Ä–µ–ø—É—Ç–∞—Ü–∏—é, —É–≤–µ—Ä–µ–Ω—ã: –≤—ã –±–æ–ª—å—à–µ –Ω–µ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã.'),
          ('ru',10, '<b>–ü—Ä–æ–∫–ª—è—Ç</b><br>–í—ã –±—ã–ª–∏ –ø—Ä–æ–∫–ª—è—Ç—ã. –ü—Ä–∏—Ä–æ–¥–∞ –ø—Ä–æ–∫–ª—è—Ç–∏—è –∏ —Å–ø–æ—Å–æ–± –µ–≥–æ —Å–Ω—è—Ç–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –≤–µ–¥—É—â–µ–≥–æ. –û–Ω –Ω–µ –æ–±—è–∑–∞–Ω —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å –≤–∞–º —ç—Ç–∏ –¥–µ—Ç–∞–ª–∏.'),

          -- EN
          ('en', 1, '<b>Debt</b><br>Through broken gear, gwent matches, or similar misfortunes, you have run up a debt of 100 to 1000 crowns to an establishment or noble house.'),
          ('en', 2, '<b>Sentient Monster Escaped</b><br>A troll, katakan, werewolf, or other sentient monster you were hunting escaped you and is now wandering free. It may come for you someday.'),
          ('en', 3, '<b>Addiction</b><br>You fell on hard times and developed an addiction.'),
          ('en', 4, '<b>Imprisoned</b><br>You spent between 1 and 10 years in prison, either due to a false accusation or an actual crime you committed.'),
          ('en', 5, '<b>Falsely Accused</b><br>Someone wanted you gone, or you were an easy scapegoat. Possible charges: theft, betrayal, murder, rape, or illegal witchcraft.'),
          ('en', 6, '<b>Betrayed</b><br>A friend or lover betrayed you. Possible outcomes: blackmail, exposure of a secret, or a direct attack.'),
          ('en', 7, '<b>Friend or Lover Killed</b><br>Someone close to you was killed. Possible causes: a monster, an execution, a murder, or poisoning.'),
          ('en', 8, '<b>Outlawed in a Kingdom</b><br>In some kingdom you became an outlaw because of a crime or false accusations. There, you are wanted by the Guard.'),
          ('en', 9, '<b>Manipulated</b><br>You were deceived into breaking your neutrality. You decide how it happened, but anyone who knows your reputation knows you are no longer neutral.'),
          ('en',10, '<b>Cursed</b><br>You were afflicted by a curse. The nature of the curse and how it can be lifted are up to your GM, who is not required to reveal them to you.')

 ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM00') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_danger_events_o' || to_char(vals.num, 'FM00'),
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM00') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  '{}'::jsonb AS metadata
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority) 
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_events', 'wcc_witcher_events_is_in_danger_o0103', 1 UNION ALL
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_events', 'wcc_witcher_events_is_in_danger_o0203', 1 UNION ALL
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_events', 'wcc_witcher_events_is_in_danger_o0303', 1 UNION ALL
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_events', 'wcc_witcher_events_is_in_danger_o0403', 1
  ;

-- i18n –¥–ª—è event_type "–ù–µ—É–¥–∞—á–∞" / "Misfortune" (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ –Ω–æ–¥–µ 57)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_events_details' AS qu_id
                , 'character' AS entity)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_misfortune') AS id
       , meta.entity, 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–ù–µ—É–¥–∞—á–∞'),
      ('en', 'Misfortune')
    ) AS v(lang, text)
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING;

-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ 2 –∏ 9
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_events' AS qu_id
                , 'character' AS entity)
, desc_vals AS (
  SELECT v.*
  FROM (VALUES
    -- –í–∞—Ä–∏–∞–Ω—Ç 2: –†–∞–∑—É–º–Ω–æ–µ —á—É–¥–æ–≤–∏—â–µ —Å–±–µ–∂–∞–ª–æ
    ('ru', 2, '–†–∞–∑—É–º–Ω–æ–µ —á—É–¥–æ–≤–∏—â–µ —Å–±–µ–∂–∞–ª–æ –æ—Ç –≤–∞—Å –≤–æ –≤—Ä–µ–º—è –æ—Ö–æ—Ç—ã –∏ –±—Ä–æ–¥–∏—Ç –Ω–∞ —Å–≤–æ–±–æ–¥–µ.'),
    -- –í–∞—Ä–∏–∞–Ω—Ç 9: –ú–∞–Ω–∏–ø—É–ª—è—Ü–∏—è
    ('ru', 9, '–ù–µ–π—Ç—Ä–∞–ª–∏—Ç–µ—Ç –Ω–∞—Ä—É—à–µ–Ω –æ–±–º–∞–Ω–æ–º –≤ –≥–ª–∞–∑–∞—Ö –∑–Ω–∞–∫–æ–º—ã—Ö —Å –≤–∞—à–µ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π'),
    -- EN translations
    ('en', 2, 'A sentient monster escaped from you during hunting and is now wandering free'),
    ('en', 9, 'Neutrality broken by deception in the eyes of those who know your reputation')
  ) AS v(lang, num, text)
)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(desc_vals.num, 'FM00') ||'.'|| 'event_desc') AS id
       , meta.entity, 'event_desc', desc_vals.lang, desc_vals.text
    FROM desc_vals
    CROSS JOIN meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ lifeEvents –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ 2 –∏ 9
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_events' AS qu_id)
, desc_vals AS (
  SELECT v.*
  FROM (VALUES (2), (9)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT
  'character', 'wcc_witcher_events_danger_events_o' || to_char(desc_vals.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_events_details' ||'.'|| 'event_type_misfortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| meta.qu_id ||'_o'|| to_char(desc_vals.num, 'FM00') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM desc_vals
CROSS JOIN meta;
-- <<< END sql/056_witcher_events_danger_events.sql

-- >>> BEGIN sql/057_witcher_events_danger_events_details.sql

\echo '057_witcher_events_danger_events_details.sql'

-- –í–æ–ø—Ä–æ—Å: —É—Ç–æ—á–Ω–µ–Ω–∏—è –∫ –æ–ø–∞—Å–Ω–æ—Å—Ç—è–º –≤–µ–¥—å–º–∞–∫–∞
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_events_details' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id,entity,entity_field,lang,text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru','–†–∞—Å–∫—Ä–æ–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç–∏.'),
        ('en','Pick the specific outcome for your danger.')
      ) AS v(lang,text)
      CROSS JOIN meta
  )
, c_vals(lang,num,text) AS (
    VALUES
      ('ru',1,'–®–∞–Ω—Å'),
      ('ru',2,'–£—Ç–æ—á–Ω–µ–Ω–∏–µ'),
      ('en',1,'Chance'),
      ('en',2,'Detail')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id,entity,entity_field,lang,text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id,su_su_id,title,body,qtype,metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_events_details' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_events_details')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (RU/EN)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_events_details' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    -- 1. –î–æ–ª–≥
    ( 1, 1, 0.1, '<b>–î–æ–ª–≥</b>: 100 –∫—Ä–æ–Ω'),
    ( 1, 2, 0.1, '<b>–î–æ–ª–≥</b>: 200 –∫—Ä–æ–Ω'),
    ( 1, 3, 0.1, '<b>–î–æ–ª–≥</b>: 300 –∫—Ä–æ–Ω'),
    ( 1, 4, 0.1, '<b>–î–æ–ª–≥</b>: 400 –∫—Ä–æ–Ω'),
    ( 1, 5, 0.1, '<b>–î–æ–ª–≥</b>: 500 –∫—Ä–æ–Ω'),
    ( 1, 6, 0.1, '<b>–î–æ–ª–≥</b>: 600 –∫—Ä–æ–Ω'),
    ( 1, 7, 0.1, '<b>–î–æ–ª–≥</b>: 700 –∫—Ä–æ–Ω'),
    ( 1, 8, 0.1, '<b>–î–æ–ª–≥</b>: 800 –∫—Ä–æ–Ω'),
    ( 1, 9, 0.1, '<b>–î–æ–ª–≥</b>: 900 –∫—Ä–æ–Ω'),
    ( 1,10, 0.1, '<b>–î–æ–ª–≥</b>: 1000 –∫—Ä–æ–Ω'),

    -- 3. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
    ( 3, 1, 0.125, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b>: –ê–ª–∫–æ–≥–æ–ª—å'),
    ( 3, 2, 0.125, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b>: –¢–∞–±–∞–∫'),
    ( 3, 3, 0.125, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b>: –§–∏—Å—à—Ç–µ—Ö'),
    ( 3, 4, 0.125, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b>: –ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã'),
    ( 3, 5, 0.125, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b>: –ö–ª–µ–ø—Ç–æ–º–∞–Ω–∏—è'),
    ( 3, 6, 0.125, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b>: –ü–æ—Ö–æ—Ç—å'),
    ( 3, 7, 0.125, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b>: –û–±–∂–æ—Ä—Å—Ç–≤–æ'),
    ( 3, 8, 0.125, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b>: –ê–¥—Ä–µ–Ω–∞–ª–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
    ( 3, 10, 0.0, '<b>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</b>: –î—Ä—É–≥–æ–µ (–º–æ–∂–µ—Ç–µ –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–∞–º–∏)'),

    -- 4. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
    ( 4, 1, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 1 –≥–æ–¥'),
    ( 4, 2, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 2 –≥–æ–¥–∞'),
    ( 4, 3, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 3 –≥–æ–¥–∞'),
    ( 4, 4, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 4 –≥–æ–¥–∞'),
    ( 4, 5, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 5 –ª–µ—Ç'),
    ( 4, 6, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 6 –ª–µ—Ç'),
    ( 4, 7, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 7 –ª–µ—Ç'),
    ( 4, 8, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 8 –ª–µ—Ç'),
    ( 4, 9, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 9 –ª–µ—Ç'),
    ( 4,10, 0.1, '<b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</b>: 10 –ª–µ—Ç'),

    -- 5. –õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ (1‚Äì3; 4‚Äì5; 6‚Äì8; 9; 10)
    ( 5, 1, 0.30, '<b>–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ</b>: –∫—Ä–∞–∂–∞'),
    ( 5, 2, 0.20, '<b>–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ</b>: –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∏–ª–∏ —Ç—Ä—É—Å–æ—Å—Ç—å'),
    ( 5, 3, 0.30, '<b>–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ</b>: —É–±–∏–π—Å—Ç–≤–æ'),
    ( 5, 4, 0.10, '<b>–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ</b>: –∏–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ'),
    ( 5, 5, 0.10, '<b>–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ</b>: –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–µ –∫–æ–ª–¥–æ–≤—Å—Ç–≤–æ'),

    -- 6. –ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ (1‚Äì3; 4‚Äì7; 8‚Äì10)
    ( 6, 1, 0.30, '<b>–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ</b>: —à–∞–Ω—Ç–∞–∂'),
    ( 6, 2, 0.40, '<b>–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ</b>: —Ä–∞—Å–∫—Ä—ã—Ç–∞ –≤–∞—à–∞ —Ç–∞–π–Ω–∞'),
    ( 6, 3, 0.30, '<b>–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ</b>: –Ω–∞ –≤–∞—Å –Ω–∞–ø–∞–ª–∏'),

    -- 7. –£–±–∏—Ç –¥—Ä—É–≥ –∏–ª–∏ –ª—é–±–∏–º—ã–π (1‚Äì3; 4‚Äì6; 7‚Äì8; 9‚Äì10)
    ( 7, 1, 0.30, '<b>–£–±–∏—Ç –¥—Ä—É–≥ –∏–ª–∏ –ª—é–±–∏–º—ã–π</b>: –ø–æ–≥–∏–± –æ—Ç —á—É–¥–æ–≤–∏—â–∞'),
    ( 7, 2, 0.30, '<b>–£–±–∏—Ç –¥—Ä—É–≥ –∏–ª–∏ –ª—é–±–∏–º—ã–π</b>: –∫–∞–∑–Ω—ë–Ω'),
    ( 7, 3, 0.20, '<b>–£–±–∏—Ç –¥—Ä—É–≥ –∏–ª–∏ –ª—é–±–∏–º—ã–π</b>: –∂–µ—Ä—Ç–≤–∞ —É–±–∏–π—Ü—ã'),
    ( 7, 4, 0.20, '<b>–£–±–∏—Ç –¥—Ä—É–≥ –∏–ª–∏ –ª—é–±–∏–º—ã–π</b>: –æ—Ç—Ä–∞–≤–ª–µ–Ω'),

    -- 8. –í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ - —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤
    ( 8, 1, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –†–µ–¥–∞–Ω–∏—è'),
    ( 8, 2, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –ö–∞—ç–¥–≤–µ–Ω'),
    ( 8, 3, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –¢–µ–º–µ—Ä–∏—è'),
    ( 8, 4, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –ê—ç–¥–∏—Ä–Ω'),
    ( 8, 5, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –õ–∏—Ä–∏—è'),
    ( 8, 6, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –†–∏–≤–∏—è'),
    ( 8, 7, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –ö–æ–≤–∏—Ä'),
    ( 8, 8, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –ü–æ–≤–∏—Å'),
    ( 8, 9, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –°–∫–µ–ª–ª–∏–≥–µ'),
    ( 8,10, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –¶–∏–¥–∞—Ä–∏—Å'),
    ( 8,11, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–µ—Ä–¥—ç–Ω'),
    ( 8,12, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –¶–∏–Ω—Ç—Ä–∞'),
    ( 8,13, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞'),
    ( 8,14, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –í–∏–∫–æ–≤–∞—Ä–æ'),
    ( 8,15, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ê–∏–≥—Ä–µ–Ω'),
    ( 8,16, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ù–∞–∑–∞–∏—Ä'),
    ( 8,17, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–µ—Ç–∏–∏–Ω–∞'),
    ( 8,18, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–∞–≥ –¢—É—Ä–≥–∞'),
    ( 8,19, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ì–µ—Å–æ'),
    ( 8,20, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –≠–±–±–∏–Ω–≥'),
    ( 8,21, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–µ—Ö—Ç'),
    ( 8,22, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ì–µ–º–º–µ—Ä–∞'),
    ( 8,23, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –≠—Ç–æ–ª–∏—è'),
    ( 8,24, 0.041, '<b>–í–Ω–µ –∑–∞–∫–æ–Ω–∞</b>: –í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –¢—É—Å—Å–µ–Ω—Ç'),

    -- 10. –ü—Ä–æ–∫–ª—è—Ç - –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ–∫–ª—è—Ç–∏–π
    (10, 1, 0.2, '<b>–ü—Ä–æ–∫–ª—è—Ç</b>: –ü—Ä–æ–∫–ª—è—Ç–∏–µ —á—É–¥–æ–≤–∏—â–Ω–æ—Å—Ç–∏'),
    (10, 2, 0.2, '<b>–ü—Ä–æ–∫–ª—è—Ç</b>: –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤'),
    (10, 3, 0.2, '<b>–ü—Ä–æ–∫–ª—è—Ç</b>: –ü—Ä–æ–∫–ª—è—Ç–∏–µ –∑–∞—Ä–∞–∑—ã'),
    (10, 4, 0.2, '<b>–ü—Ä–æ–∫–ª—è—Ç</b>: –ü—Ä–æ–∫–ª—è—Ç–∏–µ —Å—Ç—Ä–∞–Ω–Ω–∏–∫–∞'),
    (10, 5, 0.2, '<b>–ü—Ä–æ–∫–ª—è—Ç</b>: –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–∏'),
    (10, 6, 0.0, '<b>–ü—Ä–æ–∫–ª—è—Ç</b>: –î—Ä—É–≥–æ–µ (–º–æ–∂–µ—Ç–µ –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–∞–º–∏)')
  ) AS raw_data_ru(group_id, num, probability, txt)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES

      -- 1. Debt
    ( 1, 1, 0.1, '<b>Debt</b>: 100 crowns'),
    ( 1, 2, 0.1, '<b>Debt</b>: 200 crowns'),
    ( 1, 3, 0.1, '<b>Debt</b>: 300 crowns'),
    ( 1, 4, 0.1, '<b>Debt</b>: 400 crowns'),
    ( 1, 5, 0.1, '<b>Debt</b>: 500 crowns'),
    ( 1, 6, 0.1, '<b>Debt</b>: 600 crowns'),
    ( 1, 7, 0.1, '<b>Debt</b>: 700 crowns'),
    ( 1, 8, 0.1, '<b>Debt</b>: 800 crowns'),
    ( 1, 9, 0.1, '<b>Debt</b>: 900 crowns'),
    ( 1,10, 0.1, '<b>Debt</b>: 1,000 crowns'),

    -- 3. Addiction
    ( 3, 1, 0.125, '<b>Addiction</b>: Alcohol'),
    ( 3, 2, 0.125, '<b>Addiction</b>: Tobacco'),
    ( 3, 3, 0.125, '<b>Addiction</b>: Fisstech'),
    ( 3, 4, 0.125, '<b>Addiction</b>: Gambling'),
    ( 3, 5, 0.125, '<b>Addiction</b>: Kleptomania'),
    ( 3, 6, 0.125, '<b>Addiction</b>: Lust'),
    ( 3, 7, 0.125, '<b>Addiction</b>: Gluttony'),
    ( 3, 8, 0.125, '<b>Addiction</b>: Adrenaline addiction'),
    ( 3,10, 0.0, '<b>Addiction</b>: Other (create your own)'),

    -- 4. Imprisonment
    ( 4, 1, 0.1, '<b>Imprisonment</b>: 1 year'),
    ( 4, 2, 0.1, '<b>Imprisonment</b>: 2 years'),
    ( 4, 3, 0.1, '<b>Imprisonment</b>: 3 years'),
    ( 4, 4, 0.1, '<b>Imprisonment</b>: 4 years'),
    ( 4, 5, 0.1, '<b>Imprisonment</b>: 5 years'),
    ( 4, 6, 0.1, '<b>Imprisonment</b>: 6 years'),
    ( 4, 7, 0.1, '<b>Imprisonment</b>: 7 years'),
    ( 4, 8, 0.1, '<b>Imprisonment</b>: 8 years'),
    ( 4, 9, 0.1, '<b>Imprisonment</b>: 9 years'),
    ( 4,10, 0.1, '<b>Imprisonment</b>: 10 years'),

    -- 5. Falsely Accused (1‚Äì3; 4‚Äì5; 6‚Äì8; 9; 10)
    ( 5, 1, 0.30, '<b>Falsely Accused</b>: theft'),
    ( 5, 2, 0.20, '<b>Falsely Accused</b>: betrayal or cowardice'),
    ( 5, 3, 0.30, '<b>Falsely Accused</b>: murder'),
    ( 5, 4, 0.10, '<b>Falsely Accused</b>: rape'),
    ( 5, 5, 0.10, '<b>Falsely Accused</b>: illegal witchcraft'),

    -- 6. Betrayed (1‚Äì3; 4‚Äì7; 8‚Äì10)
    ( 6, 1, 0.30, '<b>Betrayed</b>: blackmailed'),
    ( 6, 2, 0.40, '<b>Betrayed</b>: a secret was exposed'),
    ( 6, 3, 0.30, '<b>Betrayed</b>: you were attacked'),

    -- 7. Friend or Lover Killed (1‚Äì3; 4‚Äì6; 7‚Äì8; 9‚Äì10)
    ( 7, 1, 0.30, '<b>Friend or Lover Killed</b>: slain by a monster'),
    ( 7, 2, 0.30, '<b>Friend or Lover Killed</b>: executed'),
    ( 7, 3, 0.20, '<b>Friend or Lover Killed</b>: murdered'),
    ( 7, 4, 0.20, '<b>Friend or Lover Killed</b>: poisoned'),

    -- 8. Outlawed in a Kingdom - list of kingdoms
    ( 8, 1, 0.041, '<b>Outlawed</b>: Redania'),
    ( 8, 2, 0.041, '<b>Outlawed</b>: Kaedwen'),
    ( 8, 3, 0.041, '<b>Outlawed</b>: Temeria'),
    ( 8, 4, 0.041, '<b>Outlawed</b>: Aedirn'),
    ( 8, 5, 0.041, '<b>Outlawed</b>: Lyria'),
    ( 8, 6, 0.041, '<b>Outlawed</b>: Rivia'),
    ( 8, 7, 0.041, '<b>Outlawed</b>: Kovir'),
    ( 8, 8, 0.041, '<b>Outlawed</b>: Poviss'),
    ( 8, 9, 0.041, '<b>Outlawed</b>: Skellige'),
    ( 8,10, 0.041, '<b>Outlawed</b>: Cidaris'),
    ( 8,11, 0.041, '<b>Outlawed</b>: Verden'),
    ( 8,12, 0.041, '<b>Outlawed</b>: Cintra'),
    ( 8,13, 0.041, '<b>Outlawed</b>: The Heart of Nilfgaard'),
    ( 8,14, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Vicovaro'),
    ( 8,15, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Angren'),
    ( 8,16, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Nazair'),
    ( 8,17, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Mettina'),
    ( 8,18, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Mag Turga'),
    ( 8,19, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Gheso'),
    ( 8,20, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Ebbing'),
    ( 8,21, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Maecht'),
    ( 8,22, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Gemmeria'),
    ( 8,23, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Etolia'),
    ( 8,24, 0.041, '<b>Outlawed</b>: Nilfgaardian Vassal State - Toussaint'),

    -- 10. Cursed - curse options
    (10, 1, 0.2, '<b>Cursed</b>: Curse of Monstrosity'),
    (10, 2, 0.2, '<b>Cursed</b>: Curse of Phantoms'),
    (10, 3, 0.2, '<b>Cursed</b>: Curse of Pestilence'),
    (10, 4, 0.2, '<b>Cursed</b>: Curse of the Wanderer'),
    (10, 5, 0.2, '<b>Cursed</b>: Curse of Lycanthropy'),
    (10, 6, 0.0, '<b>Cursed</b>: Other (create your own)')
  ) AS raw_data_en(group_id, num, probability, txt)
),

vals AS (
  SELECT ('<td>'||to_char(probability*100,'FM990.00')||'%</td>'
         ||'<td>'||txt||'</td>') AS text
       , group_id
       , num
       , probability
       , lang
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)

, rules_vals(group_id, id, body) AS (
    SELECT v.group_id
         , gen_random_uuid()
         , ('{
               "and":
                 [
                   { "==":
                       [
                         { "var": "answers.lastAnswer.questionId" },
                         "wcc_witcher_events_danger_events"
                       ]
                   },
                   { "in":
                       [
                         "wcc_witcher_events_danger_events_o' || to_char(v.group_id, 'FM00') || '" ,
                         { "var": "answers.lastAnswer.answerIds" }
                       ]
                   }
                 ]
             }')::jsonb FROM (SELECT DISTINCT group_id FROM raw_data) v(group_id)
),
ins_rules AS (
  INSERT INTO rules(ru_id, body) SELECT r.id, r.body FROM rules_vals r
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, visible_ru_ru_id, sort_order,metadata)
SELECT
  'wcc_witcher_events_danger_events_details_o'||to_char(vals.group_id,'FM00')||to_char(vals.num,'FM00'),
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  r.id,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
JOIN rules_vals r ON vals.group_id = r.group_id
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_witcher_events_danger_events_details', 'wcc_life_events_fortune_or_not_details_addiction', 'wcc_witcher_events_danger_events_details_o0310', 1;
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_witcher_events_danger_events_details', 'wcc_life_events_fortune_or_not_details_curse', 'wcc_witcher_events_danger_events_details_o1006', 1;


INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  VALUES
    ('wcc_witcher_events_danger_events','wcc_witcher_events_danger_events_details','wcc_witcher_events_danger_events_o01',1),
    ('wcc_witcher_events_danger_events','wcc_witcher_events_danger_events_details','wcc_witcher_events_danger_events_o03',1),
    ('wcc_witcher_events_danger_events','wcc_witcher_events_danger_events_details','wcc_witcher_events_danger_events_o04',1),
    ('wcc_witcher_events_danger_events','wcc_witcher_events_danger_events_details','wcc_witcher_events_danger_events_o05',1),
    ('wcc_witcher_events_danger_events','wcc_witcher_events_danger_events_details','wcc_witcher_events_danger_events_o06',1),
    ('wcc_witcher_events_danger_events','wcc_witcher_events_danger_events_details','wcc_witcher_events_danger_events_o07',1),
    ('wcc_witcher_events_danger_events','wcc_witcher_events_danger_events_details','wcc_witcher_events_danger_events_o08',1),
    ('wcc_witcher_events_danger_events','wcc_witcher_events_danger_events_details','wcc_witcher_events_danger_events_o10',1);

-- i18n –¥–ª—è event_type "–ù–µ—É–¥–∞—á–∞" / "Misfortune"
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_events_details' AS qu_id
                , 'character' AS entity)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_misfortune') AS id
       , meta.entity, 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–ù–µ—É–¥–∞—á–∞'),
      ('en', 'Misfortune')
    ) AS v(lang, text)
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING;

-- i18n –¥–ª—è event_desc (–∫—Ä–∞—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è lifeEvents)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_events_details' AS qu_id
                , 'character' AS entity)
, desc_vals AS (
  SELECT v.*
  FROM (VALUES
    -- –ì—Ä—É–ø–ø–∞ 1: –î–æ–ª–≥
    ('ru', 1, 1, '–î–æ–ª–≥ 100 –∫—Ä–æ–Ω'),
    ('ru', 1, 2, '–î–æ–ª–≥ 200 –∫—Ä–æ–Ω'),
    ('ru', 1, 3, '–î–æ–ª–≥ 300 –∫—Ä–æ–Ω'),
    ('ru', 1, 4, '–î–æ–ª–≥ 400 –∫—Ä–æ–Ω'),
    ('ru', 1, 5, '–î–æ–ª–≥ 500 –∫—Ä–æ–Ω'),
    ('ru', 1, 6, '–î–æ–ª–≥ 600 –∫—Ä–æ–Ω'),
    ('ru', 1, 7, '–î–æ–ª–≥ 700 –∫—Ä–æ–Ω'),
    ('ru', 1, 8, '–î–æ–ª–≥ 800 –∫—Ä–æ–Ω'),
    ('ru', 1, 9, '–î–æ–ª–≥ 900 –∫—Ä–æ–Ω'),
    ('ru', 1, 10, '–î–æ–ª–≥ 1000 –∫—Ä–æ–Ω'),
    
    -- –ì—Ä—É–ø–ø–∞ 3: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (–∫—Ä–æ–º–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ 10, –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥–µ—Ç –≤ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é)
    ('ru', 3, 1, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å - –ê–ª–∫–æ–≥–æ–ª—å'),
    ('ru', 3, 2, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å - –¢–∞–±–∞–∫'),
    ('ru', 3, 3, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å - –§–∏—Å—à—Ç–µ—Ö'),
    ('ru', 3, 4, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å - –ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã'),
    ('ru', 3, 5, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å - –ö–ª–µ–ø—Ç–æ–º–∞–Ω–∏—è'),
    ('ru', 3, 6, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å - –ü–æ—Ö–æ—Ç—å'),
    ('ru', 3, 7, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å - –û–±–∂–æ—Ä—Å—Ç–≤–æ'),
    ('ru', 3, 8, '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å - –ê–¥—Ä–µ–Ω–∞–ª–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'),
    
    -- –ì—Ä—É–ø–ø–∞ 4: –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
    ('ru', 4, 1, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 1 –≥–æ–¥'),
    ('ru', 4, 2, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 2 –≥–æ–¥–∞'),
    ('ru', 4, 3, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 3 –≥–æ–¥–∞'),
    ('ru', 4, 4, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 4 –≥–æ–¥–∞'),
    ('ru', 4, 5, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 5 –ª–µ—Ç'),
    ('ru', 4, 6, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 6 –ª–µ—Ç'),
    ('ru', 4, 7, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 7 –ª–µ—Ç'),
    ('ru', 4, 8, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 8 –ª–µ—Ç'),
    ('ru', 4, 9, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 9 –ª–µ—Ç'),
    ('ru', 4, 10, '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç—é—Ä—å–º–µ –Ω–∞ 10 –ª–µ—Ç'),
    
    -- –ì—Ä—É–ø–ø–∞ 5: –õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ
    ('ru', 5, 1, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ –≤ –∫—Ä–∞–∂–µ'),
    ('ru', 5, 2, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–µ'),
    ('ru', 5, 3, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ –≤ —É–±–∏–π—Å—Ç–≤–µ'),
    ('ru', 5, 4, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ –≤ –∏–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–∏'),
    ('ru', 5, 5, '–õ–æ–∂–Ω–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ –≤ –∫–æ–ª–¥–æ–≤—Å—Ç–≤–µ'),
    
    -- –ì—Ä—É–ø–ø–∞ 6: –ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ
    ('ru', 6, 1, '–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ - —à–∞–Ω—Ç–∞–∂'),
    ('ru', 6, 2, '–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ - —Ä–∞—Å–∫—Ä—ã—Ç–∞ —Ç–∞–π–Ω–∞'),
    ('ru', 6, 3, '–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ - –Ω–∞–ø–∞–¥–µ–Ω–∏–µ'),
    
    -- –ì—Ä—É–ø–ø–∞ 7: –£–±–∏—Ç –¥—Ä—É–≥ –∏–ª–∏ –ª—é–±–∏–º—ã–π
    ('ru', 7, 1, '–£–±–∏—Ç –±–ª–∏–∑–∫–∏–π - –ø–æ–≥–∏–± –æ—Ç —á—É–¥–æ–≤–∏—â–∞'),
    ('ru', 7, 2, '–£–±–∏—Ç –±–ª–∏–∑–∫–∏–π - –∫–∞–∑–Ω—ë–Ω'),
    ('ru', 7, 3, '–£–±–∏—Ç –±–ª–∏–∑–∫–∏–π - –∂–µ—Ä—Ç–≤–∞ —É–±–∏–π—Ü—ã'),
    ('ru', 7, 4, '–£–±–∏—Ç –±–ª–∏–∑–∫–∏–π - –æ—Ç—Ä–∞–≤–ª–µ–Ω'),
    
    -- EN translations
    ('en', 1, 1, 'Debt 100 crowns'),
    ('en', 1, 2, 'Debt 200 crowns'),
    ('en', 1, 3, 'Debt 300 crowns'),
    ('en', 1, 4, 'Debt 400 crowns'),
    ('en', 1, 5, 'Debt 500 crowns'),
    ('en', 1, 6, 'Debt 600 crowns'),
    ('en', 1, 7, 'Debt 700 crowns'),
    ('en', 1, 8, 'Debt 800 crowns'),
    ('en', 1, 9, 'Debt 900 crowns'),
    ('en', 1, 10, 'Debt 1,000 crowns'),
    
    ('en', 3, 1, 'Addiction - Alcohol'),
    ('en', 3, 2, 'Addiction - Tobacco'),
    ('en', 3, 3, 'Addiction - Fisstech'),
    ('en', 3, 4, 'Addiction - Gambling'),
    ('en', 3, 5, 'Addiction - Kleptomania'),
    ('en', 3, 6, 'Addiction - Lust'),
    ('en', 3, 7, 'Addiction - Gluttony'),
    ('en', 3, 8, 'Addiction - Adrenaline'),
    
    ('en', 4, 1, 'Imprisonment for 1 year'),
    ('en', 4, 2, 'Imprisonment for 2 years'),
    ('en', 4, 3, 'Imprisonment for 3 years'),
    ('en', 4, 4, 'Imprisonment for 4 years'),
    ('en', 4, 5, 'Imprisonment for 5 years'),
    ('en', 4, 6, 'Imprisonment for 6 years'),
    ('en', 4, 7, 'Imprisonment for 7 years'),
    ('en', 4, 8, 'Imprisonment for 8 years'),
    ('en', 4, 9, 'Imprisonment for 9 years'),
    ('en', 4, 10, 'Imprisonment for 10 years'),
    
    ('en', 5, 1, 'Falsely accused of theft'),
    ('en', 5, 2, 'Falsely accused of betrayal'),
    ('en', 5, 3, 'Falsely accused of murder'),
    ('en', 5, 4, 'Falsely accused of rape'),
    ('en', 5, 5, 'Falsely accused of witchcraft'),
    
    ('en', 6, 1, 'Betrayed - blackmailed'),
    ('en', 6, 2, 'Betrayed - secret exposed'),
    ('en', 6, 3, 'Betrayed - attacked'),
    
    ('en', 7, 1, 'Friend/lover killed by monster'),
    ('en', 7, 2, 'Friend/lover executed'),
    ('en', 7, 3, 'Friend/lover murdered'),
    ('en', 7, 4, 'Friend/lover poisoned'),
    
    -- –ì—Ä—É–ø–ø–∞ 8: –í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–µ
    ('ru', 8, 1, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –†–µ–¥–∞–Ω–∏–∏, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 2, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ö–∞—ç–¥–≤–µ–Ω–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 3, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –¢–µ–º–µ—Ä–∏–∏, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 4, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ê—ç–¥–∏—Ä–Ω–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 5, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –õ–∏—Ä–∏–∏, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 6, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –†–∏–≤–∏–∏, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 7, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ö–æ–≤–∏—Ä–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 8, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ü–æ–≤–∏—Å—Å–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 9, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –°–∫–µ–ª–ª–∏–≥–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 10, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –¶–∏–¥–∞—Ä–∏—Å–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 11, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –í–µ—Ä–¥—ç–Ω–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 12, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –¶–∏–Ω—Ç—Ä–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 13, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 14, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –í–∏–∫–æ–≤–∞—Ä–æ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 15, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ê–∏–≥—Ä–µ–Ω–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 16, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ù–∞–∑–∞–∏—Ä–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 17, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ú–µ—Ç–∏–∏–Ω–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 18, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ú–∞–≥ –¢—É—Ä–≥–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 19, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ì–µ—Å–æ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 20, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –≠–±–±–∏–Ω–≥–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 21, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ú–µ—Ö—Ç–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 22, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –ì–µ–º–º–µ—Ä–∏–∏, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 23, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –≠—Ç–æ–ª–∏–∏, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    ('ru', 8, 24, '–í–Ω–µ –∑–∞–∫–æ–Ω–∞ –≤ –¢—É—Å—Å–µ–Ω—Ç–µ, –≤–∞—Å —Ä–∞–∑—ã—Å–∫–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–∂–∞'),
    
    -- –ì—Ä—É–ø–ø–∞ 10: –ü—Ä–æ–∫–ª—è—Ç–∏–µ (–∫—Ä–æ–º–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ 6, –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥–µ—Ç –≤ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é)
    ('ru', 10, 1, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ —á—É–¥–æ–≤–∏—â–Ω–æ—Å—Ç–∏ (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è)'),
    ('ru', 10, 2, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è)'),
    ('ru', 10, 3, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ –∑–∞—Ä–∞–∑—ã (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è)'),
    ('ru', 10, 4, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ —Å—Ç—Ä–∞–Ω–Ω–∏–∫–∞ (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è)'),
    ('ru', 10, 5, '–ü—Ä–æ–∫–ª—è—Ç–∏–µ –ª–∏–∫–∞–Ω—Ç—Ä–æ–ø–∏–∏ (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è)'),
    
    -- EN translations –¥–ª—è –≥—Ä—É–ø–ø 8 –∏ 10
    ('en', 8, 1, 'Outlawed in Redania, you are wanted by the Guard'),
    ('en', 8, 2, 'Outlawed in Kaedwen, you are wanted by the Guard'),
    ('en', 8, 3, 'Outlawed in Temeria, you are wanted by the Guard'),
    ('en', 8, 4, 'Outlawed in Aedirn, you are wanted by the Guard'),
    ('en', 8, 5, 'Outlawed in Lyria, you are wanted by the Guard'),
    ('en', 8, 6, 'Outlawed in Rivia, you are wanted by the Guard'),
    ('en', 8, 7, 'Outlawed in Kovir, you are wanted by the Guard'),
    ('en', 8, 8, 'Outlawed in Poviss, you are wanted by the Guard'),
    ('en', 8, 9, 'Outlawed in Skellige, you are wanted by the Guard'),
    ('en', 8, 10, 'Outlawed in Cidaris, you are wanted by the Guard'),
    ('en', 8, 11, 'Outlawed in Verden, you are wanted by the Guard'),
    ('en', 8, 12, 'Outlawed in Cintra, you are wanted by the Guard'),
    ('en', 8, 13, 'Outlawed in The Heart of Nilfgaard, you are wanted by the Guard'),
    ('en', 8, 14, 'Outlawed in Vicovaro, you are wanted by the Guard'),
    ('en', 8, 15, 'Outlawed in Angren, you are wanted by the Guard'),
    ('en', 8, 16, 'Outlawed in Nazair, you are wanted by the Guard'),
    ('en', 8, 17, 'Outlawed in Mettina, you are wanted by the Guard'),
    ('en', 8, 18, 'Outlawed in Mag Turga, you are wanted by the Guard'),
    ('en', 8, 19, 'Outlawed in Gheso, you are wanted by the Guard'),
    ('en', 8, 20, 'Outlawed in Ebbing, you are wanted by the Guard'),
    ('en', 8, 21, 'Outlawed in Maecht, you are wanted by the Guard'),
    ('en', 8, 22, 'Outlawed in Gemmeria, you are wanted by the Guard'),
    ('en', 8, 23, 'Outlawed in Etolia, you are wanted by the Guard'),
    ('en', 8, 24, 'Outlawed in Toussaint, you are wanted by the Guard'),
    
    ('en', 10, 1, 'Curse of Monstrosity (Intensity: Moderate)'),
    ('en', 10, 2, 'Curse of Phantoms (Intensity: Moderate)'),
    ('en', 10, 3, 'Curse of Pestilence (Intensity: High)'),
    ('en', 10, 4, 'Curse of the Wanderer (Intensity: High)'),
    ('en', 10, 5, 'Curse of Lycanthropy (Intensity: High)')
  ) AS v(lang, group_id, num, text)
)
, ins_desc AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*desc_vals.group_id+desc_vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', desc_vals.lang, desc_vals.text
      FROM desc_vals
      CROSS JOIN meta
)
-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ lifeEvents –¥–ª—è –≤—Å–µ—Ö –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
-- –ò—Å–∫–ª—é—á–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç 3-10 (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å "–î—Ä—É–≥–æ–µ"), –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥–µ—Ç –≤ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é
INSERT INTO effects (scope, an_an_id, body)
SELECT DISTINCT
  'character', 'wcc_witcher_events_danger_events_details_o' || to_char(desc_vals.group_id, 'FM00') || to_char(desc_vals.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_misfortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*desc_vals.group_id+desc_vals.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM desc_vals
CROSS JOIN meta
WHERE NOT (desc_vals.group_id = 3 AND desc_vals.num = 10)   -- –ò—Å–∫–ª—é—á–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç "–î—Ä—É–≥–æ–µ" –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  AND NOT (desc_vals.group_id = 10 AND desc_vals.num = 6);  -- –ò—Å–∫–ª—é—á–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç "–î—Ä—É–≥–æ–µ" –¥–ª—è –ø—Ä–æ–∫–ª—è—Ç–∏—è

























-- <<< END sql/057_witcher_events_danger_events_details.sql

-- >>> BEGIN sql/060_witcher_events_danger_wounds.sql

\echo '060_witcher_events_danger_wounds.sql'

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_wounds' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru','–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä—å—ë–∑–Ω—É—é —Ä–∞–Ω—É, –æ—Å—Ç–∞–≤–∏–≤—à—É—é –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è.'),
        ('en','Choose a serious wound that left long-term effects.')
      ) AS v(lang,text)
      CROSS JOIN meta
  )
, c_vals(lang,num,text) AS (
    VALUES
      ('ru',1,'–†–∞–Ω–∞'),
      ('ru',2,'–≠—Ñ—Ñ–µ–∫—Ç'),
      ('ru',3,'–û–ø–∏—Å–∞–Ω–∏–µ'),
      ('en',1,'Wound'),
      ('en',2,'Effect'),
      ('en',3,'Description')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id,entity,entity_field,lang,text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id,su_su_id,title,body,qtype,metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd0',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_wounds' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_wounds')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_wounds' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1,'–ü–ª–æ—Ö–æ –≥–Ω—ë—Ç—Å—è –∫–æ–ª–µ–Ω–æ'             ,'-1 –∫ –°–∫–æ—Ä'                        , '–ü–æ—Å–ª–µ —É–∂–∞—Å–Ω–æ–≥–æ —Ä–∞–Ω–µ–Ω–∏—è –≤–∞—à–∞ –Ω–æ–≥–∞ –±—ã–ª–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤ –Ω–µ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –î–∞–∂–µ –ø–æ—Å–ª–µ —Ö–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ –ª–∏—Ç—Ä–æ–≤ –≤–µ–¥—å–º–∞—á—å–∏—Ö —ç–ª–∏–∫—Å–∏—Ä–æ–≤ –≤–∞—à–µ –∫–æ–ª–µ–Ω–æ –Ω–µ —Ç–æ, —á—Ç–æ —Ä–∞–Ω—å—à–µ.'),
    (2,'–ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π –≥–ª–∞–∑'               ,'-1 –∫ –∑—Ä–∏—Ç–µ–ª—å–Ω–æ–º—É –í–Ω–∏–º–∞–Ω–∏—é'        , '–û–±—ã—á–Ω–æ –≤–µ–¥—å–º–∞–∫–∏ –¥–≤–∏–≥–∞—é—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ, —á—Ç–æ–±—ã —É–π—Ç–∏ –æ—Ç —É–¥–∞—Ä–∞ –ø–æ –≤–∞–∂–Ω–æ–º—É –º–µ—Å—Ç—É, –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —á—É–¥–æ–≤–∏—â–∞ –±—ã—Å—Ç—Ä–µ–µ. –ò–∑-–∑–∞ —É–¥–∞—Ä–∞ –≤ –≥–ª–∞–∑ –≤—ã —á—É—Ç—å —Ö—É–∂–µ –≤–∏–¥–∏—Ç–µ.'),
    (3,'–ü–ª–æ—Ö–æ –≥–Ω—ë—Ç—Å—è —Ä—É–∫–∞'               ,'-1 –∫ –ë–ª–∏–∂–Ω–µ–º—É –±–æ—é —ç—Ç–æ–π —Ä—É–∫–æ–π'     , '–ü–æ—Å–ª–µ —É–¥–∞—Ä–∞ –ø–æ —Ä—É–∫–µ –≤—ã –º–Ω–æ–≥–æ –º–µ—Å—è—Ü–µ–≤ –ª–µ—á–∏–ª–∏—Å—å, –Ω–æ –≤ –∏—Ç–æ–≥–µ —Ä—É–∫–∞ —Å—Ç–∞–ª–∞ —á—É—Ç—å –∂–µ—Å—Ç—á–µ. –í—ã –º–æ–∂–µ—Ç–µ –¥–µ—Ä–∂–∞—Ç—å –º–µ—á –∏ —Å—Ä–∞–∂–∞—Ç—å—Å—è, –Ω–æ —Å–∫–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç–∏ –≤–∞–º –º–µ—à–∞–µ—Ç.'),
    (4,'–ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ –ø–∞–ª—å—Ü—ã'             ,'–ù–µ–ª—å–∑—è —Å–æ—Ç–≤–æ—Ä—è—Ç—å –∑–Ω–∞–∫–∏ —ç—Ç–æ–π —Ä—É–∫–æ–π', '–í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ —Å–ª–µ–¥—Å—Ç–≤–∏–µ –ø—ã—Ç–∫–∏ –∏–ª–∏ –æ—á–µ–Ω—å –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ —É–¥–∞—Ä–∞ –ø–æ —Ä—É–∫–µ –≤ –±–æ—é ‚Äî –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –ø–∞–ª—å—Ü—ã —ç—Ç–æ–π —Ä—É–∫–∏ –ø–ª–æ—Ö–æ —Å–ª—É—à–∞—é—Ç—Å—è.'),
    (5,'–ù–∞–∫–æ–Ω–µ—á–Ω–∏–∫ —Å—Ç—Ä–µ–ª—ã –∑–∞—Å—Ç—Ä—è–ª –≤ —Ç–µ–ª–µ','-1 –∫ –°–∏–ª–µ'                        , '–í –≤–∞—Å –ø–æ–ø–∞–ª–∏ —Å—Ç—Ä–µ–ª–æ–π —Å –∑–∞–∑—É–±—Ä–µ–Ω–Ω—ã–º –Ω–∞–∫–æ–Ω–µ—á–Ω–∏–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Å–µ–ª –≥–ª—É–±–æ–∫–æ –≤ –º—ã—à—Ü–∞—Ö. –° —Ç–µ—Ö –ø–æ—Ä –≤–∞–º –±–æ–ª—å–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å —Ç—è–∂–µ—Å—Ç–∏.'),
    (6,'–û–¥—ã—à–∫–∞'                          ,'-5 –∫ –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏'                , '–í–∞—Å –ø—Ä–æ—Ç–∫–Ω—É–ª–∏ –ª—ë–≥–∫–æ–µ –∏–ª–∏ –≤—ã –≤–¥–æ—Ö–Ω—É–ª–∏ —Ç–æ–∫—Å–∏—á–Ω—ã–π –≥–∞–∑. –¢–∞–∫ –∏–ª–∏ –∏–Ω–∞—á–µ, –≤–∞—à–∏ –ª—ë–≥–∫–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã, –¥—ã—à–∞—Ç—å —Å—Ç–∞–ª–æ —Ç—è–∂–µ–ª–µ–µ.'),
    (7,'–û–≥—Ä–æ–º–Ω—ã–π —à—Ä–∞–º'                   ,'-2 –∫ –•–∞—Ä–∏–∑–º–µ –∏ –°–æ–±–ª–∞–∑–Ω–µ–Ω–∏—é'       , '–ù–∏—á–µ–≥–æ –Ω–µ–æ–±—ã—á–Ω–æ–≥–æ –≤ —Ç–æ–º, —á—Ç–æ –≤–µ–¥—å–º–∞–∫ –ø–æ–∫—Ä—ã—Ç —à—Ä–∞–º–∞–º–∏, –Ω–æ –≤–∞—Å –∏–∑—É—Ä–æ–¥–æ–≤–∞–ª–æ –æ—Å–æ–±–µ–Ω–Ω–æ —Å–∏–ª—å–Ω–æ. –ù–∞ –≤—Å—ë –ª–∏—Ü–æ —É –≤–∞—Å –≥–ª—É–±–æ–∫–∏–π —à—Ä–∞–º.'),
    (8,'–ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π –Ω–æ—Å'                ,'-2 –∫ –í—ã–∂–∏–≤–∞–Ω–∏—é –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ –ø—Ä–∏ –≤—ã—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ –ø–æ –∑–∞–ø–∞—Ö—É', '–ù–µ—Å–∫–æ–ª—å–∫–æ —É–¥–∞—Ä–æ–≤ –ø–æ –ª–∏—Ü—É –≤ –¥—Ä–∞–∫–∞—Ö (–∏–ª–∏ —è–¥–æ–≤–∏—Ç—ã–µ –≥–∞–∑—ã) –ø–æ–≤—Ä–µ–¥–∏–ª–∏ –≤–∞—à –Ω–æ—Å –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª–∏—à–∏–ª–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—ã—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ –∑–∞–ø–∞—Ö—É.'),
    (9,'–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –æ—Ç —è–¥–∞'              ,'-5 –ü—É–Ω–∫—Ç –ó–¥–æ—Ä–æ–≤—å—è'                , '–¢–æ–∫—Å–∏–Ω—ã, —á—Ç–æ –Ω–µ–∫–æ–≥–¥–∞ –æ—Ç—Ä–∞–≤–∏–ª–∏ –≤–∞—à—É –∫—Ä–æ–≤—å, –æ—Å—Ç–∞–≤–∏–ª–∏ –Ω–∞ –∫–æ–∂–µ —á—ë—Ä–Ω—ã–µ –≤–µ–Ω—ã –≤–æ–∫—Ä—É–≥ —Ä–∞–Ω—ã –∏ –æ—Å–ª–∞–±–∏–ª–∏ —Ç–µ–ª–æ.'),
    (10,'–ü–æ–ª—É–ø–ª—É—Ö–æ–π'                     ,'-1 –∫ —Å–ª—É—Ö–æ–≤–æ–º—É –í–Ω–∏–º–∞–Ω–∏—é'          , '–ú–Ω–æ–≥–∏–µ —á—É–¥–æ–≤–∏—â–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–µ –∑–≤—É–∫–æ–≤—ã–µ –∞—Ç–∞–∫–∏. –í–∞–º –ø–æ–≤–µ–∑–ª–æ –ø–µ—Ä–µ–∂–∏—Ç—å —Ç–∞–∫–æ–µ –Ω–∞–ø–∞–¥–µ–Ω–∏–µ, –Ω–æ —Å–ª—É—Ö —É–∂–µ –Ω–µ —Ç–æ—Ç.')
  ) AS raw_data_ru(num, wound, effect, descr)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1,'Stiff Knee'         ,'-1 SPD'                       , 'A horrible wound to your leg left it shattered and nearly unrepairable. Even after surgery and a regimen of witcher potions, it has never been the same.'),
    (2,'Damaged Eye'        ,'-1 Sight Awareness'           , 'Usually witchers are fast enough to avoid a vital strike, but some monsters are too fast. A shot to your eye left it mildly hazy.'),
    (3,'Stiff Arm'          ,'-1 Melee with that arm'       , 'A shattering blow to your arm left you with weeks of recovery and a stiff arm. You can still hold a sword and fight, but the stiffness always aggravates you.'),
    (4,'Damaged Fingers'    ,'Can‚Äôt do signs with that hand', 'It may have been the result of torture or just a very unlucky strike to that hand in combat, but its fingers are stiff and awkward.'),
    (5,'Embedded Arrowhead' ,'-1 Physique'                  , 'A marksman‚Äôs shot and a barbed head left an arrow-head deep in your body, lodged in your muscle. Strenuous lifting has been painful ever since.'),
    (6,'Wheeze'             ,'-5 Stamina'                   , 'You may have been stabbed in the lung or inhaled a toxic gas. Either way, your lungs have been damaged; breathing normally is somewhat difficult.'),
    (7,'Huge Scar'          ,'-2 Charm & Seduction'         , 'It‚Äôs not uncommon for a witcher‚Äôs body to be a patchwork of scars. However you have sustained a blow that disfigured your face.'),
    (8,'Damaged Nose'       ,'-2 Scent Tracking'            , 'A number of punches to the face in bar fights (or toxic gases) have damaged your nose and nearly robbed you of your scent tracking.'),
    (9,'Venom Damage'       ,'-5 Health'                    , 'Toxins that once coursed through you left a patchwork of blackened veins around the wound and weakened your body.'),
    (10,'Half Deafened'     ,'-1 Hearing Awareness'         , 'Many monsters use deadly sonic attacks. You were lucky enough to survive one, but your ears will never be the same.')
  ) AS raw_data_en(num, wound, effect, descr)
),

vals AS (
  SELECT
    ('<td><b>'||wound||'</b></td>'
     ||'<td>'||effect||'</td>'
     ||'<td>'||descr||'</td>') AS text,
    num, lang
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id,entity,entity_field,lang,text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id,su_su_id,qu_qu_id,label,sort_order,metadata)
SELECT
  'wcc_witcher_events_danger_wounds_o'||to_char(vals.num,'FM00'),
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  '{}'::jsonb
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- i18n –¥–ª—è eventType "–ù–µ—É–¥–∞—á–∞"
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_wounds' AS qu_id
                , 'character' AS entity)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_problems') AS id
     , meta.entity, 'event_type', v.lang, v.text
  FROM (VALUES
    ('ru', '–†–∞–Ω–µ–Ω–∏—è'),
    ('en', 'Wounds')
  ) AS v(lang, text)
  CROSS JOIN meta;

-- i18n –¥–ª—è event_desc (–∫—Ä–∞—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è lifeEvents)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_wounds' AS qu_id
                , 'character' AS entity)
, desc_vals AS (
  SELECT v.*
  FROM (VALUES
    -- –†—É—Å—Å–∫–∏–π
    ('ru', 1, '[–°–∫–æ—Ä -1] –ü–ª–æ—Ö–æ –≥–Ω–µ—Ç—Å—è –∫–æ–ª–µ–Ω–æ. –ù–æ–≥–∞ –±—ã–ª–∞ –≤ –Ω–µ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.'),
    ('ru', 2, '–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π –≥–ª–∞–∑. -1 –∫ –∑—Ä–∏—Ç–µ–ª—å–Ω–æ–º—É –í–Ω–∏–º–∞–Ω–∏—é.'),
    ('ru', 3, '–ü–ª–æ—Ö–æ –≥–Ω—ë—Ç—Å—è —Ä—É–∫–∞. -1 –∫ –ë–ª–∏–∂–Ω–µ–º—É –±–æ—é —ç—Ç–æ–π —Ä—É–∫–æ–π.'),
    ('ru', 4, '–ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ –ø–∞–ª—å—Ü—ã. –ù–µ–ª—å–∑—è —Å–æ—Ç–≤–æ—Ä—è—Ç—å –∑–Ω–∞–∫–∏ —ç—Ç–æ–π —Ä—É–∫–æ–π.'),
    ('ru', 5, '[–°–∏–ª–∞ -1] –ù–∞–∫–æ–Ω–µ—á–Ω–∏–∫ —Å—Ç—Ä–µ–ª—ã –∑–∞—Å–µ–ª –≥–ª—É–±–æ–∫–æ –≤ –º—ã—à—Ü–∞—Ö.'),
    ('ru', 6, '[–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å -5] –õ—ë–≥–∫–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã, –¥—ã—à–∞—Ç—å —Å—Ç–∞–ª–æ —Ç—è–∂–µ–ª–µ–µ.'),
    ('ru', 7, '[–•–∞—Ä–∏–∑–º–∞ -2, –°–æ–±–ª–∞–∑–Ω–µ–Ω–µ -2] –£—Ä–æ–¥–ª–∏–≤—ã–π —à—Ä–∞–º –Ω–∞ –ª–∏—Ü–µ.'),
    ('ru', 8, '–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π –Ω–æ—Å. -2 –∫ –í—ã–∂–∏–≤–∞–Ω–∏—é –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ –ø—Ä–∏ –≤—ã—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ –ø–æ –∑–∞–ø–∞—Ö—É.'),
    ('ru', 9, '[–ú–∞–∫—Å–∏–º—É–º –ó–¥–æ—Ä–æ–≤—å—è -5] –Ø–¥ –æ—Å—Ç–∞–≤–∏–ª —á–µ—Ä–Ω—ã–µ –≤–µ–Ω—ã –≤–æ–∫—Ä—É–≥ —Ä–∞–Ω—ã –∏ –æ—Å–ª–∞–±–∏–ª —Ç–µ–ª–æ.'),
    ('ru', 10, '–°–ª—É—Ö –ø–æ–≤—Ä–µ–∂–¥—ë–Ω –ø–æ—Å–ª–µ –∑–≤—É–∫–æ–≤–æ–π –∞—Ç–∞–∫–∏. -1 –∫ —Å–ª—É—Ö–æ–≤–æ–º—É –í–Ω–∏–º–∞–Ω–∏—é.'),
    -- English
    ('en', 1, '[SPD -1] Stiff knee. Leg was in an unrepairable state.'),
    ('en', 2, 'Damaged eye. -1 Sight Awareness.'),
    ('en', 3, 'Stiff arm. -1 Melee with that arm.'),
    ('en', 4, 'Damaged fingers. Can''t do signs with that hand.'),
    ('en', 5, '[Physique -1] Arrowhead lodged deep in muscles.'),
    ('en', 6, '[Stamina -5] Lungs damaged, breathing became harder.'),
    ('en', 7, '[Charisma -2, Seduction -2] Ugly scar on face.'),
    ('en', 8, 'Damaged nose. -2 Wilderness Survival when tracking by scent.'),
    ('en', 9, '[Max Health -5] Poison left black veins around wound and weakened body.'),
    ('en', 10, 'Hearing damaged after sonic attack. -1 Hearing Awareness.')
  ) AS v(lang, num, text)
)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(desc_vals.num, 'FM9900') ||'.'|| 'event_desc') AS id
     , meta.entity, 'event_desc', desc_vals.lang, desc_vals.text
  FROM desc_vals
  CROSS JOIN meta;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ lifeEvents –¥–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_wounds' AS qu_id)
INSERT INTO effects (scope, an_an_id, body)
SELECT
  'character', 'wcc_witcher_events_danger_wounds_o' || to_char(vals.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_type_problems')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS vals(num)
CROSS JOIN meta
UNION ALL
-- –®—Ç—Ä–∞—Ñ—ã –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ 1, 5, 6, 7, 9
-- –í–∞—Ä–∏–∞–Ω—Ç 1: -1 –∫ SPD.bonus
SELECT 'character', 'wcc_witcher_events_danger_wounds_o01',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.statistics.SPD.bonus'),
      -1
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 5: -1 –∫ physique.bonus
SELECT 'character', 'wcc_witcher_events_danger_wounds_o05',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.physique.bonus'),
      -1
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 6: -5 –∫ STA.bonus
SELECT 'character', 'wcc_witcher_events_danger_wounds_o06',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.statistics.calculated.STA.bonus'),
      -5
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 7: -2 –∫ charisma.bonus –∏ -2 –∫ seduction.bonus
SELECT 'character', 'wcc_witcher_events_danger_wounds_o07',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.charisma.bonus'),
      -2
    )
  )
FROM meta
UNION ALL
SELECT 'character', 'wcc_witcher_events_danger_wounds_o07',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.seduction.bonus'),
      -2
    )
  )
FROM meta
UNION ALL
-- –í–∞—Ä–∏–∞–Ω—Ç 9: -5 –∫ max_HP.bonus
SELECT 'character', 'wcc_witcher_events_danger_wounds_o09',
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.statistics.calculated.max_HP.bonus'),
      -5
    )
  )
FROM meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority) 
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_wounds', 'wcc_witcher_events_is_in_danger_o0102', 1 UNION ALL
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_wounds', 'wcc_witcher_events_is_in_danger_o0202', 1 UNION ALL
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_wounds', 'wcc_witcher_events_is_in_danger_o0302', 1 UNION ALL
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_wounds', 'wcc_witcher_events_is_in_danger_o0402', 1
  ;
-- <<< END sql/060_witcher_events_danger_wounds.sql

-- >>> BEGIN sql/061_witcher_events_danger_enemy_gender.sql

\echo '061_witcher_events_danger_enemy_gender.sql'

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_gender' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–∞–∫–æ–≥–æ –ø–æ–ª–∞ –≤–∞—à –≤—Ä–∞–≥.'),
        ('en', 'Determine the gender of your enemy.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ü–æ–ª –≤—Ä–∞–≥–∞'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Enemy Gender')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_enemy_gender' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy_gender')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (50/50)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_gender' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.6, '–ú—É–∂—Å–∫–æ–π'),
    (2, 0.4, '–ñ–µ–Ω—Å–∫–∏–π')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.6, 'Male'),
    (2, 0.4, 'Female')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_danger_enemy_gender_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
    'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority) 
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_enemy_gender', 'wcc_witcher_events_is_in_danger_o0104', 1 UNION ALL
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_enemy_gender', 'wcc_witcher_events_is_in_danger_o0204', 1 UNION ALL
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_enemy_gender', 'wcc_witcher_events_is_in_danger_o0304', 1 UNION ALL
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events_danger_enemy_gender', 'wcc_witcher_events_is_in_danger_o0404', 1
  ;
-- <<< END sql/061_witcher_events_danger_enemy_gender.sql

-- >>> BEGIN sql/062_witcher_events_danger_enemy_profession.sql

\echo '062_witcher_events_danger_enemy_profession.sql'

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_profession' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è –≤—Ä–∞–≥–∞'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Enemy''s Profession')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , NULL
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_enemy_profession' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy_profession')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (50/50)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_profession' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.2, '–î–≤–æ—Ä—è–Ω–∏–Ω'),
    (2, 0.2, '–ù–∞—ë–º–Ω–∏–∫'),
    (3, 0.2, '–í–æ–∏–Ω'),
    (4, 0.2, '–¢–æ—Ä–≥–æ–≤–µ—Ü'),
    (5, 0.2, '–ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.2, 'Nobleman'),
    (2, 0.2, 'Mercenary'),
    (3, 0.2, 'Soldier'),
    (4, 0.2, 'Merchant'),
    (5, 0.2, 'Criminal')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_danger_enemy_profession_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id) 
  SELECT 'wcc_witcher_events_danger_enemy_gender', 'wcc_witcher_events_danger_enemy_profession'
  ;
-- <<< END sql/062_witcher_events_danger_enemy_profession.sql

-- >>> BEGIN sql/063_witcher_events_danger_enemy_reason.sql

\echo '063_witcher_events_danger_enemy_reason.sql'

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_reason' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ü—Ä–∏—á–∏–Ω–∞'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Cause')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , NULL
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_enemy_reason' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy_reason')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (50/50)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_reason' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.2, '–û–Ω –≤–∞—Å –æ–∫–ª–µ–≤–µ—Ç–∞–ª'),
    (2, 0.2, '–í—ã –ø–æ–º–µ—à–∞–ª–∏ –µ–≥–æ –ø–ª–∞–Ω—É'),
    (3, 0.2, '–û–Ω –≤–∞—Å –ø—Ä–µ–¥–∞–ª'),
    (4, 0.2, '–í—ã —É–±–∏–ª–∏ –µ–≥–æ —Ä–æ–¥–∏—á–∞'),
    (5, 0.2, '–û–Ω –æ–±–º–∞–Ω—É–ª –≤–∞—Å')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.2, 'They slandered you'),
    (2, 0.2, 'You foiled their plan'),
    (3, 0.2, 'They betrayed you'),
    (4, 0.2, 'You killed their kin'),
    (5, 0.2, 'They cheated you')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_danger_enemy_reason_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id) 
  SELECT 'wcc_witcher_events_danger_enemy_profession', 'wcc_witcher_events_danger_enemy_reason'
  ;
-- <<< END sql/063_witcher_events_danger_enemy_reason.sql

-- >>> BEGIN sql/064_witcher_events_danger_enemy_strength.sql

\echo '064_witcher_events_danger_enemy_strength.sql'

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_strength' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–°–∏–ª–∞'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Power')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , NULL
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_enemy_strength' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy_strength')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (50/50)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_strength' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.2, '–°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ'),
    (2, 0.2, '–ó–Ω–∞–Ω–∏–µ'),
    (3, 0.2, '–§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞'),
    (4, 0.2, '–ü–æ–¥—Ä—É—á–Ω—ã–µ'),
    (5, 0.2, '–ú–∞–≥–∏—è')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.2, 'Social standing'),
    (2, 0.2, 'Knowledge'),
    (3, 0.2, 'Physical'),
    (4, 0.2, 'Minions'),
    (5, 0.2, 'Magic')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_danger_enemy_strength_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id) 
  SELECT 'wcc_witcher_events_danger_enemy_reason', 'wcc_witcher_events_danger_enemy_strength'
  ;
-- <<< END sql/064_witcher_events_danger_enemy_strength.sql

-- >>> BEGIN sql/065_witcher_events_danger_enemy_result.sql

\echo '065_witcher_events_danger_enemy_result.sql'

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_result' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ò—Ç–æ–≥'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Escalation')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , NULL
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_enemy_result' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy_result')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (50/50)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_result' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.2, '–ü–æ—á—Ç–∏ –∑–∞–±—ã—Ç–æ'),
    (2, 0.2, '–£–¥–∞—Ä –≤ —Å–ø–∏–Ω—É'),
    (3, 0.2, '–û—Ç–∫—Ä—ã—Ç–∞—è –≤—Ä–∞–∂–¥–∞'),
    (4, 0.2, '–¢—Ä–∞–≤–ª—è –≤ –æ—Ç–º–µ—Å—Ç–∫—É'),
    (5, 0.2, '–ñ–∞–∂–¥–∞ –∫—Ä–æ–≤–∏')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.2, 'Mostly forgotten'),
    (2, 0.2, 'Backstabbing'),
    (3, 0.2, 'Outright violent'),
    (4, 0.2, 'Hunting revenge'),
    (5, 0.2, 'Out for blood')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_danger_enemy_result_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –ü–µ—Ä–µ—Ö–æ–¥: –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç 01 ¬´–†–µ–±—ë–Ω–æ–∫ –ø–æ –ü—Ä–∞–≤—É –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏¬ª, —Å–Ω–∞—á–∞–ª–∞ —É—Ç–æ—á–Ω—è–µ–º –ø–æ–ª
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id) 
  SELECT 'wcc_witcher_events_danger_enemy_strength', 'wcc_witcher_events_danger_enemy_result'
  ;
-- <<< END sql/065_witcher_events_danger_enemy_result.sql

-- >>> BEGIN sql/066_witcher_events_danger_enemy_is_alive.sql

\echo '066_witcher_events_danger_enemy_is_alive.sql'

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_is_alive' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∂–∏–≤ –ª–∏ –≤–∞—à –≤—Ä–∞–≥.'),
        ('en', 'Determine if your enemy alive.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ñ–∏–≤ –ª–∏?'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Is alive?')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_enemy_is_alive' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy_is_alive')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (50/50)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_is_alive' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.7, '–í—Ä–∞–≥ –∂–∏–≤'),
    (2, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 10 –ª–µ—Ç'),
    (3, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 20 –ª–µ—Ç'),
    (4, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 30 –ª–µ—Ç'),
    (5, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 40 –ª–µ—Ç'),
    (6, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 50 –ª–µ—Ç'),
    (7, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 60 –ª–µ—Ç'),
    (8, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 70 –ª–µ—Ç'),
    (9, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 80 –ª–µ—Ç'),
    (10, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 90 –ª–µ—Ç'),
    (11, 0.03, '–í—Ä–∞–≥ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 100 –ª–µ—Ç')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.7, 'The enemy is alive'),
    (2, 0.03, 'The enemy is dead now, but had been living for 10 years before it happened.'),
    (3, 0.03, 'The enemy is dead now, but had been living for 20 years before it happened.'),
    (4, 0.03, 'The enemy is dead now, but had been living for 30 years before it happened.'),
    (5, 0.03, 'The enemy is dead now, but had been living for 40 years before it happened.'),
    (6, 0.03, 'The enemy is dead now, but had been living for 50 years before it happened.'),
    (7, 0.03, 'The enemy is dead now, but had been living for 60 years before it happened.'),
    (8, 0.03, 'The enemy is dead now, but had been living for 70 years before it happened.'),
    (9, 0.03, 'The enemy is dead now, but had been living for 80 years before it happened.'),
    (10, 0.03, 'The enemy is dead now, but had been living for 90 years before it happened.'),
    (11, 0.03, 'The enemy is dead now, but had been living for 100 years before it happened.')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_danger_enemy_is_alive_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–∞–≥–∞ –≤ –º–∞—Å—Å–∏–≤ enemies (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞ 1 - "–í—Ä–∞–≥ –∂–∏–≤")
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_is_alive' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_events_danger_enemy_is_alive_o01',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.enemies'),
      jsonb_build_object(
        'gender', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_gender'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'position', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_profession'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'the_cause', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_reason'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'power', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_strength'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'escalation_level', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_result'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'is_alive', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_is_alive'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value'))))
      )
    )
  )
FROM meta;

-- i18n –¥–ª—è eventType "–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏" (—Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–∞–∫–∂–µ –≤ –¥—Ä—É–≥–∏—Ö –Ω–æ–¥–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º ON CONFLICT)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏'),
      ('en', 'Allies and Enemies')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ lifeEvents (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–∞—Ä–∏–∞–Ω—Ç—É –æ—Ç–≤–µ—Ç–∞ 1)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_is_alive' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è description "–í—Ä–∞–≥"
, ins_desc_enemy AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_enemy') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–í—Ä–∞–≥'),
        ('en', 'Enemy')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_events_danger_enemy_is_alive_o01',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_enemy')::text)
      )
    )
  )
FROM meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id) 
  SELECT 'wcc_witcher_events_danger_enemy_result', 'wcc_witcher_events_danger_enemy_is_alive'
  ;
-- <<< END sql/066_witcher_events_danger_enemy_is_alive.sql

-- >>> BEGIN sql/067_witcher_events_danger_enemy_death_reason.sql

\echo '067_witcher_events_danger_enemy_death_reason.sql'

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_death_reason' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–ö–∞–∫ —É–º–µ—Ä –≤—Ä–∞–≥'),
        ('en', 'How Did They Die')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ü—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Death')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_danger_enemy_death_reason' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_danger')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_danger_enemy_death_reason')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (50/50)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_death_reason' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.3, '–í–æ–π–Ω–∞'),
    (2, 0.3, '–£–±–∏—Ç –≤–∞–º–∏'),
    (3, 0.3, '–ù–∞–ø–∞–¥–µ–Ω–∏–µ —á—É–¥–æ–≤–∏—â–∞'),
    (4, 0.1, '–ú–∏—Ä–Ω–∞—è —Å–º–µ—Ä—Ç—å')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.3, 'Casualty of War'),
    (2, 0.3, 'You Killed Them'),
    (3, 0.3, 'Monster Attack'),
    (4, 0.1, 'Died Peacefully')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_danger_enemy_death_reason_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–∞–≥–∞ –≤ –º–∞—Å—Å–∏–≤ enemies (–ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –≤–æ–ø—Ä–æ—Å—É)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_death_reason' AS qu_id
                , 'character' AS entity)
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.enemies'),
      jsonb_build_object(
        'gender', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_gender'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'position', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_profession'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'the_cause', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_reason'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'power', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_strength'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'escalation_level', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_result'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'is_alive', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_is_alive'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'death_reason', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_danger_enemy_death_reason'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value'))))
      )
    )
  )
FROM meta;

-- i18n –¥–ª—è eventType "–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏" (—Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–∞–∫–∂–µ –≤ –¥—Ä—É–≥–∏—Ö –Ω–æ–¥–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º ON CONFLICT)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏'),
      ('en', 'Allies and Enemies')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ lifeEvents (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–æ–ø—Ä–æ—Å—É)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_danger_enemy_death_reason' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è description "–í—Ä–∞–≥"
, ins_desc_enemy AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_enemy') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–í—Ä–∞–≥'),
        ('en', 'Enemy')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_enemy')::text)
      )
    )
  )
FROM meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id) 
  SELECT 'wcc_witcher_events_danger_enemy_is_alive', 'wcc_witcher_events_danger_enemy_death_reason'
  ;
-- <<< END sql/067_witcher_events_danger_enemy_death_reason.sql

-- >>> BEGIN sql/068_witcher_events.sql

\echo '068_witcher_events.sql'


-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å –≤–∞–º–∏ –∑–∞ —Ç–µ–∫—É—â—É—é –¥–µ–∫–∞–¥—É.'),
        ('en', 'Determine what happened to you during this decade.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ò—Å—Ö–æ–¥'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Outcome')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 1, 0.1, '–í—ã–≥–æ–¥–∞'),
    (1, 2, 0.1, '–°–æ—é–∑–Ω–∏–∫'),
    (1, 3, 0.1, '–û—Ö–æ—Ç–∞'),
    (1, 4, 0.7, '–ù–∏—á–µ–≥–æ'),

    (2, 1, 0.1, '–í—ã–≥–æ–¥–∞'),
    (2, 2, 0.1, '–°–æ—é–∑–Ω–∏–∫'),
    (2, 3, 0.3, '–û—Ö–æ—Ç–∞'),
    (2, 4, 0.5, '–ù–∏—á–µ–≥–æ'),

    (3, 1, 0.2, '–í—ã–≥–æ–¥–∞'),
    (3, 2, 0.2, '–°–æ—é–∑–Ω–∏–∫'),
    (3, 3, 0.1, '–û—Ö–æ—Ç–∞'),
    (3, 4, 0.5, '–ù–∏—á–µ–≥–æ'),

    (4, 1, 0.25, '–í—ã–≥–æ–¥–∞'),
    (4, 2, 0.225, '–°–æ—é–∑–Ω–∏–∫'),
    (4, 3, 0.225, '–û—Ö–æ—Ç–∞'),
    (4, 4, 0.3, '–ù–∏—á–µ–≥–æ')
  ) AS raw_data_ru(group_id, num, probability, txt)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 1, 0.1, 'Benefit'),
    (1, 2, 0.1, 'Ally'),
    (1, 3, 0.1, 'A Hunt'),
    (1, 4, 0.7, 'Nothing'),

    (2, 1, 0.1, 'Benefit'),
    (2, 2, 0.1, 'Ally'),
    (2, 3, 0.3, 'A Hunt'),
    (2, 4, 0.5, 'Nothing'),

    (3, 1, 0.2, 'Benefit'),
    (3, 2, 0.2, 'Ally'),
    (3, 3, 0.1, 'A Hunt'),
    (3, 4, 0.5, 'Nothing'),

    (4, 1, 0.5, 'Benefit'),
    (4, 2, 0.2, 'Ally'),
    (4, 3, 0.2, 'A Hunt'),
    (4, 4, 0.1, 'Nothing')
  ) AS raw_data_en(group_id, num, probability, txt)
),
vals AS (
  SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' || 
          '<td>' || txt                                  || '</td>') AS text
    , num
    , group_id
    , probability
    , lang
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, rules_vals(group_id, id, body) AS (
    SELECT v.group_id
         , gen_random_uuid()
         , ('{ "==":
                [
                  { "reduce":
                      [
                        { "var": ["answers.byQuestion.wcc_witcher_events_risk", []] },
                        { "var": "current" },
                        null
                      ]
                  },
                  "wcc_witcher_events_risk_o' || to_char(group_id, 'FM00') || '"
                ]
            }')::jsonb FROM (SELECT DISTINCT group_id FROM raw_data) v(group_id)
),
ins_rules AS (
  INSERT INTO rules(ru_id, body) SELECT r.id, r.body FROM rules_vals r
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, visible_ru_ru_id, metadata)
SELECT
  'wcc_witcher_events_o' || to_char(vals.group_id, 'FM00') || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  r.id,
  jsonb_build_object(
           'probability', vals.probability
  )
     || CASE
          WHEN vals.num = 4 THEN
            '{"counterIncrement":{"id":"lifeEventsCounter","step":10}}'::jsonb
          ELSE '{}'::jsonb
        END AS metadata
FROM vals
CROSS JOIN meta
JOIN rules_vals r ON vals.group_id = r.group_id
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id) 
  SELECT 'wcc_witcher_events_is_in_danger', 'wcc_witcher_events' UNION ALL
  SELECT 'wcc_witcher_events_danger_wounds', 'wcc_witcher_events' UNION ALL
  SELECT 'wcc_witcher_events_danger_enemy_death_reason', 'wcc_witcher_events' UNION ALL
  SELECT 'wcc_witcher_events_danger_events', 'wcc_witcher_events' UNION ALL
  SELECT 'wcc_witcher_events_danger_events_details', 'wcc_witcher_events'
  ;
  
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority) 
  SELECT 'wcc_witcher_events_danger_enemy_is_alive', 'wcc_witcher_events', 'wcc_witcher_events_danger_enemy_is_alive_o01', 1
  ;

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id)
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_risk', 'wcc_witcher_events_o0104' UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_risk', 'wcc_witcher_events_o0204' UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_risk', 'wcc_witcher_events_o0304' UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_risk', 'wcc_witcher_events_o0404';


WITH
  is_witcher_rule AS (SELECT ru_id, body FROM rules WHERE name = 'is_witcher')
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_life_events_fortune_or_not_details_addiction', 'wcc_witcher_events', r.ru_id, 2 FROM is_witcher_rule r UNION ALL
  SELECT 'wcc_life_events_fortune_or_not_details_curse', 'wcc_witcher_events', r.ru_id, 2 FROM is_witcher_rule r;
-- <<< END sql/068_witcher_events.sql

-- >>> BEGIN sql/069_witcher_events_benefit.sql

\echo '069_witcher_events_benefit.sql'

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_benefit' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru','–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—É—é –≤—ã–≥–æ–¥—É.'),
        ('en','Choose a benefit you''ve got.')
      ) AS v(lang,text)
      CROSS JOIN meta
  )
, c_vals(lang,num,text) AS (
    VALUES
      ('ru',1,'–í—ã–≥–æ–¥–∞'),
      ('ru',2,'–≠—Ñ—Ñ–µ–∫—Ç'),
      ('ru',3,'–û–ø–∏—Å–∞–Ω–∏–µ'),
      ('en',1,'Benefit'),
      ('en',2,'Effect'),
      ('en',3,'Description')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id,entity,entity_field,lang,text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id,su_su_id,title,body,qtype,metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd0',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_benefit' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_benefit')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_benefit_type')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_benefit' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
      (1,'–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏', '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞:</b><br> - —Ä–µ–±—ë–Ω–æ–∫<br> - —Å–æ–±–∞–∫–∞<br> - –ª–æ—à–∞–¥—å<br> - –Ω–æ–≤—ã–π –ø–ª—É–≥<br> - –∫–æ—à–∫–∞<br> - –±–æ—á–∫–∞ —ç–ª—è<br> - –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 10-60 –∫—Ä–æ–Ω<br> - –æ—Ä—É–∂–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –¥–æ 500 –∫—Ä–æ–Ω<br> - –±—ã–∫<br> - –º—É–ª', '–í —ç—Ç–æ –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–µ –≤—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –ü—Ä–∞–≤–æ–º –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏.'),
      (2,'–†–æ–º–∞–Ω', '<b>–õ—é–±–æ–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å</b> —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º —Ñ–∏–Ω–∞–ª–æ–º:<br> - –≤—Å—ë –¥–ª–∏–ª–æ—Å—å –ø–∞—Ä—É –Ω–µ–¥–µ–ª—å<br> - –≤—Å—ë –¥–ª–∏–ª–æ—Å—å –ø–∞—Ä—É –º–µ—Å—è—Ü–µ–≤<br> - —Ä–æ–º–∞–Ω –¥–æ —Å–∏—Ö –ø–æ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º —É—Å–ø–µ—Ö–æ–º', '–£ –≤–∞—Å –ø–æ—è–≤–∏–ª—Å—è –ª—é–±–æ–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å - —Ç–æ—Ç, –∫–æ–º—É –ø–ª–µ–≤–∞—Ç—å –Ω–∞ –≤–∞—à–∏ –º—É—Ç–∞—Ü–∏–∏ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —ç–º–æ—Ü–∏–π. –ö–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º —Å —ç—Ç–æ–π –ª–∏—á–Ω–æ—Å—Ç—å—é —É –≤–∞—Å –ø–æ—è–≤–∏–ª–∞—Å—å —Å–µ—Ä—å—ë–∑–Ω–∞—è —Å–≤—è–∑—å.'),
      (3,'–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞', '–û—Ç 100 –¥–æ 1000 <b>–∫—Ä–æ–Ω</b>', '–ó–∞ —ç—Ç–æ –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–µ –≤–∞–º —É–¥–∞–ª–æ—Å—å –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –∫—Ä—É–ø–Ω—É—é —Å—É–º–º—É. –í—ã —Å–º–æ–≥–ª–∏ –Ω–µ —Ç–æ–ª—å–∫–æ –æ–ø–ª–∞—Ç–∏—Ç—å –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –∏ –ø–æ—á–∏–Ω–∫—É —Å–Ω–∞—Ä—è–∂–µ–Ω–∏—è, –Ω–æ –∏ –æ—Ç–ª–æ–∂–∏–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –¥–µ–Ω–µ–≥ –Ω–∞ –±—É–¥—É—â–µ–µ.'),
      (4,'–î–æ–ª–≥ –¥–≤–æ—Ä—è–Ω–∏–Ω–∞', '<b>–£—Å–ª—É–≥–∞</b> –¥–≤–æ—Ä—è–Ω–∏–Ω–∞', '–í—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ —Ä–∞–±–æ—Ç—É –¥–ª—è –¥–≤–æ—Ä—è–Ω–∏–Ω–∞. –ù–µ–≤–∞–∂–Ω–æ, –ª–µ–≥–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–µ—Ç, - —Ç–∞–∫ –∏–ª–∏ –∏–Ω–∞—á–µ, –æ–Ω –≤–∞–º —Å–∏–ª—å–Ω–æ –∑–∞–¥–æ–ª–∂–∞–ª –∏ –∑–Ω–∞–µ—Ç, —á—Ç–æ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –≤—ã –ø—Ä–∏–¥—ë—Ç–µ –∑–∞ –æ–ø–ª–∞—Ç–æ–π. –í—ã –º–æ–∂–µ—Ç–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∑–∞ –æ—Ç–≤–µ—Ç–Ω–æ–π —É—Å–ª—É–≥–æ–π, –Ω–æ –≤—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–∑—É–º–Ω–æ–≥–æ (–Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –≤–µ–¥—É—â–µ–≥–æ).'),
      (5,'–í–µ–¥—å–º–∞—á—å–∏ —Ç–∞–π–Ω—ã', '<b>–ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞ –Ω–∞ –≤—ã–±–æ—Ä:</b><br> - —Ñ–æ—Ä–º—É–ª–∞ –º–∞—Å–ª–∞<br> - —Ñ–æ—Ä–º—É–ª–∞ —ç–ª–∏–∫—Å–∏—Ä–∞<br> - —Ñ–æ—Ä–º—É–ª–∞ –æ—Ç–≤–∞—Ä–∞', '–í —Ö–æ–¥–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –≤–µ–¥—å–º–∞–∫–∞ –∏ –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞–ª–∏ –≤–º–µ—Å—Ç–µ. –≠—Ç–æ—Ç –≤–µ–¥—å–º–∞–∫ –∫–æ–µ-—á–µ–º—É –Ω–∞—É—á–∏–ª –≤–∞—Å –∏ –ø–æ–¥–µ–ª–∏–ª—Å—è –∑–Ω–∞–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—á–∏—Ç–∞–ª–∏—Å—å –¥–∞–≤–Ω–æ —É—Ç—Ä–∞—á–µ–Ω–Ω—ã–º–∏.'),
      (6,'–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä—Å—Ç–≤–æ –∑–∞ —Ö—Ä–∞–±—Ä–æ—Å—Ç—å', '<b>+1 –∫ –†–µ–ø—É—Ç–∞—Ü–∏–∏</b> –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–µ –Ω–∞ –≤—ã–±–æ—Ä', '–¢–∞–∫ —Å–ª—É—á–∏–ª–æ—Å—å, —á—Ç–æ –≤ —ç—Ç–æ –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–µ –≤—ã –∫–∞–∫ –º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞–∂–¥—ã —Ö—Ä–∞–±—Ä–æ —Å—Ä–∞–∂–∞–ª–∏—Å—å –∑–∞ —Å—Ç—Ä–∞–Ω—É. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –∫–æ–≥–æ-—Ç–æ –∑–∞—â–∏—â–∞–ª–∏ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ–∫–∞–∑–∞–ª–∏—Å—å –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è. –ó–∞ —ç—Ç–æ—Ç –≤–µ–ª–∏–∫–∏–π –ø–æ–¥–≤–∏–≥ –≤–∞—Å –∫–æ—Ä–æ–ª—å –∏–ª–∏ –∫–æ—Ä–æ–ª–µ–≤–∞ –ø–æ—Å–≤—è—Ç–∏–ª(–∞) –≤ —Ä—ã—Ü–∞—Ä–∏.'),
      (7,'–î—Ä—É–∂–±–∞ —Å —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞–º–∏', '<b>–£—Å–ª—É–≥–∞</b> —Å–∫–æ—è‚Äô—Ç–∞—ç–ª–µ–π', '–í–æ –≤—Ä–µ–º—è –æ—Ö–æ—Ç—ã –≤—ã —Å–¥—Ä—É–∂–∏–ª–∏—Å—å —Å –≥—Ä—É–ø–ø–æ–π —Ä–∞–∑–±–æ–π–Ω–∏–∫–æ–≤ –∏–ª–∏ —Å–∫–æ—è‚Äô—Ç–∞—ç–ª–µ–π. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –Ω–µ —Å–æ–≤—Å–µ–º —Å–æ–≥–ª–∞—Å–Ω—ã —Å –∏—Ö –º–µ—Ç–æ–¥–∞–º–∏, –Ω–æ –æ–Ω–∏ –≤–∞—Å –Ω–µ —Ç—Ä–æ–Ω—É–ª–∏, —Ç–∞–∫ —á—Ç–æ –≤—ã –æ—Ç–ø–ª–∞—Ç–∏–ª–∏ –∏–º –∏ –≤—ã. –í—ã –¥–∞–∂–µ –ø–∞—Ä—É —Ä–∞–∑ –≤—ã–ø–∏–≤–∞–ª–∏ –≤–º–µ—Å—Ç–µ. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–∏—Ç—å —É –Ω–∏—Ö –æ–¥–Ω—É —É—Å–ª—É–≥—É –≤ –º–µ—Å—è—Ü, –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–∑—É–º–Ω–æ–≥–æ (–Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –≤–µ–¥—É—â–µ–≥–æ).'),
      (8,'–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—É–∏–Ω', '<b>–ù–∞—Ö–æ–¥–∫–∞ –≤ —Ä—É–∏–Ω–∞—Ö:</b><br> - —ç–ª—å—Ñ–∏–π—Å–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ<br> - —ç–ª—å—Ñ–∏–π—Å–∫–∏–π –º–µ—Å—Å–µ—Ä<br> - –∫—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ<br> - –≥–Ω–æ–º–∏–π —Ä—É—á–Ω–æ–π –∞—Ä–±–∞–ª–µ—Ç<br> - –∫—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–∏–π –ø–ª–∞—â.', '–í–∞–º –ø—Ä–∏—à–ª–æ—Å—å –æ—Ö–æ—Ç–∏—Ç—å—Å—è –Ω–∞ —á—É–¥–æ–≤–∏—â–µ –≤ –æ–≥—Ä–æ–º–Ω—ã—Ö –∑–∞–ø—É—Ç–∞–Ω–Ω—ã—Ö —Ä—É–∏–Ω–∞—Ö. –ü–æ –ø—É—Ç–∏ –≤—ã –Ω–∞—à–ª–∏ –∫–æ–µ-—á—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ.'),
      (9,'–î–æ–ª–≥ –º–∞–≥–∞', '<b>–£—Å–ª—É–≥–∞</b> –º–∞–≥–∞', '–í —ç—Ç–æ –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–µ –≤—ã –ø–æ–º–æ–≥–ª–∏ –º–∞–≥—É. –í—ã —Å–æ–±–∏—Ä–∞–ª–∏ —á–∞—Å—Ç–∏ —á—É–¥–æ–≤–∏—â –¥–ª—è –µ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, –ø–æ–∑–≤–æ–ª–∏–ª–∏ –µ–º—É –≤–∞—Å –∏–∑—É—á–∞—Ç—å –∏–ª–∏ –¥–∞–∂–µ –∑–∞—Ö–≤–∞—Ç–∏–ª–∏ –¥–ª—è –Ω–µ–≥–æ –∂–∏–≤—å—ë–º —á—É–¥–æ–≤–∏—â–µ. –¢–∞–∫ –∏–ª–∏ –∏–Ω–∞—á–µ, —Ç–µ–ø–µ—Ä—å —ç—Ç–æ—Ç –º–∞–≥ –¥–æ–ª–∂–µ–Ω –≤–∞–º –æ–¥–Ω—É —É—Å–ª—É–≥—É –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–∑—É–º–Ω–æ–≥–æ (–Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –≤–µ–¥—É—â–µ–≥–æ).'),
      (10,'–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è', '<b>+1 –∫</b> –ª—é–±–æ–º—É <b>–ò–ù–¢-–Ω–∞–≤—ã–∫—É</b> –∏–ª–∏ –Ω–æ–≤—ã–π <b>–ò–ù–¢-–Ω–∞–≤—ã–∫ —Å +2</b>', '–í—ã –Ω–∞—à–ª–∏ —Å–µ–±–µ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞. –í—ã –º–Ω–æ–≥–æ –Ω–µ–¥–µ–ª—å —É—á–∏–ª–∏—Å—å, –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞–ª–∏—Å—å –∏ –∑–∞–¥–∞–≤–∞–ª–∏ —É—á–∏—Ç–µ–ª—é –≤–æ–ø—Ä–æ—Å—ã. –≠—Ç–æ –±—ã–ª –Ω–µ–æ–±—ã—á–Ω—ã–π –æ–ø—ã—Ç.')
    ) AS raw_data_ru(num, head, effect, txt)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
      (1,'Law of Surprises','<b>Law of Surprise loot:</b><br> - a baby<br> - a dog<br> - a horse<br> - a new plow<br> - a cat<br> - a barrel of ale<br> - a piece of jewelry worth 10‚Äì60 crowns<br> - a weapon worth up to 500 crowns<br> - an ox<br> - a mule','During that decade you invoked the Law of Surprises.'),
      (2,'Romance','<b>A romance</b> with a random outcome:<br> - it lasted a few weeks<br> - it lasted a few months<br> - it is still going, on and off','You found a lover who saw past your mutations and lack of normal emotions. Somehow you formed a meaningful connection.'),
      (3,'Windfall','Between 100 and 1000 <b>crowns</b>','That decade you brought in a surprisingly large amount of coin. You paid for alchemical ingredients and gear repairs and even saved some for the future.'),
      (4,'A Noble Owes You','<b>A favor</b> from a noble','You performed a task for a noble. Whether legal or not, they owe you and know you may come to collect. You can invoke one reasonable favor at any time (GM discretion).'),
      (5,'Witcher Secrets Passed Down','<b>Witcher formula on choice:</b><br> - formula of oil<br> - formula of potion<br> - formula of decoction','On your journeys you met another witcher, traveled together, and learned some long-lost knowledge.'),
      (6,'Knighted For Valor','<b>+1 Reputation</b> in one country of your choice','At least once that decade you fought bravely for a country. For this deed, a king or queen knighted you.'),
      (7,'Fell in with Bandits','<b>A favor</b> from bandits or scoia‚Äôtael','While on a hunt you fell in with a group of bandits or scoia‚Äôtael. You did not bother each other and even shared drinks. You may ask them for one reasonable favor per month (GM discretion).'),
      (8,'Explored a Ruin','<b>Gear</b> from this list:<br> - elven enhancement<br> - elven messer<br> - dwarven enhancement<br> - gnomish hand crossbow<br> - dwarven cloak','You hunted a monster through a large, complex ruin and found something useful along the way.'),
      (9,'A Mage Owes You','<b>A favor</b> from mage','During this decade you did a favor for a mage: gathered monster parts, allowed study, or even captured a monster alive. The mage now owes you one reasonable favor (GM discretion).'),
      (10,'Found a Teacher','<b>+1 to</b> any <b>INT skill</b> or start a <b>new INT skill at +2</b>','You studied under a mentor for many weeks, learning and practicing. It was a strange experience.')
    ) AS raw_data_en(num, head, effect, txt)

)
,

vals AS (
  SELECT
    ('<td>'||effect||'</td>'
     ||'<td><b>'||head||':</b><br>'||txt||'</td>') AS text,
    num, lang, counter_txt
  FROM raw_data
  LEFT JOIN (VALUES ('"counterIncrement":
                        {
                          "id": "lifeEventsCounter",
                          "step": 10
                        }')) as c(counter_txt) ON raw_data.num in (4,6,7,9,10)
)
, ins_lbl AS (
  INSERT INTO i18n_text (id,entity,entity_field,lang,text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id,su_su_id,qu_qu_id,label,sort_order,metadata)
SELECT
  'wcc_witcher_events_benefit_o'||to_char(vals.num,'FM00'),
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  ('{' || coalesce(vals.counter_txt,'') || '}')::jsonb
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_benefit' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è eventType "Fortune"/"–£–¥–∞—á–∞"
, ins_event_type AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune') AS id
         , meta.entity, 'event_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–£–¥–∞—á–∞'),
        ('en', 'Fortune')
      ) AS v(lang, text)
      CROSS JOIN meta
    ON CONFLICT (id, lang) DO NOTHING
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π (–≤–∞—Ä–∏–∞–Ω—Ç—ã 4, 7, 9)
, ins_desc_04 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '04' ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–î–æ–ª–≥ –¥–≤–æ—Ä—è–Ω–∏–Ω–∞: –≤—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ —Ä–∞–±–æ—Ç—É –¥–ª—è –¥–≤–æ—Ä—è–Ω–∏–Ω–∞, –∏ –æ–Ω –≤–∞–º –¥–æ–ª–∂–µ–Ω —É—Å–ª—É–≥—É.'),
        ('en', 'A Noble Owes You: you performed a task for a noble, and they owe you a favor.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_desc_07 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '07' ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–î—Ä—É–∂–±–∞ —Å —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞–º–∏: –≤—ã —Å–¥—Ä—É–∂–∏–ª–∏—Å—å —Å –≥—Ä—É–ø–ø–æ–π —Ä–∞–∑–±–æ–π–Ω–∏–∫–æ–≤ –∏–ª–∏ —Å–∫–æ—è''—Ç–∞—ç–ª–µ–π.'),
        ('en', 'Fell in with Bandits: you befriended a group of bandits or scoia''tael.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_desc_09 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '09' ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–î–æ–ª–≥ –º–∞–≥–∞: –≤—ã –ø–æ–º–æ–≥–ª–∏ –º–∞–≥—É, –∏ —Ç–µ–ø–µ—Ä—å –æ–Ω –≤–∞–º –¥–æ–ª–∂–µ–Ω —É—Å–ª—É–≥—É.'),
        ('en', 'A Mage Owes You: you helped a mage, and they now owe you a favor.')
      ) AS v(lang, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è gear items
, ins_gear_04 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '04' ||'.'|| 'gear_name') AS id
         , 'gear', 'name', v.lang, v.text
      FROM (VALUES
        ('ru', '–£—Å–ª—É–≥–∞ –¥–≤–æ—Ä—è–Ω–∏–Ω–∞'),
        ('en', 'Nobleman Service')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_gear_07 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '07' ||'.'|| 'gear_name') AS id
         , 'gear', 'name', v.lang, v.text
      FROM (VALUES
        ('ru', '–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è —É—Å–ª—É–≥–∞ —Å–∫–æ—è''—Ç–∞—ç–ª–µ–π'),
        ('en', 'Monthly Scoia''tael Service')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, ins_gear_09 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| '09' ||'.'|| 'gear_name') AS id
         , 'gear', 'name', v.lang, v.text
      FROM (VALUES
        ('ru', '–£—Å–ª—É–≥–∞ –º–∞–≥–∞'),
        ('en', 'Mage Service')
      ) AS v(lang, text)
      CROSS JOIN meta
)
, event_items AS (
  SELECT num FROM (VALUES (4), (7), (9)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
-- 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ lifeEvents (–≤–∞—Ä–∏–∞–Ω—Ç—ã 4, 7, 9)
SELECT 'character', 'wcc_witcher_events_benefit_o' || to_char(event_items.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(event_items.num, 'FM00') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM event_items
CROSS JOIN meta
UNION ALL
-- 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ gear (–≤–∞—Ä–∏–∞–Ω—Ç—ã 4, 7, 9)
SELECT 'character', 'wcc_witcher_events_benefit_o' || to_char(event_items.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      jsonb_build_object(
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(event_items.num, 'FM00') ||'.'|| 'gear_name')::text),
        'weight', 0
      )
    )
  )
FROM event_items
CROSS JOIN meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id) 
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_benefit', 'wcc_witcher_events_o0101' UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_benefit', 'wcc_witcher_events_o0201' UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_benefit', 'wcc_witcher_events_o0301' UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_benefit', 'wcc_witcher_events_o0401'
  ;

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_witcher_events_benefit', 'wcc_witcher_events_risk', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/069_witcher_events_benefit.sql

-- >>> BEGIN sql/070_witcher_events_benefit_details.sql

\echo '070_witcher_events_benefit_details.sql'

-- –í–æ–ø—Ä–æ—Å: —É—Ç–æ—á–Ω–µ–Ω–∏—è –∫ –æ–ø–∞—Å–Ω–æ—Å—Ç—è–º –≤–µ–¥—å–º–∞–∫–∞
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_benefit_details' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id,entity,entity_field,lang,text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru','–†–∞—Å–∫—Ä–æ–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤—ã–≥–æ–¥—ã.'),
        ('en','Pick the specific outcome for your benefit.')
      ) AS v(lang,text)
      CROSS JOIN meta
  )
, c_vals(lang,num,text) AS (
    VALUES
      ('ru',1,'–®–∞–Ω—Å'),
      ('ru',2,'–£—Ç–æ—á–Ω–µ–Ω–∏–µ'),
      ('en',1,'Chance'),
      ('en',2,'Detail')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id,entity,entity_field,lang,text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id,su_su_id,title,body,qtype,metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_benefit_details' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_benefit')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_benefit_details')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (RU/EN)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_benefit_details' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
      -- 1. –ü—Ä–∞–≤–æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏
      ( 1, 1, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: —Ä–µ–±—ë–Ω–æ–∫'),
      ( 1, 2, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: —Å–æ–±–∞–∫–∞'),
      ( 1, 3, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –ª–æ—à–∞–¥—å'),
      ( 1, 4, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –Ω–æ–≤—ã–π –ø–ª—É–≥'),
      ( 1, 5, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –∫–æ—à–∫–∞'),
      ( 1, 6, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –±–æ—á–∫–∞ —ç–ª—è'),
      ( 1, 7, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 10-60 –∫—Ä–æ–Ω'),
      ( 1, 8, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –æ—Ä—É–∂–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –¥–æ 500 –∫—Ä–æ–Ω'),
      ( 1, 9, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –±—ã–∫'),
      ( 1,10, 0.1, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –º—É–ª'),

      -- 2. –õ—é–±–æ–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å
      ( 2, 1, 0.6, '<b>–õ—é–±–æ–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å</b>: –≤—Å—ë –¥–ª–∏–ª–æ—Å—å –ø–∞—Ä—É –Ω–µ–¥–µ–ª—å'),
      ( 2, 2, 0.2, '<b>–õ—é–±–æ–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å</b>: –≤—Å—ë –¥–ª–∏–ª–æ—Å—å –ø–∞—Ä—É –º–µ—Å—è—Ü–µ–≤'),
      ( 2, 3, 0.2, '<b>–õ—é–±–æ–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å</b>: —Ä–æ–º–∞–Ω –¥–æ —Å–∏—Ö –ø–æ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º —É—Å–ø–µ—Ö–æ–º'),

      -- 3. –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞
      ( 3, 1, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 100 –∫—Ä–æ–Ω'),

      -- 5. –í–µ–¥—å–º–∞—á—å–∏ —Ç–∞–π–Ω—ã - –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã
      ( 5, 1, 0.3333, '<b>–ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞</b>: –º–∞—Å–ª–æ'),
      ( 5, 2, 0.3333, '<b>–ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞</b>: —ç–ª–∏–∫—Å–∏—Ä'),
      ( 5, 3, 0.3334, '<b>–ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞</b>: –æ—Ç–≤–∞—Ä'),
      ( 3, 2, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 200 –∫—Ä–æ–Ω'),
      ( 3, 3, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 300 –∫—Ä–æ–Ω'),
      ( 3, 4, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 400 –∫—Ä–æ–Ω'),
      ( 3, 5, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 500 –∫—Ä–æ–Ω'),
      ( 3, 6, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 600 –∫—Ä–æ–Ω'),
      ( 3, 7, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 700 –∫—Ä–æ–Ω'),
      ( 3, 8, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 800 –∫—Ä–æ–Ω'),
      ( 3, 9, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 900 –∫—Ä–æ–Ω'),
      ( 3,10, 0.1, '<b>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞</b>: –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 1000 –∫—Ä–æ–Ω'),

      -- 6. –ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä—Å—Ç–≤–æ –∑–∞ —Ö—Ä–∞–±—Ä–æ—Å—Ç—å - –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞
      ( 6, 1, 0.041, '–†–µ–¥–∞–Ω–∏—è'),
      ( 6, 2, 0.041, '–ö–∞—ç–¥–≤–µ–Ω'),
      ( 6, 3, 0.041, '–¢–µ–º–µ—Ä–∏—è'),
      ( 6, 4, 0.041, '–ê—ç–¥–∏—Ä–Ω'),
      ( 6, 5, 0.041, '–õ–∏—Ä–∏—è'),
      ( 6, 6, 0.041, '–†–∏–≤–∏—è'),
      ( 6, 7, 0.041, '–ö–æ–≤–∏—Ä'),
      ( 6, 8, 0.041, '–ü–æ–≤–∏—Å'),
      ( 6, 9, 0.041, '–°–∫–µ–ª–ª–∏–≥–µ'),
      ( 6,10, 0.041, '–¶–∏–¥–∞—Ä–∏—Å'),
      ( 6,11, 0.041, '–í–µ—Ä–¥—ç–Ω'),
      ( 6,12, 0.041, '–¶–∏–Ω—Ç—Ä–∞'),
      ( 6,13, 0.041, '–°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞'),
      ( 6,14, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –í–∏–∫–æ–≤–∞—Ä–æ'),
      ( 6,15, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ê–∏–≥—Ä–µ–Ω'),
      ( 6,16, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ù–∞–∑–∞–∏—Ä'),
      ( 6,17, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–µ—Ç–∏–∏–Ω–∞'),
      ( 6,18, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–∞–≥ –¢—É—Ä–≥–∞'),
      ( 6,19, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ì–µ—Å–æ'),
      ( 6,20, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –≠–±–±–∏–Ω–≥'),
      ( 6,21, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ú–µ—Ö—Ç'),
      ( 6,22, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –ì–µ–º–º–µ—Ä–∞'),
      ( 6,23, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –≠—Ç–æ–ª–∏—è'),
      ( 6,24, 0.041, '–í–∞—Å—Å–∞–ª—å–Ω–æ–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ - –¢—É—Å—Å–µ–Ω—Ç'),

      -- 8. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—É–∏–Ω
      ( 8, 1, 0.2, '<b>–ù–∞—Ö–æ–¥–∫–∞ –≤ —Ä—É–∏–Ω–∞—Ö</b>: —ç–ª—å—Ñ–∏–π—Å–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ'),
      ( 8, 2, 0.2, '<b>–ù–∞—Ö–æ–¥–∫–∞ –≤ —Ä—É–∏–Ω–∞—Ö</b>: —ç–ª—å—Ñ–∏–π—Å–∫–∏–π –º–µ—Å—Å–µ—Ä'),
      ( 8, 3, 0.2, '<b>–ù–∞—Ö–æ–¥–∫–∞ –≤ —Ä—É–∏–Ω–∞—Ö</b>: –∫—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ'),
      ( 8, 4, 0.2, '<b>–ù–∞—Ö–æ–¥–∫–∞ –≤ —Ä—É–∏–Ω–∞—Ö</b>: –≥–Ω–æ–º–∏–π —Ä—É—á–Ω–æ–π –∞—Ä–±–∞–ª–µ—Ç'),
      ( 8, 5, 0.2, '<b>–ù–∞—Ö–æ–¥–∫–∞ –≤ —Ä—É–∏–Ω–∞—Ö</b>: –∫—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–∏–π –ø–ª–∞—â'),

      -- 10. –ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è - –Ω–∞–≤—ã–∫–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞
      (10, 1, 0.0909, '–í–Ω–∏–º–∞–Ω–∏–µ'),
      (10, 2, 0.0909, '–í—ã–∂–∏–≤–∞–Ω–∏–µ –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ'),
      (10, 3, 0.0909, '–î–µ–¥—É–∫—Ü–∏—è'),
      (10, 4, 0.0909, '–ú–æ–Ω—Å—Ç—Ä–æ–ª–æ–≥–∏—è'),
      (10, 5, 0.0909, '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ'),
      (10, 6, 0.0909, '–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≥–æ—Ä–æ–¥–µ'),
      (10, 7, 0.0909, '–ü–µ—Ä–µ–¥–∞—á–∞ –∑–Ω–∞–Ω–∏–π'),
      (10, 8, 0.0909, '–¢–∞–∫—Ç–∏–∫–∞'),
      (10, 9, 0.0909, '–¢–æ—Ä–≥–æ–≤–ª—è'),
      (10,10, 0.0909, '–≠—Ç–∏–∫–µ—Ç'),
      (10,11, 0.0303, '–Ø–∑—ã–∫ - —Å–µ–≤–µ—Ä–Ω—ã–π'),
      (10,12, 0.0303, '–Ø–∑—ã–∫ - –¥–≤–∞—Ä—Ñ–∏–π—Å–∫–∏–π'),
      (10,13, 0.0303, '–Ø–∑—ã–∫ - —Å—Ç–∞—Ä—à–∞—è —Ä–µ—á—å')
    ) AS raw_data_ru(group_id, num, probability, txt)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
    -- 1. Law of Surprise
    ( 1, 1, 0.10, '<b>Random Boon</b>: a baby'),
    ( 1, 2, 0.10, '<b>Random Boon</b>: a dog'),
    ( 1, 3, 0.10, '<b>Random Boon</b>: a horse'),
    ( 1, 4, 0.10, '<b>Random Boon</b>: a new plow'),
    ( 1, 5, 0.10, '<b>Random Boon</b>: a cat'),
    ( 1, 6, 0.10, '<b>Random Boon</b>: a barrel of ale'),
    ( 1, 7, 0.10, '<b>Random Boon</b>: jewelry worth 10‚Äì60 crowns'),
    ( 1, 8, 0.10, '<b>Random Boon</b>: a weapon worth up to 500 crowns'),
    ( 1, 9, 0.10, '<b>Random Boon</b>: an ox'),
    ( 1,10, 0.10, '<b>Random Boon</b>: a mule'),

    -- 2. Romance
    ( 2, 1, 0.60, '<b>Romance</b>: lasted a few weeks'),
    ( 2, 2, 0.20, '<b>Romance</b>: lasted a few months'),
    ( 2, 3, 0.20, '<b>Romance</b>: still going, on and off'),

    -- 3. Windfall
    ( 3, 1, 0.10, '<b>Windfall</b>: you gained 100 crowns'),

    -- 5. Witcher Secrets Passed Down - alchemical formulas
    ( 5, 1, 0.3333, '<b>Alchemical Formula</b>: oil'),
    ( 5, 2, 0.3333, '<b>Alchemical Formula</b>: potion'),
    ( 5, 3, 0.3334, '<b>Alchemical Formula</b>: decoction'),
    ( 3, 2, 0.10, '<b>Windfall</b>: you gained 200 crowns'),
    ( 3, 3, 0.10, '<b>Windfall</b>: you gained 300 crowns'),
    ( 3, 4, 0.10, '<b>Windfall</b>: you gained 400 crowns'),
    ( 3, 5, 0.10, '<b>Windfall</b>: you gained 500 crowns'),
    ( 3, 6, 0.10, '<b>Windfall</b>: you gained 600 crowns'),
    ( 3, 7, 0.10, '<b>Windfall</b>: you gained 700 crowns'),
    ( 3, 8, 0.10, '<b>Windfall</b>: you gained 800 crowns'),
    ( 3, 9, 0.10, '<b>Windfall</b>: you gained 900 crowns'),
    ( 3,10, 0.10, '<b>Windfall</b>: you gained 1000 crowns'),

    -- 6. Knighted For Valor - kingdoms
    ( 6, 1, 0.041, 'Redania'),
    ( 6, 2, 0.041, 'Kaedwen'),
    ( 6, 3, 0.041, 'Temeria'),
    ( 6, 4, 0.041, 'Aedirn'),
    ( 6, 5, 0.041, 'Lyria'),
    ( 6, 6, 0.041, 'Rivia'),
    ( 6, 7, 0.041, 'Kovir'),
    ( 6, 8, 0.041, 'Poviss'),
    ( 6, 9, 0.041, 'Skellige'),
    ( 6,10, 0.041, 'Cidaris'),
    ( 6,11, 0.041, 'Verden'),
    ( 6,12, 0.041, 'Cintra'),
    ( 6,13, 0.041, 'The Heart of Nilfgaard'),
    ( 6,14, 0.041, 'Nilfgaardian Vassal State - Vicovaro'),
    ( 6,15, 0.041, 'Nilfgaardian Vassal State - Angren'),
    ( 6,16, 0.041, 'Nilfgaardian Vassal State - Nazair'),
    ( 6,17, 0.041, 'Nilfgaardian Vassal State - Mettina'),
    ( 6,18, 0.041, 'Nilfgaardian Vassal State - Mag Turga'),
    ( 6,19, 0.041, 'Nilfgaardian Vassal State - Gheso'),
    ( 6,20, 0.041, 'Nilfgaardian Vassal State - Ebbing'),
    ( 6,21, 0.041, 'Nilfgaardian Vassal State - Maecht'),
    ( 6,22, 0.041, 'Nilfgaardian Vassal State - Gemmeria'),
    ( 6,23, 0.041, 'Nilfgaardian Vassal State - Etolia'),
    ( 6,24, 0.041, 'Nilfgaardian Vassal State - Toussaint'),

    -- 8. Explored a Ruin
    ( 8, 1, 0.20, '<b>Ruin Find</b>: elven enhancement'),
    ( 8, 2, 0.20, '<b>Ruin Find</b>: elven messer'),
    ( 8, 3, 0.20, '<b>Ruin Find</b>: dwarven enhancement'),
    ( 8, 4, 0.20, '<b>Ruin Find</b>: gnomish hand crossbow'),
    ( 8, 5, 0.20, '<b>Ruin Find</b>: dwarven cloak'),

    -- 10. Found a Teacher - INT skills
    (10, 1, 0.0909, 'Awareness'),
    (10, 2, 0.0909, 'Wilderness Survival'),
    (10, 3, 0.0909, 'Deduction'),
    (10, 4, 0.0909, 'Monster Lore'),
    (10, 5, 0.0909, 'Education'),
    (10, 6, 0.0909, 'Streetwise'),
    (10, 7, 0.0909, 'Teaching'),
    (10, 8, 0.0909, 'Tactics'),
    (10, 9, 0.0909, 'Business'),
    (10,10, 0.0909, 'Social Etiquette'),
    (10,11, 0.0303, 'Language - Northern'),
    (10,12, 0.0303, 'Language - Dwarvish'),
    (10,13, 0.0303, 'Language - Elder Speech')
  ) AS raw_data_en(group_id, num, probability, txt)
),

vals AS (
  SELECT ('<td>'||to_char(probability*100,'FM990.00')||'%</td>'
         ||'<td>'||txt||'</td>') AS text
       , group_id
       , num
       , probability
       , lang
       , counter_txt
  FROM raw_data
  LEFT JOIN (VALUES ('"counterIncrement":
                        {
                          "id": "lifeEventsCounter",
                          "step": 10
                        }')) as c(counter_txt) ON NOT (raw_data.group_id = 1 AND raw_data.num = 7)
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)

, rules_vals(group_id, id, body) AS (
    SELECT v.group_id
         , gen_random_uuid()
         , ('{ "==":
                [
                  { "reduce":
                      [
                        { "var": ["answers.byQuestion.wcc_witcher_events_benefit", []] },
                        { "var": "current" },
                        null
                      ]
                  },
                  "wcc_witcher_events_benefit_o' || to_char(group_id, 'FM00') || '"
                ]
            }')::jsonb FROM (SELECT DISTINCT group_id FROM raw_data) v(group_id)
),
ins_rules AS (
  INSERT INTO rules(ru_id, body) SELECT r.id, r.body FROM rules_vals r
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, visible_ru_ru_id, sort_order,metadata)
SELECT
  'wcc_witcher_events_benefit_details_o'||to_char(vals.group_id,'FM00')||to_char(vals.num,'FM00'),
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*vals.group_id+vals.num, 'FM0000') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  r.id,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  ) || ('{'|| coalesce(vals.counter_txt,'') ||'}')::jsonb
FROM vals
CROSS JOIN meta
JOIN rules_vals r ON vals.group_id = r.group_id
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã
WITH
  raw_data AS (
    SELECT DISTINCT group_id, num
    FROM (VALUES
      (1,1), (1,2), (1,3), (1,4), (1,5), (1,6), (1,8), (1,9), (1,10),
      (2,1), (2,2), (2,3),
      (3,1), (3,2), (3,3), (3,4), (3,5), (3,6), (3,7), (3,8), (3,9), (3,10),
      (5,1), (5,2), (5,3),
      (6,1), (6,2), (6,3), (6,4), (6,5), (6,6), (6,7), (6,8), (6,9), (6,10),
      (6,11), (6,12), (6,13), (6,14), (6,15), (6,16), (6,17), (6,18), (6,19), (6,20),
      (6,21), (6,22), (6,23), (6,24),
      (8,1), (8,2), (8,3), (8,4), (8,5),
      (10,1), (10,2), (10,3), (10,4), (10,5), (10,6), (10,7), (10,8), (10,9), (10,10),
      (10,11), (10,12), (10,13)
    ) AS v(group_id, num)
  )
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_benefit_details' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è eventType "Fortune"/"–£–¥–∞—á–∞" –∏ "Relationships"/"–û—Ç–Ω–æ—à–µ–Ω–∏—è"
, ins_event_type_fortune AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune') AS id
         , meta.entity, 'event_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–£–¥–∞—á–∞'),
        ('en', 'Fortune')
      ) AS v(lang, text)
      CROSS JOIN meta
    ON CONFLICT (id, lang) DO NOTHING
)
, ins_event_type_relationships AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_relationships' ||'.'|| 'event_type_relationships') AS id
         , meta.entity, 'event_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–û—Ç–Ω–æ—à–µ–Ω–∏—è'),
        ('en', 'Relationships')
      ) AS v(lang, text)
      CROSS JOIN meta
    ON CONFLICT (id, lang) DO NOTHING
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø—ã 1 (–∫—Ä–æ–º–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ 7)
, ins_desc_01 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*1+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω —Ä–µ–±—ë–Ω–æ–∫-–Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç—å.'),
        ('ru', 2, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ —Å–æ–±–∞–∫–∞.'),
        ('ru', 3, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ –ª–æ—à–∞–¥—å.'),
        ('ru', 4, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω –Ω–æ–≤—ã–π –ø–ª—É–≥.'),
        ('ru', 5, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ –∫–æ—à–∫–∞.'),
        ('ru', 6, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ –±–æ—á–∫–∞ —ç–ª—è.'),
        ('ru', 8, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–æ –æ—Ä—É–∂–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –¥–æ 500 –∫—Ä–æ–Ω (–Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞).'),
        ('ru', 9, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω –±—ã–∫.'),
        ('ru',10, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω –º—É–ª.'),
        ('en', 1, 'Law of Surprises: received a child of surprise.'),
        ('en', 2, 'Law of Surprises: received a dog.'),
        ('en', 3, 'Law of Surprises: received a horse.'),
        ('en', 4, 'Law of Surprises: received a new plow.'),
        ('en', 5, 'Law of Surprises: received a cat.'),
        ('en', 6, 'Law of Surprises: received a barrel of ale.'),
        ('en', 8, 'Law of Surprises: received a weapon worth up to 500 crowns (GM discretion).'),
        ('en', 9, 'Law of Surprises: received an ox.'),
        ('en',10, 'Law of Surprises: received a mule.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø—ã 2
, ins_desc_02 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*2+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–†–æ–º–∞–Ω: –≤—Å—ë –¥–ª–∏–ª–æ—Å—å –ø–∞—Ä—É –Ω–µ–¥–µ–ª—å.'),
        ('ru', 2, '–†–æ–º–∞–Ω: –≤—Å—ë –¥–ª–∏–ª–æ—Å—å –ø–∞—Ä—É –º–µ—Å—è—Ü–µ–≤.'),
        ('ru', 3, '–†–æ–º–∞–Ω: —Ä–æ–º–∞–Ω –¥–æ —Å–∏—Ö –ø–æ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º —É—Å–ø–µ—Ö–æ–º.'),
        ('en', 1, 'Romance: lasted a few weeks.'),
        ('en', 2, 'Romance: lasted a few months.'),
        ('en', 3, 'Romance: still going, on and off.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø—ã 3
, ins_desc_03 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*3+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 100 –∫—Ä–æ–Ω.'),
        ('ru', 2, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 200 –∫—Ä–æ–Ω.'),
        ('ru', 3, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 300 –∫—Ä–æ–Ω.'),
        ('ru', 4, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 400 –∫—Ä–æ–Ω.'),
        ('ru', 5, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 500 –∫—Ä–æ–Ω.'),
        ('ru', 6, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 600 –∫—Ä–æ–Ω.'),
        ('ru', 7, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 700 –∫—Ä–æ–Ω.'),
        ('ru', 8, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 800 –∫—Ä–æ–Ω.'),
        ('ru', 9, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 900 –∫—Ä–æ–Ω.'),
        ('ru',10, '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —É–¥–∞—á–∞: –ø–æ–ª—É—á–µ–Ω–æ 1000 –∫—Ä–æ–Ω.'),
        ('en', 1, 'Windfall: gained 100 crowns.'),
        ('en', 2, 'Windfall: gained 200 crowns.'),
        ('en', 3, 'Windfall: gained 300 crowns.'),
        ('en', 4, 'Windfall: gained 400 crowns.'),
        ('en', 5, 'Windfall: gained 500 crowns.'),
        ('en', 6, 'Windfall: gained 600 crowns.'),
        ('en', 7, 'Windfall: gained 700 crowns.'),
        ('en', 8, 'Windfall: gained 800 crowns.'),
        ('en', 9, 'Windfall: gained 900 crowns.'),
        ('en',10, 'Windfall: gained 1000 crowns.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø—ã 5
, ins_desc_05 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*5+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–í–µ–¥—å–º–∞—á—å–∏ —Ç–∞–π–Ω—ã: –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –≤–µ–¥—å–º–∞–∫–∞ –∏ –Ω–∞—É—á–∏–ª–∏—Å—å —Ñ–æ—Ä–º—É–ª–µ –º–∞—Å–ª–∞.'),
        ('ru', 2, '–í–µ–¥—å–º–∞—á—å–∏ —Ç–∞–π–Ω—ã: –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –≤–µ–¥—å–º–∞–∫–∞ –∏ –Ω–∞—É—á–∏–ª–∏—Å—å —Ñ–æ—Ä–º—É–ª–µ —ç–ª–∏–∫—Å–∏—Ä–∞.'),
        ('ru', 3, '–í–µ–¥—å–º–∞—á—å–∏ —Ç–∞–π–Ω—ã: –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –≤–µ–¥—å–º–∞–∫–∞ –∏ –Ω–∞—É—á–∏–ª–∏—Å—å —Ñ–æ—Ä–º—É–ª–µ –æ—Ç–≤–∞—Ä–∞.'),
        ('en', 1, 'Witcher Secrets Passed Down: you met another witcher and learned an oil formula.'),
        ('en', 2, 'Witcher Secrets Passed Down: you met another witcher and learned a potion formula.'),
        ('en', 3, 'Witcher Secrets Passed Down: you met another witcher and learned a decoction formula.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø—ã 6
, ins_desc_06 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*6+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –†–µ–¥–∞–Ω–∏–∏ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru', 2, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ö–∞—ç–¥–≤–µ–Ω–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru', 3, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –¢–µ–º–µ—Ä–∏–∏ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru', 4, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ê—ç–¥–∏—Ä–Ω–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru', 5, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –õ–∏—Ä–∏–∏ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru', 6, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –†–∏–≤–∏–∏ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru', 7, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ö–æ–≤–∏—Ä–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru', 8, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ü–æ–≤–∏—Å—Å–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru', 9, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –°–∫–µ–ª–ª–∏–≥–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',10, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –¶–∏–¥–∞—Ä–∏—Å–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',11, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –í–µ—Ä–¥–µ–Ω–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',12, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –¶–∏–Ω—Ç—Ä–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',13, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –°–µ—Ä–¥—Ü–µ –ù–∏–ª—å—Ñ–≥–∞–∞—Ä–¥–∞ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',14, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –í–∏–∫–æ–≤–∞—Ä–æ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',15, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ê–∏–≥—Ä–µ–Ω–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',16, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ù–∞–∑–∞–∏—Ä–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',17, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ú–µ—Ç–∏–∏–Ω–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',18, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ú–∞–≥ –¢—É—Ä–≥–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',19, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ì–µ—Å–æ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',20, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –≠–±–±–∏–Ω–≥–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',21, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ú–µ—Ö—Ç–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',22, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –ì–µ–º–º–µ—Ä–∏–∏ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',23, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –≠—Ç–æ–ª–∏–∏ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('ru',24, '–ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ —Ä—ã—Ü–∞—Ä–∏: –ø–æ—Å–≤—è—â–µ–Ω—ã –≤ —Ä—ã—Ü–∞—Ä–∏ –≤ –¢—É—Å—Å–µ–Ω—Ç–µ (+1 –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏).'),
        ('en', 1, 'Knighted: knighted in Redania (+1 reputation).'),
        ('en', 2, 'Knighted: knighted in Kaedwen (+1 reputation).'),
        ('en', 3, 'Knighted: knighted in Temeria (+1 reputation).'),
        ('en', 4, 'Knighted: knighted in Aedirn (+1 reputation).'),
        ('en', 5, 'Knighted: knighted in Lyria (+1 reputation).'),
        ('en', 6, 'Knighted: knighted in Rivia (+1 reputation).'),
        ('en', 7, 'Knighted: knighted in Kovir (+1 reputation).'),
        ('en', 8, 'Knighted: knighted in Poviss (+1 reputation).'),
        ('en', 9, 'Knighted: knighted in Skellige (+1 reputation).'),
        ('en',10, 'Knighted: knighted in Cidaris (+1 reputation).'),
        ('en',11, 'Knighted: knighted in Verden (+1 reputation).'),
        ('en',12, 'Knighted: knighted in Cintra (+1 reputation).'),
        ('en',13, 'Knighted: knighted in The Heart of Nilfgaard (+1 reputation).'),
        ('en',14, 'Knighted: knighted in Vicovaro (+1 reputation).'),
        ('en',15, 'Knighted: knighted in Angren (+1 reputation).'),
        ('en',16, 'Knighted: knighted in Nazair (+1 reputation).'),
        ('en',17, 'Knighted: knighted in Mettina (+1 reputation).'),
        ('en',18, 'Knighted: knighted in Mag Turga (+1 reputation).'),
        ('en',19, 'Knighted: knighted in Gheso (+1 reputation).'),
        ('en',20, 'Knighted: knighted in Ebbing (+1 reputation).'),
        ('en',21, 'Knighted: knighted in Maecht (+1 reputation).'),
        ('en',22, 'Knighted: knighted in Gemmeria (+1 reputation).'),
        ('en',23, 'Knighted: knighted in Etolia (+1 reputation).'),
        ('en',24, 'Knighted: knighted in Toussaint (+1 reputation).')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø—ã 8
, ins_desc_08 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*8+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—É–∏–Ω: –Ω–∞–π–¥–µ–Ω–æ —ç–ª—å—Ñ–∏–π—Å–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ.'),
        ('ru', 2, '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—É–∏–Ω: –Ω–∞–π–¥–µ–Ω —ç–ª—å—Ñ–∏–π—Å–∫–∏–π –º–µ—Å—Å–µ—Ä.'),
        ('ru', 3, '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—É–∏–Ω: –Ω–∞–π–¥–µ–Ω–æ –∫—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ.'),
        ('ru', 4, '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—É–∏–Ω: –Ω–∞–π–¥–µ–Ω –≥–Ω–æ–º–∏–π —Ä—É—á–Ω–æ–π –∞—Ä–±–∞–ª–µ—Ç.'),
        ('ru', 5, '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—É–∏–Ω: –Ω–∞–π–¥–µ–Ω –∫—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–∏–π –ø–ª–∞—â.'),
        ('en', 1, 'Explored a Ruin: found elven enhancement.'),
        ('en', 2, 'Explored a Ruin: found elven messer.'),
        ('en', 3, 'Explored a Ruin: found dwarven enhancement.'),
        ('en', 4, 'Explored a Ruin: found gnomish hand crossbow.'),
        ('en', 5, 'Explored a Ruin: found dwarven cloak.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø—ã 10
, ins_desc_10 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*10+vals.num, 'FM0000') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –í–Ω–∏–º–∞–Ω–∏—é –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 2, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –í—ã–∂–∏–≤–∞–Ω–∏—é –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 3, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –î–µ–¥—É–∫—Ü–∏–∏ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 4, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –ú–æ–Ω—Å—Ç—Ä–æ–ª–æ–≥–∏–∏ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 5, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 6, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤ –≥–æ—Ä–æ–¥–µ –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru', 7, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –ü–µ—Ä–µ–¥–∞—á–µ –∑–Ω–∞–Ω–∏–π –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 8, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –¢–∞–∫—Ç–∏–∫–µ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru', 9, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –¢–æ—Ä–≥–æ–≤–ª–µ –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru',10, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –≠—Ç–∏–∫–µ—Ç—É –∏–ª–∏ –Ω–æ–≤—ã–π –Ω–∞–≤—ã–∫ +2.'),
        ('ru',11, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –Ø–∑—ã–∫—É - —Å–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru',12, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –Ø–∑—ã–∫—É - –¥–≤–∞—Ä—Ñ–∏–π—Å–∫–∏–π –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('ru',13, '–ù–∞—à—ë–ª —É—á–∏—Ç–µ–ª—è: +1 –∫ –Ø–∑—ã–∫—É - —Å—Ç–∞—Ä—à–∞—è —Ä–µ—á—å –∏–ª–∏ –Ω–æ–≤—ã–π +2.'),
        ('en', 1, 'Found a Teacher: +1 Awareness or new skill +2.'),
        ('en', 2, 'Found a Teacher: +1 Wilderness Survival or new +2.'),
        ('en', 3, 'Found a Teacher: +1 Deduction or new skill +2.'),
        ('en', 4, 'Found a Teacher: +1 Monster Lore or new skill +2.'),
        ('en', 5, 'Found a Teacher: +1 Education or new skill +2.'),
        ('en', 6, 'Found a Teacher: +1 Streetwise or new skill +2.'),
        ('en', 7, 'Found a Teacher: +1 Teaching or new skill +2.'),
        ('en', 8, 'Found a Teacher: +1 Tactics or new skill +2.'),
        ('en', 9, 'Found a Teacher: +1 Business or new skill +2.'),
        ('en',10, 'Found a Teacher: +1 Social Etiquette or new +2.'),
        ('en',11, 'Found a Teacher: +1 Language - Northern or new +2.'),
        ('en',12, 'Found a Teacher: +1 Language - Dwarvish or new +2.'),
        ('en',13, 'Found a Teacher: +1 Language - Elder Speech or new +2.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è gear items –≥—Ä—É–ø–ø—ã 1 (–∫—Ä–æ–º–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ 7)
, ins_gear_01 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*1+vals.num, 'FM0000') ||'.'|| 'gear_name') AS id
         , 'gear', 'name', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–†–µ–±—ë–Ω–æ–∫-–Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç—å'),
        ('ru', 2, '–°–æ–±–∞–∫–∞'),
        ('ru', 3, '–õ–æ—à–∞–¥—å'),
        ('ru', 4, '–ù–æ–≤—ã–π –ø–ª—É–≥'),
        ('ru', 5, '–ö–æ—à–∫–∞'),
        ('ru', 6, '–ë–æ—á–∫–∞ —ç–ª—è'),
        ('ru', 8, '–û—Ä—É–∂–∏–µ (–¥–æ 500 –∫—Ä–æ–Ω, –Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞)'),
        ('ru', 9, '–ë—ã–∫'),
        ('ru',10, '–ú—É–ª'),
        ('en', 1, 'Child of Surprise'),
        ('en', 2, 'Dog'),
        ('en', 3, 'Horse'),
        ('en', 4, 'New Plow'),
        ('en', 5, 'Cat'),
        ('en', 6, 'Barrel of Ale'),
        ('en', 8, 'Weapon (up to 500 crowns, GM discretion)'),
        ('en', 9, 'Ox'),
        ('en',10, 'Mule')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è gear items –≥—Ä—É–ø–ø—ã 5
, ins_gear_05 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*5+vals.num, 'FM0000') ||'.'|| 'gear_name') AS id
         , 'gear', 'name', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞ –º–∞—Å–ª–∞'),
        ('ru', 2, '–ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞ —ç–ª–∏–∫—Å–∏—Ä–∞'),
        ('ru', 3, '–ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞ –æ—Ç–≤–∞—Ä–∞'),
        ('en', 1, 'Alchemical Formula: Oil'),
        ('en', 2, 'Alchemical Formula: Potion'),
        ('en', 3, 'Alchemical Formula: Decoction')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è gear items –≥—Ä—É–ø–ø—ã 8
, ins_gear_08 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*8+vals.num, 'FM0000') ||'.'|| 'gear_name') AS id
         , 'gear', 'name', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–≠–ª—å—Ñ–∏–π—Å–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ'),
        ('ru', 2, '–≠–ª—å—Ñ–∏–π—Å–∫–∏–π –º–µ—Å—Å–µ—Ä'),
        ('ru', 3, '–ö—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ'),
        ('ru', 4, '–ì–Ω–æ–º–∏–π —Ä—É—á–Ω–æ–π –∞—Ä–±–∞–ª–µ—Ç'),
        ('ru', 5, '–ö—Ä–∞—Å–Ω–æ–ª—é–¥—Å–∫–∏–π –ø–ª–∞—â'),
        ('en', 1, 'Elven Enhancement'),
        ('en', 2, 'Elven Messer'),
        ('en', 3, 'Dwarven Enhancement'),
        ('en', 4, 'Gnomish Hand Crossbow'),
        ('en', 5, 'Dwarven Cloak')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞–≤—ã–∫–æ–≤ –¥–ª—è –≥—Ä—É–ø–ø—ã 10
, skill_mapping_group10 AS (
  SELECT 1 AS num, 'awareness' AS skill_path
  UNION ALL SELECT 2, 'wilderness_survival'
  UNION ALL SELECT 3, 'deduction'
  UNION ALL SELECT 4, 'monster_lore'
  UNION ALL SELECT 5, 'education'
  UNION ALL SELECT 6, 'streetwise'
  UNION ALL SELECT 7, 'teaching'
  UNION ALL SELECT 8, 'tactics'
  UNION ALL SELECT 9, 'business'
  UNION ALL SELECT 10, 'social_etiquette'
  UNION ALL SELECT 11, 'language_northern'
  UNION ALL SELECT 12, 'language_dwarvish'
  UNION ALL SELECT 13, 'language_elder_speech'
)
INSERT INTO effects (scope, an_an_id, body)
-- –ì—Ä—É–ø–ø–∞ 1 (–∫—Ä–æ–º–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ 7): lifeEvents + gear
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(1, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*1+raw_data.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 1 AND raw_data.num != 7
UNION ALL
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(1, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      jsonb_build_object(
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*1+raw_data.num, 'FM0000') ||'.'|| 'gear_name')::text),
        'weight', 0
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 1 AND raw_data.num != 7
UNION ALL
-- –ì—Ä—É–ø–ø–∞ 2: lifeEvents (–û—Ç–Ω–æ—à–µ–Ω–∏—è)
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(2, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_life_events_relationships' ||'.'|| 'event_type_relationships')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*2+raw_data.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 2
UNION ALL
-- –ì—Ä—É–ø–ø–∞ 3: lifeEvents + –¥–µ–Ω—å–≥–∏
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(3, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*3+raw_data.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 3
UNION ALL
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(3, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.money.crowns'),
      raw_data.num * 100
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 3
UNION ALL
-- –ì—Ä—É–ø–ø–∞ 5: lifeEvents + gear (–∞–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞)
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(5, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*5+raw_data.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 5
UNION ALL
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(5, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      jsonb_build_object(
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*5+raw_data.num, 'FM0000') ||'.'|| 'gear_name')::text),
        'weight', 0
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 5
UNION ALL
-- –ì—Ä—É–ø–ø–∞ 6: lifeEvents
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(6, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*6+raw_data.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 6
UNION ALL
-- –ì—Ä—É–ø–ø–∞ 8: lifeEvents + gear
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(8, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*8+raw_data.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 8
UNION ALL
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(8, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      jsonb_build_object(
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*8+raw_data.num, 'FM0000') ||'.'|| 'gear_name')::text),
        'weight', 0
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 8
UNION ALL
-- –ì—Ä—É–ø–ø–∞ 10: lifeEvents + –Ω–∞–≤—ã–∫
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(10, 'FM00') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(100*10+raw_data.num, 'FM0000') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
WHERE raw_data.group_id = 10
UNION ALL
SELECT 'character', 'wcc_witcher_events_benefit_details_o' || to_char(10, 'FM00') || to_char(skill_mapping_group10.num, 'FM00'),
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.' || skill_mapping_group10.skill_path || '.bonus'),
      1
    )
  )
FROM skill_mapping_group10
CROSS JOIN meta
UNION ALL
SELECT 'character', 'wcc_witcher_events_benefit_details_o' || to_char(10, 'FM00') || to_char(skill_mapping_group10.num, 'FM00'),
  jsonb_build_object(
    'inc',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.skills.common.' || skill_mapping_group10.skill_path || '.bonus_if_new'),
      1
    )
  )
FROM skill_mapping_group10
CROSS JOIN meta;

-- –ü–µ—Ä–µ—Ö–æ–¥—ã: –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ —É–∑–ª–∞ –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π –∫ —É—Ç–æ—á–Ω–µ–Ω–∏—è–º –ø–æ –Ω—É–∂–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  VALUES
    ('wcc_witcher_events_benefit','wcc_witcher_events_benefit_details','wcc_witcher_events_benefit_o01',2),
    ('wcc_witcher_events_benefit','wcc_witcher_events_benefit_details','wcc_witcher_events_benefit_o02',2),
    ('wcc_witcher_events_benefit','wcc_witcher_events_benefit_details','wcc_witcher_events_benefit_o03',2),
    ('wcc_witcher_events_benefit','wcc_witcher_events_benefit_details','wcc_witcher_events_benefit_o05',2),
    ('wcc_witcher_events_benefit','wcc_witcher_events_benefit_details','wcc_witcher_events_benefit_o06',2),
    ('wcc_witcher_events_benefit','wcc_witcher_events_benefit_details','wcc_witcher_events_benefit_o08',2),
    ('wcc_witcher_events_benefit','wcc_witcher_events_benefit_details','wcc_witcher_events_benefit_o10',2)
  ON CONFLICT DO NOTHING;

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_witcher_events_benefit_details', 'wcc_witcher_events_risk', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/070_witcher_events_benefit_details.sql

-- >>> BEGIN sql/071_witcher_events_benefit_details_2.sql

\echo '071_witcher_events_benefit_details_2.sql'

-- –í–æ–ø—Ä–æ—Å: —É—Ç–æ—á–Ω–µ–Ω–∏—è –∫ –æ–ø–∞—Å–Ω–æ—Å—Ç—è–º –≤–µ–¥—å–º–∞–∫–∞
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_benefit_details_2' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id,entity,entity_field,lang,text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru','–†–∞—Å–∫—Ä–æ–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤—ã–≥–æ–¥—ã.'),
        ('en','Pick the specific outcome for your benefit.')
      ) AS v(lang,text)
      CROSS JOIN meta
  )
, c_vals(lang,num,text) AS (
    VALUES
      ('ru',1,'–®–∞–Ω—Å'),
      ('ru',2,'–£—Ç–æ—á–Ω–µ–Ω–∏–µ'),
      ('en',1,'Chance'),
      ('en',2,'Detail')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id,entity,entity_field,lang,text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id,su_su_id,title,body,qtype,metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_benefit_details_2' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'counterIncrement', jsonb_build_object(
           'id', 'lifeEventsCounter',
           'step', 10
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_benefit')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_benefit_details_2')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (RU/EN)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_benefit_details_2' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
      -- 107. –°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞
      ( 107, 1, 0.1666, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 10 –∫—Ä–æ–Ω'),
      ( 107, 2, 0.1666, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 20 –∫—Ä–æ–Ω'),
      ( 107, 3, 0.1666, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 30 –∫—Ä–æ–Ω'),
      ( 107, 4, 0.1666, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 40 –∫—Ä–æ–Ω'),
      ( 107, 5, 0.1666, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 50 –∫—Ä–æ–Ω'),
      ( 107, 6, 0.1666, '<b>–°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞</b>: –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 60 –∫—Ä–æ–Ω')
    ) AS raw_data_ru(group_id, num, probability, txt)

  UNION ALL

  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
    -- 107. Random Boon
    ( 107, 1, 0.1666, '<b>Random Boon</b>: jewelry worth 10 crowns'),
    ( 107, 2, 0.1666, '<b>Random Boon</b>: jewelry worth 20 crowns'),
    ( 107, 3, 0.1666, '<b>Random Boon</b>: jewelry worth 30 crowns'),
    ( 107, 4, 0.1666, '<b>Random Boon</b>: jewelry worth 40 crowns'),
    ( 107, 5, 0.1666, '<b>Random Boon</b>: jewelry worth 50 crowns'),
    ( 107, 6, 0.1666, '<b>Random Boon</b>: jewelry worth 60 crowns')
  ) AS raw_data_en(group_id, num, probability, txt)
),

vals AS (
  SELECT ('<td>'||to_char(probability*100,'FM990.00')||'%</td>'
         ||'<td>'||txt||'</td>') AS text
       , group_id
       , num
       , probability
       , lang
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.group_id, 'FM0000') || to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field)
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)

, rules_vals(group_id, id, body) AS (
    SELECT v.group_id
         , gen_random_uuid()
         , ('{ "==":
                [
                  { "reduce":
                      [
                        { "var": ["answers.byQuestion.wcc_witcher_events_benefit_details", []] },
                        { "var": "current" },
                        null
                      ]
                  },
                  "wcc_witcher_events_benefit_details_o' || to_char(group_id, 'FM0000') || '"
                ]
            }')::jsonb FROM (SELECT DISTINCT group_id FROM raw_data) v(group_id)
),
ins_rules AS (
  INSERT INTO rules(ru_id, body) SELECT r.id, r.body FROM rules_vals r
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, visible_ru_ru_id, sort_order,metadata)
SELECT
  'wcc_witcher_events_benefit_details_o'||to_char(vals.group_id, 'FM0000')||to_char(vals.num, 'FM9900'),
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.group_id, 'FM0000') || to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  r.id,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
JOIN rules_vals r ON vals.group_id = r.group_id
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã
WITH
  raw_data AS (
    SELECT DISTINCT num FROM (VALUES
      (107, 1), (107, 2), (107, 3), (107, 4), (107, 5), (107, 6)
    ) AS v(group_id, num)
    WHERE group_id = 107
  )
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_benefit_details_2' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è eventType "Fortune"/"–£–¥–∞—á–∞"
, ins_event_type_fortune AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune') AS id
         , meta.entity, 'event_type', v.lang, v.text
      FROM (VALUES
        ('ru', '–£–¥–∞—á–∞'),
        ('en', 'Fortune')
      ) AS v(lang, text)
      CROSS JOIN meta
    ON CONFLICT (id, lang) DO NOTHING
)
-- i18n –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø—ã 107
, ins_desc_107 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(107, 'FM0000') || to_char(vals.num, 'FM00') ||'.'|| 'event_desc') AS id
         , meta.entity, 'event_desc', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 10 –∫—Ä–æ–Ω.'),
        ('ru', 2, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 20 –∫—Ä–æ–Ω.'),
        ('ru', 3, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 30 –∫—Ä–æ–Ω.'),
        ('ru', 4, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 40 –∫—Ä–æ–Ω.'),
        ('ru', 5, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 50 –∫—Ä–æ–Ω.'),
        ('ru', 6, '–ü—Ä–∞–≤–æ –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏: –ø–æ–ª—É—á–µ–Ω–∞ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 60 –∫—Ä–æ–Ω.'),
        ('en', 1, 'Law of Surprises: received jewelry worth 10 crowns.'),
        ('en', 2, 'Law of Surprises: received jewelry worth 20 crowns.'),
        ('en', 3, 'Law of Surprises: received jewelry worth 30 crowns.'),
        ('en', 4, 'Law of Surprises: received jewelry worth 40 crowns.'),
        ('en', 5, 'Law of Surprises: received jewelry worth 50 crowns.'),
        ('en', 6, 'Law of Surprises: received jewelry worth 60 crowns.')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
-- i18n –¥–ª—è gear items –≥—Ä—É–ø–ø—ã 107
, ins_gear_107 AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(107, 'FM0000') || to_char(vals.num, 'FM00') ||'.'|| 'gear_name') AS id
         , 'gear', 'name', vals.lang, vals.text
      FROM (VALUES
        ('ru', 1, '–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å (10 –∫—Ä–æ–Ω)'),
        ('ru', 2, '–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å (20 –∫—Ä–æ–Ω)'),
        ('ru', 3, '–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å (30 –∫—Ä–æ–Ω)'),
        ('ru', 4, '–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å (40 –∫—Ä–æ–Ω)'),
        ('ru', 5, '–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å (50 –∫—Ä–æ–Ω)'),
        ('ru', 6, '–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å (60 –∫—Ä–æ–Ω)'),
        ('en', 1, 'Jewelry (10 crowns)'),
        ('en', 2, 'Jewelry (20 crowns)'),
        ('en', 3, 'Jewelry (30 crowns)'),
        ('en', 4, 'Jewelry (40 crowns)'),
        ('en', 5, 'Jewelry (50 crowns)'),
        ('en', 6, 'Jewelry (60 crowns)')
      ) AS vals(lang, num, text)
      CROSS JOIN meta
)
INSERT INTO effects (scope, an_an_id, body)
-- –ì—Ä—É–ø–ø–∞ 107: lifeEvents + gear
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(107, 'FM0000') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_life_events_fortune' ||'.'|| 'event_type_fortune')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(107, 'FM0000') || to_char(raw_data.num, 'FM00') ||'.'|| 'event_desc')::text)
      )
    )
  )
FROM raw_data
CROSS JOIN meta
UNION ALL
SELECT DISTINCT
  'character', 'wcc_witcher_events_benefit_details_o' || to_char(107, 'FM0000') || to_char(raw_data.num, 'FM00'),
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.gear'),
      jsonb_build_object(
        'name', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(107, 'FM0000') || to_char(raw_data.num, 'FM00') ||'.'|| 'gear_name')::text),
        'weight', 0
      )
    )
  )
FROM raw_data
CROSS JOIN meta;

-- –ü–µ—Ä–µ—Ö–æ–¥—ã: –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ —É–∑–ª–∞ –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π –∫ —É—Ç–æ—á–Ω–µ–Ω–∏—è–º –ø–æ –Ω—É–∂–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  VALUES
    ('wcc_witcher_events_benefit_details','wcc_witcher_events_benefit_details_2','wcc_witcher_events_benefit_details_o0107',2);

INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_witcher_events_benefit_details_2', 'wcc_witcher_events_risk', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;
-- <<< END sql/071_witcher_events_benefit_details_2.sql

-- >>> BEGIN sql/072_witcher_events_ally_gender.sql

\echo '072_witcher_events_ally_gender.sql'

-- –í–æ–ø—Ä–æ—Å: –ø–æ–ª —Å–æ—é–∑–Ω–∏–∫–∞
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_gender' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–∞–∫–æ–≥–æ –ø–æ–ª–∞ –≤–∞—à —Å–æ—é–∑–Ω–∏–∫.'),
        ('en', 'Determine the gender of your ally.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ü–æ–ª —Å–æ—é–∑–Ω–∏–∫–∞'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Ally Gender')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_ally_gender' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_ally')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_ally_gender')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (50/50)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_gender' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.* FROM (VALUES
    (1, 0.5, '–ú—É–∂—Å–∫–æ–π'),
    (2, 0.5, '–ñ–µ–Ω—Å–∫–∏–π')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.* FROM (VALUES
    (1, 0.5, 'Male'),
    (2, 0.5, 'Female')
  ) AS raw_data_en(num, probability, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_ally_gender_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏: –∏–∑ —É–∑–ª–∞ –∏—Å—Ö–æ–¥–æ–≤ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –ø–æ–ª–∞ —Å–æ—é–∑–Ω–∏–∫–∞ (–°–æ—é–∑–Ω–∏–∫/Ally)
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_ally_gender', 'wcc_witcher_events_o0102', 1 UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_ally_gender', 'wcc_witcher_events_o0202', 1 UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_ally_gender', 'wcc_witcher_events_o0302', 1 UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_ally_gender', 'wcc_witcher_events_o0402', 1
  ;




























-- <<< END sql/072_witcher_events_ally_gender.sql

-- >>> BEGIN sql/073_witcher_events_ally_who.sql

\echo '073_witcher_events_ally_who.sql'

-- –í–æ–ø—Ä–æ—Å: –∫—Ç–æ –≤–∞—à —Å–æ—é–∑–Ω–∏–∫
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_who' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫—Ç–æ –≤–∞—à —Å–æ—é–∑–Ω–∏–∫.'),
        ('en', 'Determine who your ally is.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ö—Ç–æ –≤–∞—à —Å–æ—é–∑–Ω–∏–∫'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Position')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_ally_who' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_ally')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_ally_who')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (10 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ 10%)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_who' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.* FROM (VALUES
    (1, 0.1, '–û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –≥–æ–ª–æ–≤–∞–º–∏'),
    (2, 0.1, '–ú–∞–≥'),
    (3, 0.1, '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –∏–ª–∏ —É—á–∏—Ç–µ–ª—å'),
    (4, 0.1, '–î—Ä—É–≥ –¥–µ—Ç—Å—Ç–≤–∞'),
    (5, 0.1, '–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫'),
    (6, 0.1, '–ë—ã–≤—à–∏–π –≤—Ä–∞–≥'),
    (7, 0.1, '–ö–Ω—è–∑—å/–∫–Ω—è–≥–∏–Ω—è'),
    (8, 0.1, '–ñ—Ä–µ—Ü/–∂—Ä–∏—Ü–∞'),
    (9, 0.1, '–°–æ–ª–¥–∞—Ç'),
    (10, 0.1, '–ë–∞—Ä–¥')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.* FROM (VALUES
    (1, 0.1, 'A Bounty Hunter'),
    (2, 0.1, 'A Mage'),
    (3, 0.1, 'A Mentor or Teacher'),
    (4, 0.1, 'A Childhood Friend'),
    (5, 0.1, 'A Craftsman'),
    (6, 0.1, 'An Old Enemy'),
    (7, 0.1, 'A Duke/Duchess'),
    (8, 0.1, 'A Priest/Priestess'),
    (9, 0.1, 'A Soldier'),
    (10, 0.1, 'A Bard')
  ) AS raw_data_en(num, probability, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_ally_who_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑—å: –Ω–∞–ø—Ä—è–º—É—é –æ—Ç –Ω–æ–¥—ã –ø–æ–ª–∞ —Å–æ—é–∑–Ω–∏–∫–∞
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_events_ally_gender', 'wcc_witcher_events_ally_who'
  ;




























-- <<< END sql/073_witcher_events_ally_who.sql

-- >>> BEGIN sql/074_witcher_events_ally_how_met.sql

\echo '074_witcher_events_ally_how_met.sql'

-- –í–æ–ø—Ä–æ—Å: –∫–∞–∫ –≤—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_how_met' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–∞–∫ –≤—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å.'),
        ('en', 'Determine how you met.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ö–∞–∫ –≤—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å'),
      ('en', 1, 'Chance'),
      ('en', 2, 'How You Met')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_ally_how_met' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_ally')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_ally_how_met')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (10 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ 10%)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_how_met' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.* FROM (VALUES
    (1, 0.1, '–í—ã –µ–≥–æ —Å–ø–∞—Å–ª–∏ –æ—Ç —á–µ–≥–æ-—Ç–æ'),
    (2, 0.1, '–í—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –≤ —Ç–∞–≤–µ—Ä–Ω–µ'),
    (3, 0.1, '–û–Ω –≤–∞—Å –æ—Ç —á–µ–≥–æ-—Ç–æ —Å–ø–∞—Å'),
    (4, 0.1, '–û–Ω –≤–∞—Å –Ω–∞–Ω—è–ª'),
    (5, 0.1, '–í—ã –≤–º–µ—Å—Ç–µ –ø–æ–ø–∞–ª–∏ –≤ –ª–æ–≤—É—à–∫—É'),
    (6, 0.1, '–í–∞—Å –∑–∞—Å—Ç–∞–≤–∏–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ'),
    (7, 0.1, '–í—ã –µ–≥–æ –Ω–∞–Ω—è–ª–∏'),
    (8, 0.1, '–í—ã –ø–æ–≤—Å—Ç—Ä–µ—á–∞–ª–∏—Å—å –ø—å—è–Ω—ã–º–∏ –∏ —Å–±–ª–∏–∑–∏–ª–∏—Å—å'),
    (9, 0.1, '–í—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –≤–æ –≤—Ä–µ–º—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π'),
    (10, 0.1, '–í—ã –≤–º–µ—Å—Ç–µ —Å—Ä–∞–∂–∞–ª–∏—Å—å')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.* FROM (VALUES
    (1, 0.1, 'Saved Them from Something'),
    (2, 0.1, 'Met in a Tavern'),
    (3, 0.1, 'They Saved You from Something'),
    (4, 0.1, 'They Hired You for Something'),
    (5, 0.1, 'You Were Trapped Together'),
    (6, 0.1, 'You Were Forced to Work Together'),
    (7, 0.1, 'You Hired Them for Something'),
    (8, 0.1, 'You Met While Drunk and Hit It Off'),
    (9, 0.1, 'You Met While Traveling'),
    (10, 0.1, 'You Fought Together')
  ) AS raw_data_en(num, probability, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_ally_how_met_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑—å: –Ω–∞–ø—Ä—è–º—É—é –æ—Ç –Ω–æ–¥—ã –∫—Ç–æ –≤–∞—à —Å–æ—é–∑–Ω–∏–∫
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_events_ally_who', 'wcc_witcher_events_ally_how_met'
  ;




























-- <<< END sql/074_witcher_events_ally_how_met.sql

-- >>> BEGIN sql/075_witcher_events_ally_closeness.sql

\echo '075_witcher_events_ally_closeness.sql'

-- –í–æ–ø—Ä–æ—Å: –Ω–∞—Å–∫–æ–ª—å–∫–æ –≤—ã –±–ª–∏–∑–∫–∏
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_closeness' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å—Ç–µ–ø–µ–Ω—å –±–ª–∏–∑–æ—Å—Ç–∏.'),
        ('en', 'Determine how close you are.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ë–ª–∏–∑–æ—Å—Ç—å'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Closeness')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_ally_closeness' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_ally')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_ally_closeness')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (60%, 30%, 10%)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_closeness' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.* FROM (VALUES
    (1, 0.6, '–ó–Ω–∞–∫–æ–º—ã–µ'),
    (2, 0.3, '–î—Ä—É–∑—å—è'),
    (3, 0.1, '–ù–µ —Ä–∞–∑–ª–µ–π –≤–æ–¥–∞')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.* FROM (VALUES
    (1, 0.6, 'Acquaintances'),
    (2, 0.3, 'Friends'),
    (3, 0.1, 'Bound By Bond')
  ) AS raw_data_en(num, probability, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_ally_closeness_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑—å: –Ω–∞–ø—Ä—è–º—É—é –æ—Ç –Ω–æ–¥—ã –∫–∞–∫ –≤—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_events_ally_how_met', 'wcc_witcher_events_ally_closeness'
  ;




























-- <<< END sql/075_witcher_events_ally_closeness.sql

-- >>> BEGIN sql/076_witcher_events_ally_is_alive.sql

\echo '076_witcher_events_ally_is_alive.sql'

-- –í–æ–ø—Ä–æ—Å: –∂–∏–≤ –ª–∏ —Å–æ—é–∑–Ω–∏–∫
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_is_alive' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∂–∏–≤ –ª–∏ –≤–∞—à —Å–æ—é–∑–Ω–∏–∫.'),
        ('en', 'Determine if your ally is alive.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ñ–∏–≤ –ª–∏?'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Is alive?')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_ally_is_alive' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_ally')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_ally_is_alive')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (–∂–∏–≤ 70%, 10 –æ–ø—Ü–∏–π —Å–º–µ—Ä—Ç–∏ –ø–æ 3%)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_is_alive' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
    (1, 0.7, '–°–æ—é–∑–Ω–∏–∫ –∂–∏–≤'),
    (2, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 10 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.'),
    (3, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 20 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.'),
    (4, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 30 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.'),
    (5, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 40 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.'),
    (6, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 50 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.'),
    (7, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 60 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.'),
    (8, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 70 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.'),
    (9, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 80 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.'),
    (10, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 90 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.'),
    (11, 0.03, '–°–æ—é–∑–Ω–∏–∫ —É–º–µ—Ä, –ø—Ä–æ–∂–∏–≤ –µ—â–µ 100 –ª–µ—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
    (1, 0.7, 'The ally is alive'),
    (2, 0.03, 'The ally dies 10 years after they meet.'),
    (3, 0.03, 'The ally dies 20 years after they meet.'),
    (4, 0.03, 'The ally dies 30 years after they meet.'),
    (5, 0.03, 'The ally dies 40 years after they meet.'),
    (6, 0.03, 'The ally dies 50 years after they meet.'),
    (7, 0.03, 'The ally dies 60 years after they meet.'),
    (8, 0.03, 'The ally dies 70 years after they meet.'),
    (9, 0.03, 'The ally dies 80 years after they meet.'),
    (10, 0.03, 'The ally dies 90 years after they meet.'),
    (11, 0.03, 'The ally dies 100 years after they meet.')
  ) AS raw_data_en(num, probability, txt)
),

vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)

INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_ally_is_alive_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
   (
     jsonb_build_object(
           'probability', vals.probability
     )
     || CASE
          WHEN vals.num = 1 THEN
            '{"counterIncrement":{"id":"lifeEventsCounter","step":10}}'::jsonb
          ELSE '{}'::jsonb
        END
   )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—é–∑–Ω–∏–∫–∞ –≤ allies (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞ 1 - "—Å–æ—é–∑–Ω–∏–∫ –∂–∏–≤")
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_is_alive' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_events_ally_is_alive_o01',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.allies'),
      jsonb_build_object(
        'gender', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_gender'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'position', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_who'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'how_met', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_how_met'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'how_close', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_closeness'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'is_alive', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_is_alive'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value'))))
      )
    )
  )
FROM meta;

-- i18n –¥–ª—è eventType "–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏" (—Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–∞–∫–∂–µ –≤ –¥—Ä—É–≥–∏—Ö –Ω–æ–¥–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º ON CONFLICT)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏'),
      ('en', 'Allies and Enemies')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ lifeEvents (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–∞—Ä–∏–∞–Ω—Ç—É –æ—Ç–≤–µ—Ç–∞ 1)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_is_alive' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è description "–°–æ—é–∑–Ω–∏–∫"
, ins_desc_ally AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_ally') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–°–æ—é–∑–Ω–∏–∫'),
        ('en', 'Ally')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_events_ally_is_alive_o01',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_ally')::text)
      )
    )
  )
FROM meta;
 
 -- –°–≤—è–∑—å: –Ω–∞–ø—Ä—è–º—É—é –æ—Ç –Ω–æ–¥—ã –±–ª–∏–∑–æ—Å—Ç–∏
 INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
   SELECT 'wcc_witcher_events_ally_closeness', 'wcc_witcher_events_ally_is_alive'
   ;
 
 -- –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π: –∫ —Ä–∏—Å–∫–∞–º
 INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
   SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_risk', r.ru_id, 1
     FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;




























-- <<< END sql/076_witcher_events_ally_is_alive.sql

-- >>> BEGIN sql/077_witcher_events_ally_death_reason.sql

\echo '077_witcher_events_ally_death_reason.sql'

-- –í–æ–ø—Ä–æ—Å: –ø—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏ —Å–æ—é–∑–Ω–∏–∫–∞
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_death_reason' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É —Å–º–µ—Ä—Ç–∏ —Å–æ—é–∑–Ω–∏–∫–∞.'),
        ('en', 'Determine the reason of your ally''s death.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ü—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Death Reason')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_ally_death_reason' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'counterIncrement', jsonb_build_object(
           'id', 'lifeEventsCounter',
           'step', 10
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_ally')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_ally_death_reason')::text
         )
       )
  FROM meta;

 -- –û—Ç–≤–µ—Ç—ã (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ d10: 1-3, 4-6, 7-9, 10)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_death_reason' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
  FROM (VALUES
     (1, 0.3, '–ù–∞–ø–∞–¥–µ–Ω–∏–µ —Ä–∞–∑–±–æ–π–Ω–∏–∫–æ–≤'),
     (2, 0.3, '–ù–∞–ø–∞–¥–µ–Ω–∏–µ —á—É–¥–æ–≤–∏—â–∞'),
     (3, 0.3, '–í–æ–π–Ω–∞'),
     (4, 0.1, '–ú–∏—Ä–Ω–∞—è —Å–º–µ—Ä—Ç—å')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
  FROM (VALUES
     (1, 0.3, 'Bandit Attack'),
     (2, 0.3, 'Monster Attack'),
     (3, 0.3, 'Casualty of War'),
     (4, 0.1, 'Peaceful Death')
  ) AS raw_data_en(num, probability, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_ally_death_reason_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—é–∑–Ω–∏–∫–∞ –≤ allies (–ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –≤–æ–ø—Ä–æ—Å—É)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_death_reason' AS qu_id
                , 'character' AS entity)
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.allies'),
      jsonb_build_object(
        'gender', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_gender'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'position', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_who'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'how_met', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_how_met'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'how_close', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_closeness'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'is_alive', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_is_alive'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))),
        'death_reason', jsonb_build_object('i18n_uuid', jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_ally_death_reason'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value'))))
      )
    )
  )
FROM meta;

-- i18n –¥–ª—è eventType "–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏" (—Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–∞–∫–∂–µ –≤ –¥—Ä—É–≥–∏—Ö –Ω–æ–¥–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º ON CONFLICT)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–°–æ—é–∑–Ω–∏–∫–∏ –∏ –≤—Ä–∞–≥–∏'),
      ('en', 'Allies and Enemies')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ lifeEvents (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–æ–ø—Ä–æ—Å—É)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_ally_death_reason' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è description "–°–æ—é–∑–Ω–∏–∫"
, ins_desc_ally AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_ally') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–°–æ—é–∑–Ω–∏–∫'),
        ('en', 'Ally')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| 'wcc_life_events_allies_and_enemies' ||'.'|| 'event_type_allies_and_enemies')::text),
        'description',
        jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_ally')::text)
      )
    )
  )
FROM meta;

-- –ü–µ—Ä–µ—Ö–æ–¥—ã: –∏–∑ –Ω–æ–¥—ã –∂–∏–≤ –ª–∏ —Å–æ—é–∑–Ω–∏–∫ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º —Å–º–µ—Ä—Ç–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o02', 2 UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o03', 2 UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o04', 2 UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o05', 2 UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o06', 2 UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o07', 2 UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o08', 2 UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o09', 2 UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o10', 2 UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_ally_is_alive_o11', 2
  ;

-- –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_witcher_events_ally_death_reason', 'wcc_witcher_events_risk', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;




























-- <<< END sql/077_witcher_events_ally_death_reason.sql

-- >>> BEGIN sql/078_witcher_events_hunt_prey.sql

\echo '078_witcher_events_hunt_prey.sql'

-- –í–æ–ø—Ä–æ—Å: —Ü–µ–ª—å –æ—Ö–æ—Ç—ã (–∫–ª–∞—Å—Å —á—É–¥–æ–≤–∏—â)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_prey' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –Ω–∞ –∫–æ–≥–æ –≤—ã –æ—Ö–æ—Ç–∏–ª–∏—Å—å.'),
        ('en', 'Determine what monster type you hunted.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ö–ª–∞—Å—Å —á—É–¥–æ–≤–∏—â'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Monster Type')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_hunt_prey' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_hunt')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_hunt_prey')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (10 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ 10%)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_prey' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.* FROM (VALUES
    (1, 0.1, '–î—É—Ö–∏'),
    (2, 0.1, '–ü—Ä–æ–∫–ª—è—Ç—ã–µ'),
    (3, 0.1, '–ì–∏–±—Ä–∏–¥—ã'),
    (4, 0.1, '–ò–Ω—Å–µ–∫—Ç–æ–∏–¥—ã'),
    (5, 0.1, '–î—É—Ö–∏ —Å—Ç–∏—Ö–∏–π'),
    (6, 0.1, '–†–µ–ª–∏–∫—Ç—ã'),
    (7, 0.1, '–û–≥—Ä—ã'),
    (8, 0.1, '–î—Ä–∞–∫–æ–Ω–∏–¥—ã'),
    (9, 0.1, '–¢—Ä—É–ø–æ–µ–¥—ã'),
    (10, 0.1, '–í–∞–º–ø–∏—Ä—ã')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.* FROM (VALUES
    (1, 0.1, 'Specter'),
    (2, 0.1, 'Cursed One'),
    (3, 0.1, 'Hybrid'),
    (4, 0.1, 'Insectoid'),
    (5, 0.1, 'Elementa'),
    (6, 0.1, 'Relict'),
    (7, 0.1, 'Ogroid'),
    (8, 0.1, 'Draconid'),
    (9, 0.1, 'Necrophage'),
    (10, 0.1, 'Vampire')
  ) AS raw_data_en(num, probability, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_hunt_prey_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑–∏: –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ —É–∑–ª–∞ –∏—Å—Ö–æ–¥–æ–≤ –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç—É ¬´–û—Ö–æ—Ç–∞ / A Hunt¬ª
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_hunt_prey', 'wcc_witcher_events_o0103', 1 UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_hunt_prey', 'wcc_witcher_events_o0203', 1 UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_hunt_prey', 'wcc_witcher_events_o0303', 1 UNION ALL
  SELECT 'wcc_witcher_events', 'wcc_witcher_events_hunt_prey', 'wcc_witcher_events_o0403', 1
  ;




























-- <<< END sql/078_witcher_events_hunt_prey.sql

-- >>> BEGIN sql/079_witcher_events_hunt_location.sql

\echo '079_witcher_events_hunt_location.sql'

-- –í–æ–ø—Ä–æ—Å: –≥–¥–µ –±—ã–ª–∞ —Ü–µ–ª—å –æ—Ö–æ—Ç—ã (–º–µ—Å—Ç–æ)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_location' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–µ—Å—Ç–æ, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å —Ü–µ–ª—å –æ—Ö–æ—Ç—ã.'),
        ('en', 'Determine where the prey was located.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ú–µ—Å—Ç–æ'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Location')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_hunt_location' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_hunt')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_hunt_location')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (10 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ 10%)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_location' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.* FROM (VALUES
    (1, 0.1, '–õ–µ—Å'),
    (2, 0.1, '–ó–¥–∞–Ω–∏–µ'),
    (3, 0.1, '–ó–∞–±—Ä–æ—à–µ–Ω–Ω–æ–µ –∑–¥–∞–Ω–∏–µ'),
    (4, 0.1, '–ú–æ—Ä—Å–∫–æ–µ –ø–æ–±–µ—Ä–µ–∂—å–µ'),
    (5, 0.1, '–ì–æ—Ä—ã'),
    (6, 0.1, '–ì–æ—Ä–æ–¥'),
    (7, 0.1, '–ö–ª–∞–¥–±–∏—â–µ'),
    (8, 0.1, '–î–µ—Ä–µ–≤–Ω—è'),
    (9, 0.1, '–£ —Ä–µ–∫–∏'),
    (10, 0.1, '–ü–µ—â–µ—Ä–∞')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.* FROM (VALUES
    (1, 0.1, 'A Forest'),
    (2, 0.1, 'A Building'),
    (3, 0.1, 'An Abandoned Building'),
    (4, 0.1, 'A Coast'),
    (5, 0.1, 'The Mountains'),
    (6, 0.1, 'The City'),
    (7, 0.1, 'A Graveyard'),
    (8, 0.1, 'A Hamlet'),
    (9, 0.1, 'Along the River'),
    (10, 0.1, 'A Cave')
  ) AS raw_data_en(num, probability, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_hunt_location_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑—å: –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –Ω–æ–¥—ã —Ü–µ–ª–∏ –æ—Ö–æ—Ç—ã
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_events_hunt_prey', 'wcc_witcher_events_hunt_location'
  ;




























-- <<< END sql/079_witcher_events_hunt_location.sql

-- >>> BEGIN sql/080_witcher_events_hunt_outcome.sql

\echo '080_witcher_events_hunt_outcome.sql'

-- –í–æ–ø—Ä–æ—Å: —á–µ–º –≤—Å—ë –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –æ—Ö–æ—Ç–∞
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_outcome' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
      FROM (VALUES
        ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ö–æ—Ç—ã.'),
        ('en', 'Determine how the hunt ended.')
      ) AS v(lang, text)
      CROSS JOIN meta
  )
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ß–µ–º –≤—Å—ë –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å'),
      ('en', 1, 'Chance'),
      ('en', 2, 'How It Ended')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_hunt_outcome' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_hunt')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_hunt_outcome')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ 20%)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_outcome' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.* FROM (VALUES
    (1, 0.2, '–í—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–µ–Ω—å–≥–∏ –∏ —É—à–ª–∏'),
    (2, 0.2, '–ù–∞–Ω–∏–º–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–∞–ª—Å—è –ø–ª–∞—Ç–∏—Ç—å'),
    (3, 0.2, '–ù–∞–Ω–∏–º–∞—Ç–µ–ª—å –∑–∞–ø–ª–∞—Ç–∏–ª —Ç–æ–≤–∞—Ä–∞–º–∏'),
    (4, 0.2, '–ë–æ–π –±—ã–ª –æ—Å–æ–±–µ–Ω–Ω–æ —Ç—è–∂—ë–ª—ã–º'),
    (5, 0.2, '–ë–æ–π –±—ã–ª —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ –ª—ë–≥–∫–∏–º')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.* FROM (VALUES
    (1, 0.2, 'Got Your Money and Left'),
    (2, 0.2, 'Employer Refused To Pay'),
    (3, 0.2, 'Employer Paid You in Trade'),
    (4, 0.2, 'It Was a Particularly Tough Fight'),
    (5, 0.2, 'It Was a Surprisingly Easy Fight')
  ) AS raw_data_en(num, probability, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
    FROM vals
    CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_hunt_outcome_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑—å: –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –Ω–æ–¥—ã –ª–æ–∫–∞—Ü–∏–∏ –æ—Ö–æ—Ç—ã
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_events_hunt_location', 'wcc_witcher_events_hunt_outcome'
  ;




























-- <<< END sql/080_witcher_events_hunt_outcome.sql

-- >>> BEGIN sql/081_witcher_events_hunt_twist.sql

\echo '081_witcher_events_hunt_twist.sql'

-- –í–æ–ø—Ä–æ—Å: –±—ã–ª –ª–∏ –ø–æ–≤–æ—Ä–æ—Ç —Å—é–∂–µ—Ç–∞
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_twist' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
           , meta.entity, 'body', v.lang, v.text
        FROM (VALUES
          ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –±—ã–ª –ª–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç.'),
          ('en', 'Determine whether there was a twist.')
        ) AS v(lang, text)
        CROSS JOIN meta
)
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–í–Ω–µ–∑–∞–ø–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç?'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Twist?')
)
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
           , meta.entity, 'column_name', c_vals.lang, c_vals.text
        FROM c_vals
        CROSS JOIN meta
)

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_hunt_twist' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_hunt')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_hunt_twist')::text
         )
       )
  FROM meta;

-- –û—Ç–≤–µ—Ç—ã (–î–∞ 40%, –ù–µ—Ç 60%)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_twist' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.* FROM (VALUES
    (1, 0.4, '–î–∞'),
    (2, 0.6, '–ù–µ—Ç')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.* FROM (VALUES
    (1, 0.4, 'Yes'),
    (2, 0.6, 'No')
  ) AS raw_data_en(num, probability, txt)
)
, vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
         , meta.entity, meta.entity_field, vals.lang, vals.text
      FROM vals
      CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
         , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
      FROM vals
      CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_hunt_twist_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num AS sort_order,
  jsonb_build_object(
           'probability', vals.probability
  ) 
     || CASE
          WHEN vals.num = 2 THEN
            '{"counterIncrement":{"id":"lifeEventsCounter","step":10}}'::jsonb
          ELSE '{}'::jsonb
        END AS metadata
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑—å: –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –Ω–æ–¥—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ö–æ—Ç—ã
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_witcher_events_hunt_outcome', 'wcc_witcher_events_hunt_twist'
  ;

-- –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_witcher_events_hunt_twist', 'wcc_witcher_events_risk', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;

-- i18n –¥–ª—è eventType "–û—Ö–æ—Ç–∞" (–∏—Å–ø–æ–ª—å–∑—É–µ–º ON CONFLICT)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_hunt' ||'.'|| 'event_type_hunt') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–û—Ö–æ—Ç–∞'),
      ('en', 'Hunt')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- i18n –¥–ª—è description "–û—Ö–æ—Ç–∞" (–ø—Ä–∏–≤—è–∑–∫–∞ –∫ –Ω–æ–¥–µ –ø–æ–≤–æ—Ä–æ—Ç–∞)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_twist' AS qu_id
                , 'character' AS entity)
, ins_desc_hunt AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_hunt') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–û—Ö–æ—Ç–∞'),
        ('en', 'Hunt')
      ) AS v(lang, text)
      CROSS JOIN meta
)
-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è "–û—Ö–æ—Ç–∞" (—Ç–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî –ø–æ–≤–æ—Ä–æ—Ç–∞ –Ω–µ—Ç)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_witcher_events_hunt_twist_o02',
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_hunt' ||'.'|| 'event_type_hunt')::text),
        'description',
        jsonb_build_object(
          'i18n_uuid_array',
          jsonb_build_array(
            ' - ',
            jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_hunt_prey'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value'))),
            jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_hunt_location'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value'))),
            jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_hunt_outcome'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))
          )
        )
      )
    )
  )
FROM meta;


























-- <<< END sql/081_witcher_events_hunt_twist.sql

-- >>> BEGIN sql/082_witcher_events_hunt_twist_details.sql

\echo '082_witcher_events_hunt_twist_details.sql'

-- –í–æ–ø—Ä–æ—Å: –∫–∞–∫–æ–π —Å–ª—É—á–∏–ª—Å—è –ø–æ–≤–æ—Ä–æ—Ç —Å—é–∂–µ—Ç–∞
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_twist_details' AS qu_id
                , 'questions' AS entity)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body') AS id
         , meta.entity, 'body', v.lang, v.text
    FROM (VALUES
      ('ru', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ.'),
      ('en', 'Determine what the twist was.')
    ) AS v(lang, text)
    CROSS JOIN meta
  ),

  -- –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
  c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–í–Ω–µ–∑–∞–ø–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Twist')
  )
, ins_cols AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
    FROM c_vals
    CROSS JOIN meta
  )

INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| 'body')
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_hunt_twist_details' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'counterIncrement', jsonb_build_object(
           'id', 'lifeEventsCounter',
           'step', 10
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.life_events')::text,
           jsonb_build_object('jsonlogic_expression', jsonb_build_object('cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object('+', jsonb_build_array(
                jsonb_build_object('var', 'counters.lifeEventsCounter'),
                10
              ))
            ))),
           ck_id('witcher_cc.hierarchy.witcher_events_hunt')::text,
           ck_id('witcher_cc.hierarchy.witcher_events_hunt_twist_details')::text
         )
       )
    FROM meta;

-- –û—Ç–≤–µ—Ç—ã (10 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ 10%)
WITH
raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.* FROM (VALUES
    (1, 0.1, '–ß—É–¥–æ–≤–∏—â–µ –Ω–µ–Ω–∞—Å—Ç–æ—è—â–µ–µ'),
    (2, 0.1, '–≠—Ç–æ –≤—Å—ë –∏–∑-–∑–∞ –ø—Ä–æ–∫–ª—è—Ç–∏—è'),
    (3, 0.1, '–ß—É–¥–æ–≤–∏—â–µ —É–∂–µ –º–µ—Ä—Ç–≤–æ'),
    (4, 0.1, '–≠—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –Ω–µ —Ç–æ, —á—Ç–æ –≤—ã –¥—É–º–∞–ª–∏'),
    (5, 0.1, '–ù–∞–Ω–∏–º–∞—Ç–µ–ª—å —Ö–æ—Ç–µ–ª –ø–æ–π–º–∞—Ç—å —á—É–¥–æ–≤–∏—â–µ'),
    (6, 0.1, '–í–æ –≤—Å—ë–º –≤–∏–Ω–æ–≤–∞—Ç –Ω–∞–Ω–∏–º–∞—Ç–µ–ª—å'),
    (7, 0.1, '–ß—É–¥–æ–≤–∏—â–µ –±—ã–ª–æ –±–µ–∑–≤—Ä–µ–¥–Ω—ã–º'),
    (8, 0.1, '–≠—Ç–æ –±—ã–ª–∞ –ª–æ–≤—É—à–∫–∞ –Ω–∞ –≤–∞—Å'),
    (9, 0.1, '–í—Å—ë –æ–∫–∞–∑–∞–ª–æ—Å—å –∫—É–¥–∞ —Ö—É–∂–µ, —á–µ–º –≤–∞–º –≥–æ–≤–æ—Ä–∏–ª–∏'),
    (10, 0.1, '–ó–∞ –≤—Å–µ–º —Å—Ç–æ—è–ª –º–∞–≥')
  ) AS raw_data_ru(num, probability, txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.* FROM (VALUES
    (1, 0.1, 'The Monster Was Fake'),
    (2, 0.1, 'It Was All a Curse'),
    (3, 0.1, 'The Monster Was Already Dead'),
    (4, 0.1, 'It Wasn''t What You Thought'),
    (5, 0.1, 'Your Employer Wanted It Caught'),
    (6, 0.1, 'The Employer Is To Blame For It All'),
    (7, 0.1, 'The Monster Was Harmless'),
    (8, 0.1, 'It Was a Trap For You'),
    (9, 0.1, 'It Was More Than You Were Told'),
    (10, 0.1, 'A Mage Was Behind It All')
  ) AS raw_data_en(num, probability, txt)
),
vals AS (
  SELECT
    ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>'
     || '<td>' || txt || '</td>') AS text,
    num, probability, lang, txt
  FROM raw_data
)
, meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_twist_details' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, ins_lbl AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
  FROM vals
  CROSS JOIN meta
)
, ins_lbl_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', vals.lang, vals.txt
  FROM vals
  CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT
  'wcc_witcher_events_hunt_twist_details_o' || to_char(vals.num, 'FM00') AS an_id,
  meta.su_su_id,
  meta.qu_id,
  ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
  vals.num,
  jsonb_build_object(
           'probability', vals.probability
  )
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- –°–≤—è–∑—å: —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Ç–≤–µ—Ç –±—ã–ª ¬´–î–∞¬ª
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, via_an_an_id, priority)
  SELECT 'wcc_witcher_events_hunt_twist', 'wcc_witcher_events_hunt_twist_details', 'wcc_witcher_events_hunt_twist_o01', 1
  ;

-- –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_witcher_events_hunt_twist_details', 'wcc_witcher_events_risk', r.ru_id, 1
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_valid') r;

-- i18n –¥–ª—è eventType "–û—Ö–æ—Ç–∞" (–∏—Å–ø–æ–ª—å–∑—É–µ–º ON CONFLICT)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_hunt' ||'.'|| 'event_type_hunt') AS id
       , 'character', 'event_type', v.lang, v.text
    FROM (VALUES
      ('ru', '–û—Ö–æ—Ç–∞'),
      ('en', 'Hunt')
    ) AS v(lang, text)
  ON CONFLICT (id, lang) DO NOTHING;

-- –≠—Ñ—Ñ–µ–∫—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è "–û—Ö–æ—Ç–∞" (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–æ–ø—Ä–æ—Å—É)
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_witcher_events_hunt_twist_details' AS qu_id
                , 'character' AS entity)
-- i18n –¥–ª—è description "–û—Ö–æ—Ç–∞"
, ins_desc_hunt AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| 'event_desc_hunt') AS id
         , meta.entity, 'event_desc', v.lang, v.text
      FROM (VALUES
        ('ru', '–û—Ö–æ—Ç–∞'),
        ('en', 'Hunt')
      ) AS v(lang, text)
      CROSS JOIN meta
)
INSERT INTO effects (scope, qu_qu_id, an_an_id, body)
SELECT 'character', meta.qu_id, NULL,
  jsonb_build_object(
    'add',
    jsonb_build_array(
      jsonb_build_object('var','characterRaw.lore.lifeEvents'),
      jsonb_build_object(
        'timePeriod',
        jsonb_build_object(
          'jsonlogic_expression', jsonb_build_object(
            'cat', jsonb_build_array(
              jsonb_build_object('var', 'counters.lifeEventsCounter'),
              '-',
              jsonb_build_object(
                '+', jsonb_build_array(
                  jsonb_build_object('var', 'counters.lifeEventsCounter'),
                  10
                )
              )
            )
          )
        ),
        'eventType',
        jsonb_build_object('i18n_uuid', ck_id('witcher_cc' ||'.'|| 'wcc_witcher_events_hunt' ||'.'|| 'event_type_hunt')::text),
        'description',
        jsonb_build_object(
          'i18n_uuid_array',
          jsonb_build_array(
            ' - ',
            jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_hunt_prey'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value'))),
            jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_hunt_location'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value'))),
            jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_hunt_outcome'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value'))),
            jsonb_build_object('ck_id', jsonb_build_object('cat', jsonb_build_array('witcher_cc.', jsonb_build_object('reduce', jsonb_build_array(jsonb_build_object('var', 'answers.byQuestion.wcc_witcher_events_hunt_twist_details'), jsonb_build_object('var', 'current'), NULL)), '.answer_options.label_value')))
          )
        )
      )
    )
  )
FROM meta;



























-- <<< END sql/082_witcher_events_hunt_twist_details.sql

-- >>> BEGIN sql/083_style_clothing.sql

\echo '083_style_clothing.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_clothing' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , '
{
  "dice":"d0"
}'::jsonb AS metadata)
, ins_body AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| meta.entity ||'.'|| v.entity_field) AS id
           , meta.entity, v.entity_field, v.lang, v.text
        FROM (VALUES
                ('ru', '–ö–∞–∫—É—é –æ–¥–µ–∂–¥—É –≤—ã –Ω–æ—Å–∏—Ç–µ?', 'body'),
                ('en', 'What clothes do you wear?', 'body')
             ) AS v(lang, text, entity_field)
        CROSS JOIN meta
      RETURNING id AS body_id
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , (SELECT DISTINCT body_id FROM ins_body)
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.style')::text,
             ck_id('witcher_cc.hierarchy.style_clothing')::text
           )
         )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_clothing' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
    ('ru', 1, '–í–æ–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞'),
    ('ru', 2, '–û–¥–µ–∂–¥–∞ –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π'),
    ('ru', 3, '–†–æ—Å–∫–æ—à–Ω–∞—è –æ–¥–µ–∂–¥–∞'),
    ('ru', 4, '–ü–æ—Ç—Ä—ë–ø–∞–Ω–Ω–∞—è –æ–¥–µ–∂–¥–∞'),
    ('ru', 5, '–ü—Ä–∞–∫—Ç–∏—á–Ω–∞—è –æ–¥–µ–∂–¥–∞'),
    ('ru', 6, '–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è –æ–¥–µ–∂–¥–∞'),
    ('ru', 7, '–û—Ç–∫—Ä—ã—Ç–∞—è –æ–¥–µ–∂–¥–∞'),
    ('ru', 8, '–¢—ë–ø–ª–∞—è –æ–¥–µ–∂–¥–∞'),
    ('ru', 9, '–°—Ç—Ä–∞–Ω–Ω–∞—è –æ–¥–µ–∂–¥–∞'),
    ('ru', 10, '–í—ã—á—É—Ä–Ω–∞—è –æ–¥–µ–∂–¥–∞'),
    ('en', 1, 'A Uniform'),
    ('en', 2, 'Traveling Clothing'),
    ('en', 3, 'Fancy Clothing'),
    ('en', 4, 'Ragged Clothing'),
    ('en', 5, 'Utilitarian Clothing'),
    ('en', 6, 'Traditional Clothing'),
    ('en', 7, 'Revealing Clothing'),
    ('en', 8, 'Heavy Clothing'),
    ('en', 9, 'Strange Clothing'),
    ('en', 10, 'Flamboyant Clothing')
  ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_style_clothing_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_life_events_enemy_the_power', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_life_events_ally_where', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_life_events_fortune', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_life_events_misfortune', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_life_events_fortune_or_not_details', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_life_events_relationshipsstory', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_life_events_relationshipsstory_details', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_life_events_fortune_or_not_details_dice', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_life_events_fortune_or_not_details_addiction', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_life_events_fortune_or_not_details_curse', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_witcher_events_benefit', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_witcher_events_benefit_details', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_witcher_events_benefit_details_2', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_witcher_events_ally_is_alive', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_witcher_events_ally_death_reason', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_witcher_events_hunt_twist', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_witcher_events_hunt_twist_details', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_past_siblings_personality', 'wcc_style_clothing' UNION ALL
  SELECT 'wcc_past_siblings_amount', 'wcc_style_clothing';

  INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_witcher_events_risk', 'wcc_style_clothing', r.ru_id, 0
    FROM (SELECT ru_id FROM rules WHERE name = 'lifeEventsCounter_is_invalid') r;

WITH
  ins_rules AS (
    INSERT INTO rules(ru_id, body)
      SELECT gen_random_uuid()
          , jsonb_build_object(
              'and', jsonb_build_array(
                jsonb_build_object('!', r.body),
                jsonb_build_object(
                  'in', jsonb_build_array(
                    jsonb_build_object(
                      'reduce', jsonb_build_array(
                        jsonb_build_object('var', jsonb_build_array('answers.byQuestion.wcc_witcher_events', jsonb_build_array())),
                        jsonb_build_object('var', 'current'),
                        null
                      )
                    ),
                    jsonb_build_array(
                      'wcc_witcher_events_o0104',
                      'wcc_witcher_events_o0204',
                      'wcc_witcher_events_o0304',
                      'wcc_witcher_events_o0404'
                    )
                  )
                )
              )
            )
        FROM rules r
      WHERE r.name = 'lifeEventsCounter_is_valid'
    RETURNING ru_id
  )
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id, ru_ru_id, priority)
  SELECT 'wcc_witcher_events', 'wcc_style_clothing', r.ru_id, 1
    FROM ins_rules r;

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ characterRaw.lore.style.clothing
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_clothing' AS qu_id)
, answer_nums AS (
  SELECT num FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_style_clothing_o' || to_char(answer_nums.num, 'FM9900'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.style.clothing'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(answer_nums.num, 'FM9900') ||'.answer_options.label')::text)
    )
  )
FROM answer_nums
CROSS JOIN meta;
-- <<< END sql/083_style_clothing.sql

-- >>> BEGIN sql/084_style_personality.sql

\echo '084_style_personality.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_personality' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , '
{
  "dice":"d0"
}'::jsonb AS metadata)
INSERT INTO questions (qu_id, su_su_id, title, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.style')::text,
             ck_id('witcher_cc.hierarchy.style_personality')::text
           )
         )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_personality' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
    ('ru', 1, '–°–∫—Ä—ã—Ç–Ω—ã–π'),
    ('ru', 2, '–ù–µ–ø–æ–∫–æ—Ä–Ω—ã–π'),
    ('ru', 3, '–í—Å–ø—ã–ª—å—á–∏–≤—ã–π'),
    ('ru', 4, '–ò–¥–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π'),
    ('ru', 5, '–í–¥—É–º—á–∏–≤—ã–π'),
    ('ru', 6, '–°—É—Ä–æ–≤—ã–π'),
    ('ru', 7, '–ö–æ–≤–∞—Ä–Ω—ã–π'),
    ('ru', 8, '–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π'),
    ('ru', 9, '–ù–∞–¥–º–µ–Ω–Ω—ã–π'),
    ('ru', 10, '–ù–µ—Ä–≤–æ–∑–Ω—ã–π'),
    ('en', 1, 'Secretive'),
    ('en', 2, 'Rebellious'),
    ('en', 3, 'Violent'),
    ('en', 4, 'Idealistic'),
    ('en', 5, 'Contemplative'),
    ('en', 6, 'Stern'),
    ('en', 7, 'Deceptive'),
    ('en', 8, 'Friendly'),
    ('en', 9, 'Arrogant'),
    ('en', 10, 'Nervous')
  ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_style_personality_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_style_clothing', 'wcc_style_personality';

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ characterRaw.lore.style.personality
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_personality' AS qu_id)
, answer_nums AS (
  SELECT num FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_style_personality_o' || to_char(answer_nums.num, 'FM9900'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.style.personality'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(answer_nums.num, 'FM9900') ||'.answer_options.label')::text)
    )
  )
FROM answer_nums
CROSS JOIN meta;
-- <<< END sql/084_style_personality.sql

-- >>> BEGIN sql/085_style_hair.sql

\echo '085_style_hair.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_hair' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , '
{
  "dice":"d0"
}'::jsonb AS metadata)
INSERT INTO questions (qu_id, su_su_id, title, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.style')::text,
             ck_id('witcher_cc.hierarchy.style_hair')::text
           )
         )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_hair' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
    ('ru', 1, '–î–ª–∏–Ω–Ω—ã–µ —Ä–∞—Å–ø—É—â–µ–Ω–Ω—ã–µ –≤–æ–ª–æ—Å—ã'),
    ('ru', 2, '–ö–æ—Ä–æ—Ç–∫–æ –æ—Å—Ç—Ä–∏–∂–µ–Ω–Ω—ã–µ –≤–æ–ª–æ—Å—ã'),
    ('ru', 3, '–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ—Å—Ç—Ä–∏–∂–µ–Ω–Ω—ã–µ –≤–æ–ª–æ—Å—ã'),
    ('ru', 4, '–ó–∞–ø–ª–µ—Ç—ë–Ω–Ω—ã–µ –≤ –∫–æ—Å—É –≤–æ–ª–æ—Å—ã'),
    ('ru', 5, '–î–ª–∏–Ω–Ω—ã–µ —Ä–∞—Å—Ç—Ä—ë–ø–∞–Ω–Ω—ã–µ –≤–æ–ª–æ—Å—ã'),
    ('ru', 6, '–õ—ã—Å–∞—è –≥–æ–ª–æ–≤–∞'),
    ('ru', 7, '–í–æ–µ–Ω–Ω–∞—è —Å—Ç—Ä–∏–∂–∫–∞'),
    ('ru', 8, '–õ–æ—Ö–º–∞—Ç—ã–µ –≥—Ä—è–∑–Ω—ã–µ –≤–æ–ª–æ—Å—ã'),
    ('ru', 9, '–°–ª–æ–∂–Ω–∞—è –ø—Ä–∏—á—ë—Å–∫–∞'),
    ('ru', 10, '–í—ã–±—Ä–∏—Ç—ã–µ –≤–∏—Å–∫–∏'),
    ('en', 1, 'Long & Loose'),
    ('en', 2, 'Cropped Short'),
    ('en', 3, 'Self-Cut Short'),
    ('en', 4, 'Braided'),
    ('en', 5, 'Long & Wild'),
    ('en', 6, 'Bald'),
    ('en', 7, 'Uniformly Short'),
    ('en', 8, 'Ragged & Messy'),
    ('en', 9, 'Complicated Hairstyle'),
    ('en', 10, 'Shaven Sides')
  ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_style_hair_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_style_personality', 'wcc_style_hair';

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ characterRaw.lore.style.hair
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_hair' AS qu_id)
, answer_nums AS (
  SELECT num FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_style_hair_o' || to_char(answer_nums.num, 'FM9900'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.style.hair_style'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(answer_nums.num, 'FM9900') ||'.answer_options.label')::text)
    )
  )
FROM answer_nums
CROSS JOIN meta;
-- <<< END sql/085_style_hair.sql

-- >>> BEGIN sql/086_style_affectations.sql

\echo '086_style_affectations.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_affectations' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , '
{
  "dice":"d0"
}'::jsonb AS metadata)
INSERT INTO questions (qu_id, su_su_id, title, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.style')::text,
             ck_id('witcher_cc.hierarchy.style_affectations')::text
           )
         )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_affectations' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
    ('ru', 1, '–¢—Ä–æ—Ñ–µ–∏'),
    ('ru', 2, '–ö–æ–ª—å—Ü–∞ –∏ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏'),
    ('ru', 3, '–ë–µ–∑–¥–µ–ª—É—à–∫–∏'),
    ('ru', 4, '–¢–∞—Ç—É–∏—Ä–æ–≤–∫–∏'),
    ('ru', 5, '–ë–æ–µ–≤–∞—è —Ä–∞—Å–∫—Ä–∞—Å–∫–∞'),
    ('ru', 6, '–¢—ë–º–Ω—ã–π –ø–ª–∞—â'),
    ('ru', 7, '–Ø—Ä–∫–∏–µ –±–∞–Ω–¥–∞–Ω—ã'),
    ('ru', 8, '–ü–æ–≤—è–∑–∫–∞ –Ω–∞ –≥–ª–∞–∑'),
    ('ru', 9, '–ú–µ—Ö–∞'),
    ('ru', 10, '–≠–º–±–ª–µ–º—ã –∏ –∑–Ω–∞—á–∫–∏'),
    ('en', 1, 'Trophies'),
    ('en', 2, 'Rings & Jewlery'),
    ('en', 3, 'Trinkets'),
    ('en', 4, 'Tattoos'),
    ('en', 5, 'War Paint'),
    ('en', 6, 'Shadowy Cloak'),
    ('en', 7, 'Bright Bandanas'),
    ('en', 8, 'Eye Patch'),
    ('en', 9, 'Furs'),
    ('en', 10, 'Insignias & Plaques')
  ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_style_affectations_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_style_hair', 'wcc_style_affectations';

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ characterRaw.lore.style.affectations
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_style_affectations' AS qu_id)
, answer_nums AS (
  SELECT num FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_style_affectations_o' || to_char(answer_nums.num, 'FM9900'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.style.affectations'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(answer_nums.num, 'FM9900') ||'.answer_options.label')::text)
    )
  )
FROM answer_nums
CROSS JOIN meta;
-- <<< END sql/086_style_affectations.sql

-- >>> BEGIN sql/087_values_valued_person.sql

\echo '087_values_valued_person.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_values_valued_person' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , '
{
  "dice":"d0"
}'::jsonb AS metadata)
INSERT INTO questions (qu_id, su_su_id, title, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.values')::text,
             ck_id('witcher_cc.hierarchy.values_valued_person')::text
           )
         )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_values_valued_person' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
    ('ru', 1, '–†–æ–¥–∏—Ç–µ–ª—è'),
    ('ru', 2, '–ë—Ä–∞—Ç–∞/—Å–µ—Å—Ç—Ä—É'),
    ('ru', 3, '–í–æ–∑–ª—é–±–ª–µ–Ω–Ω–æ–≥–æ'),
    ('ru', 4, '–î—Ä—É–≥–∞'),
    ('ru', 5, '–°–µ–±—è'),
    ('ru', 6, '–ü–∏—Ç–æ–º—Ü–∞'),
    ('ru', 7, '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫–∞'),
    ('ru', 8, '–ü—É–±–ª–∏—á–Ω—É—é –ª–∏—á–Ω–æ—Å—Ç—å'),
    ('ru', 9, '–õ–∏—á–Ω–æ–≥–æ –≥–µ—Ä–æ—è'),
    ('ru', 10, '–ù–∏–∫–æ–≥–æ'),
    ('en', 1, 'A Parent'),
    ('en', 2, 'A Sibling'),
    ('en', 3, 'A Lover'),
    ('en', 4, 'A Friend'),
    ('en', 5, 'Yourself'),
    ('en', 6, 'A Pet'),
    ('en', 7, 'A Mentor'),
    ('en', 8, 'A Public Figure'),
    ('en', 9, 'A Personal Hero'),
    ('en', 10, 'No One')
  ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_values_valued_person_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_style_affectations', 'wcc_values_valued_person';

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ characterRaw.lore.values.valuedPerson
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_values_valued_person' AS qu_id)
, answer_nums AS (
  SELECT num FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_values_valued_person_o' || to_char(answer_nums.num, 'FM9900'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.values.valued_person'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(answer_nums.num, 'FM9900') ||'.answer_options.label')::text)
    )
  )
FROM answer_nums
CROSS JOIN meta;
-- <<< END sql/087_values_valued_person.sql

-- >>> BEGIN sql/088_values_value.sql

\echo '088_values_value.sql'

-- –£–∑–µ–ª: –í—ã–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è - –ö—Ç–æ –ø–æ—Ç–µ—Ä–ø–µ–≤—à–∏–π
-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_values_value' AS qu_id
                , 'questions' AS entity
                , 'single'::question_type AS qtype
	              , '
{
  "dice":"d0"
}'::jsonb AS metadata)
INSERT INTO questions (qu_id, su_su_id, title, qtype, metadata)
  SELECT meta.qu_id
       , meta.su_su_id
       , NULL
       , meta.qtype
	     , meta.metadata || jsonb_build_object(
           'path', jsonb_build_array(
             ck_id('witcher_cc.hierarchy.values')::text,
             ck_id('witcher_cc.hierarchy.values_value')::text
           )
         )
     FROM meta;
	   
-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_values_value' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, vals AS (
  SELECT v.*
  FROM (VALUES
    ('ru', 1, '–î–µ–Ω—å–≥–∏'),
    ('ru', 2, '–ß–µ—Å—Ç—å'),
    ('ru', 3, '–°–≤–æ—ë —Å–ª–æ–≤–æ'),
    ('ru', 4, '–ó–µ–º–Ω—ã–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è'),
    ('ru', 5, '–ó–Ω–∞–Ω–∏–µ'),
    ('ru', 6, '–ú–µ—Å—Ç—å'),
    ('ru', 7, '–°–∏–ª—É'),
    ('ru', 8, '–õ—é–±–æ–≤—å'),
    ('ru', 9, '–í—ã–∂–∏–≤–∞–Ω–∏–µ'),
    ('ru', 10, '–î—Ä—É–∂–±—É'),
    ('en', 1, 'Money'),
    ('en', 2, 'Honor'),
    ('en', 3, 'Your Word'),
    ('en', 4, 'Hedonistic Pursuits'),
    ('en', 5, 'Knowledge'),
    ('en', 6, 'Vengeance'),
    ('en', 7, 'Power'),
    ('en', 8, 'Love'),
    ('en', 9, 'Survival'),
    ('en', 10, 'Friendship')
  ) AS v(lang, num, text)
)
, ins_label AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
      SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
           , meta.entity, meta.entity_field, vals.lang, vals.text
        FROM vals
        CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
  SELECT 'wcc_values_value_o' || to_char(vals.num, 'FM9900') AS an_id,
         meta.su_su_id,
         meta.qu_id,
         ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
         vals.num AS sort_order,
         '{}'::jsonb AS metadata
    FROM vals
    CROSS JOIN meta
  ON CONFLICT (an_id) DO NOTHING;
  
-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_values_valued_person', 'wcc_values_value';

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ characterRaw.lore.values.value
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_values_value' AS qu_id)
, answer_nums AS (
  SELECT num FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_values_value_o' || to_char(answer_nums.num, 'FM9900'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.values.value'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(answer_nums.num, 'FM9900') ||'.answer_options.label')::text)
    )
  )
FROM answer_nums
CROSS JOIN meta;
-- <<< END sql/088_values_value.sql

-- >>> BEGIN sql/089_values_feelings_on_people.sql

\echo '089_values_feelings_on_people.sql'
-- –£–∑–µ–ª: –ü–æ–≤–ª–∏—è–≤—à–∏–π –¥—Ä—É–≥

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_values_feelings_on_people' AS qu_id
                , 'questions' AS entity)
, c_vals(lang, num, text) AS (
    VALUES
      ('ru', 1, '–®–∞–Ω—Å'),
      ('ru', 2, '–ú—ã—Å–ª–∏'),
      ('en', 1, 'Chance'),
      ('en', 2, 'Feelings')
  )
, ins_c AS (
    INSERT INTO i18n_text (id, entity, entity_field, lang, text)
    SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'.'|| to_char(c_vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| 'column_name') AS id
         , meta.entity, 'column_name', c_vals.lang, c_vals.text
      FROM c_vals
      CROSS JOIN meta
  )
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , NULL
     , 'single_table'
     , jsonb_build_object(
         'dice', 'd_weighed',
         'columns', (
           SELECT jsonb_agg(ck_id('witcher_cc' ||'.'|| 'wcc_values_feelings_on_people' ||'.'|| to_char(num, 'FM9900') ||'.'|| 'questions' ||'.'|| 'column_name')::text ORDER BY num)
           FROM (SELECT DISTINCT num FROM c_vals) AS cols
         ),
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.values')::text,
           ck_id('witcher_cc.hierarchy.values_feelings_on_people')::text
         )
       )
  FROM meta;


-- –û—Ç–≤–µ—Ç—ã
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_values_feelings_on_people' AS qu_id
                , 'answer_options' AS entity
                , 'label' AS entity_field)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 1, 0.1, '–í—Å–µ –≤–æ–∫—Ä—É–≥ ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è'),
            ( 2, 0.1, '–ù–∞—à –Ω–∞—Ä–æ–¥ ‚Äî –ª—É—á—à–∏–π, –∏ –ø–ª–µ–≤–∞—Ç—å –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö'),
            ( 3, 0.1, '–î—Ä—É–≥–∏–º –¥–æ–≤–µ—Ä—è—Ç—å –Ω–µ–ª—å–∑—è'),
            ( 4, 0.1, '–ü—É—Å–∫–∞–π –¥—Ä—É–≥–∏–µ —Å–Ω–∞—á–∞–ª–∞ —Å–µ–±—è –ø–æ–∫–∞–∂—É—Ç'),
            ( 5, 0.2, '–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ'),
            ( 7, 0.1, '–ü–ª–æ—Ö–∏—Ö –ª—é–¥–µ–π –Ω–µ –±—ã–≤–∞–µ—Ç'),
            ( 8, 0.1, '–í—Å–µ –∑–∞—Å–ª—É–∂–∏–≤–∞—é—Ç —Å–º–µ—Ä—Ç–∏'),
            ( 9, 0.1, '–í–æ–∫—Ä—É–≥ –æ–¥–Ω–∏ —Å–∞–º–æ–≤–ª—é–±–ª—ë–Ω–Ω—ã–µ —Å–≤–∏–Ω—å–∏'),
            (10, 0.1, '–¶–µ–Ω–Ω–∞ –ª—é–±–∞—è –∂–∏–∑–Ω—å')
         ) AS raw_data_ru(num, probability, friend_txt)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 1, 0.1, 'People Are Tools to Be Used'),
            ( 2, 0.1, 'Our Kind Are Fine but Plough the Rest'),
            ( 3, 0.1, 'People Can Never Be Trusted'),
            ( 4, 0.1, 'People Have to Prove Themselves'),
            ( 5, 0.2, 'Neutral'),
            ( 7, 0.1, 'People Are Great'),
            ( 8, 0.1, 'Everyone Deserves to Die'),
            ( 9, 0.1, 'People Are Hedonistic Swine'),
            (10, 0.1, 'All Life Is Valuable')
         ) AS raw_data_en(num, probability, friend_txt)
),
vals AS (
         SELECT ('<td>' || to_char(probability*100, 'FM990.00') || '%</td>' ||
                 '<td>' || friend_txt || '</td>') AS text,
                num,
                probability,
                lang,
                friend_txt
         FROM raw_data
)
, ins_label AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS id
       , meta.entity, meta.entity_field, vals.lang, vals.text
    FROM vals
    CROSS JOIN meta
)
, ins_label_value AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field || '_value') AS id
       , meta.entity, meta.entity_field || '_value', raw_data.lang, raw_data.friend_txt
    FROM raw_data
    CROSS JOIN meta
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_values_feelings_on_people_o' || to_char(vals.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(vals.num, 'FM9900') ||'.'|| meta.entity ||'.'|| meta.entity_field) AS label,
       vals.num,
       jsonb_build_object(
           'probability', vals.probability
       ) AS metadata
FROM vals
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;


-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_values_value', 'wcc_values_feelings_on_people';

-- –≠—Ñ—Ñ–µ–∫—Ç—ã: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ characterRaw.lore.values.feelings_on_people
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_values_feelings_on_people' AS qu_id)
, answer_nums AS (
  SELECT num FROM (VALUES (1), (2), (3), (4), (5), (7), (8), (9), (10)) AS v(num)
)
INSERT INTO effects (scope, an_an_id, body)
SELECT 'character', 'wcc_values_feelings_on_people_o' || to_char(answer_nums.num, 'FM00'),
  jsonb_build_object(
    'set',
    jsonb_build_array(
      jsonb_build_object('var', 'characterRaw.lore.values.feelings_on_people'),
      jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(answer_nums.num, 'FM9900') ||'.answer_options.label_value')::text)
    )
  )
FROM answer_nums
CROSS JOIN meta;
-- <<< END sql/089_values_feelings_on_people.sql

-- >>> BEGIN sql/090_profession.sql

\echo '090_profession.sql'
-- –£–∑–µ–ª: –í—ã–±–æ—Ä –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏

-- –í–æ–ø—Ä–æ—Å
WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'questions' AS entity)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , NULL
     , 'drop_down_detailed'
     , jsonb_build_object(
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.profession')::text
         )
       )
  FROM meta;

-- –°–≤—è–∑–∏
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
  SELECT 'wcc_values_feelings_on_people', 'wcc_profession';


-- <<< END sql/090_profession.sql

-- >>> BEGIN sql/090_profession_01_bard.sql

\echo '090_profession_01_bard.sql'
-- –í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞: –ë–∞—Ä–¥

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'answer_options' AS entity)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 1, '–ë–∞—Ä–¥',
'<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>–≠–Ω–µ—Ä–≥–∏—è: </strong> 0<br><br>
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:</strong><br>–Ω–µ—Ç
        </td>
        <td>
            <strong>–ë–∞–∑–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏</strong>
            <ul>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –Ø–∑—ã–∫ (–≤—ã–±–µ—Ä–∏—Ç–µ 1)</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≥–æ—Ä–æ–¥–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –≠—Ç–∏–∫–µ—Ç</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –í—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –ò—Å–∫—É—Å—Å—Ç–≤–æ</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –û–±–º–∞–Ω</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ª—é–¥–µ–π</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –°–æ–±–ª–∞–∑–Ω–µ–Ω–∏–µ</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –£–±–µ–∂–¥–µ–Ω–∏–µ</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –•–∞—Ä–∏–∑–º–∞</li>
            </ul>
        </td>
        <td>
            <strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong><br>
            <strong class="section-title">(–≤—ã–±–µ—Ä–∏—Ç–µ 5)</strong>
            <ul>
                <li>–î–æ—Å–∫–∞ –¥–ª—è –ø–æ–∫–µ—Ä–∞ –Ω–∞ –∫–æ—Å—Ç—è—Ö</li>
                <li>–ö–æ–ª–æ–¥–∞ –¥–ª—è –≥–≤–∏–Ω—Ç–∞</li>
                <li>–†—É—á–Ω–æ–µ –∑–µ—Ä–∫–∞–ª—å—Ü–µ</li>
                <li>–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</li>
                <li>–§–ª—è–≥–∞ —Å –≤—ã—à–∏–≤–∫–æ–π</li>
                <li>–ö–ª–∏–Ω–æ–∫</li>
                <li>–î—É—Ö–∏ / –æ–¥–µ–∫–æ–ª–æ–Ω</li>
                <li>–ü–æ—Ö–æ–¥–Ω–∞—è —Å—É–º–∫–∞</li>
                <li>–ù–∞–±–µ—Ä–µ–∂–Ω—ã–π –±–ª–æ–∫–Ω–æ—Ç</li>
                <li>–î–Ω–µ–≤–Ω–∏–∫ —Å –∑–∞–º–∫–æ–º</li>
            </ul>
        </td>
    </tr>
</table>

<h3>–û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–≤—ã–∫</h3>
<table class="main_skill">
    <tr>
        <td class="header">–£–ª–∏—á–Ω–æ–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ (–≠–º–ø)</td>
    </tr>
    <tr>
        <td class="opt_content">
            –ë–∞—Ä–¥ –≤–µ—Å—å–º–∞ –ø–æ–ª–µ–∑–µ–Ω –≤ –≥—Ä—É–ø–ø–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ —É –≤–∞—Å –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–µ–Ω–µ–≥. –ë–∞—Ä–¥ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å —á–∞—Å –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–£–ª–∏—á–Ω–æ–≥–æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è</strong> –≤ —Ü–µ–Ω—Ç—Ä–µ –±–ª–∏–∂–∞–π—à–µ–≥–æ –≥–æ—Ä–æ–¥–∞. –†–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞ ‚Äî —ç—Ç–æ —Å—É–º–º–∞, –∫–æ—Ç–æ—Ä—É—é –±–∞—Ä–¥ –∑–∞—Ä–∞–±–æ—Ç–∞–ª –∑–∞ –≤—Ä–µ–º—è —É–ª–∏—á–Ω–æ–≥–æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≤–∞–ª –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞. –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –±–∞—Ä–¥ –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª –¥–µ–Ω–µ–≥, –Ω–æ –∏ –±—ã–ª –æ—Å–≤–∏—Å—Ç–∞–Ω –º–µ—Å—Ç–Ω—ã–º–∏, —á—Ç–æ –¥–∞—ë—Ç –µ–º—É —à—Ç—Ä–∞—Ñ -2 –∫ –•–∞—Ä–∏–∑–º–µ –ø—Ä–∏ –∫–æ–Ω—Ç–∞–∫—Ç–µ —Å–æ –≤—Å–µ–º–∏ –≤ —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ –Ω–∞ –æ—Å—Ç–∞—Ç–æ–∫ –¥–Ω—è.
            <br><br>
            –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–≤–æ—Ä–æ–∂–∏—Ç—å –ø—É–±–ª–∏–∫—É –Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π –ø–ª–æ—â–∞–¥–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ª—é–¥–µ–π —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ –°–õ 15 –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –≤–æ–∫—Ä—É–≥ –±–∞—Ä–¥–∞ –ø–ª–æ—Ç–Ω—É—é —Ç–æ–ª–ø—É, –¥–ª—è –ø—Ä–æ—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –°–∏–ª—ã –∏–ª–∏ –ê—Ç–ª–µ—Ç–∏–∫–∏ —Å–æ –°–õ 15. –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –≤—Ä–∞–≥–∏ –∏ –Ω–µ—Ä–∞–∑—É–º–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤–∞ –ø–æ–ª—É—á–∞—é—Ç –±–æ–Ω—É—Å +10 –ø—Ä–æ—Ç–∏–≤ –∑–∞–≤–æ—Ä–∞–∂–∏–≤–∞–Ω–∏—è.
        </td>
    </tr>
</table>
<h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</h3>
<table class="skills_branch_1">
    <tr>
        <td class="header">–û–±–æ–ª—å—Å—Ç–∏—Ç–µ–ª—å</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ (–≠–º–ø)</strong><br>
            –ü–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π <strong>–£–ª–∏—á–Ω–æ–≥–æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è</strong> –±–∞—Ä–¥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ü–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è</strong> —Å–æ –°–õ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –≤–µ–¥—É—â–∏–º, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –≤—ã—Å—Ç—É–ø–∞–ª –ª–∏ –æ–Ω –≤ —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ —Ä–∞–Ω—å—à–µ. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –±–∞—Ä–¥ —É–∂–µ –∑–∞–≤–æ–µ–≤–∞–ª –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –≤ —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥–æ—Ö–æ–¥ —Å –µ–≥–æ <strong>–£–ª–∏—á–Ω–æ–≥–æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è</strong> —É–¥–≤–∞–∏–≤–∞–µ—Ç—Å—è, –∞ —Å–∞–º –±–∞—Ä–¥ –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å +2 –∫ –•–∞—Ä–∏–∑–º–µ –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ —Å–æ –≤—Å–µ–º–∏, –∫—Ç–æ –ø—Ä–∏—à—ë–ª –Ω–∞ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ó–∞–≤–æ—Ä–æ–∂–∏—Ç—å –ø—É–±–ª–∏–∫—É (–≠–º–ø)</strong><br>
            –í—ã—Å—Ç—É–ø–∞—è –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ó–∞–≤–æ—Ä–æ–∂–∏—Ç—å –ø—É–±–ª–∏–∫—É</strong>, —á—Ç–æ–±—ã –ø—Ä–∏–≤–ª–µ—á—å –≤–Ω–∏–º–∞–Ω–∏–µ –≤—Å–µ—Ö –≤ —Ä–∞–¥–∏—É—Å–µ 20 –º–µ—Ç—Ä–æ–≤. –õ—é–±–æ–π –ø–µ—Ä—Å–æ–Ω–∞–∂, —á–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —É–±–µ–∂–¥–µ–Ω–∏—é –±—É–¥–µ—Ç –Ω–∏–∂–µ –≤–∞—à–µ–≥–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ, –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–æ—è—Ç—å –∏ –Ω–∞–±–ª—é–¥–∞—Ç—å, –ø–æ–∫–∞ –Ω–µ –≤—ã–±—Ä–æ—Å–∏—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ê—Ç–∞–∫–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –±—ã—Ç—å –∑–∞–≤–æ—Ä–æ–∂—ë–Ω–Ω—ã–º–∏.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–î–æ–±—Ä—ã–π –¥—Ä—É–≥ (–≠–º–ø)</strong><br>
            –û–¥–∏–Ω —Ä–∞–∑ –∑–∞ –∏–≥—Ä–æ–≤—É—é –ø–∞—Ä—Ç–∏—é –±–∞—Ä–¥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–î–æ–±—Ä—ã–π –¥—Ä—É–≥</strong>, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –¥—Ä—É–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥ –±—ã –µ–º—É. –†–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ–∂–¥—É 3 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ ¬´–î–æ–±—Ä—ã–π –¥—Ä—É–≥¬ª –Ω–∞ –ø–æ–ª—è—Ö. –î—Ä—É–≥ –ø–æ —Å—Ç–∞—Ä–æ–π –ø–∞–º—è—Ç–∏ –æ–∫–∞–∂–µ—Ç –≤–∞–º –æ–¥–Ω—É —É—Å–ª—É–≥—É –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–∑—É–º–Ω–æ–≥–æ, –ø–æ—Å–ª–µ —á–µ–≥–æ –Ω–µ –±—É–¥–µ—Ç –±–æ–ª—å—à–µ –ø–æ–º–æ–≥–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –µ–≥–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å.
              <div style="display: inline-block;">
              <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">–ü–æ—Å–µ–ª–µ–Ω–∏–µ</th>
                    <th colspan="2">–ü—Ä–æ—Ñ–µ—Å—Å–∏—è</th>
                    <th colspan="2">–í–ª–∏—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                </tr>
                <tr>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th> <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th> <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th> <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                </tr>
                <tr>
                    <td>–î–µ—Ä–µ–≤–Ω—è</td>     <td>3</td>
                    <td>–ü—Ä–æ—Å—Ç–æ–ª—é–¥–∏–Ω</td> <td>3</td>
                    <td>–ù–∏–∑–∫–∞—è</td>      <td>2</td>
                </tr>
                <tr>
                    <td>–ü–æ—Å—ë–ª–æ–∫</td>  <td>4</td>
                    <td>–ö–æ—Ä—á–º–∞—Ä—å</td> <td>5</td>
                    <td>–°—Ä–µ–¥–Ω—è—è</td>  <td>5</td>
                </tr>
                <tr>
                    <td>–ì–æ—Ä–æ–¥</td>       <td>5</td>
                    <td>–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫</td> <td>6</td>
                    <td>–í—ã—Å–æ–∫–∞—è</td>     <td>10</td>
                </tr>
                <tr>
                    <td>–°—Ç–æ–ª–∏—Ü–∞</td>  <td>10</td>
                    <td>–°—Ç—Ä–∞–∂–Ω–∏–∫</td> <td>8</td>
                    <td></td>         <td></td>
                </tr>
                <tr>
                    <td></td>         <td></td>
                    <td>–î–≤–æ—Ä—è–Ω–∏–Ω</td> <td>10</td>
                    <td></td>         <td></td>
                </tr>
              </table>
              </div>
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">–ò–Ω—Ñ–æ—Ä–º–∞—Ç–æ—Ä</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ù–µ–∑–∞–º–µ—Ç–Ω–æ—Å—Ç—å (–ò–Ω—Ç)</strong><br>
            –ë–∞—Ä–¥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ù–µ–∑–∞–º–µ—Ç–Ω–æ—Å—Ç–∏</strong> –ø—Ä–æ—Ç–∏–≤ –í–Ω–∏–º–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ü–µ–ª–µ–π, —á—Ç–æ–±—ã —Å–ª–∏—Ç—å—Å—è —Å —Ç–æ–ª–ø–æ–π. –≠—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–∞—Ä–¥—É –ø—Ä—è—Ç–∞—Ç—å—Å—è –¥–∞–∂–µ —Ç–∞–º, –≥–¥–µ –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —É–∫—Ä—ã—Ç–∏–π, ‚Äî –±–∞—Ä–¥ –ø–æ–ø—Ä–æ—Å—Ç—É –≤–∫–ª–∏–Ω–∏–≤–∞–µ—Ç—Å—è –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –æ–∫—Ä—É–∂–∞—é—â–∏—Ö –Ω–∞ –¥—Ä—É–≥–æ–π –ø—Ä–µ–¥–º–µ—Ç –∏ —Ç–æ–º—É –ø–æ–¥–æ–±–Ω–æ–µ. –≠—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –±–∞—Ä–¥ –æ–¥–µ—Ç –≤–æ —á—Ç–æ-—Ç–æ –æ—á–µ–Ω—å –±—Ä–æ—Å–∫–æ–µ.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü—É—Å—Ç–∏—Ç—å —Å–ª—É—Ö (–ò–Ω—Ç)</strong><br>
            –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –±—Ä–æ—Å–∫–∞ –û–±–º–∞–Ω–∞ –ø—Ä–æ—Ç–∏–≤ —Ü–µ–ª–∏ –±–∞—Ä–¥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –≤—Å—Ç—Ä–µ—á–Ω—ã–π –±—Ä–æ—Å–æ–∫ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ü—É—Å—Ç–∏—Ç—å —Å–ª—É—Ö</strong> –ø—Ä–æ—Ç–∏–≤ –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —É–±–µ–∂–¥–µ–Ω–∏—é —Ü–µ–ª–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –±–∞—Ä–¥–∞ —Ü–µ–ª—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç —Ä–∞—Å—Å–∫–∞–∑–∞–Ω–Ω—É—é –∏–º –ª–æ–∂—å –≤ —Å–≤–æ—ë–º –ø–æ—Å–µ–ª–µ–Ω–∏–∏ –∏–ª–∏ –≥—Ä—É–ø–ø–µ, —á—Ç–æ –¥–∞—ë—Ç –±–∞—Ä–¥—É –±–æ–Ω—É—Å +2 –∫ –û–±–º–∞–Ω—É –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å —Ç—É –∂–µ –ª–æ–∂—å –∫–æ–º—É-—Ç–æ –µ—â—ë.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°–æ–π—Ç–∏ –∑–∞ —Å–≤–æ–µ–≥–æ (–ò–Ω—Ç)</strong><br>
            –ù–∞—Ö–æ–¥—è—Å—å –≤ –ø–æ—Å–µ–ª–µ–Ω–∏–∏, –±–∞—Ä–¥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–°–æ–π—Ç–∏ –∑–∞ —Å–≤–æ–µ–≥–æ</strong> (—Å–º. —Ç–∞–±–ª–∏—Ü—É –Ω–∞ –ø–æ–ª—è—Ö). –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –±–∞—Ä–¥ —É–∑–Ω–∞—ë—Ç, –∫–∞–∫ –≤—ã–¥–∞—Ç—å —Å–µ–±—è –∑–∞ –º–µ—Å—Ç–Ω–æ–≥–æ, –∏ –µ–≥–æ –±–æ–ª—å—à–µ –Ω–µ —Å—á–∏—Ç–∞—é—Ç —á—É–∂–∏–º. –û–Ω –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å +2 –∫ –•–∞—Ä–∏–∑–º–µ –∏ –£–±–µ–∂–¥–µ–Ω–∏—é –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ —Å –º–µ—Å—Ç–Ω—ã–º–∏. –ü—Ä–∏ —ç—Ç–æ–º –∫ –Ω–µ–º—É –Ω–µ –±—É–¥—É—Ç –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è —Å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ–º –∏–ª–∏ –ø–æ–¥–≤–µ—Ä–≥–∞—Ç—å —Ç—Ä–∞–≤–ª–µ, –∫–∞–∫ —á—É–∂–∞–∫–∞.
            <br>
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr> <th>–ü–æ—Å–µ–ª–µ–Ω–∏–µ</th> <th>–°–õ</th> </tr>
                <tr> <td>–î–µ—Ä–µ–≤–Ω—è</td>   <td>25</td> </tr>
                <tr> <td>–ü–æ—Å—ë–ª–æ–∫</td>   <td>20</td> </tr>
                <tr> <td>–ì–æ—Ä–æ–¥</td>     <td>15</td> </tr>
                <tr> <td>–°—Ç–æ–ª–∏—Ü–∞</td>   <td>10</td> </tr>
            </table>
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">–ò–Ω—Ç—Ä–∏–≥–∞–Ω</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ö–æ–≤–∞—Ä—Å—Ç–≤–æ (–≠–º–ø)</strong><br>
           –ö–æ–≥–¥–∞ –±–∞—Ä–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤, –æ–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ö–æ–≤–∞—Ä—Å—Ç–≤–∞</strong> –ø—Ä–æ—Ç–∏–≤ –≠–º–ø —Ö 3 —Ü–µ–ª–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –±–∞—Ä–¥ –¥–µ–ª–∞–µ—Ç –µ—Ö–∏–¥–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–∞—ë—Ç —à—Ç—Ä–∞—Ñ -1 –∫ –°–æ–±–ª–∞–∑–Ω–µ–Ω–∏—é, –£–±–µ–∂–¥–µ–Ω–∏—é, –õ–∏–¥–µ—Ä—Å—Ç–≤—É, –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—é –∏–ª–∏ –•–∞—Ä–∏–∑–º–µ —Ü–µ–ª–∏ –∑–∞ –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç —Å–≤—ã—à–µ –°–õ.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü–æ–¥–∫–æ–ª–∫–∞ (–≠–º–ø)</strong><br>
            –ë–∞—Ä–¥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –≤—Å—Ç—Ä–µ—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ü–æ–¥–∫–æ–ª–∫–∞</strong> –ø—Ä–æ—Ç–∏–≤ –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —É–±–µ–∂–¥–µ–Ω–∏—é —Ü–µ–ª–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –±–∞—Ä–¥ –¥—Ä–∞–∑–Ω–∏—Ç —Ü–µ–ª—å, –æ—Å—ã–ø–∞–µ—Ç –µ—ë —É–≥—Ä–æ–∑–∞–º–∏ –∏ —Ä—É–≥–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —Ü–µ–ª—å –Ω–µ –Ω–∞–ø–∞–¥—ë—Ç. –¶–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —à—Ç—Ä–∞—Ñ –∫ –∞—Ç–∞–∫–µ –∏ –∑–∞—â–∏—Ç–µ, —Ä–∞–≤–Ω—ã–π –ø–æ–ª–æ–≤–∏–Ω–µ –∑–Ω–∞—á–µ–Ω–∏—è <strong>–ü–æ–¥–∫–æ–ª–∫–∏</strong> –±–∞—Ä–¥–∞ –∏ –¥–ª—è—â–∏–π—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ü–æ–¥–∫–æ–ª–∫–∞</strong>.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ò —Ç—ã, –ë—Ä—É—Ç (–≠–º–ø)</strong><br>
            –ë–∞—Ä–¥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ò —Ç—ã, –ë—Ä—É—Ç</strong> –ø—Ä–æ—Ç–∏–≤ –í–æ–ª–∏ —Ö–ó —Ü–µ–ª–∏, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–ª—å –ø—Ä–æ—Ç–∏–≤ –æ–¥–Ω–æ–≥–æ —Å–æ—é–∑–Ω–∏–∫–∞. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –ª–æ–∂—å –∏–ª–∏ –ø–æ–ª—É–ø—Ä–∞–≤–¥–∞, —Å–∫–∞–∑–∞–Ω–Ω–∞—è –±–∞—Ä–¥–æ–º, –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–ª—å –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ —Å–≤–æ–µ–º—É —Å–æ—é–∑–Ω–∏–∫—É —Å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ–º –∏ –≤—Ä–∞–∂–¥–µ–±–Ω–æ—Å—Ç—å—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é <strong>–ò —Ç—ã, –ë—Ä—É—Ç</strong>, –∏–ª–∏ –ø–æ–∫–∞ —Ü–µ–ª—å –Ω–µ —Å–æ–≤–µ—Ä—à–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —É–±–µ–∂–¥–µ–Ω–∏—é, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ—Ç–æ—Ä–æ–π –≤—ã—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ <strong>–ò —Ç—ã, –ë—Ä—É—Ç</strong>.
    </tr>
</table>
</div>
'
         )) AS raw_data_ru(num, title, description)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 1, 'Bard',
'
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>Vigor:</strong> 0<br>
            <strong>Magical Perks:</strong> None
        </td>
        <td>
            <strong>Skills</strong>
            <ul>
                <li>[EMP] - Charisma</li>
                <li>[EMP] - Deceit</li>
                <li>[EMP] - Performance</li>
                <li>[INT] - Language (Choose 1)</li>
                <li>[EMP] - Human Perception</li>
                <li>[EMP] - Persuasion</li>
                <li>[INT] - Streetwise</li>
                <li>[EMP] - Fine Arts</li>
                <li>[EMP] - Seduction</li>
                <li>[INT] - Social Etiquette</li>
            </ul>
        </td>
        <td>
            <strong>Gear </strong><br>
            <strong class="section-title">(Pick 5)</strong>
            <ul>
                <li>Dice poker board</li>
                <li>Gwent deck</li>
                <li>Hand mirror</li>
                <li>An instrument</li>
                <li>Flask of spirits</li>
                <li>Dagger</li>
                <li>Perfume/cologne</li>
                <li>Belt pouch</li>
                <li>Garter sheath</li>
                <li>A journal with a lock</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Defining Skill</h3>
<table class="main_skill">
    <tr>
        <td class="header">Busking (EMP)</td>
    </tr>
    <tr>
        <td class="opt_content">
            A Bard is a wonderful thing to have around, especially when the party‚Äôs low on money. A Bard can take an hour and make a Busking roll in the nearest town center. The total of this roll is the amount of money raked in by the Bard while they perform on the street. A fumble can lower the roll, and a negative value means that not only do you fail to make any coin but you are also harrassed by the locals for your poor performance, resulting in a ‚àí2 to Charisma with anyone in the town for the rest of the day.
            <br><br>
            When raising a crowd in a large area full of people, a DC:15 is sufficient to create a crowd around the Bard dense enough to require a DC:15 Physique or Athletics check to pass through. Also keep in mind that enemies and non-sentient creatures gain a +10 to resist.
        </td>
    </tr>
</table>

<h3>Professional Skills</h3>
<table class="skills_branch_1">
    <tr>
        <td class="header">The Charmer</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Return Act (EMP)</strong><br>
            Before attempting a Busking roll a Bard can roll Return Act at a DC set by the GM to see whether they have played in this town before. If the roll is successful the Bard has made a name for themselves in this town already. Not only is their Busking income doubled but they gain a +2 Charisma with everyone in at that venue.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Raise A Crowd (EMP)</strong><br>
            By taking a full round to perform, you can roll Raise A Crowd to captivate anyone within 20m. Anyone who doesn‚Äôt make a Resist Coercion roll higher than your initial roll can do nothing but watch you perform until they succeed at rolling above your initial roll. If attacked a target will snap out of it.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Good Friend (EMP)</strong><br>
            Once per session a Bard can make a Good Friend roll to find a friend to aid them. Take the total roll and split these points up between the 3 categories in the Good Friend chart in the sidebar. This friend will do one reasonable thing for old times‚Äô sake, then cannot be called on again for free and must be convinced.
            <br>
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">Settlement</th>
                    <th colspan="2">Profession</th>
                    <th colspan="2">Importance</th>
                </tr>
                <tr>
                    <th>Value</th> <th>Cost</th>
                    <th>Value</th> <th>Cost</th>
                    <th>Value</th> <th>Cost</th>
                </tr>
                <tr>
                    <td>Hamlet</td>   <td>3</td>
                    <td>Commoner</td> <td>3</td>
                    <td>Low</td>      <td>2</td>
                </tr>
                <tr>
                    <td>Town</td>     <td>4</td>
                    <td>Inn Keep</td> <td>5</td>
                    <td>Average</td>  <td>5</td>
                </tr>
                <tr>
                    <td>City</td>     <td>5</td>
                    <td>Artisan</td>  <td>6</td>
                    <td>High</td>     <td>10</td>
                </tr>
                <tr>
                    <td>Capital</td>  <td>10</td>
                    <td>Guard</td>    <td>8</td>
                    <td></td>         <td></td>
                </tr>
                <tr>
                    <td></td>         <td></td>
                    <td>Noble</td>    <td>10</td>
                    <td></td>         <td></td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">The Informant</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Fade (INT)</strong><br>
            A Bard can make a Fade roll against multiple targets‚Äô Awareness rolls to fade into the background. This ability allows a Bard to hide even when there are no good hiding places, by slipping into a conversation, drawing attention to something else, or the like. This ability doesn‚Äôt work if you are wearing really flashy clothing.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Spread the Word (INT)</strong><br>
            A Bard who rolls a successful Deceit roll against a target can then roll Spread the Word against the target‚Äôs Resist Coercion roll. If they succeed the target spreads the Bard‚Äôs lie around the target‚Äôs settlement or group, giving the Bard a +2 to Deceit when trying to pass off that lie again to someone else.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Acclimatize (INT)</strong><br>
            When in a settlement a Bard can roll Acclimatize (see Acclimatize chart for DC). If successful, the Bard learns how to appear as a local and will no longer be treated as an outsider. This grants a +2 to Charisma &amp; Persuasion with locals and means that they won‚Äôt be questioned or harassed like an outsider.
            <br>
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr> <th>Settlement</th> <th>DC</th> </tr>
                <tr> <td>Hamlet</td>   <td>25</td> </tr>
                <tr> <td>Town</td>     <td>20</td> </tr>
                <tr> <td>City</td>     <td>15</td> </tr>
                <tr> <td>Capital</td>  <td>10</td> </tr>
            </table>
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">The Manipulator</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Poison The Well (EMP)</strong><br>
            A Bard can make a Poison The Well roll against a target‚Äôs EMP√ó3 when they are trying to influence a person or people. If successful, the Bard makes a pointed comment that imposes a ‚àí1 for each point they rolled above the DC to the target‚Äôs Seduction, Persuasion, Leadership, Intimidation or Charisma rolls.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Needling (EMP)</strong><br>
            A Bard can make a Needling roll against a target‚Äôs Resist Coercion roll. If successful, the Bard goads them with obscenities and threats until they attack. The target takes a negative to their attack and defense equal to half the Bard‚Äôs Needling value, lasting for as many rounds as the Needling value.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Et Tu Brute (EMP)</strong><br>
            A Bard can roll Et Tu Brute against a target‚Äôs WILL√ó3 to turn them against one ally. If successful the Bard‚Äôs lies and half-truths makes the target treat that ally with mistrust and animosity for as many days as the Et Tu Brute value or until they make a Resist Coercion roll that beats the Et Tu Brute roll.
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_en(num, title, description)
)
, ins_title AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS id
       , meta.entity, 'title', raw_data.lang, raw_data.title
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
, ins_description AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description') AS id
       , meta.entity, 'description', raw_data.lang, raw_data.description
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_profession_o' || to_char(raw_data.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS label,
       raw_data.num AS sort_order,
       jsonb_build_object(
           'title', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title')::text),
           'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description')::text)
       ) AS metadata
FROM raw_data
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;


-- <<< END sql/090_profession_01_bard.sql

-- >>> BEGIN sql/090_profession_02_witcher.sql

\echo '090_profession_02_witcher.sql'
-- –í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞: –í–µ–¥—å–º–∞–∫

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'answer_options' AS entity)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 2, '–í–µ–¥—å–º–∞–∫', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>–≠–Ω–µ—Ä–≥–∏—è:</strong> 2<br><br>
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:</strong><br>
            <strong class="section-title">(–í—Å–µ –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞–∫–∏)</strong>
            <ul>
                <li>–ê–∫—Å–∏–π</li>
                <li>–ê–∞—Ä–¥</li>
                <li>–ö–≤–µ–Ω</li>
                <li>–ò–≥–Ω–∏</li>
                <li>–ò—Ä–¥–µ–Ω</li>
            </ul>
        </td>
        <td>
            <strong>–ù–∞–≤—ã–∫–∏</strong>
            <ul>
                <li>[–í–æ–ª—è] - –°–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –í–Ω–∏–º–∞–Ω–∏–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –í—ã–∂–∏–≤–∞–Ω–∏–µ –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –î–µ–¥—É–∫—Ü–∏—è</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –ê—Ç–ª–µ—Ç–∏–∫–∞</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å</li>
                <li>[–†–µ–∞–∫—Ü–∏—è] - –í–µ—Ä—Ö–æ–≤–∞—è –µ–∑–¥–∞</li>
                <li>[–†–µ–∞–∫—Ü–∏—è] - –í–ª–∞–¥–µ–Ω–∏–µ –º–µ—á–æ–º</li>
                <li>[–†–µ–∞–∫—Ü–∏—è] - –£–∫–ª–æ–Ω–µ–Ω–∏–µ / –ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç—å</li>
                <li>[–†–µ–º–µ—Å–ª–æ] - –ê–ª—Ö–∏–º–∏—è</li>
            </ul>
        </td>
        <td>
            <strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong><br>
            <strong class="section-title">(–≤—ã–±–µ—Ä–∏—Ç–µ 2)</strong>
            <ul>
                <li>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–ª—Ö–∏–º–∏–∫–∞</li>
                <li>–õ–æ—à–∞–¥—å</li>
                <li>–ú–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–æ–∂–∏ √ó5</li>
                <li>–†—É—á–Ω–æ–π –∞—Ä–±–∞–ª–µ—Ç</li>
                <li>–î–≤—É—Å–ª–æ–π–Ω—ã–π –≥–∞–º–±–µ–∑–æ–Ω</li>
            </ul>
            <br><strong>–û—Å–æ–±–æ–µ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong>
            <ul>
                <li>–í–µ–¥—å–º–∞—á–∏–π –º–µ–¥–∞–ª—å–æ–Ω</li>
                <li>–°—Ç–∞–ª—å–Ω–æ–π –≤–µ–¥—å–º–∞—á–∏–π –º–µ—á</li>
                <li>–°–µ—Ä–µ–±—Ä—è–Ω—ã–π –≤–µ–¥—å–º–∞—á–∏–π –º–µ—á</li>
                <li>–§–æ—Ä–º—É–ª–∞ —ç–ª–∏–∫—Å–∏—Ä–∞ √ó2</li>
                <li>–§–æ—Ä–º—É–ª–∞ –º–∞—Å–ª–∞ √ó2</li>
                <li>–§–æ—Ä–º—É–ª–∞ –æ—Ç–≤–∞—Ä–∞</li>
            </ul>
        </td>
    </tr>
</table>

<h3>–û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–≤—ã–∫</h3>
<table class="main_skill">
    <tr>
        <td class="header">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤–µ–¥—å–º–∞–∫–∞ (–ò–Ω—Ç)</td>
    </tr>
    <tr>
        <td class="opt_content">
            –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–µ–¥—å–º–∞–∫–æ–≤ –ø—Ä–æ–≤–æ–¥—è—Ç –¥–µ—Ç—Å—Ç–≤–æ –∏ —é–Ω–æ—Å—Ç—å –≤ –∫—Ä–µ–ø–æ—Å—Ç–∏, –∫–æ—Ä–ø—è –Ω–∞–¥ –ø—ã–ª—å–Ω—ã–º–∏ —Ç–æ–º–∞–º–∏ –∏ –ø—Ä–æ—Ö–æ–¥—è —á—É–¥–æ–≤–∏—â–Ω—ã–µ –±–æ–µ–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏. –ú–Ω–æ–≥–∏–µ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –≥–ª–∞–≤–Ω–æ–µ –æ—Ä—É–∂–∏–µ –≤–µ–¥—å–º–∞–∫–∞ ‚Äî —ç—Ç–æ –∑–Ω–∞–Ω–∏—è –æ —á—É–¥–æ–≤–∏—â–∞—Ö –∏ —É–º–µ–Ω–∏–µ –Ω–∞–π—Ç–∏ –≤—ã—Ö–æ–¥ –∏–∑ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏. –ù–∞—Ö–æ–¥—è—Å—å –≤ –æ–ø–∞—Å–Ω–æ–π —Å—Ä–µ–¥–µ –∏–ª–∏ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á—ë–Ω–Ω–æ–π –º–µ—Å—Ç–Ω–æ—Å—Ç–∏, –≤–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —à—Ç—Ä–∞—Ñ—ã –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–æ–µ–≥–æ –Ω–∞–≤—ã–∫–∞ <strong>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤–µ–¥—å–º–∞–∫–∞</strong> (–º–∏–Ω–∏–º—É–º 1). <strong>–ü–æ–¥–≥–æ—Ç–æ–≤–∫—É –≤–µ–¥—å–º–∞–∫–∞</strong> —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏, –≥–¥–µ –ø–æ–Ω–∞–¥–æ–±–∏–ª—Å—è –±—ã –Ω–∞–≤—ã–∫ <strong>–ú–æ–Ω—Å—Ç—Ä–æ–ª–æ–≥–∏—è</strong>. 
        </td>
    </tr>
</table>

<h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</h3>

<table class="skills_branch_1">
    <tr>
        <td class="header">–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫–ª–∏–Ω–æ–∫</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ú–µ–¥–∏—Ç–∞—Ü–∏—è</strong><br>
            –í–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π —Ç—Ä–∞–Ω—Å, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –µ–º—É –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–Ω–∞, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –±–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –í–æ –≤—Ä–µ–º—è –º–µ–¥–∏—Ç–∞—Ü–∏–∏ –≤–µ–¥—å–º–∞–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞—Ö–æ–¥—è—â–∏–º—Å—è –≤ —Å–æ–∑–Ω–∞–Ω–∏–∏ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞–º–µ—Ç–∏—Ç—å —á—Ç–æ-–ª–∏–±–æ –≤ —Ä–∞–¥–∏—É—Å–µ –≤ –º–µ—Ç—Ä–∞—Ö, —Ä–∞–≤–Ω–æ–º —É–¥–≤–æ–µ–Ω–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é –µ–≥–æ <strong>–ú–µ–¥–∏—Ç–∞—Ü–∏–∏</strong>.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫</strong><br>
            –ü–æ –º–µ—Ä–µ —Ç–æ–≥–æ –∫–∞–∫ –≤–µ–¥—å–º–∞–∫ –≤—Å—ë –±–æ–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞–∫–∏, –µ–≥–æ —Ç–µ–ª–æ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø—Ä–∏–≤—ã–∫–∞–µ—Ç –∫ —Ç–µ—á–µ–Ω–∏—é –º–∞–≥–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–∏. –ö–∞–∂–¥—ã–µ 2 –æ—á–∫–∞, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫</strong>, –ø–æ–≤—ã—à–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –≤–µ–¥—å–º–∞–∫–∞ –Ω–∞ 1. –ö–æ–≥–¥–∞ —ç—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 10 —É—Ä–æ–≤–Ω—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –≤–µ–¥—å–º–∞–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–∞–≤–Ω–æ 7. –≠—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–æ—á–∏–º –Ω–∞–≤—ã–∫–∞–º.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ì–µ–ª–∏–æ—Ç—Ä–æ–ø (–í–æ–ª—è)</strong><br>
            –ö–æ–≥–¥–∞ –≤–µ–¥—å–º–∞–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ü–µ–ª—å—é –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è, –∏–Ω–≤–æ–∫–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ—Ä—á–∏, –æ–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ì–µ–ª–∏–æ—Ç—Ä–æ–ø</strong>, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–º–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç. –û–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–∫–∏–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –±–æ–ª—å—à–µ –ª–∏–±–æ —Ä–∞–≤–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –µ–≥–æ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, –∞ —Ç–∞–∫–∂–µ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏, —Ä–∞–≤–Ω–æ–µ –ø–æ–ª–æ–≤–∏–Ω–µ –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–π –Ω–∞ —Å–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –º–∞–≥–∏–∏.
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">–ú—É—Ç–∞–Ω—Ç</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ö—Ä–µ–ø–∫–∏–π –∂–µ–ª—É–¥–æ–∫</strong><br>
            –ó–∞ –≥–æ–¥—ã —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —è–¥–æ–≤–∏—Ç—ã—Ö –≤–µ–¥—å–º–∞—á—å–∏—Ö —ç–ª–∏–∫—Å–∏—Ä–æ–≤ –≤–µ–¥—å–º–∞–∫–∏ –ø—Ä–∏–≤—ã–∫–∞—é—Ç –∫ —Ç–æ–∫—Å–∏–Ω–∞–º. –í–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç –≤—ã–¥–µ—Ä–∂–∞—Ç—å –æ—Ç–≤–∞—Ä—ã –∏ —ç–ª–∏–∫—Å–∏—Ä—ã —Å—É–º–º–∞—Ä–Ω–æ–π —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å—é –Ω–∞ 5% –±–æ–ª—å—à–µ –∑–∞ –∫–∞–∂–¥—ã–µ 2 –æ—á–∫–∞, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å <strong>–ö—Ä–µ–ø–∫–∏–π –∂–µ–ª—É–¥–æ–∫</strong>. –≠—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–æ—á–∏–º –Ω–∞–≤—ã–∫–∞–º. –ù–∞ 10 —É—Ä–æ–≤–Ω–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å –¥–ª—è –≤–µ–¥—å–º–∞–∫–∞ —Ä–∞–≤–Ω–∞ 150%.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–Ø—Ä–æ—Å—Ç—å</strong><br>
            –ë—É–¥—É—á–∏ –æ—Ç—Ä–∞–≤–ª–µ–Ω–Ω—ã–º, –≤–µ–¥—å–º–∞–∫ –≤–ø–∞–¥–∞–µ—Ç –≤ —è—Ä–æ—Å—Ç—å –∏ –Ω–∞–Ω–æ—Å–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ 1 —É—Ä–æ–Ω –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é –∑–∞ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å <strong>–Ø—Ä–æ—Å—Ç–∏</strong>. –í —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ü–µ–ª—å –≤–µ–¥—å–º–∞–∫–∞ ‚Äî –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –∏–ª–∏ —É–±–∏—Ç—å –æ—Ç—Ä–∞–≤–∏—Ç–µ–ª—è. –î–µ–π—Å—Ç–≤–∏–µ <strong>–Ø—Ä–æ—Å—Ç–∏</strong> –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –¥–µ–π—Å—Ç–≤–∏–µ–º —è–¥–∞. –í–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç <strong>–Ø—Ä–æ—Å—Ç–∏</strong> —Ä–∞–Ω—å—à–µ, —Å–æ–≤–µ—Ä—à–∏–≤ –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏ —Å–æ –°–õ 15.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–¢—Ä–∞–Ω—Å–º—É—Ç–∞—Ü–∏—è (–¢–µ–ª)</strong><br>
            –ü—Ä–∏–Ω–∏–º–∞—è –æ—Ç–≤–∞—Ä, –≤–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–¢—Ä–∞–Ω—Å–º—É—Ç–∞—Ü–∏–∏</strong> —Å–æ –°–õ 18. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Ç–µ–ª–æ –≤–µ–¥—å–º–∞–∫–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–æ–ª—å—à–µ –º—É—Ç–∞–≥–µ–Ω–∞, —á–µ–º –æ–±—ã—á–Ω–æ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–∏–Ω—è—Ç–æ–≥–æ –æ—Ç–≤–∞—Ä–∞ (—Å–º. —Ç–∞–±–ª–∏—Ü—É –Ω–∞ –ø–æ–ª—è—Ö). –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç–≤–∞—Ä–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –≤–¥–≤–æ–µ. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º—É—Ç–∞—Ü–∏–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª—ã, —á—Ç–æ–±—ã –∏—Ö –∑–∞–º–µ—Ç–∏—Ç—å.
            <br><br>
            <div style="display:inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>–û—Ç–≤–∞—Ä</th>
                    <th>–≠—Ñ—Ñ–µ–∫—Ç</th>
                </tr>
                <tr>
                    <td><b>–ì–ª–∞–≤–æ–≥–ª–∞–∑</b></td>
                    <td>–õ—é–±–æ–π, –∫—Ç–æ –∫–æ–Ω—Ç–∞–∫—Ç–∏—Ä—É–µ—Ç —Å –≤–∞—à–µ–π —Å–ª—é–Ω–æ–π, –∏–º–µ–µ—Ç 50%-–Ω—ã–π —à–∞–Ω—Å –æ—Ç—Ä–∞–≤–∏—Ç—å—Å—è.</td>
                </tr>
                <tr>
                    <td><b>–ù–∞–∫–µ—Ä</b></td>
                    <td>–í–∞—à–∏ –Ω–æ–≥–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ, –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ü—Ä–∂ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 3 –º.</td>
                </tr>
                <tr>
                    <td><b>–ü–æ–ª—É–¥–µ–Ω–Ω–∏—Ü–∞</b></td>
                    <td>–í–∞—à–∏ –≥–ª–∞–∑–∞ –º–µ–Ω—è—é—Ç—Å—è, –∏ —É—Ä–æ–≤–µ–Ω—å –æ—Å–≤–µ—â–µ–Ω–∏—è –Ω–∞ –≤–∞—Å –±–æ–ª—å—à–µ –Ω–µ –≤–ª–∏—è–µ—Ç.</td>
                </tr>
                <tr>
                    <td><b>–ö–∞—Ç–∞–∫–∞–Ω</b></td>
                    <td>–í–∞—à–∏ –Ω–∞–¥–ø–æ—á–µ—á–Ω–∏–∫–∏ –º–µ–Ω—è—é—Ç—Å—è, –ø–æ–∑–≤–æ–ª—è—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å 3 –ü–ó, –∫–æ–≥–¥–∞ –≤—ã –Ω–∞–Ω–æ—Å–∏—Ç–µ —É—Ä–æ–Ω.</td>
                </tr>
                <tr>
                    <td><b>–í–∏–≤–µ—Ä–Ω–∞</b></td>
                    <td>–í–∞—à–∏ –º—É—Å–∫—É–ª—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ, —á—Ç–æ –¥–∞—ë—Ç +5 –∫ –°–∫–æ—Ä, —á—Ç–æ —Ç–∞–∫–∂–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ë–µ–≥.</td>
                </tr>
                <tr>
                    <td><b>–¢—Ä–æ–ª–ª—å</b></td>
                    <td>–í–∞—à–µ —Ç–µ–ª–æ –∏ –∫–æ—Å—Ç–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∫—Ä–µ–ø—á–µ. –í—ã –Ω–∞–Ω–æ—Å–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ 1d6 —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–Ω–∞.</td>
                </tr>
                <tr>
                    <td><b>–ë–µ—Å</b></td>
                    <td>–í–∞—à–∏ –≥–ª–∞–∑–∞ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –º–µ–Ω—è—é—Ç—Å—è, –≤–∑–≥–ª—è–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞—á–∞—Ä–æ–≤—ã–≤–∞—é—â–∏–º. –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ +4 –∫ –•–∞—Ä–∏–∑–º–µ, –°–æ–±–ª–∞–∑–Ω–µ–Ω–∏—é –∏ –£–±–µ–∂–¥–µ–Ω–∏—é.</td>
                </tr>
                <tr>
                    <td><b>–ö–ª–∞–¥–±–∏—â–µ–Ω—Å–∫–∞—è –±–∞–±–∞</b></td>
                    <td>–í–∞—à–µ —Ç–µ–ª–æ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è, –ø–æ–∑–≤–æ–ª—è—è –ø–æ–ª—É—á–∏—Ç—å 10 –í—ã–Ω –ø—Ä–∏ —É–±–∏–π—Å—Ç–≤–µ —Ü–µ–ª–∏.</td>
                </tr>
                <tr>
                    <td><b>–í–æ–ª–∫–æ–ª–∞–∫</b></td>
                    <td>–í–∞—à–∏ —á–µ–ª—é—Å—Ç–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ, –∞ –∑—É–±—ã —Å–ª–µ–≥–∫–∞ –∑–∞–æ—Å—Ç—Ä—è—é—Ç—Å—è. –í—ã –º–æ–∂–µ—Ç–µ –∞—Ç–∞–∫–æ–≤–∞—Ç—å —É–∫—É—Å–æ–º, –Ω–∞–Ω–æ—Å—è 2d6 —É—Ä–æ–Ω–∞.</td>
                </tr>
                <tr>
                    <td><b>–ì—Ä–∏—Ñ–æ–Ω</b></td>
                    <td>–í–∞—à–∏ –≥–ª–∞–∑–∞ –º–µ–Ω—è—é—Ç—Å—è, –ø–æ–∑–≤–æ–ª—è—è –≤–∏–¥–µ—Ç—å –∫—É–¥–∞ –¥–∞–ª—å—à–µ. –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ +4 –∫ –í–Ω–∏–º–∞–Ω–∏—é.</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">–£–±–∏–π—Ü–∞</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–û—Ç–±–∏–≤–∞–Ω–∏–µ —Å—Ç—Ä–µ–ª (–õ–≤–∫)</strong><br>
            –í–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —ç—Ç–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–æ —à—Ç—Ä–∞—Ñ–æ–º -3, —á—Ç–æ–±—ã –æ—Ç–±–∏—Ç—å –ª–µ—Ç—è—â–∏–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Å–Ω–∞—Ä—è–¥. –ü—Ä–∏ –æ—Ç–±–∏–≤–∞–Ω–∏–∏ –≤–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ü–µ–ª—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 10 –º. –≠—Ç–∞ —Ü–µ–ª—å –¥–æ–ª–∂–Ω–∞ —Å–æ–≤–µ—Ä—à–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –ø—Ä–æ—Ç–∏–≤ –±—Ä–æ—Å–∫–∞ <strong>–û—Ç–±–∏–≤–∞–Ω–∏—è —Å—Ç—Ä–µ–ª</strong> –≤–µ–¥—å–º–∞–∫–∞, –∏–ª–∏ –æ–Ω–∞ –±—É–¥–µ—Ç –æ—à–µ–ª–æ–º–ª–µ–Ω–∞ –∏–∑-–∑–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –æ—Ç–±–∏—Ç–æ–≥–æ —Å–Ω–∞—Ä—è–¥–∞.
            <br><br>
            <b>–û—Ç–±–∏–≤–∞–Ω–∏–µ –±–æ–º–±.</b> –ë–æ–º–±—ã –∏ –¥—Ä—É–≥–∏–µ –∞—Ç–∞–∫–∏, –ø–æ—Ä–∞–∂–∞—é—â–∏–µ –∑–æ–Ω—É, –≤–∑—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ç–±–∏–≤–∞–Ω–∏—è. –ï—Å–ª–∏ –≤—Ç–æ—Ä–∞—è —Ü–µ–ª—å —É–∫–ª–æ–Ω—è–µ—Ç—Å—è –æ—Ç –∞—Ç–∞–∫–∏, —Å–æ–≤–µ—Ä—à–∏—Ç–µ –±—Ä–æ—Å–æ–∫ –ø–æ —Ç–∞–±–ª–∏—Ü–µ —Ä–∞–∑–±—Ä–æ—Å–∞ (—Å–º. —Å—Ç—Ä. 152), —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫—É–¥–∞ –ø–æ–ø–∞–¥—ë—Ç —Å–Ω–∞—Ä—è–¥.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ë—ã—Å—Ç—Ä—ã–π —É–¥–∞—Ä (–†–µ–∞)</strong><br>
            –ó–∞–∫–æ–Ω—á–∏–≤ —Å–≤–æ–π —Ö–æ–¥, –≤–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å 5 –æ—á–∫–æ–≤ –í—ã–Ω –∏ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ë—ã—Å—Ç—Ä–æ–≥–æ —É–¥–∞—Ä–∞</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –†–µ–∞ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ —Ö–ó. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –≤–µ–¥—å–º–∞–∫ —Å–æ–≤–µ—Ä—à–∞–µ—Ç –µ—â—ë –æ–¥–Ω—É –∞—Ç–∞–∫—É –≤ —ç—Ç–æ—Ç —Ä–∞—É–Ω–¥ –ø—Ä–æ—Ç–∏–≤ —ç—Ç–æ–≥–æ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –≤ —Å–µ–±—è —Ä–∞–∑–æ—Ä—É–∂–µ–Ω–∏–µ, –ø–æ–¥—Å–µ—á–∫—É –∏ –ø—Ä–æ—á–∏–µ –∞—Ç–∞–∫–∏.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–í–∏—Ö—Ä—å (–†–µ–∞)</strong><br>
            –ü–æ—Ç—Ä–∞—Ç–∏–≤ 5 –æ—á–∫–æ–≤ –í—ã–Ω –∑–∞ —Ä–∞—É–Ω–¥, –≤–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç –∑–∞–∫—Ä—É—Ç–∏—Ç—å—Å—è –≤ <strong>–í–∏—Ö—Ä–µ</strong>, —Å–æ–≤–µ—Ä—à–∞—è –∫–∞–∂–¥—ã–π —Ö–æ–¥ –ø–æ –æ–¥–Ω–æ–π –∞—Ç–∞–∫–µ –ø—Ä–æ—Ç–∏–≤ –≤—Å–µ—Ö, –∫—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –µ–≥–æ –º–µ—á–∞. –ü—Ä–æ–≤–µ—Ä–∫–∞ <strong>–í–∏—Ö—Ä—è</strong> —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞—Ç–∞–∫–∏. –ù–∞—Ö–æ–¥—è—Å—å –≤ <strong>–í–∏—Ö—Ä–µ</strong>, –≤–µ–¥—å–º–∞–∫ –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–≥–æ, —É–∫–ª–æ–Ω—è—Ç—å—Å—è –∏ –ø–µ—Ä–µ–¥–≤–∏–≥–∞—Ç—å—Å—è –Ω–∞ 2 –º–µ—Ç—Ä–∞ –∑–∞ —Ä–∞—É–Ω–¥. –õ—é–±–æ–µ –¥—Ä—É–≥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —É–¥–∞—Ä –ø—Ä–µ–∫—Ä–∞—â–∞—é—Ç <strong>–í–∏—Ö—Ä—å</strong>.
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_ru(num, title, description)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 2, 'Witcher', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>Vigor:</strong> 2<br><br>
            <strong>Magical Perks:</strong><br>
            <strong class="section-title">(All Basic Signs)</strong>
            <ul>
                <li>Axii</li>
                <li>Aard</li>
                <li>Quen</li>
                <li>Igni</li>
                <li>Yrden</li>
            </ul>
        </td>
        <td>
            <strong class="section-title">Skills</strong>
            <ul>
                <li>[CRA] - Alchemy</li>
                <li>[DEX] - Athletics</li>
                <li>[DEX] - Stealth</li>
                <li>[INT] - Awareness</li>
                <li>[INT] - Deduction</li>
                <li>[INT] - Wilderness Survival</li>
                <li>[REF] - Dodge/Escape</li>
                <li>[REF] - Riding</li>
                <li>[REF] - Swordsmanship</li>
                <li>[WILL] - Spell Casting</li>
            </ul>
        </td>
        <td>
            <strong>Gear</strong><br>
            <strong class="section-title">(Pick 2)</strong>
            <ul>
                <li>Alchemy set</li>
                <li>Double woven gambeson</li>
                <li>Hand crossbow</li>
                <li>Horse</li>
                <li>Throwing knives √ó5</li>
            </ul><br>
            <strong>Special</strong>
            <ul>
                <li>Decoction formulae</li>
                <li>Oil formulae √ó2</li>
                <li>Potion formulae √ó2</li>
                <li>Witcher medallion</li>
                <li>Witcher‚Äôs steel sword</li>
                <li>Witcher‚Äôs silver sword</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Defining Skill</h3>
<table class="main_skill">
    <tr>
        <td class="header">Witcher Training (INT)</td>
    </tr>
    <tr>
        <td class="opt_content">
            Most of a Witcher‚Äôs early life is spent within the walls of their keep, studying huge, dusty tomes and going through hellish combat training. Many have argued that the Witcher‚Äôs greatest weapon is their knowledge of monsters and their adaptability in any situation. When in a hostile environment or difficult terrain, a Witcher can lessen the penalties by half their <strong>Witcher Training</strong> value (minimum 1). <strong>Witcher Training</strong> can also be used in any situation that you would normally use Monster Lore for.
        </td>
    </tr>
</table>

<h3>Professional Skills</h3>

<table class="skills_branch_1">
    <tr>
        <td class="header">The Spellsword</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Meditation</strong><br>
            A Witcher can enter a meditative trance which grants all the benefits of sleeping but allows them to remain vigilant. While meditating a Witcher is considered awake for the purpose of noticing anything within double their <strong>Meditation</strong> value in meters.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Magical Source</strong><br>
            As a Witcher uses signs more often their body becomes more used to the effort. For every 2 points a Witcher has in <strong>Magical Source</strong> they gain 1 points of Vigor threshold. When this ability reaches level 10, your maximum Vigor threshold becomes 7. This skill can be trained like other skills.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Heliotrope (WILL)</strong><br>
            When a Witcher is targeted by a spell, invocation, or hex they can roll <strong>Heliotrope</strong> to attempt to negate the effects. They must roll a Heliotrope roll that equals or beats the opponent‚Äôs roll and then expend an amount of Stamina equal to half the Stamina spent to cast the magic.
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">The Mutant</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Iron Stomach</strong><br>
            After decades of drinking toxic witcher potions, witcher bodies adapt to the toxins. A witcher can endure 5% more toxicity from drinking potions and decoctions per 2 points they spend on <strong>Iron Stomach</strong>. This skill can be trained like other skills. At level 10, a witcher‚Äôs maximum toxicity is 150%.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Frenzy</strong><br>
            When poisoned, a witcher goes into a frenzy and deals an extra 1 melee damage per level in <strong>Frenzy</strong>. While in a <strong>Frenzy</strong>, your single goal is to get to a place of safety or kill the target that poisoned you. When the poison wears off, the <strong>Frenzy</strong> ends. You can attempt to end Frenzy early with a DC:15 Endurance roll.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Transmutation (BODY)</strong><br>
            When taking decoctions a Witcher can roll <strong>Transmutation</strong> at DC:18. A success allows their body to assimilate slightly more of the mutagen than usual and gain a bonus based on which decoction they take. The decoction lasts half as long as it normally would. The extra mutations are too subtle to spot.
            <br><br>
            <div style="display:inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>Decoction</th>
                    <th>Effect</th>
                </tr>
                <tr>
                    <td><b>Arachas</b></td>
                    <td>Anyone who comes in contact with your saliva has a 50% chance of being poisoned.</td>
                </tr>
                <tr>
                    <td><b>Nekker</b></td>
                    <td>Your legs become stronger, raising your LEAP by 3m.</td>
                </tr>
                <tr>
                    <td><b>Noon Wraith</b></td>
                    <td>Your eyes change, and you aren‚Äôt affected by light conditions.</td>
                </tr>
                <tr>
                    <td><b>Katakan</b></td>
                    <td>Your adrenal glands change, allowing you to regenerate 3 HP when you deal damage.</td>
                </tr>
                <tr>
                    <td><b>Wyvern</b></td>
                    <td>Your muscles strengthen, giving you a +5 to SPD which carries over to RUN.</td>
                </tr>
                <tr>
                    <td><b>Troll</b></td>
                    <td>Your body hardens, and so do your bones. You do an extra 1d6 physical damage.</td>
                </tr>
                <tr>
                    <td><b>Fiend</b></td>
                    <td>Your eyes change imperceptibly and your gaze becomes subtly enthralling, giving a +4 to Charisma, Seduction, and Persuasion.</td>
                </tr>
                <tr>
                    <td><b>Grave Hag</b></td>
                    <td>Your body changes imperceptibly, allowing you to gain 10 STA by killing targets.</td>
                </tr>
                <tr>
                    <td><b>Werewolf</b></td>
                    <td>Your jaws strengthen and your teeth sharpen just a hair, giving you a bite attack of 2d6.</td>
                </tr>
                <tr>
                    <td><b>Griffin</b></td>
                    <td>Your eyes change, allowing you to see for a great distance, giving a +4 to Awareness.</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">The Slayer</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Parry Arrows (DEX)</strong><br>
            A Witcher can roll <strong>Parry Arrows</strong> at a ‚àí3 to deflect physical projectiles. When parrying, the Witcher can choose a target within 10m. That target must take a defense action against the Witcher‚Äôs <strong>Parry Arrows</strong> roll or be Staggered by the flying projectile.
            <br><br>
            <b>Parrying Bombs.</b> Bombs and other area of effect attacks detonate after the parry resolves. If the second target dodged the attack, roll on the Scatter Table to see where the attack lands.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Quick Strike (REF)</strong><br>
            After a Witcher takes their turn they can spend 5 STA and make a <strong>Quick Strike</strong> roll at a DC equal to their opponent‚Äôs REF√ó3. On success, they make another single strike in that round. This attack must be made against the opponent they rolled against, but can include disarms, trips, and other attacks.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Whirl (REF)</strong><br>
            By spending 5 STA per round, a witcher can enter a <strong>Whirl</strong>, where the witcher makes one attack against everyone within sword range each turn, with their <strong>Whirl</strong> roll acting as the attack roll. The witcher can only maintain this Whirl, dodge, and move 2m each round. Doing anything else or being hit halts the <strong>Whirl</strong>.
        </td>
    </tr>
</table>
</div>
'
         )) AS raw_data_en(num, title, description)
)
, ins_title AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS id
       , meta.entity, 'title', raw_data.lang, raw_data.title
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
, ins_description AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description') AS id
       , meta.entity, 'description', raw_data.lang, raw_data.description
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_profession_o' || to_char(raw_data.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS label,
       raw_data.num AS sort_order,
       jsonb_build_object(
           'title', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title')::text),
           'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description')::text)
       ) AS metadata
FROM raw_data
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;


-- <<< END sql/090_profession_02_witcher.sql

-- >>> BEGIN sql/090_profession_03_doctor.sql

\echo '090_profession_03_doctor.sql'
-- –í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞: –ú–µ–¥–∏–∫

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'answer_options' AS entity)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 3, '–ú–µ–¥–∏–∫',
'<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>–≠–Ω–µ—Ä–≥–∏—è: </strong> 0<br><br>
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:</strong><br>–Ω–µ—Ç
        </td>
        <td>
            <strong>–ù–∞–≤—ã–∫–∏</strong>
            <ul>
                <li>[–í–æ–ª—è] - –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ —É–±–µ–∂–¥–µ–Ω–∏—é</li>
                <li>[–í–æ–ª—è] - –•—Ä–∞–±—Ä–æ—Å—Ç—å</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –í—ã–∂–∏–≤–∞–Ω–∏–µ –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –î–µ–¥—É–∫—Ü–∏—è</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –¢–æ—Ä–≥–æ–≤–ª—è</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –≠—Ç–∏–∫–µ—Ç</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –í–ª–∞–¥–µ–Ω–∏–µ –ª—ë–≥–∫–∏–º–∏ –∫–ª–∏–Ω–∫–∞–º–∏</li>
                <li>[–†–µ–º–µ—Å–ª–æ] - –ê–ª—Ö–∏–º–∏—è</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ª—é–¥–µ–π</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –•–∞—Ä–∏–∑–º–∞</li>
            </ul>
        </td>
        <td>
            <strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong><br>
            <strong class="section-title">(–≤—ã–±–µ—Ä–∏—Ç–µ 5)</strong>
            <ul>
                <li>–ö—Ä–æ–≤–æ—Å–≤—ë—Ä—Ç—ã–≤–∞—é—â–∏–π –ø–æ—Ä–æ—à–æ–∫ √ó10</li>
                <li>–û–±–µ–∑–∑–∞—Ä–∞–∂–∏–≤–∞—é—â–∞—è –∂–∏–¥–∫–æ—Å—Ç—å √ó10</li>
                <li>–û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–∏–µ —Ç—Ä–∞–≤—ã √ó10</li>
                <li>–•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</li>
                <li>–ü–∏—Å—å–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏</li>
                <li>–ü–µ—Å–æ—á–Ω—ã–µ —á–∞—Å—ã (—á–∞—Å)</li>
                <li>–°–≤–µ—á–∏ √ó10</li>
                <li>–û–¥–µ—è–ª–æ</li>
                <li>–ë–æ–ª—å—à–∞—è –ø–∞–ª–∞—Ç–∫–∞</li>
                <li>–ö–∏–Ω–∂–∞–ª</li>
            </ul>
        </td>
    </tr>
</table>

<h3>–û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–≤—ã–∫</h3>
<table class="main_skill">
    <tr>
        <td class="header">–õ–µ—á–∞—â–µ–µ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ (–†–µ–º)</td>
    </tr>
    <tr>
        <td class="opt_content">
            –ö—Ç–æ —É–≥–æ–¥–Ω–æ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–≤—è–∑–∞—Ç—å —Ä–∞–Ω—É, –Ω–æ —Ç–æ–ª—å–∫–æ —É –º–µ–¥–∏–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–Ω–∞–Ω–∏–π, —á—Ç–æ–±—ã –õ–µ—á–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞–Ω–µ–Ω–∏–π –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ª–µ—á–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞–Ω–µ–Ω–∏–π —Å–º. –Ω–∞ —Å—Ç—Ä. 173. –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Ö–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –ú–µ–¥–∏–∫ —Å –Ω–∞–≤—ã–∫–æ–º <strong>–õ–µ—á–∞—â–µ–µ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ</strong> ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π, –∫—Ç–æ —Å–ø–æ—Å–æ–±–µ–Ω –≤—ã–ª–µ—á–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–Ω–µ–Ω–∏–µ. –î–ª—è –∏—Å—Ü–µ–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–Ω–µ–Ω–∏—è –º–µ–¥–∏–∫ –¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ <strong>–õ–µ—á–∞—â–µ–≥–æ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è</strong> ‚Äî —á–∏—Å–ª–æ –∏—Ö –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ—Ä—å—ë–∑–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–Ω–µ–Ω–∏—è. –°–õ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–∫–∂–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ—Ä—å—ë–∑–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–Ω–µ–Ω–∏—è. –ü–æ–º–∏–º–æ —ç—Ç–æ–≥–æ, <strong>–õ–µ—á–∞—â–µ–µ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ</strong> –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ü–µ—Ä–≤–æ–π –ø–æ–º–æ—â–∏. 
        </td>
    </tr>
</table>
<h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</h3>
<table class="skills_branch_1">
    <tr>
        <td class="header">–•–∏—Ä—É—Ä–≥</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–î–∏–∞–≥–Ω–æ–∑ (–ò–Ω—Ç)</strong><br>
            –ü—Ä–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–Ω–µ–Ω–æ–µ —Å—É—â–µ—Å—Ç–≤–æ –º–µ–¥–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–î–∏–∞–≥–Ω–æ–∑–∞</strong> —Å–æ –°–õ, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–π –≤–µ–¥—É—â–∏–º. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –æ–Ω –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–Ω–µ–Ω–∏—è —Ü–µ–ª–∏ –∏ —É–∑–Ω–∞—ë—Ç, —Å–∫–æ–ª—å–∫–æ –ø—É–Ω–∫—Ç–æ–≤ –∑–¥–æ—Ä–æ–≤—å—è —É –Ω–µ—ë –æ—Å—Ç–∞–ª–æ—Å—å. –≠—Ç–æ —Ç–∞–∫–∂–µ –¥–∞—ë—Ç –±–æ–Ω—É—Å +2 –∫–æ –≤—Å–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∞–º <strong>–õ–µ—á–∞—â–µ–≥–æ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è</strong> –¥–ª—è –ª–µ—á–µ–Ω–∏—è —ç—Ç–∏—Ö —Ä–∞–Ω.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–û—Å–º–æ—Ç—Ä (–ò–Ω—Ç)</strong><br>
            –ü–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π <strong>–õ–µ—á–∞—â–µ–≥–æ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è</strong> –º–µ–¥–∏–∫ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å —Ö–æ–¥ –∏ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–û—Å–º–æ—Ç—Ä–∞</strong> —Å–æ –°–õ, –∑–∞–≤–∏—Å—è—â–µ–π –æ—Ç —Å–µ—Ä—å—ë–∑–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–Ω–µ–Ω–∏—è. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–µ–¥–∏–∫ –ø–æ–Ω–∏–º–∞–µ—Ç –ø—Ä–∏—Ä–æ–¥—É —Ä–∞–Ω–µ–Ω–∏—è –∏ –∑–∞ –∫–∞–∂–¥—ã–µ 2 –ø—É–Ω–∫—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤—ã—à–µ –°–õ (–º–∏–Ω–∏–º—É–º 1) —Ö–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–π–º—ë—Ç –Ω–∞ 1 —Ö–æ–¥ –º–µ–Ω—å—à–µ.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ö–∏—Ä—É—Ä–≥–∏—è (–†–µ–º)</strong><br>
            –ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –Ω–∞—á–∞—Ç—å –ª–µ—á–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–Ω–µ–Ω–∏–µ, –º–µ–¥–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ö–∏—Ä—É—Ä–≥–∏–∏</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –°–õ –ø—Ä–æ–≤–µ—Ä–∫–∏ <strong>–õ–µ—á–∞—â–µ–≥–æ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è</strong>, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –¥–ª—è –ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ —Ä–∞–Ω–µ–Ω–∏—è. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–µ–¥–∏–∫ –∑–∞—à–∏–≤–∞–µ—Ç —Ä–∞–Ω—ã —Å—Ç–æ–ª—å –∏—Å–∫—É—Å–Ω–æ, —á—Ç–æ –æ–Ω–∏ –∏—Å—Ü–µ–ª—è—é—Ç—Å—è –≤ –¥–≤–∞ —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ. –≠—Ç—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –ª–µ—á–µ–Ω–∏–∏ –∫–∞–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞–Ω–µ–Ω–∏–π, —Ç–∞–∫ –∏ –æ–±—ã—á–Ω—ã—Ö.
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">–¢—Ä–∞–≤–Ω–∏–∫</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü–∞–ª–∞—Ç–∫–∞ –ª–µ–∫–∞—Ä—è (–†–µ–º)</strong><br>
            –ü–∞–ª–∞—Ç–∫–∞ –ª–µ–∫–∞—Ä—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ –°–õ, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–π –≤–µ–¥—É—â–∏–º, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —É–∫—Ä—ã—Ç–∏–µ —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ –¥–ª—è –ª–µ—á–µ–Ω–∏—è. –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç 1 —á–∞—Å–∞, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –±–æ–Ω—É—Å +3 –∫ —Å–æ–≤–µ—Ä—à—ë–Ω–Ω—ã–º –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º <strong>–õ–µ—á–∞—â–µ–≥–æ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è</strong>/–ü–µ—Ä–≤–æ–π –ø–æ–º–æ—â–∏ –∏ +2 –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏—Å—Ü–µ–ª–µ–Ω–∏—è –ª—é–±–æ–≥–æ, –∫—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ª–∞—Ç–∫–µ, –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é <strong>–ü–∞–ª–∞—Ç–∫–∏ –ª–µ–∫–∞—Ä—è</strong>.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü–æ–¥—Ä—É—á–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ (–ò–Ω—Ç)</strong><br>
            –ú–µ–¥–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ü–æ–¥—Ä—É—á–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –°–õ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ª–µ—á–∞—â–µ–≥–æ –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞, —á—Ç–æ–±—ã –∑–∞–º–µ–Ω–∏—Ç—å –µ–≥–æ —á–µ–º-—Ç–æ, —á—Ç–æ —É –Ω–µ–≥–æ –µ—Å—Ç—å –≤ –Ω–∞–ª–∏—á–∏–∏. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 1 —Ä–∞—É–Ω–¥, –∏ –µ—ë –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ. <strong>–ü–æ–¥—Ä—É—á–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞</strong> –≤–µ—Å—å–º–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –∏ –¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ä–∞–Ω—É.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–†–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ (–†–µ–º)</strong><br>
            –°–º–µ—à–∞–≤ –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–∏–µ —Å—É–±—Å—Ç–∞–Ω—Ü–∏–∏, –º–µ–¥–∏–∫ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –¥–∞—ë—Ç –±–æ–Ω—É—Å—ã/—ç—Ñ—Ñ–µ–∫—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–∞–≤–∞ (—Å–º. —Ç–∞–±–ª–∏—Ü—É –†–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –Ω–∞ –ø–æ–ª—è—Ö). –ö–∞–∂–¥–æ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 3 –¥–Ω—è, –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Å—Ä–æ–∫–∞ –µ–≥–æ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å, –ª–µ–∫–∞—Ä—Å—Ç–≤–æ —Å–ª–µ–¥—É–µ—Ç —Å–∂–µ—á—å –∏–ª–∏ —Ä–∞–∑–∂–µ–≤–∞—Ç—å; –µ–≥–æ —Ö–≤–∞—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ. –°–æ–∑–¥–∞–Ω–∏–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 1 —Ö–æ–¥.
            <br><br>
            <div style="display: inline-block;">
              <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>–õ–µ–∫–∞—Ä—Å—Ç–≤–æ</th>
                    <th>–°–õ</th>
                </tr>
                <tr>
                    <td><b>–ö—É–ø–æ—Ä–æ—Å + –†–µ–±–∏—Å</b><br>
                        +15 –ü–ó –Ω–∞ 1 —á–∞—Å
                    </td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>–ö–≤–µ–±—Ä–∏—Ç + –°–æ–ª–Ω—Ü–µ</b><br>
                        –ò–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –±–æ–ª–∏ –Ω–∞ 1 —á–∞—Å, —É–º–µ–Ω—å—à–∞—è –Ω–∞ 4 —à—Ç—Ä–∞—Ñ—ã –æ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞–Ω–µ–Ω–∏–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏.
                    </td>
                    <td>14</td>
                </tr>
                <tr>
                    <td><b>–≠—Ñ–∏—Ä + –ê–µ—Ä</b><br>
                        –û—Ç–º–µ–Ω—è–µ—Ç —à—Ç—Ä–∞—Ñ—ã –∑–∞ —Å–ª–∞–±–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –Ω–∞ 1 —á–∞—Å, –Ω–æ –≤ 2 —Ä–∞–∑–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —à—Ç—Ä–∞—Ñ—ã –∑–∞ —è—Ä–∫–∏–π —Å–≤–µ—Ç.
                    </td>
                    <td>14</td>
                </tr>
                <tr>
                    <td><b>–§—É–ª—å–≥–æ—Ä + –ö–∏–Ω–æ–≤–∞—Ä—å</b><br>
                        +3 –ø—Ä–æ—Ç–∏–≤ –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è –Ω–∞ 1 —á–∞—Å
                    </td>
                    <td>15</td>
                </tr>
                <tr>
                    <td><b>–ì–∏–¥—Ä–∞–≥–µ–Ω + –†–µ–±–∏—Å</b><br>
                        +3 –∫ –°–æ–±–ª–∞–∑–Ω–µ–Ω–∏—é –Ω–∞ 1 —á–∞—Å
                    </td>
                    <td>15</td>
                </tr>
                <tr>
                    <td><b>–≠—Ñ–∏—Ä + –ö—É–ø–æ—Ä–æ—Å</b><br>
                        +3 –∫ –í–Ω–∏–º–∞–Ω–∏—é –Ω–∞ 1 —á–∞—Å
                    </td>
                    <td>15</td>
                </tr>
                <tr>
                    <td><b>–ö–∏–Ω–æ–≤–∞—Ä—å + –ö–≤–µ–±—Ä–∏—Ç</b><br>
                        +15 –∫ –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏ –Ω–∞ 1 —á–∞—Å
                    </td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>–§—É–ª—å–≥–æ—Ä + –°–æ–ª–Ω—Ü–µ</b><br>
                        –ü–æ–≥—Ä—É–∂–∞–µ—Ç –≤–∞—Å –≤ –ø–æ–¥–æ–±–Ω—É—é —Å–º–µ—Ä—Ç–∏ –∫–æ–º—É –Ω–∞ 1 —á–∞—Å.
                    </td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>–ê–µ—Ä + –ì–∏–¥—Ä–∞–≥–µ–Ω</b><br>
                        –ü–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑ —à—Ç—Ä–∞—Ñ–æ–≤ –Ω–µ —Å–ø–∞—Ç—å –Ω–æ—á—å.
                    </td>
                    <td>17</td>
                </tr>
                <tr>
                    <td><b>–ö–∏–Ω–æ–≤–∞—Ä—å + –°–æ–ª–Ω—Ü–µ</b><br>
                        +3 –∫ –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ 10 —Ä–∞—É–Ω–¥–æ–≤
                    </td>
                    <td>15</td>
                </tr>
              </table>
            </div>
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">–ê–Ω–∞—Ç–æ–º</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ö—Ä–æ–≤–∞–≤–∞—è —Ä–∞–Ω–∞ (–ò–Ω—Ç)</strong><br>
            –ù–∞–Ω–æ—Å—è —É—Ä–æ–Ω –∫–ª–∏–Ω–∫–æ–≤—ã–º –æ—Ä—É–∂–∏–µ–º, –º–µ–¥–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ö—Ä–æ–≤–∞–≤–∞—è —Ä–∞–Ω–∞</strong> —Å–æ –°–õ 15. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –ø–æ—Å–ª–µ —ç—Ç–æ–π –∞—Ç–∞–∫–∏ —Ü–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å—Ç–µ–∫–∞—Ç—å –∫—Ä–æ–≤—å—é —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 1 —É—Ä–æ–Ω –∑–∞ –∫–∞–∂–¥—ã–µ 2 –ø—É–Ω–∫—Ç–∞ —Å–≤—ã—à–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –°–õ –∑–∞ —Ä–∞—É–Ω–¥. –ö—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ü–µ—Ä–≤–æ–π –ø–æ–º–æ—â–∏ —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –ø—Ä–æ–≤–µ—Ä–∫–∏ <strong>–ö—Ä–æ–≤–∞–≤–æ–π —Ä–∞–Ω—ã</strong>.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∑–Ω—è (–ò–Ω—Ç)</strong><br>
            –ú–µ–¥–∏–∫–º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∑–Ω—è</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –¢–µ–ª —Ö 3 –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, —á—Ç–æ–±—ã –æ–±—ã—á–Ω—ã–µ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –∏—Å—Ü–µ–ª—è–ª–∏—Å—å –≤ –¥–≤–∞ —Ä–∞–∑–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ. –î—Ä—É–≥–∏–µ –º–µ–¥–∏–∫–∏ –º–æ–≥—É—Ç –Ω–µ–π—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –ø–æ–º–æ—â–∏ <strong>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ö–∏—Ä—É—Ä–≥–∏–∏</strong> –∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –ø–æ–≤—ã—à–∞—é—â–∏—Ö —Å–∫–æ—Ä–æ—Å—Ç—å –∏—Å—Ü–µ–ª–µ–Ω–∏—è –æ–±—ã—á–Ω—ã—Ö –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞–Ω.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ö–∞–ª–µ—á–∞—â–∞—è —Ä–∞–Ω–∞ (–ò–Ω—Ç)</strong><br>
            –ú–µ–¥–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ö–∞–ª–µ—á–∞—â–∞—è —Ä–∞–Ω–∞</strong> –ø—Ä–æ—Ç–∏–≤ –∑–∞—â–∏—Ç—ã —Ü–µ–ª–∏. –≠—Ç–∞ –∞—Ç–∞–∫–∞ –¥–∞—ë—Ç —à—Ç—Ä–∞—Ñ -6 –∫ –ø–æ–ø–∞–¥–∞–Ω–∏—é, –Ω–æ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ —Å–Ω–∏–∂–∞–µ—Ç –†–µ–∞–∫—Ü–∏—é, –¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –°–∫–æ—Ä–æ—Å—Ç—å —Ü–µ–ª–∏ –Ω–∞ 1 –ø—É–Ω–∫—Ç –∑–∞ –∫–∞–∂–¥—ã–µ 3 –ø—É–Ω–∫—Ç–∞ —Å–≤—ã—à–µ –±—Ä–æ—Å–∫–∞ –∑–∞—â–∏—Ç—ã. –®—Ç—Ä–∞—Ñ –º–æ–∂–Ω–æ —Å–Ω—è—Ç—å, —Ç–æ–ª—å–∫–æ —Å–æ–≤–µ—Ä—à–∏–≤ –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ö–∏—Ä—É—Ä–≥–∏–∏</strong> —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∞—Ç–∞–∫–∏ –º–µ–¥–∏–∫–∞.
        </td>
    </tr>
</table>
</div>
'
         )) AS raw_data_ru(num, title, description)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 3, 'Doctor', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>Vigor:</strong> 0<br>
            <strong>Magical Perks:</strong> None
        </td>
        <td>
            <strong>Skills</strong>
            <ul>
                <li>[CRA] - Alchemy</li>
                <li>[DEX] - Small Blades</li>
                <li>[EMP] - Charisma</li>
                <li>[EMP] - Human Perception</li>
                <li>[INT] - Business</li>
                <li>[INT] - Deduction</li>
                <li>[INT] - Social Etiquette</li>
                <li>[INT] - Wilderness Survival</li>
                <li>[WILL] - Courage</li>
                <li>[WILL] - Resist Coercion</li>
            </ul>
        </td>
        <td>
            <strong>Gear</strong><br>
            <strong class="section-title">(Pick 5)</strong>
            <ul>
                <li>Blanket</li>
                <li>Candles x10</li>
                <li>Clotting powder x10</li>
                <li>Dagger</li>
                <li>Hourglass</li>
                <li>Large tent</li>
                <li>Numbing herbs x10</li>
                <li>Sterilizing fluid x10</li>
                <li>Surgeon''s kit</li>
                <li>Writing kit</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Defining Skill</h3>
<table class="main_skill">
    <tr>
        <td class="header">Healing Hands (CRA)</td>
    </tr>
    <tr>
        <td class="opt_content">
            Anyone can apply some ointment and wrap a bandage around a cut, but a Doctor has true medical training which allows them to perform complex surgeries. A Doctor with <strong>Healing Hands</strong> is the only person who can heal a critical wound. To heal critical wounds a doctor must make a number of successful <strong>Healing Hands</strong> rolls based on the severity of the critical wound. The DC of the roll is based on the severity of the critical wound as well. <strong>Healing Hands</strong> can also be used for any First Aid task.
        </td>
    </tr>
</table>
<h3>Professional Skills</h3>
<table class="skills_branch_1">
    <tr>
        <td class="header">The Surgeon</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Diagnose (INT)</strong><br>
            When able to look over a wounded person or monster, a Doctor can roll Diagnose at a DC determined by the GM. If they succeed they assess any Critical Wounds the subject has and learn how many Health Points it has left. This also gives a +2 to any Healing Hands checks to heal those wounds.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Analysis (INT)</strong><br>
            When about to perform a Healing Hands roll, a Doctor can take a turn to make an Analysis roll at a DC equal to the severity of the Critical Wound. If they succeed they gain insight into the wounds, and for every 2 they roll over the DC (minimum 1) the surgery takes 1 turn less.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Effective Surgery (CRA)</strong><br>
            Before starting to heal a Critical Wound a Doctor can make an Effective Surgery roll at a DC equal to the wound''s Healing Hands DC. If they succeed they treat the wounds so skilfully that they heal twice as fast. This ability can be used on critical wounds and can also be used on regular wounds.
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">The Herbalist</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Healing Tent (CRA)</strong><br>
            Healing Tent allows a Doctor to roll against a DC set by the GM to create a covered area that provides an optimal medical environment. This takes 1 hour but adds +3 to Healing Hands/First Aid rolls inside, and +2 to the healing rate of anyone in the tent for a number of days equal to your Healing Tent value.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Improvisation (INT)</strong><br>
            A Doctor can make an Improvisation roll at a DC equal to the crafting DC for a specific medical alchemical item to substitute something else on hand for the same effect. This roll takes one round and if it is failed it can be made again. Improvisation is very specific and works only on this one injury.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Herbal Remedy (CRA)</strong><br>
            By mixing alchemical substances, a Doctor can create an herbal remedy that grants bonuses/effects based on what was put into it (see the Healing Remedy chart in the sidebar). Each remedy remains viable for 3 days and must be burned or chewed to provide the bonus, allowing only 1 use. Making a remedy takes 1 turn.
            <br><br>
            <div style="display: inline-block;">
              <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>Remedy</th>
                    <th>DC</th>
                </tr>
                <tr>
                    <td><b>Vitriol + Rebis</b><br>
                        +15 Health for 1 hour.
                    </td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>Quebrith + Sol</b><br>
                        Negates all pain for 1 hour lessening penalties from criticals and being near death by 4.
                    </td>
                    <td>14</td>
                </tr>
                <tr>
                    <td><b>Aether + Caelum</b><br>
                        Negates dim light penalties for an hour but doubles bright light penalties
                    </td>
                    <td>14</td>
                </tr>
                <tr>
                    <td><b>Fulgur + Vermillion</b><br>
                        +3 against Intimidation for 1 hour.
                    </td>
                    <td>15</td>
                </tr>
                <tr>
                    <td><b>Hydragenum + Rebis</b><br>
                        +3 to Seduction for 1 hour
                    </td>
                    <td>15</td>
                </tr>
                <tr>
                    <td><b>Aether + Vitriol</b><br>
                        +3 to Awareness for 1 hour
                    </td>
                    <td>15</td>
                </tr>
                <tr>
                    <td><b>Vermillion + Quebrith</b><br>
                        +15 Stamina for 1 hour
                    </td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>Fulgur + Sol</b><br>
                        Puts you into a death-like coma for 1 hour
                    </td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>Caelum + Hydragenum</b><br>
                        Allows you to stay awake all night with no penalties
                    </td>
                    <td>17</td>
                </tr>
                <tr>
                    <td><b>Vermillion + Sol</b><br>
                        +3 to Reflex for 10 rounds
                    </td>
                    <td>15</td>
                </tr>
              </table>
            </div>
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">The Anatomist</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Bleeding Wound (INT)</strong><br>
            A Doctor who does damage with a bladed weapon can make a Bleeding Wound roll against a DC of 15. On success, the attack causes bleeding at a rate of 1 point per 2 points rolled over the DC. The bleeding can only be stopped by a First Aid roll, at a DC equal to the Doctor''s Bleeding Wound roll.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Practical Carnage (INT)</strong><br>
            A Doctor can roll Practical Carnage against a DC equal to the opponent''s BODYx3 to cause the target''s wounds and critical wounds to heal half as fast. Other Doctors with the Effective Surgery skill and items that raise the healing rate of wounds and critical wounds can counteract the effect.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Crippling Wound (INT)</strong><br>
            A Doctor can make a Crippling Wound roll against the target''s defense. This attack takes a -6 to hit but imposes a negative to the target''s REFLEX, BODY, or SPEED equal to 1 per 3 points above their defense roll. This negative can only be removed with an Effective Surgery roll that beats your attack roll.
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_en(num, title, description)
)
, ins_title AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS id
       , meta.entity, 'title', raw_data.lang, raw_data.title
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
, ins_description AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description') AS id
       , meta.entity, 'description', raw_data.lang, raw_data.description
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_profession_o' || to_char(raw_data.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS label,
       raw_data.num AS sort_order,
       jsonb_build_object(
           'title', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title')::text),
           'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description')::text)
       ) AS metadata
FROM raw_data
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;


-- <<< END sql/090_profession_03_doctor.sql

-- >>> BEGIN sql/090_profession_04_mage.sql

\echo '090_profession_04_mage.sql'
-- –í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞: –ú–∞–≥

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'answer_options' AS entity)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 4, '–ú–∞–≥',
'<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>–≠–Ω–µ—Ä–≥–∏—è:</strong> 5<br><br>
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:</strong>
            <ul>
                <li>5 –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π –Ω–æ–≤–∏—á–∫–∞</li>
                <li>1 —Ä–∏—Ç—É–∞–ª –Ω–æ–≤–∏—á–∫–∞</li>
                <li>1 –ø–æ—Ä—á–∞ —Å –Ω–∏–∑–∫–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç—å—é</li>
            </ul>
        </td>
        <td>
            <strong>–ù–∞–≤—ã–∫–∏</strong>
            <ul>
                <li>[–í–æ–ª—è] - –ù–∞–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Ä—á–∏</li>
                <li>[–í–æ–ª—è] - –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–∏—Ç—É–∞–ª–æ–≤</li>
                <li>[–í–æ–ª—è] - –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –º–∞–≥–∏–∏</li>
                <li>[–í–æ–ª—è] - –°–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –≠—Ç–∏–∫–µ—Ç</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –í–ª–∞–¥–µ–Ω–∏–µ –¥—Ä–µ–≤–∫–æ–≤—ã–º –æ—Ä—É–∂–∏–µ–º</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –í–Ω–µ—à–Ω–∏–π –≤–∏–¥</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –°–æ–±–ª–∞–∑–Ω–µ–Ω–∏–µ</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ª—é–¥–µ–π</li>
            </ul>
        </td>
        <td>
            <strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong><br>
            <strong class="section-title">(–≤—ã–±–µ—Ä–∏—Ç–µ 5)</strong>
            <ul>
                <li>–ü–µ—Å–æ—á–Ω—ã–µ —á–∞—Å—ã (—á–∞—Å)</li>
                <li>–ù–∞–±–æ—Ä –¥–ª—è –º–∞–∫–∏—è–∂–∞</li>
                <li>–ü–æ—è—Å–Ω–∞—è —Å—É–º–∫–∞</li>
                <li>–ü–∏—Å—å–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏</li>
                <li>–†—É—á–Ω–æ–µ –∑–µ—Ä–∫–∞–ª—å—Ü–µ</li>
                <li>–ö–∏–Ω–∂–∞–ª</li>
                <li>–ü–æ—Å–æ—Ö</li>
                <li>–ù–∞–±–µ–¥—Ä–µ–Ω–Ω—ã–µ –Ω–æ–∂–Ω—ã</li>
                <li>–î–Ω–µ–≤–Ω–∏–∫</li>
                <li>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 100 –∫—Ä–æ–Ω</li>
            </ul>
        </td>
    </tr>
</table>

<h3>–û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–≤—ã–∫</h3>
<table class="main_skill">
    <tr>
        <td class="header">–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –ø–æ–∑–Ω–∞–Ω–∏—è (–ò–Ω—Ç)</td>
    </tr>
    <tr>
        <td class="opt_content">
            –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å –ø–æ–ª–Ω–æ–ø—Ä–∞–≤–Ω—ã–º –º–∞–≥–æ–º, —Å–ø–æ—Å–æ–±–Ω—ã–π –∫ –º–∞–≥–∏–∏ –∞–¥–µ–ø—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –æ–±—É—á–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–π –∏–∑ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∞–∫–∞–¥–µ–º–∏–π. –ú–∞–≥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏—Ö –ø–æ–∑–Ω–∞–Ω–∏–π</strong>, –µ—Å–ª–∏ –µ–º—É –ø–æ–ø–∞–¥—ë—Ç—Å—è –º–∞–≥–∏—á–µ—Å–∫–∏–π —Ñ–µ–Ω–æ–º–µ–Ω, –µ—Å–ª–∏ –æ–Ω —É–≤–∏–¥–∏—Ç –Ω–µ–∑–Ω–∞–∫–æ–º–æ–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –∏–ª–∏ –∑–∞—Ö–æ—á–µ—Ç —É–∑–Ω–∞—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ –∫–∞–∫–æ–π-—Ç–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å. –°–õ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤–µ–¥—É—â–∏–º. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–∞–≥ —É–∑–Ω–∞—ë—Ç –≤—Å—ë, —á—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –¥–∞–Ω–Ω–æ–≥–æ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —Ñ–µ–Ω–æ–º–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä–∫–∞ <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏—Ö –ø–æ–∑–Ω–∞–Ω–∏–π</strong> —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –í–Ω–∏–º–∞–Ω–∏—è –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–π –º–∞–≥–∏–∏ –∏ –¥—É—Ö–æ–≤. 
        </td>
    </tr>
</table>
<h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</h3>
<table class="skills_branch_1">
    <tr>
        <td class="header">–ü–æ–ª–∏—Ç–∏–∫</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°—Ç—Ä–æ–∏—Ç—å –∫–æ–∑–Ω–∏ (–ò–Ω—Ç)</strong><br>
            –ú–∞–≥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–°—Ç—Ä–æ–∏—Ç—å –∫–æ–∑–Ω–∏</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –ò–Ω—Ç—Ö–ó —Ü–µ–ª–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–∞–≥ –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å +3 –∫ –û–±–º–∞–Ω—É, –°–æ–±–ª–∞–∑–Ω–µ–Ω–∏—é, –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—é –∏–ª–∏ –£–±–µ–∂–¥–µ–Ω–∏—é –ø—Ä–æ—Ç–∏–≤ —ç—Ç–æ–π —Ü–µ–ª–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –∑–Ω–∞–Ω–∏—è–º –æ –µ—ë —Å–∏–ª—å–Ω—ã—Ö –∏ —Å–ª–∞–±—ã—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö. –ë–æ–Ω—É—Å –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–°—Ç—Ä–æ–∏—Ç—å –∫–æ–∑–Ω–∏</strong>.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°–ø–ª–µ—Ç–Ω–∏ (–ò–Ω—Ç)</strong><br>
            –ü–æ—Ç—Ä–∞—Ç–∏–≤ —á–∞—Å –≤—Ä–µ–º–µ–Ω–∏, –º–∞–≥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–°–ø–ª–µ—Ç–µ–Ω</strong> –ø—Ä–æ—Ç–∏–≤ –≠–º–ø—Ö–ó —Ü–µ–ª–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–∞–≥ —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø—É—Å–∫–∞–µ—Ç —Å–ª—É—Ö–∏ –æ —Ü–µ–ª–∏ –ø–æ –≤—Å–µ–º—É –ø–æ—Å–µ–ª–µ–Ω–∏—é, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–µ–ø—É—Ç–∞—Ü–∏—é —Ü–µ–ª–∏ –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É –∑–Ω–∞—á–µ–Ω–∏—è <strong>–°–ø–ª–µ—Ç–µ–Ω</strong> –º–∞–≥–∞ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é —ç—Ç–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü–æ–ª–µ–∑–Ω—ã–µ —Å–≤—è–∑–∏ (–ò–Ω—Ç)</strong><br>
            –û–¥–∏–Ω —Ä–∞–∑ –∑–∞ –∏–≥—Ä—É –º–∞–≥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ü–æ–ª–µ–∑–Ω—ã—Ö —Å–≤—è–∑–µ–π</strong>, —á—Ç–æ–±—ã –≤—Å–ø–æ–º–Ω–∏—Ç—å –æ –∫–æ–º—Ç–æ, –∫—Ç–æ –º–æ–≥ –±—ã –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ–∂–¥—É —á–µ—Ç—ã—Ä—å–º—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ –ø–æ–ª—è—Ö, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫—Ç–æ —ç—Ç–æ—Ç –∑–Ω–∞–∫–æ–º—ã–π. –¢–æ, –∫–∞–∫ –∞–≥–µ–Ω—Ç –±—É–¥–µ—Ç –ø–æ–º–æ–≥–∞—Ç—å –º–∞–≥—É, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π.
              <br>
              <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">–ü–æ—Å–µ–ª–µ–Ω–∏–µ</th>
                    <th colspan="2">–ü—Ä–æ—Ñ–µ—Å—Å–∏—è</th>
                    <th colspan="2">–í–ª–∏—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                    <th colspan="2">–û—Ç–Ω–æ—à–µ–Ω–∏—è</th>
                </tr>
                <tr>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th> <th>–û—á–∫–∏</th>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th> <th>–û—á–∫–∏</th>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th> <th>–û—á–∫–∏</th>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th> <th>–û—á–∫–∏</th>
                </tr>
                <tr>
                    <td>–î–µ—Ä–µ–≤–Ω—è</td>     <td>3</td>
                    <td>–ö–æ—Ä—á–º–∞—Ä—å</td> <td>3</td>
                    <td>–ù–∏–∑–∫–∞—è</td>      <td>2</td>
                    <td>–®–∞–Ω—Ç–∞–∂</td>      <td>3</td>
                </tr>
                <tr>
                    <td>–ü–æ—Å—ë–ª–æ–∫</td>  <td>4</td>
                    <td>–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫</td> <td>5</td>
                    <td>–°—Ä–µ–¥–Ω—è—è</td>  <td>3</td>
                    <td>–î–æ–ª–≥</td>  <td>5</td>
                </tr>
                <tr>
                    <td>–ì–æ—Ä–æ–¥</td>       <td>5</td>
                    <td>–°—Ç—Ä–∞–∂–Ω–∏–∫</td> <td>6</td>
                    <td>–í—ã—Å–æ–∫–∞—è</td>     <td>5</td>
                    <td>–î—Ä—É–∂–µ–ª—é–±–∏–µ</td>     <td>6</td>
                </tr>
                <tr>
                    <td>–°—Ç–æ–ª–∏—Ü–∞</td>  <td>10</td>
                    <td>–ú–∞–≥</td> <td>8</td>
                    <td></td>         <td></td>
                    <td>–†–æ–º–∞–Ω</td>  <td>8</td>
                </tr>
                <tr>
                    <td></td>         <td></td>
                    <td>–î–≤–æ—Ä—è–Ω–∏–Ω</td> <td>10</td>
                    <td></td>         <td></td>
                    <td>–ü–æ–¥—á–∏–Ω–µ–Ω–∏–µ</td> <td>10</td>
                </tr>
              </table><br><br>
              –û—Ç–Ω–æ—à–µ–Ω–∏—è —Å –∞–≥–µ–Ω—Ç–æ–º –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ—Ç –∞–≥–µ–Ω—Ç –≥–æ—Ç–æ–≤ –≤–∞–º –ø–æ–º–æ–≥–∞—Ç—å. 
              <ul>
                <li>–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥—á–∏–Ω—ë–Ω–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤–∞ –ø–æ–º–æ–≥—É—Ç –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ.</li>
                <li>–¢–µ, —Å –∫–µ–º —É –≤–∞—Å —Ä–æ–º–∞–Ω, –ø–æ–º–æ–≥—É—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤–æ –≤—Å—ë–º, –ø–æ–∫–∞ –≤—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç–µ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è.</li>
                <li>–î—Ä—É–∂–µ–ª—é–±–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å —Ä–∏—Å–∫–Ω—É—Ç—å —Ä–∞–¥–∏ –≤–∞—Å.</li>
                <li>–î–æ–ª–∂–Ω–∏–∫–∏ –æ–∫–∞–∂—É—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —É—Å–ª—É–≥—É.</li>
                <li>–®–∞–Ω—Ç–∞–∂–∏—Ä—É–µ–º—ã–µ –∞–≥–µ–Ω—Ç—ã —Å–¥–µ–ª–∞—é—Ç –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ, –Ω–æ –µ—Å—Ç—å 50%-–Ω—ã–π —à–∞–Ω—Å, —á—Ç–æ –æ–Ω–∏ –≤–∞—Å –ø—Ä–µ–¥–∞–¥—É—Ç.</li>
              </ul>
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">–£—á—ë–Ω—ã–π</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ê–Ω–∞–ª–∏–∑ (–ò–Ω—Ç)</strong><br>
            –ü–æ—Ç—Ä–∞—Ç–∏–≤ —á–∞—Å –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞, –º–∞–≥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ê–Ω–∞–ª–∏–∑–∞</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –°–õ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —ç—Ç–æ–≥–æ –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞ + 3. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–∞–≥ –≤—ã–≤–æ–¥–∏—Ç –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É–ª—É —ç—Ç–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞. –°–õ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ –ø–æ –≤–æ—Å—Å–æ–∑–¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—É–ª–µ –Ω–∞ 3 –ø—É–Ω–∫—Ç–∞ –≤—ã—à–µ, –Ω–æ –≤ –∏—Ç–æ–≥–µ –º–∞–≥ –ø–æ–ª—É—á–∞–µ—Ç –∂–µ–ª–∞–µ–º—ã–π –ø—Ä–µ–¥–º–µ—Ç.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–î–∏—Å—Ç–∏–ª–ª—è—Ü–∏—è (–†–µ–º)</strong><br>
            –ú–∞–≥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–î–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏</strong> –≤–º–µ—Å—Ç–æ –ê–ª—Ö–∏–º–∏–∏ –ø—Ä–∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–∏ –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–∞–≥ —Å–æ–∑–¥–∞—ë—Ç –ø–æ—Ä—Ü–∏—é —Å–æ—Å—Ç–∞–≤–∞, –¥–µ–π—Å—Ç–≤—É—é—â—É—é –≤ –ø–æ–ª—Ç–æ—Ä–∞ —Ä–∞–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –æ–±—ã—á–Ω–æ–π –ø–æ—Ä—Ü–∏–∏ ‚Äî —ç—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —É—Ä–æ–Ω—É –∏–ª–∏ –°–õ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –Ω–∞ –≤—ã–±–æ—Ä –º–∞–≥–∞. –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –≤—Å–µ–≥–¥–∞ –∏–¥—ë—Ç –≤–Ω–∏–∑.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ú—É—Ç–∞—Ü–∏—è (–ò–Ω—Ç)</strong><br>
            –ú–∞–≥ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π –¥–µ–Ω—å –∏ –≤—Å—é —Å–≤–æ—é –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –Ω–∞–¥ —Ü–µ–ª—å—é, —á—Ç–æ–±—ã —Å–æ–≤–µ—Ä—à–∏—Ç—å –±—Ä–æ—Å–æ–∫ <strong>–ú—É—Ç–∞—Ü–∏–∏</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π (28 -(–¢–µ–ª+ –í–æ–ª—è —Ü–µ–ª–∏)/ 2), –∏ –º—É—Ç–∞—Ü–∏–µ–π –∏–∑–º–µ–Ω–∏—Ç—å —Ü–µ–ª—å. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Ü–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—É—Ç–∞–≥–µ–Ω —Å –ø–æ–¥—Ö–æ–¥—è—â–µ–π –º–∞–ª–æ–π –º—É—Ç–∞—Ü–∏–µ–π. –ü—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ —Ü–µ–ª—å –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ –∏ –ø–æ–ª—É—á–∞–µ—Ç –∫—Ä—É–ø–Ω—É—é –º—É—Ç–∞—Ü–∏—é.
            <br><br>
            –ú—É—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–¥–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –º–æ–∂–Ω–æ –º–∞–∫—Å–∏–º—É–º –¥–≤–∞ —Ä–∞–∑–∞. –ù–æ–≤—ã–µ –º—É—Ç–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤–∑–∞–º–µ–Ω –∏–º–µ—é—â–∏—Ö—Å—è.
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">–ê—Ä—Ö–∏–º–∞–≥</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–≤—è–∑–∏</strong><br>
            –ü–æ –º–µ—Ä–µ —Ç–æ–≥–æ –∫–∞–∫ –º–∞–≥ –≤—Å—ë –±–æ–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞–≥–∏—é, –µ–≥–æ —Ç–µ–ª–æ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø—Ä–∏–≤—ã–∫–∞–µ—Ç –∫ —Ç–µ—á–µ–Ω–∏—é –º–∞–≥–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–∏. –ö–∞–∂–¥–æ–µ –æ—á–∫–æ, –≤–ª–æ–∂–µ–Ω–Ω–æ–µ –≤ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å <strong>–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–≤—è–∑–∏</strong>, –ø–æ–≤—ã—à–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –º–∞–≥–∞ –Ω–∞ 2. –ö–æ–≥–¥–∞ —ç—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 10 —É—Ä–æ–≤–Ω—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –º–∞–≥–∞ —Ä–∞–≤–Ω–æ 25. –≠—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–æ—á–∏–º –Ω–∞–≤—ã–∫–∞–º.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –¥–≤–∏–º–µ—Ä–∏—Ç—É (–í–æ–ª—è)</strong><br>
            –ú–∞–≥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫ –¥–≤–∏–º–µ—Ä–∏—Ç—É</strong> —Å–æ –°–õ 16 –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –Ω–∞ –Ω–µ–≥–æ –æ–±—ã—á–Ω–æ –º–æ–∂–µ—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥–≤–∏–º–µ—Ä–∏—Ç. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–∞–≥ —Å–ø–æ—Å–æ–±–µ–Ω –ø—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—É –¥–≤–∏–º–µ—Ä–∏—Ç–∞: —É –Ω–µ–≥–æ –∫—Ä—É–∂–∏—Ç—Å—è –≥–æ–ª–æ–≤–∞ –∏ –æ–Ω –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª–æ–≤–∏–Ω—É –≠–Ω–µ—Ä–≥–∏–∏ –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–æ—Ç–≤–æ—Ä—è—Ç—å –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–£—Å–∏–ª–µ–Ω–∏–µ –º–∞–≥–∏–∏ (–í–æ–ª—è)</strong><br>
            –ú–∞–≥ –º–æ–∂–µ—Ç –æ–±—Ä–µ—Å—Ç–∏ –æ–≥—Ä–æ–º–Ω–æ–µ –º–æ–≥—É—â–µ—Å—Ç–≤–æ, –ø—Ä–æ–≤–æ–¥—è –º–∞–≥–∏—á–µ—Å–∫—É—é —ç–Ω–µ—Ä–≥–∏—é —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ —Ñ–æ–∫—É—Å–∏—Ä—É—é—â–∏–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã. –ú–∞–≥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–£—Å–∏–ª–µ–Ω–∏—è –º–∞–≥–∏–∏</strong> —Å–æ –°–õ 16 –ø–µ—Ä–µ–¥ —Å–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ–º –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è –∏–ª–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ–º —Ä–∏—Ç—É–∞–ª–∞. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–∞–≥ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Å—Ç–∏ –º–∞–≥–∏—á–µ—Å–∫—É—é —ç–Ω–µ—Ä–≥–∏—é —á–µ—Ä–µ–∑ –ª—é–±—ã–µ 2 —Ñ–æ–∫—É—Å–∏—Ä—É—é—â–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–∞ –ø–æ —Å–≤–æ–µ–º—É –≤—ã–±–æ—Ä—É, —Å–Ω–∏–∂–∞—è –∑–∞—Ç—Ä–∞—Ç—ã –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏ –≤–¥–≤–æ–µ.
        </td>
    </tr>
</table>
</div>
'
         )) AS raw_data_ru(num, title, description)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 4, 'Mage',
'
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>Vigor:</strong> 5<br><br>
            <strong>Magical Perks:</strong>
            <ul>
                <li>5 Novice Spells</li>
                <li>1 Novice Ritual</li>
                <li>1 Low Danger Hex</li>
            </ul>
        </td>
        <td>
            <strong>Skills</strong>
            <ul>
                <li>[EMP] - Grooming &amp; Style</li>
                <li>[EMP] - Human Perception</li>
                <li>[EMP] - Seduction</li>
                <li>[INT] - Education</li>
                <li>[INT] - Social Etiquette</li>
                <li>[REF] - Staff/Spear</li>
                <li>[WILL] - Hex Weaving</li>
                <li>[WILL] - Resist Magic</li>
                <li>[WILL] - Ritual Crafting</li>
                <li>[WILL] - Spell Casting</li>
            </ul>
        </td>
        <td>
            <strong>Gear</strong><br>
            <strong class="section-title">(Pick 5)</strong>
            <ul>
                <li>100 crowns of components</li>
                <li>Belt pouch</li>
                <li>Dagger</li>
                <li>Garter sheath</li>
                <li>Hand mirror</li>
                <li>Hourglass</li>
                <li>Journal</li>
                <li>Makeup kit</li>
                <li>Staff</li>
                <li>Writing kit</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Defining Skill</h3>
<table class="main_skill">
    <tr>
        <td class="header">Magical Training (INT)</td>
    </tr>
    <tr>
        <td class="opt_content">
            To qualify as a Mage, a magically adept person must pass through the halls of one of the world‚Äôs magical academies and learn the fundamentals of the magical arts. A Mage can roll <strong>Magical Training</strong> whenever they encounter a magical phenomenon, an unknown spell, or a question of magical theory. The DC is set by the GM, and a success allows the Mage to recall everything there is to know about the phenomenon. <strong>Magical Training</strong> can also be rolled as a form of Awareness that detects magic that is in use, or specters.
        </td>
    </tr>
</table>
<h3>Professional Skills</h3>
<table class="skills_branch_1">
    <tr>
        <td class="header">The Politician</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Scheming (INT)</strong><br>
            A Mage can make a <strong>Scheming</strong> roll at a DC equal to a target‚Äôs INT√ó3. On success the Mage gets a +3 to Deceit, Seduction, Intimidation, or Persuasion against that target from their observations of how the target works. The bonus from this ability applies for a number of days equal to the Mage‚Äôs <strong>Scheming</strong> value.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Grape Vine (INT)</strong><br>
            A Mage can take 1 hour and make a <strong>Grape Vine</strong> roll against a target‚Äôs EMP√ó3. Success spreads rumors throughout a settlement or city, lowering the target‚Äôs reputation there by half your <strong>Grape Vine</strong> value for a number of days equal to your <strong>Grape Vine</strong> value.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Assets (INT)</strong><br>
            Once per game a Mage can make an <strong>Assets</strong> roll to remember an asset they ‚Äòacquired‚Äô some time ago. Take the total of your roll and distribute it between the 4 columns on the table in the sidebar to find out who you know. This asset will help you, but how much depends on their relationship with you.
              <br><table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">Settlement</th>
                    <th colspan="2">Profession</th>
                    <th colspan="2">Importance</th>
                    <th colspan="2">Relationship</th>
                </tr>
                <tr>
                    <th>Value</th> <th>Cost</th>
                    <th>Value</th> <th>Cost</th>
                    <th>Value</th> <th>Cost</th>
                    <th>Value</th> <th>Cost</th>
                </tr>
                <tr>
                    <td>Hamlet</td>     <td>3</td>
                    <td>Innkeep</td> <td>3</td>
                    <td>Low</td>      <td>2</td>
                    <td>Blackmailed</td>      <td>3</td>
                </tr>
                <tr>
                    <td>Town</td>  <td>4</td>
                    <td>Artisan</td> <td>5</td>
                    <td>Average</td>  <td>3</td>
                    <td>Indebted</td>  <td>5</td>
                </tr>
                <tr>
                    <td>City</td>       <td>5</td>
                    <td>Guard</td> <td>6</td>
                    <td>High</td>     <td>5</td>
                    <td>Friendly</td>     <td>6</td>
                </tr>
                <tr>
                    <td>Capital</td>  <td>10</td>
                    <td>Mage</td> <td>8</td>
                    <td></td>         <td></td>
                    <td>Romanced</td>  <td>8</td>
                </tr>
                <tr>
                    <td></td>         <td></td>
                    <td>Noble</td> <td>10</td>
                    <td></td>         <td></td>
                    <td>Enthralled</td> <td>10</td>
                </tr>
              </table>
            <br><br>
            Your relationship to an asset establishes how willing to help you they are.
            <ul>
                <li>Enthralled assets will help you with absolutely anything.</li>
                <li>Romanced assets will help you with almost anything as long as you reaffirm your romance.</li>
                <li>Friendly assets must be convinced to stick their necks out for you.</li>
                <li>Indebted assets will only do one thing for you.</li>
                <li>Blackmailed assets will do anything for you but there is a 50% chance that they will betray you.</li>
            </ul>
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">The Scientist</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Reverse Engineer (INT)</strong><br>
            By taking 1 hour to study an alchemical solution a Mage can roll <strong>Reverse Engineer</strong> at a DC equal to the Crafting DC for the alchemical item +3. Success allows them to reverse-engineer and write down the item‚Äôs formula. This formula is 3 points harder to craft, but reliably creates the desired item.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Distillation (CRA)</strong><br>
            A Mage can roll <strong>Distillation</strong> instead of Alchemy when creating an alchemical solution. Success at this roll creates a dose of that solution that has half again the effect that they would normally have, either in duration, damage, or resistance DC (your choice). Always round down when increasing.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Mutate (INT)</strong><br>
            A mage can spend all of their stamina and a full day experimenting on a subject to roll <strong>Mutate</strong> at a DC equal to (28 ‚àí (subject‚Äôs BODY + WILL)/2) to mutate the subject. Success grants the subject use of the Mutagen with the appropriate minor mutation. Failure throws the subject into Death State and inflicts the larger mutation.
            <br><br>
            An individual can only be mutated twice. Further mutations will replace existing ones.
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">The Arch Mage</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>In Touch</strong><br>
            As a Mage utilizes magic more and more, their body becomes more used to the flow. Every point a Mage has in <strong>In Touch</strong> grants +2 points to Vigor threshold. When this ability reaches level 10 your maximum Vigor threshold becomes 25. This skill can be trained, like other skills.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Immutable (WILL)</strong><br>
            A Mage can roll <strong>Immutable</strong> at DC:16 whenever they would normally be affected by dimetrium. Success means that the Mage mostly shrugs off the dimetrium. They are still somewhat dizzy and uncomfortable but retain half of their total Vigor threshold and can perform magic.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Expanded Magic (WILL)</strong><br>
            By channelling magic through various magical foci a Mage can wield incredible power. A Mage can roll <strong>Expanded Magic</strong> before attempting to cast a spell or ritual, at a DC of 16. On success the mage can channel the spell or ritual through any 2 of their foci they choose, reducing the Stamina cost twice.
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_en(num, title, description)
)
, ins_title AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS id
       , meta.entity, 'title', raw_data.lang, raw_data.title
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
, ins_description AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description') AS id
       , meta.entity, 'description', raw_data.lang, raw_data.description
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_profession_o' || to_char(raw_data.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS label,
       raw_data.num AS sort_order,
       jsonb_build_object(
           'title', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title')::text),
           'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description')::text)
       ) AS metadata
FROM raw_data
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;


-- <<< END sql/090_profession_04_mage.sql

-- >>> BEGIN sql/090_profession_05_man_at_arms.sql

\echo '090_profession_05_man_at_arms.sql'
-- –í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞: –í–æ–∏–Ω

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'answer_options' AS entity)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 5, '–í–æ–∏–Ω', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>–≠–Ω–µ—Ä–≥–∏—è:</strong> 0<br><br>
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:</strong><br>
            <strong class="section-title">–ù–µ—Ç</strong>
        </td>
        <td>
            <strong>–ë–æ–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏</strong><br>
            <strong class="section-title">(–í—ã–±–µ—Ä–∏—Ç–µ 5)</strong>
            <ul>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –ê—Ç–ª–µ—Ç–∏–∫–∞</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –í–ª–∞–¥–µ–Ω–∏–µ –¥—Ä–µ–≤–∫–æ–≤—ã–º –æ—Ä—É–∂–∏–µ–º</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –í–ª–∞–¥–µ–Ω–∏–µ –ª—ë–≥–∫–∏–º–∏ –∫–ª–∏–Ω–∫–∞–º–∏</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –í–ª–∞–¥–µ–Ω–∏–µ –º–µ—á–æ–º</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –°—Ç—Ä–µ–ª—å–±–∞ –∏–∑ –∞—Ä–±–∞–ª–µ—Ç–∞</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –°—Ç—Ä–µ–ª—å–±–∞ –∏–∑ –ª—É–∫–∞</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –¢–∞–∫—Ç–∏–∫–∞</li>
                <li>[–†–µ–∞–∫—Ü–∏—è] - –ë–ª–∏–∂–Ω–∏–π –±–æ–π</li>
                <li>[–†–µ–∞–∫—Ü–∏—è] - –ë–æ—Ä—å–±–∞</li>
                <li>[–†–µ–∞–∫—Ü–∏—è] - –í–µ—Ä—Ö–æ–≤–∞—è –µ–∑–¥–∞</li>
                <li>–õ—é–±–æ–π –¥—Ä—É–≥–æ–π –Ω–∞–≤—ã–∫, –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–π –≤–∞—à–∏–º –ì–ú</li>
            </ul><br>
            <strong>–û–±—ã—á–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</strong>
            <ul>
                <li>[–í–æ–ª—è] - –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ</li>
                <li>[–í–æ–ª—è] - –•—Ä–∞–±—Ä–æ—Å—Ç—å</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –í—ã–∂–∏–≤–∞–Ω–∏–µ –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ</li>
                <li>[–†–µ–∞–∫—Ü–∏—è] - –£–∫–ª–æ–Ω–µ–Ω–∏–µ / –ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç—å</li>
                <li>[–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ] - –°–∏–ª–∞</li>
            </ul>
        </td>
        <td>
            <strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong><br>
            <strong class="section-title">(–≤—ã–±–µ—Ä–∏—Ç–µ 5)</strong>
            <ul>
                <li>–ö–æ—Ä–¥</li>
                <li>–ö–æ–ø—å—ë</li>
                <li>–ë–æ–µ–≤–æ–π —Ç–æ–ø–æ—Ä</li>
                <li>–ú–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–æ–∂–∏ √ó5</li>
                <li>–ù–∞–ø–ª–µ—á–Ω–∞—è —Å—É–º–∫–∞</li>
                <li>–ö–æ–ª—å—á—É–∂–Ω—ã–π –∫–∞–ø—é—à–æ–Ω</li>
                <li>–ë—Ä–∏–≥–∞–Ω—Ç–∏–Ω–∞</li>
                <li>–£—Å–∏–ª–µ–Ω–Ω—ã–µ —à—Ç–∞–Ω—ã</li>
                <li>–ê—Ä–±–∞–ª–µ—Ç –∏ –∞—Ä–±–∞–ª–µ—Ç–Ω—ã–µ –±–æ–ª—Ç—ã √ó20</li>
                <li>–°—Ç–∞–ª—å–Ω–æ–π –±–∞–∫–ª–µ—Ä</li>
            </ul>
        </td>
    </tr>
</table>

<h3>–û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–≤—ã–∫</h3>
<table class="main_skill">
    <tr>
        <td class="header">–ö—Ä–µ–ø—á–µ —Å—Ç–∞–ª–∏ (–¢–µ–ª)</td>
    </tr>
    <tr>
        <td class="opt_content">
            –ù–∞—Å—Ç–æ—è—â–∏–µ –≤–æ–∏–Ω—ã ‚Äî –±—É–¥—å —Ç–æ —Ç–µ–º–µ—Ä—Å–∫–∏–µ ¬´–°–∏–Ω–∏–µ –ø–æ–ª–æ—Å–∫–∏¬ª –∏–ª–∏ –Ω–∏–ª—å—Ñ–≥–∞–∞—Ä–¥—Ü—ã –∏–∑ –±—Ä–∏–≥–∞–¥—ã ¬´–ò–º–ø–µ—Ä–∞¬ª ‚Äî –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–¥–∞—é—Ç—Å—è. –ö–æ–≥–¥–∞ –ü–ó –≤–æ–∏–Ω–∞ –æ–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–æ 0 –∏–ª–∏ –Ω–∏–∂–µ, –æ–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞–≤—ã–∫–∞ <strong>–ö—Ä–µ–ø—á–µ —Å—Ç–∞–ª–∏</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –ü–ó —Ö 2, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å—Ä–∞–∂–∞—Ç—å—Å—è. –ü—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ –≤–æ–∏–Ω –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –æ–Ω –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å—Ä–∞–∂–µ–Ω–∏–µ, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –µ–≥–æ –ü–ó –±—ã–ª–∏ –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞ —Ä–∞–Ω–µ–Ω–∏—è. –ü–æ–ª—É—á–∏–≤ —É—Ä–æ–Ω, –æ–Ω –≤–Ω–æ–≤—å –¥–æ–ª–∂–µ–Ω —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ –°–õ, –∑–∞–≤–∏—Å—è—â–µ–π –æ—Ç –µ–≥–æ –ü–ó.
        </td>
    </tr>
</table>

<h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</h3>

<!-- –í–ï–¢–ö–ê 1 ‚Äî –°—Ç—Ä–µ–ª–æ–∫ -->
<table class="skills_branch_1">
    <tr>
        <td class="header">–°—Ç—Ä–µ–ª–æ–∫</td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è (–õ–≤–∫)</strong><br>
            –°–æ–≤–µ—Ä—à–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—É—é –∞—Ç–∞–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∏–ª–∞ –±—ã —à—Ç—Ä–∞—Ñ –∑–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏—é, –≤–æ–∏–Ω –º–æ–∂–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å —à—Ç—Ä–∞—Ñ –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É <strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏</strong>. –û–Ω —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è</strong> —Å–æ –°–õ 16, —á—Ç–æ–±—ã –∞—Ç–∞–∫–æ–≤–∞—Ç—å —Ü–µ–ª—å –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –¥–æ 3 –¥–∏—Å—Ç–∞–Ω—Ü–∏–π —Å–≤–æ–µ–≥–æ –æ—Ä—É–∂–∏—è —Å–æ —à—Ç—Ä–∞—Ñ–æ–º -10. –≠—Ç–æ—Ç —à—Ç—Ä–∞—Ñ –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å, –ø—Ä–∏–º–µ–Ω–∏–≤ –¥–∞–Ω–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>–î–≤–æ–π–Ω–æ–π –≤—ã—Å—Ç—Ä–µ–ª (–õ–≤–∫)</strong><br>
            –°–æ–≤–µ—Ä—à–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—É—é –∞—Ç–∞–∫—É –∏–∑ –ª—É–∫–∞ –∏–ª–∏ –º–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–º –æ—Ä—É–∂–∏–µ–º, –≤–æ–∏–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–î–≤–æ–π–Ω–æ–π –≤—ã—Å—Ç—Ä–µ–ª</strong> –≤–º–µ—Å—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ—Ä—É–∂–∏—é –Ω–∞–≤—ã–∫–∞. –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –≤–æ–∏–Ω –≤—ã–ø—É—Å–∫–∞–µ—Ç –≤ —Ü–µ–ª—å –¥–≤–∞ —Å–Ω–∞—Ä—è–¥–∞, –ø–æ–≤—Ä–µ–∂–¥–∞—è –¥–≤–µ —Å–ª—É—á–∞–π–Ω—ã–µ —á–∞—Å—Ç–∏ —Ç–µ–ª–∞. –î–∞–∂–µ –µ—Å–ª–∏ –∞—Ç–∞–∫–∞ –±—ã–ª–∞ –ø—Ä–∏—Ü–µ–ª—å–Ω–æ–π, –≤—Ç–æ—Ä–æ–π —Å–Ω–∞—Ä—è–¥ –ø–æ–ø–∞–¥—ë—Ç –≤ —Å–ª—É—á–∞–π–Ω—É—é —á–∞—Å—Ç—å —Ç–µ–ª–∞.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>–¢–æ—á–Ω—ã–π –ø—Ä–∏—Ü–µ–ª (–õ–≤–∫)</strong><br>
            –ï—Å–ª–∏ –≤–æ–∏–Ω —Å–æ–≤–µ—Ä—à–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –∞—Ç–∞–∫—É –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—ã–º –æ—Ä—É–∂–∏–µ–º, –æ–Ω –º–æ–∂–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–¢–æ—á–Ω–æ–≥–æ –ø—Ä–∏—Ü–µ–ª–∞</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –õ–≤–∫ —Ö 3 —Ü–µ–ª–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –≤–æ–∏–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–¢–æ—á–Ω—ã–π –ø—Ä–∏—Ü–µ–ª</strong> –∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º—É –±—Ä–æ—Å–∫—É. –≠—Ç–∏ –æ—á–∫–∏ –≤–ª–∏—è—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–Ω–µ–Ω–∏—è.
       </td>
    </tr>
</table>

<!-- –í–ï–¢–ö–ê 2 ‚Äî –û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –≥–æ–ª–æ–≤–∞–º–∏ -->
<table class="skills_branch_2">
    <tr>
        <td class="header">–û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –≥–æ–ª–æ–≤–∞–º–∏</td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>–ò—â–µ–π–∫–∞ (–ò–Ω—Ç)</strong><br>
            –ü—Ä–∏ –≤—ã—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ —Ü–µ–ª–∏ –≤–æ–∏–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ <strong>–ò—â–µ–π–∫–∏</strong> –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –í—ã–∂–∏–≤–∞–Ω–∏—è –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Å–ª–µ–¥ –∏–ª–∏ –ø—Ä–æ–π—Ç–∏ –ø–æ –Ω–µ–º—É. –ï—Å–ª–∏ –≤–æ–∏–Ω —Ç–µ—Ä—è–µ—Ç —Å–ª–µ–¥ –≤–æ –≤—Ä–µ–º—è –≤—ã—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –æ–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ò—â–µ–π–∫–∏</strong> —Å–æ –°–õ, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–π –≤–µ–¥—É—â–∏–º, —á—Ç–æ–±—ã –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–Ω–æ–≤—å –Ω–∞–π—Ç–∏ —Å–ª–µ–¥.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>–õ–æ–≤—É—à–∫–∞ –≤–æ–∏–Ω–∞ (–†–µ–º)</strong><br>
            –í–æ–∏–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–õ–æ–≤—É—à–∫–∞ –≤–æ–∏–Ω–∞</strong>, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∞–º–æ–¥–µ–ª—å–Ω—É—é –ª–æ–≤—É—à–∫—É –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –∑–æ–Ω–µ. –í–∏–¥ –ª–æ–≤—É—à–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–æ —Ç–∞–±–ª–∏—Ü–µ ¬´–õ–æ–≤—É—à–∫–∏ –≤–æ–∏–Ω–∞¬ª. –í–æ–∏–Ω –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ª–æ–≤—É—à–∫—É —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –≤–∏–¥–∞ –∑–∞ —Ä–∞–∑. –£ –∫–∞–∂–¥–æ–π –ª–æ–≤—É—à–∫–∏ –µ—Å—Ç—å —Ä–∞—Å—Ç—è–∂–∫–∞ —Ä–∞–¥–∏—É—Å–æ–º 2 –º–µ—Ç—Ä–∞, –¥–ª—è –µ—ë –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –í–Ω–∏–º–∞–Ω–∏—è —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ <strong>–õ–æ–≤—É—à–∫–∏ –≤–æ–∏–Ω–∞</strong>.
            <br><br>
            <table class="table-small" border="1" cellspacing="0" cellpadding="4">
                <tr><th>–í–∏–¥ –ª–æ–≤—É—à–∫–∏</th><th>–°–õ</th></tr>
                <tr>
                    <td><b>–û–ø—É—Ç—ã–≤–∞—é—â–∞—è</b><br>
                        –ñ–µ—Ä—Ç–≤–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –°–õ, —á—Ç–æ–±—ã –≤—ã—Å–≤–æ–±–æ–¥–∏—Ç—å—Å—è –∏–∑ –∑–∞—Ö–≤–∞—Ç–∞.
                    </td>
                    <td>14</td>
                </tr>
                <tr>
                    <td><b>–û–±–µ–∑–æ—Ä—É–∂–∏–≤–∞—é—â–∞—è</b><br>
                        –≠—Ç–∞ –ª–æ–≤—É—à–∫–∞ –±—å—ë—Ç –≤ —Ä–∞–π–æ–Ω–µ –ø–ª–µ—á –∂–µ—Ä—Ç–≤—ã, –≤—ã–±–∏–≤–∞—è —É –Ω–µ—ë –∏–∑ —Ä—É–∫ –æ—Ä—É–∂–∏–µ.
                    </td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>–û—Å–ª–µ–ø–ª—è—é—â–∞—è</b><br>
                        –≠—Ç–∞ –ª–æ–≤—É—à–∫–∞ –±—Ä–æ—Å–∞–µ—Ç –ø–µ—Å–æ–∫/–≥—Ä—è–∑—å –≤ –≥–ª–∞–∑–∞ –∂–µ—Ä—Ç–≤—ã, –æ—Å–ª–µ–ø–ª—è—è –µ—ë.
                    </td>
                    <td>16</td>
                </tr>
                <tr>
                    <td><b>–ü–æ–¥—Å–µ–∫–∞—é—â–∞—è</b><br>
                        –≠—Ç–∞ –ª–æ–≤—É—à–∫–∞ –±—å—ë—Ç –Ω–µ–≤—ã—Å–æ–∫–æ –Ω–∞–¥ –∑–µ–º–ª—ë–π, —Å–±–∏–≤–∞—è –∂–µ—Ä—Ç–≤—É —Å –Ω–æ–≥.
                    </td>
                    <td>14</td>
                </tr>
                <tr>
                    <td><b>–ö—Ä–æ–≤–æ–ø—É—Å–∫–∞—é—â–∞—è</b><br>
                        –≠—Ç–∞ –ª–æ–≤—É—à–∫–∞ –∑–∞–±—Ä–∞—Å—ã–≤–∞–µ—Ç —à–∏–ø–∞–º–∏, –ø–æ—Å–ª–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –∂–µ—Ä—Ç–≤–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å—Ç–µ–∫–∞—Ç—å –∫—Ä–æ–≤—å—é.
                    </td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>–î–µ–∑–æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—é—â–∞—è</b><br>
                        –≠—Ç–∞ –ª–æ–≤—É—à–∫–∞ –±—å—ë—Ç –∂–µ—Ä—Ç–≤—É –ø–æ –≥–æ–ª–æ–≤–µ –∏–ª–∏ –≤ –∂–∏–≤–æ—Ç —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π —Å–∏–ª–æ–π, —á—Ç–æ–±—ã –¥–µ–∑–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –µ—ë.
                    </td>
                    <td>16</td>
                </tr>
            </table>
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>–¢–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ (–ò–Ω—Ç)</strong><br>
            –í–º–µ—Å—Ç–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤–æ–∏–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–¢–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</strong>, —á—Ç–æ–±—ã –æ—Ü–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤. –í–æ–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å +3 –∫ –∞—Ç–∞–∫–µ –∏ –∑–∞—â–∏—Ç–µ –Ω–∞ –æ–¥–∏–Ω —Ä–∞—É–Ω–¥ –ø—Ä–æ—Ç–∏–≤ –≤—Å–µ—Ö –≤—Ä–∞–≥–æ–≤ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 10 –º–µ—Ç—Ä–æ–≤, —á—å—è –õ–≤–∫—Ö–ó –º–µ–Ω—å—à–µ, —á–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏. –¢–∞–∫–∂–µ —ç—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ –≤—Ä–∞–≥–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç.
        </td>
    </tr>
</table>

<!-- –í–ï–¢–ö–ê 3 ‚Äî –ü–æ—Ç—Ä–æ—à–∏—Ç–µ–ª—å -->
<table class="skills_branch_3">
    <tr>
        <td class="header">–ü–æ—Ç—Ä–æ—à–∏—Ç–µ–ª—å</td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>–ù–µ–∏—Å—Ç–æ–≤—Å—Ç–≤–æ (–í–æ–ª—è)</strong><br>
            –í–æ–∏–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ù–µ–∏—Å—Ç–æ–≤—Å—Ç–≤–∞</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –µ–≥–æ –≠–º–ø—Ö–ó. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –≤–æ–∏–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤ –∫ —É–∂–∞—Å—É, –≤–ª–∏—è—é—â–∏–º –Ω–∞ —ç–º–æ—Ü–∏–∏ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è–º –∏ –°–ª–æ–≤–µ—Å–Ω–æ–π –¥—É—ç–ª–∏ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤, —Ä–∞–≤–Ω–æ–µ —É–¥–≤–æ–µ–Ω–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é <strong>–ù–µ–∏—Å—Ç–æ–≤—Å—Ç–≤–∞</strong>. –í —ç—Ç–æ –≤—Ä–µ–º—è —è—Ä–æ—Å—Ç—å –∑–∞—Å—Ç–∏–ª–∞–µ—Ç —Ä–∞–∑—É–º –≤–æ–∏–Ω–∞ –∏ –æ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–¥–∞—ë—Ç—Å—è –≤–æ –≤–ª–∞—Å—Ç—å –∏–Ω—Å—Ç–∏–Ω–∫—Ç–æ–≤.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>–î–≤—É—Ä—É—á–Ω–∏–∫ (–¢–µ–ª)</strong><br>
            –ü–æ—Ç—Ä–∞—Ç–∏–≤ 10 –æ—á–∫–æ–≤ –í—ã–Ω –∏ —Å–æ–≤–µ—Ä—à–∏–≤ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–î–≤—É—Ä—É—á–Ω–∏–∫</strong> —Å–æ —à—Ç—Ä–∞—Ñ–æ–º -3 –ø—Ä–æ—Ç–∏–≤ –∑–∞—â–∏—Ç—ã –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, –≤–æ–∏–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –æ–¥–Ω—É –∞—Ç–∞–∫—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–Ω–æ—Å–∏—Ç –¥–≤–æ–π–Ω–æ–π —É—Ä–æ–Ω –∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–±–∏–≤–∞—é—â–µ–π –±—Ä–æ–Ω—é. –ï—Å–ª–∏ –µ–≥–æ –æ—Ä—É–∂–∏–µ —É–∂–µ –ø—Ä–æ–±–∏–≤–∞—é—â–µ–µ –±—Ä–æ–Ω—é, –æ–Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É–ª—É—á—à–µ–Ω–Ω—ã–º –ø—Ä–æ–±–∏–≤–∞—é—â–∏–º –±—Ä–æ–Ω—é. –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ø—Ä–æ–±–∏–≤–∞—é—â–µ–µ –±—Ä–æ–Ω—é –æ—Ä—É–∂–∏–µ —Å —ç—Ç–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –Ω–∞–Ω–æ—Å–∏—Ç 3d6 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É—Ä–æ–Ω–∞.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞—Ä (–¢–µ–ª)</strong><br>
            –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑ –∑–∞ –∏–≥—Ä–æ–≤—É—é –ø–∞—Ä—Ç–∏—é, —Ä–∞–≤–Ω–æ–µ –¢–µ–ª –≤–æ–∏–Ω–∞, –æ–Ω –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å 10 –æ—á–∫–æ–≤ –í—ã–Ω, —á—Ç–æ–±—ã –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞—Ä</strong>, –∫–æ–≥–¥–∞ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ –Ω–∞–Ω–æ—Å–∏—Ç –µ–º—É –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–Ω–µ–Ω–∏–µ. –ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã—à–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—Ç–∞–∫–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, –≤–æ–∏–Ω –æ—Ç–º–µ–Ω—è–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–Ω–µ–Ω–∏–µ, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –∞—Ç–∞–∫–∞ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –Ω–µ –±—ã–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π.
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_ru(num, title, description)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 5, 'Man At Arms', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>Vigor:</strong> 0<br><br>
            <strong>Magical Perks:</strong><br>
            <strong class="section-title">None</strong>
        </td>
        <td>
            <strong>Combat Skills</strong><br>
            <strong class="section-title">(pick 5)</strong>
            <ul>
                <li>[DEX] - Archery</li>
                <li>[DEX] - Athletics</li>
                <li>[DEX] - Crossbow</li>
                <li>[DEX] - Small Blades</li>
                <li>[DEX] - Staff/Spear</li>
                <li>[DEX] - Swordsmanship</li>
                <li>[REF] - Riding</li>
                <li>[REF] - Brawling</li>
                <li>[REF] - Melee</li>
                <li>[INT] - Tactics</li>
                <li>Any other skill your GM approves</li>
            </ul><br>
            <strong>Common Skills</strong>
            <ul>
                <li>[BODY] - Physique</li>
                <li>[INT] - Wilderness Survival</li>
                <li>[REF] - Dodge/Escape</li>
                <li>[WILL] - Courage</li>
                <li>[WILL] - Intimidation</li>
            </ul>
        </td>
        <td>
            <strong>Gear</strong><br>
            <strong class="section-title">(pick 5)</strong>
            <ul>
                <li>Armored trousers</li>
                <li>Battle axe</li>
                <li>Brigandine</li>
                <li>Chain coif</li>
                <li>Crossbow &amp; bolts √ó20</li>
                <li>Kord</li>
                <li>Satchel</li>
                <li>Spear</li>
                <li>Steel buckler</li>
                <li>Throwing knives √ó5</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Defining Skill</h3>
<table class="main_skill">
    <tr>
        <td class="header">Tough As Nails (BODY)</td>
    </tr>
    <tr>
        <td class="opt_content">
            True Men At Arms like the Blue Stripes of Temeria and the Impera Brigade of Nilfgaard are hardened
            soldiers who never give in or surrender. When a Man At Arms falls to or below 0 Health, they can roll
            <strong>Tough As Nails</strong> at a DC equal to the number of negative Health times 2 to keep fighting.
            If they fail, they fall into death state as per usual. If they succeed they can keep fighting as if they
            were only at their Wound Threshold. Any damage forces them to make another roll against a DC based on
            their Health.
        </td>
    </tr>
</table>

<h3>Professional Skills</h3>

<!-- BRANCH 1 ‚Äî The Marksman -->
<table class="skills_branch_1">
    <tr>
        <td class="header">The Marksman</td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>Extreme Range (DEX)</strong><br>
            When making a ranged attack that would take range penalties, a Man At Arms can lower the penalty by up to
            half their <strong>Extreme Range</strong> value. They can also make an <strong>Extreme Range</strong> roll
            (DC:16) to attack targets within 3 times the range of their weapon at a ‚àí10, which can be modified by
            <strong>Extreme Range</strong>.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>Twin Shot (DEX)</strong><br>
            When making a ranged attack with a thrown weapon or a bow, a Man At Arms can roll
            <strong>Twin Shot</strong> in place of their normal weapon skill. If they hit, they strike with two
            projectiles and damage two randomly rolled parts of the body. Even if the attack is aimed, the second
            projectile will hit a random location.
            <br><br>
            <b>Blocking Twin Shot.</b><br>
            A <strong>Twin Shot</strong> can be dodged with one action, and can be blocked as one action by a shield.
            Parrying a <strong>Twin Shot</strong> has a ‚àí6 penalty rather than a ‚àí3.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>Pin Point Aim (DEX)</strong><br>
            A Man At Arms who scores a critical with their ranged weapon can immediately roll
            <strong>Pin Point Aim</strong> at a DC equal to the target‚Äôs DEX√ó3. If they succeed, they add their
            <strong>Pin Point Aim</strong> value to their critical roll. These points only affect the location value
            of the Critical Wound.
        </td>
    </tr>
</table>

<!-- BRANCH 2 ‚Äî The Bounty Hunter -->
<table class="skills_branch_2">
    <tr>
        <td class="header">The Bounty Hunter</td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>Bloodhound (INT)</strong><br>
            When tracking a target or trying to find a trail, a Man At Arms adds their
            <strong>Bloodhound</strong> value to <strong>Wilderness Survival</strong> rolls to find the trail or follow
            it. If the Man At Arms loses the trail while tracking with this ability, they can roll
            <strong>Bloodhound</strong> at a DC set by the GM to pick the trail back up immediately.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>Booby Trap (CRA)</strong><br>
            A Man At Arms can make a <strong>Booby Trap</strong> roll to set a makeshift trap in a specific area.
            See the Booby Trap table for traps that can be built. The Man At Arms can only build one type of trap at a
            time. Every trap has a 2m radius tripwire and requires an <strong>Awareness</strong> roll at a DC equal
            to your <strong>Booby Trap</strong> roll to spot.
            <br><br>
            <div style="display:inline-block;">
                <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                    <tr>
                        <th>Traps</th>
                        <th>DC</th>
                    </tr>
                    <tr>
                        <td><b>Snaring</b>: The trap has a DC the target must beat to free themselves from a Grapple.</td>
                        <td>14</td>
                    </tr>
                    <tr>
                        <td><b>Disarming</b>: The trap swings at shoulder height striking the target‚Äôs arm, knocking their weapon away.</td>
                        <td>18</td>
                    </tr>
                    <tr>
                        <td><b>Blinding</b>: The trap throws sand or dirt in the target‚Äôs eyes, blinding them.</td>
                        <td>16</td>
                    </tr>
                    <tr>
                        <td><b>Tripping</b>: The trap swings low and knocks the target‚Äôs legs out from under them, knocking them prone.</td>
                        <td>14</td>
                    </tr>
                    <tr>
                        <td><b>Bleeding</b>: The trap throws or swings spikes into the target, causing them to begin bleeding.</td>
                        <td>18</td>
                    </tr>
                    <tr>
                        <td><b>Stunning</b>: The trap clubs the target in the head or stomach with enough force to stun the target.</td>
                        <td>16</td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>Tactical Awareness (INT)</strong><br>
            Instead of moving, a Man At Arms can roll <strong>Tactical Awareness</strong> to gain insight into a whole
            group of opponents. The Man At Arms gains +3 to attack and defense rolls against every enemy within 10m
            whose DEX√ó3 is lower than that roll, for one round. This ability also tells the Man At Arms what each
            affected opponent is about to do.
        </td>
    </tr>
</table>

<!-- BRANCH 3 ‚Äî The Reaver -->
<table class="skills_branch_3">
    <tr>
        <td class="header">The Reaver</td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>Fury (WILL)</strong><br>
            A Man At Arms can roll <strong>Fury</strong> at a DC equal to their EMP√ó3. If they succeed, the Man At Arms
            becomes immune to fear, spells that change emotions, and Verbal Combat for a number of rounds equal to
            their <strong>Fury</strong> value times 2. During this time, rage clouds their thinking and instinct takes
            over.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>Zweihand (BODY)</strong><br>
            By spending 10 STA and rolling <strong>Zweihand</strong> minus 3 against an opponent‚Äôs defense, a Man At
            Arms can make one attack which does double damage and has armor piercing. If the weapon already has armor
            piercing, it gains improved armor piercing. A weapon with improved armor piercing gains 3d6 damage.
        </td>
    </tr>

    <tr>
        <td class="opt_content">
            <strong>Shrug It Off (BODY)</strong><br>
            A number of times per game session equal to their BODY value, a Man At Arms can spend 10 STA to immediately
            roll <strong>Shrug It Off</strong> when an enemy strikes a Critical Wound on them. If their roll beats the
            enemy‚Äôs attack roll, they can negate the Critical Wound, taking the damage as if the enemy hadn‚Äôt rolled a
            critical.
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_en(num, title, description)
)
, ins_title AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS id
       , meta.entity, 'title', raw_data.lang, raw_data.title
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
, ins_description AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description') AS id
       , meta.entity, 'description', raw_data.lang, raw_data.description
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_profession_o' || to_char(raw_data.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS label,
       raw_data.num AS sort_order,
       jsonb_build_object(
           'title', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title')::text),
           'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description')::text)
       ) AS metadata
FROM raw_data
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;


-- <<< END sql/090_profession_05_man_at_arms.sql

-- >>> BEGIN sql/090_profession_06_priest.sql

\echo '090_profession_06_priest.sql'
-- –í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞: –ñ—Ä–µ—Ü

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'answer_options' AS entity)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 6, '–ñ—Ä–µ—Ü', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>–≠–Ω–µ—Ä–≥–∏—è: </strong>2<br><br>
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏</strong>
            <ul>
                <li>2 –∏–Ω–≤–æ–∫–∞—Ü–∏–∏ –Ω–æ–≤–∏—á–∫–∞</li>
                <li>2 —Ä–∏—Ç—É–∞–ª–∞ –Ω–æ–≤–∏—á–∫–∞</li>
                <li>2 –ø–æ—Ä—á–∏ —Å –Ω–∏–∑–∫–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç—å—é</li>
            </ul>
        </td>
        <td>
            <strong>–ù–∞–≤—ã–∫–∏</strong>
            <ul>
                <li>[–í–æ–ª—è] - –ù–∞–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Ä—á–∏</li>
                <li>[–í–æ–ª—è] - –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–∏—Ç—É–∞–ª–æ–≤</li>
                <li>[–í–æ–ª—è] - –°–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π</li>
                <li>[–í–æ–ª—è] - –•—Ä–∞–±—Ä–æ—Å—Ç—å</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –í—ã–∂–∏–≤–∞–Ω–∏–µ –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –ü–µ—Ä–µ–¥–∞—á–∞ –∑–Ω–∞–Ω–∏–π</li>
                <li>[–†–µ–º–µ—Å–ª–æ] - –ü–µ—Ä–≤–∞—è –ø–æ–º–æ—â—å</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –õ–∏–¥–µ—Ä—Å—Ç–≤–æ</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ª—é–¥–µ–π</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –•–∞—Ä–∏–∑–º–∞</li>
            </ul>
        </td>
        <td>
            <strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong><br>
            <strong class="section-title">(–≤—ã–±–µ—Ä–∏—Ç–µ 5)</strong>
            <ul>
                <li>–°–≤—è—â–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª</li>
                <li>–û–±–µ–∑–∑–∞—Ä–∞–∂–∏–≤–∞—é—â–∞—è –∂–∏–¥–∫–æ—Å—Ç—å √ó5</li>
                <li>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–ª—Ö–∏–º–∏–∫–∞</li>
                <li>–•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</li>
                <li>–ü–µ—Å–æ—á–Ω—ã–µ —á–∞—Å—ã (—á–∞—Å)</li>
                <li>–ö–∏–Ω–∂–∞–ª</li>
                <li>–ü–æ—Å–æ—Ö</li>
                <li>–ö—Ä–æ–≤–æ—Å–≤—ë—Ä—Ç—ã–≤–∞—é—â–∏–π –ø–æ—Ä–æ—à–æ–∫ √ó5</li>
                <li>–û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–∏–µ —Ç—Ä–∞–≤—ã √ó5</li>
                <li>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 100 –∫—Ä–æ–Ω</li>
            </ul>
        </td>
    </tr>
</table>

<h3>–û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–≤—ã–∫</h3>
<table class="main_skill">
    <tr>
        <td class="header">–ü–æ—Å–≤—è—â—ë–Ω–Ω—ã–π (–≠–º–ø)</td>
    </tr>
    <tr>
        <td class="opt_content">
            –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Ü–µ—Ä–∫–≤–µ–π –º–∏—Ä–∞ —Ä–∞–¥—ã –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è–º. –°–ª—É–∂–∏—Ç–µ–ª–∏ —Ö—Ä–∞–º–æ–≤ –ø–æ–º–æ–≥–∞—é—Ç –º–µ—Å—Ç–Ω—ã–º –∂–∏—Ç–µ–ª—è–º –∏ —Å —Ä–∞–¥–æ—Å—Ç—å—é –ø—Ä–∏–Ω–∏–º–∞—é—Ç –Ω–æ–≤–æ–æ–±—Ä–∞—â—ë–Ω–Ω—ã—Ö –≤ —Å–≤–æ—é –≤–µ—Ä—É. –ñ—Ä–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞–≤—ã–∫–∞ <strong>–ü–æ—Å–≤—è—â—ë–Ω–Ω—ã–π</strong> (–°–õ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ–¥—É—â–∏–π) –≤ —Ö—Ä–∞–º–µ —Å–≤–æ–µ–π —Ä–µ–ª–∏–≥–∏–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫—Ä–æ–≤, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ—á–∏–µ —É—Å–ª—É–≥–∏ –Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –≤–µ–¥—É—â–µ–≥–æ. –ù–∞–≤—ã–∫ <strong>–ü–æ—Å–≤—è—â—ë–Ω–Ω—ã–π</strong> —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ —Å –µ–¥–∏–Ω–æ–≤–µ—Ä—Ü–∞–º–∏, –Ω–æ –ø–æ–ª—É—á–∏—Ç–µ –≤—ã –∫—É–¥–∞ –º–µ–Ω—å—à–µ, —á–µ–º –≤ —Ü–µ—Ä–∫–≤–∏. <strong>–ü–æ—Å–≤—è—â—ë–Ω–Ω—ã–π</strong> –Ω–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ —Å —Ç–µ–º–∏, –∫—Ç–æ –∏—Å–ø–æ–≤–µ–¥—É–µ—Ç –¥—Ä—É–≥—É—é –≤–µ—Ä—É.
        </td>
    </tr>
</table>

<h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</h3>

<table class="skills_branch_1">
    <tr>
        <td class="header">–ü—Ä–æ–ø–æ–≤–µ–¥–Ω–∏–∫</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏–ª–∞</strong><br>
            –£–∫—Ä–µ–ø–ª—è—è —Å–≤—è–∑—å —Å –±–æ–∂–µ—Å—Ç–≤–æ–º, –∂—Ä–µ—Ü –º–æ–∂–µ—Ç –ø–æ–≤—ã—Å–∏—Ç—å —Å–≤–æ—ë –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å <strong>–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–∏–ª—ã</strong>. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –∂—Ä–µ—Ü–∞ –Ω–∞ 10 —É—Ä–æ–≤–Ω–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ 12. –≠—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–æ—á–∏–º –Ω–∞–≤—ã–∫–∞–º –∏ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å <strong>–ï–¥–∏–Ω–µ–Ω–∏–µ–º —Å –ø—Ä–∏—Ä–æ–¥–æ–π</strong>. –ó–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –æ–±—â–µ–µ
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç (–≠–º–ø)</strong><br>
            –î–ª—è –∫—Ä–µ—Å—Ç—å—è–Ω –∏ –ø—Ä–æ—Å—Ç–æ–≥–æ –ª—é–¥–∞ –∂—Ä–µ—Ü ‚Äî –ø—Ä–æ–≤–æ–¥–Ω–∏–∫ –≤–æ–ª–∏ –±–æ–≥–æ–≤. –ñ—Ä–µ—Ü –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ <strong>–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–∞</strong> –∫ —Å–≤–æ–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∞–º –õ–∏–¥–µ—Ä—Å—Ç–≤–∞, –µ—Å–ª–∏ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–±–ª–∞—Å—Ç–∏, –≥–¥–µ –∏—Å–ø–æ–≤–µ–¥—É—é—Ç —Ç—É –∂–µ —Ä–µ–ª–∏–≥–∏—é. –ï—Å–ª–∏ –∂—Ä–µ—Ü –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Ç–∞–∫–æ–π –æ–±–ª–∞—Å—Ç–∏, —Ç–æ –æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–æ–≤–∏–Ω—É –∑–Ω–∞—á–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü—Ä–µ–¥–≤–∏–¥–µ–Ω–∏–µ (–í–æ–ª—è)</strong><br>
            –ü–æ —Ä–µ—à–µ–Ω–∏—é –≤–µ–¥—É—â–µ–≥–æ –∂—Ä–µ—Ü –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–Ω–∏–µ –±—É–¥—É—â–µ–≥–æ, –Ω–∞ 3 —Ä–∞—É–Ω–¥–∞ –≤–ø–∞–≤ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ç–∞—Ç–æ–Ω–∏–∏. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∂—Ä–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ü—Ä–µ–¥–≤–∏–¥–µ–Ω–∏—è</strong> —Å–æ –°–õ, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–π –≤–µ–¥—É—â–∏–º, —á—Ç–æ–±—ã —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –≤–∏–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å–º–µ—Å—å —Å–∏–º–≤–æ–ª–æ–≤ –∏ –º–µ—Ç–∞—Ñ–æ—Ä.
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">–î—Ä—É–∏–¥</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ï–¥–∏–Ω–µ–Ω–∏–µ —Å –ø—Ä–∏—Ä–æ–¥–æ–π</strong><br>
            –£–∫—Ä–µ–ø–ª—è—è —Å–≤—è–∑—å —Å –ø—Ä–∏—Ä–æ–¥–æ–π, –∂—Ä–µ—Ü –º–æ–∂–µ—Ç –ø–æ–≤—ã—Å–∏—Ç—å —Å–≤–æ—ë –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å <strong>–ï–¥–∏–Ω–µ–Ω–∏—è —Å –ø—Ä–∏—Ä–æ–¥–æ–π</strong>. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∑–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –∂—Ä–µ—Ü–∞ –Ω–∞ 10 —É—Ä–æ–≤–Ω–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ 12. –≠—Ç–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–æ—á–∏–º –Ω–∞–≤—ã–∫–∞–º –∏ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å <strong>–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–∏–ª–æ–π</strong>. –ó–Ω–∞—á–µ–Ω–∏–µ –≠–Ω–µ—Ä–≥–∏–∏ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –æ–±—â–µ–µ.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ó–Ω–∞–∫–∏ –ø—Ä–∏—Ä–æ–¥—ã (–ò–Ω—Ç)</strong><br>
            –ù–∞—Ö–æ–¥—è—Å—å —Å—Ä–µ–¥–∏ –ø—Ä–∏—Ä–æ–¥—ã, –¥—Ä—É–∏–¥ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ó–Ω–∞–∫–∏ –ø—Ä–∏—Ä–æ–¥—ã</strong> —Å–æ –°–õ, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–π –≤–µ–¥—É—â–∏–º. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –¥—Ä—É–∏–¥ –ø–æ –∑–Ω–∞–∫–∞–º —É–∑–Ω–∞—ë—Ç, –∫—Ç–æ –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ –±—ã–ª –∏ —á—Ç–æ –¥–µ–ª–∞–ª. –≠—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°–æ—é–∑–Ω–∏–∫ –ø—Ä–∏—Ä–æ–¥—ã (–í–æ–ª—è)</strong><br>
            –î—Ä—É–∏–¥ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å <strong>–°–æ—é–∑–Ω–∏–∫ –ø—Ä–∏—Ä–æ–¥—ã</strong> –∫ –ª—é–±—ã–º –ø—Ä–æ–≤–µ—Ä–∫–∞–º –í—ã–∂–∏–≤–∞–Ω–∏—è –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏. –î—Ä—É–∏–¥ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç —Å–¥—Ä—É–∂–∏—Ç—å—Å—è —Å –∂–∏–≤–æ—Ç–Ω—ã–º, –ø–æ—Ç—Ä–∞—Ç–∏–≤ –ø–æ–ª–Ω—ã–π —Ä–∞—É–Ω–¥ –∏ —Å–æ–≤–µ—Ä—à–∏–≤ –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–°–æ—é–∑–Ω–∏–∫–∞ –ø—Ä–∏—Ä–æ–¥—ã</strong>. –ó–≤–µ—Ä—å –∏–ª–∏ –∏–Ω–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–æ—é–∑–Ω–∏–∫–æ–º –¥—Ä—É–∏–¥–∞ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–°–æ—é–∑–Ω–∏–∫ –ø—Ä–∏—Ä–æ–¥—ã</strong>. –î–∞–Ω–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ —á—É–¥–æ–≤–∏—â.
            <br><table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>–ü—Ä–∏–∫–∞–∑</th>
                    <th>–°–õ</th>
                </tr>
                <tr><td>–ù–∞–ø–∞–¥–∞–π</td><td>10</td></tr>
                <tr><td>–ó–∞—â–∏—â–∞–π —Ü–µ–ª—å</td><td>14</td></tr>
                <tr><td>–ü–æ–¥–≤–µ–∑–∏ –º–µ–Ω—è</td><td>15</td></tr>
                <tr><td>–ü—Ä–∏–Ω–µ—Å–∏ –º–Ω–µ –∫–æ–µ-—á—Ç–æ</td><td>17</td></tr>
                <tr><td>–ü—Ä–∏—Ç–∞—â–∏ –º–Ω–µ –∫–æ–µ-–∫–æ–≥–æ</td><td>15</td></tr>
                <tr><td>–°—Ç–æ–π</td><td>10</td></tr>
                <tr><td>–ö–∞—Ä–∞—É–ª—å</td><td>16</td></tr>
                <tr><td>–û—Ö—Ä–∞–Ω—è–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é</td><td>15</td></tr>
                <tr><td>–ò–¥–∏ –≤ –∑–Ω–∞–∫–æ–º–æ–µ –º–µ—Å—Ç–æ</td><td>15</td></tr>
                <tr><td>–ù–µ —Ç—Ä–æ–≥–∞–π</td><td>14</td></tr>
                <tr><td>–û—Ç—Å—Ç—É–ø–∞–π</td><td>10</td></tr>
            </table>
            <div style="display: inline-block; margin-left: 12px;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>–ñ–∏–≤–æ—Ç–Ω–æ–µ (–∑–≤–µ—Ä—å)</th>
                    <th>–°–õ</th>
                </tr>
                <tr><td>–ö–æ—à–∫–∞</td><td>12</td></tr>
                <tr><td>–°–æ–±–∞–∫–∞</td><td>10</td></tr>
                <tr><td>–ü—Ç–∏—Ü–∞</td><td>14</td></tr>
                <tr><td>–ó–º–µ—è</td><td>16</td></tr>
                <tr><td>–õ–æ—à–∞–¥—å</td><td>14</td></tr>
                <tr><td>–ë–æ–µ–≤–æ–π –∫–æ–Ω—å</td><td>16</td></tr>
                <tr><td>–í–æ–ª</td><td>17</td></tr>
                <tr><td>–ú—É–ª</td><td>14</td></tr>
                <tr><td>–í–æ–ª–∫</td><td>16</td></tr>
                <tr><td>–î–∏–∫–∞—è —Å–æ–±–∞–∫–∞</td><td>15</td></tr>
            </table>
            </div>
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">–§–∞–Ω–∞—Ç–∏–∫</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ö—Ä–æ–≤–∞–≤—ã–µ —Ä–∏—Ç—É–∞–ª—ã (–í–æ–ª—è)</strong><br>
            –ü—Ä–æ–≤–æ–¥—è —Ä–∏—Ç—É–∞–ª, –∂—Ä–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ö—Ä–æ–≤–∞–≤—ã–µ —Ä–∏—Ç—É–∞–ª—ã</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –°–õ —Ä–∏—Ç—É–∞–ª–∞. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –∂—Ä–µ—Ü –ø—Ä–æ–≤–æ–¥–∏—Ç —Ä–∏—Ç—É–∞–ª –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–∏—Ö —Å—É–±—Å—Ç–∞–Ω—Ü–∏–π, –∂–µ—Ä—Ç–≤—É—è –ø—Ä–∏ —ç—Ç–æ–º 5 –ü–ó –≤ –≤–∏–¥–µ –∫—Ä–æ–≤–∏ –∑–∞ –∫–∞–∂–¥—É—é –Ω–µ–¥–æ—Å—Ç–∞—é—â—É—é —Å—É–±—Å—Ç–∞–Ω—Ü–∏—é. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ —á—É–∂–∞—è –∫—Ä–æ–≤—å, –Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–ª–∏—Ç–∞—è –≤–æ –≤—Ä–µ–º—è –¥–∞–Ω–Ω–æ–≥–æ —Ä–∏—Ç—É–∞–ª–∞.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–†–≤–µ–Ω–∏–µ (–≠–º–ø)</strong><br>
            –ñ—Ä–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–†–≤–µ–Ω–∏—è</strong> –ø—Ä–æ—Ç–∏–≤ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ò–Ω—Ç—Ö–ó —Ü–µ–ª–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Å–ª–æ–≤–∞ –∂—Ä–µ—Ü–∞ –æ–±–æ–¥—Ä—è—é—Ç —Ü–µ–ª—å, —á—Ç–æ –¥–∞—ë—Ç –µ–π 1d6 –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ü–ó –∑–∞ –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç —Å–≤–µ—Ä—Ö –°–õ (–º–∞–∫—Å–∏–º—É–º 5). –≠—Ç–æ—Ç —ç—Ñ—Ñ–µ–∫—Ç –¥–ª–∏—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é <strong>–†–≤–µ–Ω–∏—è</strong> —Ö 2, –∏ –Ω–∞ –æ–¥–Ω—É —Ü–µ–ª—å –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –¥–µ–Ω—å.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°–ª–æ–≤–æ –±–æ–∂—å–µ (–≠–º–ø)</strong><br>
            –ñ—Ä–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–°–ª–æ–≤–æ –±–æ–∂—å–µ</strong>, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª–µ–π, —á—Ç–æ –µ–≥–æ —É—Å—Ç–∞–º–∏ –≥–æ–≤–æ—Ä–∏—Ç –±–æ–∂–µ—Å—Ç–≤–æ. –õ—é–±–æ–π, –∫—Ç–æ –ø—Ä–æ–≤–∞–ª–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —É–±–µ–∂–¥–µ–Ω–∏—é, –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å –∂—Ä–µ—Ü–∞ –º–µ—Å—Å–∏–µ–π –∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ –Ω–∏–º. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π –∂—Ä–µ—Ü–∞ —Ä–∞–≤–Ω–æ –∑–Ω–∞—á–µ–Ω–∏—é –µ–≥–æ <strong>–°–ª–æ–≤–∞ –±–æ–∂—å–µ–≥–æ</strong>. –ï—Å–ª–∏ —É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç –±–ª–æ–∫–æ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–∑–±–æ–π–Ω–∏–∫–æ–≤.
            <br><br>
            –ö–æ–≥–¥–∞ –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–∂ –æ—Ç–¥–∞—ë—Ç —Å–≤–æ–∏–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å—Ç—Ä–∞–Ω–Ω—ã–π –∏–ª–∏ –Ω–µ–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–ª—è –Ω–µ–≥–æ –ø—Ä–∏–∫–∞–∑, —Å–æ–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–°–ª–æ–≤–∞ –±–æ–∂—å–µ–≥–æ</strong> —Å–æ –°–õ, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–π –≤–µ–¥—É—â–∏–º. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–∞–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É 3 —Ä–∞–∑–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–∫–∏–Ω—É—Ç –≤–∞—à–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞. –ï—Å–ª–∏ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –≤—ã–ø–∞–¥–∞–µ—Ç 1, —Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞–ø–∞–¥—É—Ç –Ω–∞ –≤–∞—Å –∏–ª–∏ –æ–±—ä—è–≤—è—Ç –µ—Ä–µ—Ç–∏–∫–æ–º.
        </td>
    </tr>
</table>
</div>
'
         )) AS raw_data_ru(num, title, description)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 6, 'Priest', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>Vigor: </strong>2<br><br>
            <strong>Magical Perks</strong>
            <ul>
                <li>2 Novice Invocations</li>
                <li>2 Novice Rituals</li>
                <li>2 Low Danger Hexes</li>
            </ul>
        </td>
        <td>
            <strong>Skills</strong>
            <ul>
                <li>[CRA] - First Aid</li>
                <li>[EMP] - Charisma</li>
                <li>[EMP] - Human Perception</li>
                <li>[EMP] - Leadership</li>
                <li>[INT] - Teaching</li>
                <li>[INT] - Wilderness Survival</li>
                <li>[WILL] - Courage</li>
                <li>[WILL] - Hex Weaving</li>
                <li>[WILL] - Ritual Crafting</li>
                <li>[WILL] - Spell Casting</li>
            </ul>
        </td>
        <td>
            <strong>Gear</strong><br>
            <strong class="section-title">(Pick 5)</strong>
            <ul>
                <li>100 crowns of components</li>
                <li>Alchemy set</li>
                <li>Clotting powder √ó5</li>
                <li>Dagger</li>
                <li>Holy symbol</li>
                <li>Hourglass</li>
                <li>Numbing herbs √ó5</li>
                <li>Staff</li>
                <li>Sterilizing fluid √ó5</li>
                <li>Surgeon''s kit</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Defining Skill</h3>
<table class="main_skill">
    <tr>
        <td class="header">Initiate of the Gods (EMP)</td>
    </tr>
    <tr>
        <td class="opt_content">
            The churches of the world are often warm and inviting places, helping their communities and welcoming new converts. A Priest can roll <strong>Initiate of the Gods</strong> at a DC set by the GM at churches of the same faith to get free lodging, healing, and other services at the GM''s discretion. <strong>Initiate of the Gods</strong> also works when dealing with members of the same faith, though they will likely be able to offer less than a fully supplied church. Keep in mind that <strong>Initiate of the Gods</strong> doesn''t work with members of other faiths.
        </td>
    </tr>
</table>

<h3>Professional Skills</h3>

<table class="skills_branch_1">
    <tr>
        <td class="header">The Preacher</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Divine Power</strong><br>
            A Priest can become more in tune with their god, gaining 1 point of Vigor threshold per skill level in <strong>Divine Power</strong>. This brings your Vigor threshold to a total of 12 at level 10. <strong>Divine Power</strong> can be trained like other skills and stacks with <strong>Nature Attunement</strong>. The Vigor thresholds are not separate.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Divine Authority (EMP)</strong><br>
            Peasants and the common folk of the world see Priests as agents of the god''s will. A Priest can add their <strong>Divine Authority</strong> to their Leadership rolls if they are in an area where their religion is worshiped. Even when outside such areas of worship a Priest adds half this value, due to their presence.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Precognition (WILL)</strong><br>
            At the will of the GM, a Priest can be overcome by visions of the future, sending them into a catatonic state for 3 rounds. After this time the Priest can roll <strong>Precognition</strong> at a DC set by the GM to decipher the visions that they are stricken by. Such visions are composed of symbolism and metaphors.
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">The Druid</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Nature Attunement</strong><br>
            A Priest can become more in tune with nature, gaining 1 point of Vigor threshold per skill level in <strong>Nature Attunement</strong>. This brings your Vigor threshold to a total of 12 at level 10. <strong>Nature Attunement</strong> can be trained like other skills and stacks with <strong>Divine Power</strong>. The Vigor thresholds are not separate.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Read Nature (INT)</strong><br>
            When in a purely natural environment a druid can roll <strong>Read Nature</strong> at a DC set by the GM. On a success, the druid reads the signs around them to learn everything that passed through that area and what they did in the area. <strong>Read Nature</strong> renders a very localized picture and cannot track things.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Animal Compact (WILL)</strong><br>
            A Druid adds <strong>Animal Compact</strong> to any Wilderness Survival rolls they make to handle animals. A Druid can also make a compact with an animal. By taking a full round and rolling <strong>Animal Compact</strong>, they make one Beast or animal their ally for a number of hours equal to their <strong>Animal Compact</strong> value. Monsters are unaffected.
            <br>
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>Order</th>
                    <th>DC</th>
                </tr>
                <tr><td>Attack</td><td>10</td></tr>
                <tr><td>Defend a target</td><td>14</td></tr>
                <tr><td>Let me ride you</td><td>15</td></tr>
                <tr><td>Fetch an object</td><td>17</td></tr>
                <tr><td>Fetch a target</td><td>15</td></tr>
                <tr><td>Stop</td><td>10</td></tr>
                <tr><td>Keep lookout</td><td>16</td></tr>
                <tr><td>Guard an area</td><td>15</td></tr>
                <tr><td>Go to a known location</td><td>15</td></tr>
                <tr><td>Don''t touch</td><td>14</td></tr>
                <tr><td>Retreat</td><td>10</td></tr>
            </table>
            <div style="display: inline-block; margin-left: 12px;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>Animal/Beast</th>
                    <th>DC</th>
                </tr>
                <tr><td>Cat</td><td>12</td></tr>
                <tr><td>Dog</td><td>10</td></tr>
                <tr><td>Bird</td><td>14</td></tr>
                <tr><td>Serpent</td><td>16</td></tr>
                <tr><td>Horse</td><td>14</td></tr>
                <tr><td>War horse</td><td>16</td></tr>
                <tr><td>Ox</td><td>17</td></tr>
                <tr><td>Mule</td><td>14</td></tr>
                <tr><td>Wolf</td><td>16</td></tr>
                <tr><td>Wild dog</td><td>15</td></tr>
            </table>
            </div>
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">The Fanatic</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Blood Rituals (WILL)</strong><br>
            A Priest casting a ritual can make a <strong>Blood Ritual</strong> check against the casting DC of the ritual. If they succeed, they can cast the ritual without required alchemical substances by sacrificing 5 HP in blood per missing alchemical substance. This blood can come from others, but must be spilled at the time of the ritual.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Fervor (EMP)</strong><br>
            A Priest can roll <strong>Fervor</strong> against a target''s current INT√ó3. On success, the rallying power of the Priest''s words grants 1d6 temporary health for every point rolled over the DC (maximum 5). This lasts for as many rounds as their <strong>Fervor</strong> √ó2 and only works once per target per day.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Word of God (EMP)</strong><br>
            A Priest can roll <strong>Word of God</strong> to convince people that they are speaking directly for the gods. Anyone who fails a Resist Coercion roll sees the Priest as a messiah and follows along as an apostle. A Priest can have as many apostles as their <strong>Word of God</strong> value. In combat, use bandit stats for apostles with stat outs.
            <br><br>
            Any time you give a truly strange or uncharacteristic command to your apostles, you must make a <strong>Word of God</strong> roll at a DC set by the GM. You can fail 3 times before your apostles leave you. If your last failure is a fumble, your apostles will attack you or brand you as a heretic.
        </td>
    </tr>
</table>
</div>
'
         )) AS raw_data_en(num, title, description)
)
, ins_title AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS id
       , meta.entity, 'title', raw_data.lang, raw_data.title
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
, ins_description AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description') AS id
       , meta.entity, 'description', raw_data.lang, raw_data.description
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_profession_o' || to_char(raw_data.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS label,
       raw_data.num AS sort_order,
       jsonb_build_object(
           'title', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title')::text),
           'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description')::text)
       ) AS metadata
FROM raw_data
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;

-- <<< END sql/090_profession_06_priest.sql

-- >>> BEGIN sql/090_profession_07_criminal.sql

\echo '090_profession_07_criminal.sql'
-- –í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞: –ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'answer_options' AS entity)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 7, '–ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>–≠–Ω–µ—Ä–≥–∏—è:</strong> 0<br><br>
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:</strong><br>
            <strong class="section-title">–ù–µ—Ç</strong>
        </td>
        <td>
            <strong>–ù–∞–≤—ã–∫–∏</strong>
            <ul>
                <li>[–í–æ–ª—è] - –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –í–Ω–∏–º–∞–Ω–∏–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≥–æ—Ä–æ–¥–µ</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –ê—Ç–ª–µ—Ç–∏–∫–∞</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –õ–æ–≤–∫–æ—Å—Ç—å —Ä—É–∫</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å</li>
                <li>[–†–µ–∞–∫—Ü–∏—è] - –í–ª–∞–¥–µ–Ω–∏–µ –ª—ë–≥–∫–∏–º–∏ –∫–ª–∏–Ω–∫–∞–º–∏</li>
                <li>[–†–µ–º–µ—Å–ª–æ] - –í–∑–ª–æ–º –∑–∞–º–∫–æ–≤</li>
                <li>[–†–µ–º–µ—Å–ª–æ] - –ü–æ–¥–¥–µ–ª—ã–≤–∞–Ω–∏–µ</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –û–±–º–∞–Ω</li>
            </ul>
        </td>
        <td>
            <strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong><br>
            <strong class="section-title">(–≤—ã–±–µ—Ä–∏—Ç–µ 5)</strong>
            <ul>
                <li>–®—É–ª–µ—Ä—Å–∫–∏–µ –∫–æ—Å—Ç–∏</li>
                <li>–§–æ–Ω–∞—Ä—å ¬´–±—ã—á–∏–π –≥–ª–∞–∑¬ª</li>
                <li>–ü–æ—Ç–∞–π–Ω–æ–π –∫–∞—Ä–º–∞–Ω</li>
                <li>–í–æ—Ä–æ–≤—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</li>
                <li>–ù–∞—Ä—É—á–Ω—ã–µ –Ω–æ–∂–Ω—ã</li>
                <li>–°—Ç–∏–ª–µ—Ç</li>
                <li>–ö–∞—Å—Ç–µ—Ç</li>
                <li>–ú–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–æ–∂–∏ √ó5</li>
                <li>–•–ª–æ—Ä–æ—Ñ–æ—Ä–º</li>
                <li>–ù–∞–ø–ª–µ—á–Ω–∞—è —Å—É–º–∫–∞</li>
            </ul>
        </td>
    </tr>
</table>

<h3>–û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–≤—ã–∫</h3>
<table class="main_skill">
    <tr>
        <td class="header">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–∞—Ä–∞–Ω–æ–π—è (–ò–Ω—Ç)</td>
    </tr>
    <tr>
        <td class="opt_content">
            –í—Å–µ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∏, –±—É–¥—å —Ç–æ —É–±–∏–π—Ü—ã, –≤–æ—Ä—ã, —Ñ–∞–ª—å—à–∏–≤–æ–º–æ–Ω–µ—Ç—á–∏–∫–∏ –∏–ª–∏ –∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∏—Å—Ç—ã, –æ–±–ª–∞–¥–∞—é—Ç –æ–±–æ—Å—Ç—Ä—ë–Ω–Ω—ã–º —á—É—Ç—å—ë–º –Ω–∞ –æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–∞—Ä–∞–Ω–æ–π–µ–π, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä–æ–π –æ–Ω–∏ –∏–∑–±–µ–≥–∞—é—Ç –ø–æ–∏–º–∫–∏. –ö–æ–≥–¥–∞ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 10 –º–µ—Ç—Ä–æ–≤ –æ—Ç –ª–æ–≤—É—à–∫–∏ (–≤–∫–ª—é—á–∞—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≤—É—à–∫–∏, –ª–æ–≤—É—à–∫–∏ –≤–æ–∏–Ω–∞ –∏ –∑–∞—Å–∞–¥—ã), –æ–Ω –º–æ–∂–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–∞—Ä–∞–Ω–æ–π–∏</strong> –ª–∏–±–æ –ø—Ä–æ—Ç–∏–≤ –°–õ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ª–æ–≤—É—à–∫–∏, –ª–∏–±–æ –ø—Ä–æ—Ç–∏–≤ –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏ –∑–∞—Å–∞–¥—ã, –ª–∏–±–æ –ø—Ä–æ—Ç–∏–≤ –∑–∞–¥–∞–Ω–Ω–æ–π –≤–µ–¥—É—â–∏–º –°–õ. –î–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –Ω–µ –∑–∞–º–µ—Ç–∏—Ç –ª–æ–≤—É—à–∫–∏, —á—É—Ç—å—ë –≤—Å—ë —Ä–∞–≤–Ω–æ –µ–º—É –ø–æ–¥—Å–∫–∞–∂–µ—Ç, —á—Ç–æ —Ç—É—Ç —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫.
        </td>
    </tr>
</table>

<h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</h3>

<table class="skills_branch_1">
    <tr>
        <td class="header">–í–æ—Ä</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü—Ä–∏—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è (–ò–Ω—Ç)</strong><br>
            –ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å —á–∞—Å, —á—Ç–æ–±—ã –ø–æ–±—Ä–æ–¥–∏—Ç—å –ø–æ —É–ª–∏—Ü–∞–º –ø–æ—Å–µ–ª–µ–Ω–∏—è –∏ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ü—Ä–∏—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è</strong> —Å–æ –°–õ, —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ –ø–æ–ª—è—Ö. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã –ø–∞—Ç—Ä—É–ª–µ–π, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É–ª–∏—Ü –∏ —É–∫—Ä—ã—Ç–∏–π, —á—Ç–æ –¥–∞—ë—Ç –µ–º—É –±–æ–Ω—É—Å +2 –∫ –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏ –≤ —ç—Ç–æ–º —Ä–∞–π–æ–Ω–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é <strong>–ü—Ä–∏—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è</strong>.
            <br><br>
            <div style="display: inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr> <th>–ü–æ—Å–µ–ª–µ–Ω–∏–µ</th> <th>–°–õ</th> </tr>
                <tr> <td>–î–µ—Ä–µ–≤–Ω—è</td>   <td>16</td> </tr>
                <tr> <td>–ü–æ—Å—ë–ª–æ–∫</td>   <td>18</td> </tr>
                <tr> <td>–ì–æ—Ä–æ–¥</td>     <td>20</td> </tr>
                <tr> <td>–°—Ç–æ–ª–∏—Ü–∞</td>   <td>22</td> </tr>
            </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–∑–ª–æ–º (–ò–Ω—Ç)</strong><br>
            –ö–æ–≥–¥–∞ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ —É—Å–ø–µ—à–Ω–æ –≤—Å–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–º–æ–∫, –æ–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ü–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∑–ª–æ–º–∞</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –°–õ –í–∑–ª–æ–º–∞ –∑–∞–º–∫–æ–≤ (–¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–º–∫–∞), —á—Ç–æ–±—ã –∑–∞–ø–æ–º–Ω–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ —à—Ç–∏—Ñ—Ç–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –µ–º—É –æ—Ç–∫—Ä—ã—Ç—å —Ç–æ—Ç –∂–µ –∑–∞–º–æ–∫ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–≤—ã–∫–∞ –í–∑–ª–æ–º–∞ –∑–∞–º–∫–æ–≤. –ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –º–æ–∂–µ—Ç –∑–∞–ø–æ–º–Ω–∏—Ç—å —Å—Ç–æ–ª—å–∫–æ –∑–∞–º–∫–æ–≤, —Å–∫–æ–ª—å–∫–æ —É –Ω–µ–≥–æ –æ—á–∫–æ–≤ –ò–Ω—Ç. –í—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –Ω–æ–≤—ã–π –∑–∞–º–æ–∫, –∑–∞–±—ã–≤ —Å—Ç–∞—Ä—ã–π.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ó–∞–ª–µ—á—å –Ω–∞ –¥–Ω–æ (–ò–Ω—Ç)</strong><br>
            –û–¥–∏–Ω —Ä–∞–∑ –∑–∞ –∏–≥—Ä–æ–≤—É—é –ø–∞—Ä—Ç–∏—é –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ó–∞–ª–µ—á—å –Ω–∞ –¥–Ω–æ</strong>, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Ç–∞–π–Ω–æ–µ —É–±–µ–∂–∏—â–µ, –≥–¥–µ –æ–Ω –º–æ–∂–µ—Ç —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è –Ω–∞ –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ <strong>–ó–∞–ª–µ—á—å –Ω–∞ –¥–Ω–æ</strong> —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–µ–∂–¥—É —Ç—Ä–µ–º—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ –ø–æ–ª—è—Ö. –¢–∞–π–Ω–æ–µ —É–±–µ–∂–∏—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ–∫–∞ –µ–≥–æ –Ω–µ —É–Ω–∏—á—Ç–æ–∂–∞—Ç, –∏ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç –≤ –Ω–µ–≥–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è.
            <br><br>
            <div style="display: inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ</th>
                    <th colspan="2">–ú–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–Ω–µ—Å–∫–æ–ª—å–∫–æ)</th>
                    <th colspan="2">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ)</th>
                </tr>
                <tr>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                    <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                    <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                    <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                </tr>
                <tr>
                    <td>–ù–µ–¥–µ–ª—è –µ–∑–¥—ã</td>
                    <td>3</td>
                    <td>–ó–∞–º–∫–∏</td>
                    <td>1</td>
                    <td>–ï–¥–∞ –∏ –≤–æ–¥–∞</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>–î–µ–Ω—å –µ–∑–¥—ã</td>
                    <td>5</td>
                    <td>–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å</td>
                    <td>2</td>
                    <td>–•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>–î–µ–Ω—å –ø–µ—à–∫–æ–º</td>
                    <td>8</td>
                    <td>2 –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞-—Ä–∞–∑–±–æ–π–Ω–∏–∫–∞</td>
                    <td>5</td>
                    <td>–ö—É–∑–Ω–∏—Ü–∞</td>
                    <td>3</td>
                </tr>
                <tr>
                    <td>–í —Ç–æ–º –∂–µ —Ä–∞–π–æ–Ω–µ</td>
                    <td>10</td>
                    <td>5 –ª–æ–≤—É—à–µ–∫ (–Ω–∞ –≤—ã–±–æ—Ä –≤–µ–¥—É—â–µ–≥–æ)</td>
                    <td>3</td>
                    <td>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–ª—Ö–∏–º–∏–∫–∞</td>
                    <td>3</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">–ê—Ç–∞–º–∞–Ω</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–£—è–∑–≤–∏–º–æ—Å—Ç—å (–≠–º–ø)</strong><br>
            –ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –≤—Å—Ç—Ä–µ—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–£—è–∑–≤–∏–º–æ—Å—Ç–∏</strong> –ø—Ä–æ—Ç–∏–≤ –Ω–∞–≤—ã–∫–∞ –û–±–º–∞–Ω–∞ —Ä–∞–∑—É–º–Ω–æ–π —Ü–µ–ª–∏, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–∞–º—É—é –¥–æ—Ä–æ–≥—É—é –¥–ª—è —Ü–µ–ª–∏ –≤–µ—â—å –∏–ª–∏ –ª–∏—á–Ω–æ—Å—Ç—å. –≠—Ç–æ —Ç–∞–∫–∂–µ –¥–∞—ë—Ç –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫—É –±–æ–Ω—É—Å +1 –∫ –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—é –∑–∞ –∫–∞–∂–¥—ã–µ 2 –ø—É–Ω–∫—Ç–∞ —Å–≤—ã—à–µ –û–±–º–∞–Ω–∞ —Ü–µ–ª–∏. –≠—Ç–æ—Ç –±–æ–Ω—É—Å –¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç—å —Ü–µ–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–í–∑—è—Ç—å –Ω–∞ –∑–∞–º–µ—Ç–∫—É (–í–æ–ª—è)</strong><br>
            –ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–í–∑—è—Ç—å –Ω–∞ –∑–∞–º–µ—Ç–∫—É</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –≠–º–ø —Ö 3 —Ü–µ–ª–∏, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Ç–∫—É –Ω–∞ –µ—ë –¥–≤–µ—Ä–∏ –∏–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–¥–æ–±–Ω–æ–µ. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Ü–µ–ª—å –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –•–∞—Ä–∏–∑–º—ã, –£–±–µ–∂–¥–µ–Ω–∏—è –∏–ª–∏ –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ—Ç–æ—Ä–æ–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—à–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ <strong>–í–∑—è—Ç—å –Ω–∞ –∑–∞–º–µ—Ç–∫—É</strong> –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–º–æ—â—å –∏–ª–∏ —É—Å–ª—É–≥—É —É –∫–æ–≥–æ-–ª–∏–±–æ –≤ —Å–≤–æ—ë–º –ø–æ—Å–µ–ª–µ–Ω–∏–∏.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°–±–æ—Ä (–í–æ–ª—è)</strong><br>
            –û–¥–∏–Ω —Ä–∞–∑ –≤ –¥–µ–Ω—å, –ø–æ—Ç—Ä–∞—Ç–∏–≤ —á–∞—Å, –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–°–±–æ—Ä–∞</strong> —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –≤–µ–¥—É—â–∏–º –°–õ. –ó–∞ –∫–∞–∂–¥—ã–µ 2 –ø—É–Ω–∫—Ç–∞ —Å–≤—ã—à–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –°–õ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä–±–æ–≤–∞—Ç—å 1 —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é <strong>–°–±–æ—Ä–∞</strong>. –ï—Å–ª–∏ —É —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞ –º–µ–Ω—å—à–µ –ø–æ–ª–æ–≤–∏–Ω—ã –ü–ó, –æ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–≤–µ—Ä—à–∏—Ç—å –±—Ä–æ—Å–æ–∫ –¥–µ—Å—è—Ç–∏–≥—Ä–∞–Ω–Ω–æ–π –∫–æ—Å—Ç–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∏–∂–µ –∑–Ω–∞—á–µ–Ω–∏—è –í–æ–ª–∏ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∞; –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ —Ä–∞–∑–±–æ–π–Ω–∏–∫ —É–±–µ–≥–∞–µ—Ç.
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">–ê—Å—Å–∞—Å–∏–Ω</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü—Ä–∏—Ü–µ–ª–∏–≤–∞–Ω–∏–µ (–õ–≤–∫)</strong><br>
            –ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫, –Ω–µ —É—á–∞—Å—Ç–≤—É—é—â–∏–π –≤ –±–æ—é, –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å —Ä–∞—É–Ω–¥, —á—Ç–æ–±—ã –ø—Ä–∏—Ü–µ–ª–∏—Ç—å—Å—è, –∏ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ü—Ä–∏—Ü–µ–ª–∏–≤–∞–Ω–∏—è</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –†–µ–∞ —Ö 3 —Ü–µ–ª–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å –∫ —Å–ª–µ–¥—É—é—â–µ–π –∞—Ç–∞–∫–µ, —Ä–∞–≤–Ω—ã–π –ø–æ–ª–æ–≤–∏–Ω–µ –∑–Ω–∞—á–µ–Ω–∏—è <strong>–ü—Ä–∏—Ü–µ–ª–∏–≤–∞–Ω–∏—è</strong>. –ï—Å–ª–∏ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∞ –∑–∞–º–µ—Ç—è—Ç –ø–æ—Å–ª–µ –±—Ä–æ—Å–∫–∞, –Ω–æ –¥–æ –∞—Ç–∞–∫–∏, –±–æ–Ω—É—Å —Å–Ω–∏–∂–∞–µ—Ç—Å—è –≤ –¥–≤–∞ —Ä–∞–∑–∞.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü—Ä—è–º–æ –≤ –≥–ª–∞–∑ (–õ–≤–∫)</strong><br>
            –í–º–µ—Å—Ç–æ –∞—Ç–∞–∫–∏ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ü—Ä—è–º–æ –≤ –≥–ª–∞–∑</strong>, —á—Ç–æ–±—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Å–ª–µ–ø–∏—Ç—å —Ü–µ–ª—å. –î–ª—è —ç—Ç–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –Ω–∞—Ö–æ–¥–∏–ª—Å—è –Ω–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è; –∫ —É–¥–∞—Ä—É –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —à—Ç—Ä–∞—Ñ -3. –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ —Ü–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 2d6 —É—Ä–æ–Ω–∞ –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ –æ—Å–ª–µ–ø–ª—è–µ—Ç—Å—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é <strong>–ü—Ä—è–º–æ –≤ –≥–ª–∞–∑</strong>.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–£–¥–∞—Ä –∞—Å—Å–∞—Å–∏–Ω–∞ (–õ–≤–∫)</strong><br>
            –£—Å—Ç—Ä–∞–∏–≤–∞—è –∑–∞—Å–∞–¥—É, –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –≤—Å—Ç—Ä–µ—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–£–¥–∞—Ä –∞—Å—Å–∞—Å–∏–Ω–∞</strong> –ø—Ä–æ—Ç–∏–≤ –í–Ω–∏–º–∞–Ω–∏—è —Ü–µ–ª–∏, —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å—Å—è –ø–æ—Å–ª–µ –∞—Ç–∞–∫–∏. –≠—Ç—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏, –Ω–æ –∫ –Ω–µ–π –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —à—Ç—Ä–∞—Ñ—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Å–≤–µ—â—ë–Ω–Ω–æ—Å—Ç–∏ –∏ –¥—Ä—É–≥–∏—Ö —É—Å–ª–æ–≤–∏–π. –ï—Å–ª–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –∫–∞–∂–¥—ã–π –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø–æ –±—Ä–æ—Å–∫—É, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–º–µ—Ç–∏—Ç—å –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∞.
            <br><br>
            <div style="display: inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>–£—Å–ª–æ–≤–∏–µ</th>
                    <th>–ú–æ–¥.</th>
                </tr>
                <tr> <td>–î–∏—Å—Ç–∞–Ω—Ü–∏—è –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è</td> <td>-3</td> </tr>
                <tr> <td>–°–≤–µ—Ç–ª–æ–µ –º–µ—Å—Ç–æ</td> <td>-5</td> </tr>
                <tr> <td>–í —Ç–µ–º–Ω–æ—Ç–µ</td> <td>+5</td> </tr>
                <tr> <td>–ü—Ä–∏ —Å–ª–∞–±–æ–º —Å–≤–µ—Ç–µ</td> <td>+2</td> </tr>
                <tr> <td>–í —Ç–æ–ª–ø–µ</td> <td>+3</td> </tr>
                <tr> <td>–í —Ç–∏—Ö–æ–º –º–µ—Å—Ç–µ</td> <td>-1</td> </tr>
                <tr> <td>–î–∞–ª—å—à–µ 20 –º–µ—Ç—Ä–æ–≤ –æ—Ç —Ü–µ–ª–∏</td> <td>+3</td> </tr>
            </table>
            </div>
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_ru(num, title, description)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 7, 'Criminal', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>Vigor:</strong> 0<br><br>
            <strong>Magical Perks:</strong><br>
            <strong class="section-title">None</strong>
        </td>
        <td>
            <strong class="section-title">Skills</strong>
            <ul>
                <li>[CRA] - Forgery</li>
                <li>[CRA] - Pick Locks</li>
                <li>[DEX] - Athletics</li>
                <li>[DEX] - Sleight of Hand</li>
                <li>[DEX] - Stealth</li>
                <li>[EMP] - Deceit</li>
                <li>[INT] - Awareness</li>
                <li>[INT] - Streetwise</li>
                <li>[REF] - Small Blades</li>
                <li>[WILL] - Intimidate</li>
            </ul>
        </td>
        <td>
            <strong>Gear</strong><br>
            <strong class="section-title">(Pick 5)</strong>
            <ul>
                <li>Brass knuckles</li>
                <li>Bullseye lantern</li>
                <li>Chloroform</li>
                <li>Loaded dice</li>
                <li>Satchel</li>
                <li>Secret pocket</li>
                <li>Sleeve sheath</li>
                <li>Stiletto</li>
                <li>Thieves‚Äô tools</li>
                <li>Throwing knives x5</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Defining Skill</h3>
<table class="main_skill">
    <tr>
        <td class="header">Practiced Paranoia (INT)</td>
    </tr>
    <tr>
        <td class="opt_content">
            Whether they‚Äôre an assassin, a thief, a counterfeitter, or a smuggler, criminals all share a practiced paranoia that keeps them out of trouble. Whenever a Criminal comes within 10m of a trap (this includes experimental traps, Man at Arms booby traps, and ambushes) they immediately can make a <strong>Practiced Paranoia</strong> roll at either the DC to spot the trap, the ambushing party‚Äôs Stealth roll, or a DC set by the GM. Even if they don‚Äôt succeed in spotting the trap, they are still aware that something is wrong.
        </td>
    </tr>
</table>

<h3>Professional Skills</h3>

<table class="skills_branch_1">
    <tr>
        <td class="header">The Thief</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Case The Area (INT)</strong><br>
            A Criminal can take an hour to wander the streets of a Settlement and roll <strong>Case The Area</strong> against a DC in the Case The Area chart. If successful, the Criminal memorizes guard patterns, street layouts, and hiding spots for a +2 to Stealth in that area for a number of days equal to their <strong>Case The Area</strong> value.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Mental Key (INT)</strong><br>
            Whenever a Criminal successfully picks a lock they can roll <strong>Mental Key</strong> at a DC equal to the Lock Picking DC to memorize its tumbler positions. This allows the Criminal to open the lock without a Lock Picking roll. You can memorize as many locks as you have points in INT and can always replace one.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Go To Ground (INT)</strong><br>
            Once per session a Criminal can roll <strong>Go To Ground</strong> to find a hideout where they can lie low for a while. Take the total value of your <strong>Go To Ground</strong> roll and split the points between the 3 categories in the Go To Ground table in the sidebar. This hideout remains until destroyed, and you can always return to it.
            <br><br>
            <div style="display: inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">Area</th>
                    <th colspan="2">Security (Multiple)</th>
                    <th colspan="2">Perks (Multiple)</th>
                </tr>
                <tr>
                    <th>Value</th>
                    <th>Cost</th>
                    <th>Value</th>
                    <th>Cost</th>
                    <th>Value</th>
                    <th>Cost</th>
                </tr>
                <tr>
                    <td>A week‚Äôs ride</td> <td>3</td>
                    <td>Locks</td> <td>1</td>
                    <td>Food &amp; water</td> <td>1</td>
                </tr>
                <tr>
                    <td>A day‚Äôs ride</td> <td>5</td>
                    <td>Hidden</td> <td>2</td>
                    <td>Surgeon‚Äôs kit</td> <td>2</td>
                </tr>
                <tr>
                    <td>A day‚Äôs walk</td> <td>8</td>
                    <td>2 bandit guards</td> <td>5</td>
                    <td>A forge</td> <td>3</td>
                </tr>
                <tr>
                    <td>In the area</td> <td>10</td>
                    <td>5 traps (GMs choice)</td> <td>3</td>
                    <td>Alchemy set</td> <td>3</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">The Gang Boss</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Weak Spot (EMP)</strong><br>
            A Criminal can roll <strong>Weak Spot</strong> against a sentient target‚Äôs Deceit roll to identify the target‚Äôs most valued possession or person. This also grants the Criminal a +1 to Intimidate for every 2 points they rolled above the target‚Äôs Deceit. This Intimidation bonus lasts until something happens to change the target‚Äôs weak spot.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Marked Man (WILL)</strong><br>
            A Criminal can roll <strong>Marked Man</strong> at a DC equal the target‚Äôs EMP√ó3 to mark a target by carving a mark on their door, or the like. If successful the target must make a Charisma, Persuasion, or Intimidation check that beats your <strong>Marked Man</strong> roll to get any help or service from anyone in their settlement.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Rally (WILL)</strong><br>
            Once per day, by taking an hour,a Criminal can roll a <strong>Rally</strong> check against a DC set by the GM. For every 2 you roll above the DC they recruit 1 Bandit for a number of days equal to your <strong>Rally</strong> value. If a Bandit is knocked below half health they must roll under the Criminal‚Äôs WILL on a 10 sided die or flee.
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">The Assassin</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Careful Aim (DEX)</strong><br>
            A Criminal who‚Äôs not in active combat and takes a round to aim can roll <strong>Careful Aim</strong> at a DC equal to their target‚Äôs REF√ó3 to gain a bonus on their next attack equal to half their <strong>Careful Aim</strong> value. Being spotted after making this roll but before attacking halves the bonus.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Eye Gouge (DEX)</strong><br>
            A Criminal can roll <strong>Eye Gouge</strong> in place of an attack to temporarily blind a target. <strong>Eye Gouge</strong> requires the Criminal to be in melee range and imposes a -3 to hit. However if it hits, the target takes an unmodified 2d6 damage and is blinded for a number of rounds equal to the <strong>Eye Gouge</strong> value.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Assassin‚Äôs Strike (DEX)</strong><br>
            When ambushing a target, a Criminal can make an <strong>Assassin‚Äôs Strike</strong> roll against the target‚Äôs Awareness roll to conceal themselves after an attack. This ability can be used in any situation but it imposes penalties based on light and cover conditions. Multiple opponents can each roll to spot the Criminal.
            <br><br>
            <div style="display: inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>Condition</th>
                    <th>Mod.</th>
                </tr>
                <tr> <td>In melee range</td> <td>-3</td> </tr>
                <tr> <td>In light</td> <td>-5</td> </tr>
                <tr> <td>In darkness</td> <td>+5</td> </tr>
                <tr> <td>In dim light</td> <td>+2</td> </tr>
                <tr> <td>In a heavily crowded area</td> <td>+3</td> </tr>
                <tr> <td>In a silent area</td> <td>-1</td> </tr>
                <tr> <td>Beyond 20m of the target</td> <td>+3</td> </tr>
            </table>
            </div>
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_en(num, title, description)
)
, ins_title AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS id
       , meta.entity, 'title', raw_data.lang, raw_data.title
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
, ins_description AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description') AS id
       , meta.entity, 'description', raw_data.lang, raw_data.description
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_profession_o' || to_char(raw_data.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS label,
       raw_data.num AS sort_order,
       jsonb_build_object(
           'title', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title')::text),
           'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description')::text)
       ) AS metadata
FROM raw_data
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;


-- <<< END sql/090_profession_07_criminal.sql

-- >>> BEGIN sql/090_profession_08_craftsman.sql

\echo '090_profession_08_craftsman.sql'
-- –í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞: –†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'answer_options' AS entity)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 8, '–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>–≠–Ω–µ—Ä–≥–∏—è:</strong> 0<br><br>
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:</strong><br>
            <strong class="section-title">–ù–µ—Ç</strong>
        </td>
        <td>
            <strong>–ù–∞–≤—ã–∫–∏</strong>
            <ul>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≥–æ—Ä–æ–¥–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –¢–æ—Ä–≥–æ–≤–ª—è</li>
                <li>[–õ–æ–≤–∫–æ—Å—Ç—å] - –ê—Ç–ª–µ—Ç–∏–∫–∞</li>
                <li>[–†–µ–º–µ—Å–ª–æ] - –ê–ª—Ö–∏–º–∏—è</li>
                <li>[–†–µ–º–µ—Å–ª–æ] - –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ</li>
                <li>[–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ] - –°–∏–ª–∞</li>
                <li>[–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ] - –°—Ç–æ–π–∫–æ—Å—Ç—å</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –ò—Å–∫—É—Å—Å—Ç–≤–æ</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –£–±–µ–∂–¥–µ–Ω–∏–µ</li>
            </ul>
        </td>
        <td>
            <strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong><br>
            <strong class="section-title">(–≤—ã–±–µ—Ä–∏—Ç–µ 5)</strong>
            <ul>
                <li>–ü–æ—Ö–æ–¥–Ω–∞—è –∫—É–∑–Ω–∏—Ü–∞</li>
                <li>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–æ—Ä–≥–æ–≤—Ü–∞</li>
                <li>–ñ–µ–ª–µ–∑–Ω—ã–π –ø–æ–ª—É—Ç–æ—Ä–Ω—ã–π –º–µ—á</li>
                <li>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫–∞</li>
                <li>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–ª—Ö–∏–º–∏–∫–∞</li>
                <li>–ü–µ—Å–æ—á–Ω—ã–µ —á–∞—Å—ã (—á–∞—Å)</li>
                <li>–ù–µ–±–æ–ª—å—à–æ–π —Å—É–Ω–¥—É—á–æ–∫</li>
                <li>–ë—É–ª–∞–≤–∞</li>
                <li>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 50 –∫—Ä–æ–Ω</li>
                <li>–ó–∞–º–æ–∫</li>
            </ul>
        </td>
    </tr>
</table>

<h3>–û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–≤—ã–∫</h3>
<table class="main_skill">
    <tr>
        <td class="header">–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–º–æ–Ω—Ç (–†–µ–º)</td>
    </tr>
    <tr>
        <td class="opt_content">
            –£–º–µ–ª—ã–π —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ —Å–ø–æ—Å–æ–±–µ–Ω –Ω–∞—Å–∫–æ—Ä–æ –ø–æ–¥–ª–∞—Ç–∞—Ç—å –æ—Ä—É–∂–∏–µ –∏–ª–∏ –±—Ä–æ–Ω—é, —á—Ç–æ–±—ã –∏—Ö –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–≥ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å—Ä–∞–∂–∞—Ç—å—Å—è. –†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ —Å–≤—è–∂–µ—Ç –≤–º–µ—Å—Ç–µ –æ–±—Ä—ã–≤–∫–∏ –ª–æ–ø–Ω—É–≤—à–µ–π —Ç–µ—Ç–∏–≤—ã, –∑–∞–æ—Å—Ç—Ä–∏—Ç –∫—Ä–∞–π —Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ –∫–ª–∏–Ω–∫–∞ –∏–ª–∏ –ø—Ä–∏–∫–æ–ª–æ—Ç–∏—Ç –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫—É—é –ø–ª–∞—Å—Ç–∏–Ω—É –ø–æ–≤–µ—Ä—Ö —Ç—Ä–µ—Å–Ω—É–≤—à–µ–≥–æ —â–∏—Ç–∞. –†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å —Ö–æ–¥ –∏ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ë—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–º–æ–Ω—Ç–∞</strong> —Å–æ —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é, —Ä–∞–≤–Ω–æ–π –°–õ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ –º–∏–Ω—É—Å 3, —á—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 1/2 –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ –±—Ä–æ–Ω–∏ –∏–ª–∏ 1/2 –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ —Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ –æ—Ä—É–∂–∏—è –∏–ª–∏ —â–∏—Ç–∞. –ü–æ–∫–∞ –æ—Ä—É–∂–∏–µ –ø–æ—Å–ª–µ <strong>–ë—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–º–æ–Ω—Ç–∞</strong> –Ω–µ –ø–æ—á–∏–Ω—è—Ç –≤ –∫—É–∑–Ω–∏—Ü–µ, –æ–Ω–æ –Ω–∞–Ω–æ—Å–∏—Ç –ø–æ–ª–æ–≤–∏–Ω—É –æ–±—ã—á–Ω–æ–≥–æ —É—Ä–æ–Ω–∞.
            <br><br>
            <strong>–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ª–æ–º–æ–∫</strong><br>
            –†–∞–Ω–µ–µ –ø–æ–¥–ª–∞—Ç–∞–Ω–Ω–æ–µ –æ—Ä—É–∂–∏–µ, —â–∏—Ç –∏–ª–∏ –±—Ä–æ–Ω—é –ø–æ—Å–ª–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ª–æ–º–∫–∏ –º–æ–∂–Ω–æ –ø–æ–¥–ª–∞—Ç–∞—Ç—å –µ—â—ë —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑. –í–æ –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ <strong>–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–º–æ–Ω—Ç</strong> –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç –ª–∏—à—å 1/4 –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏/–ø—Ä–æ—á–Ω–æ—Å—Ç–∏ (—Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º –≤–Ω–∏–∑).
        </td>
    </tr>
</table>

<h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</h3>

<!-- –í–ï–¢–ö–ê 1 ‚Äî –û—Ä—É–∂–µ–π–Ω–∏–∫ -->
<table class="skills_branch_1">
    <tr>
        <td class="header">–û—Ä—É–∂–µ–π–Ω–∏–∫</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ë–æ–ª—å—à–æ–π –∫–∞—Ç–∞–ª–æ–≥ (–ò–Ω—Ç)</strong><br>
            –£–º–µ–ª—ã–π —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ —Å–ø–æ—Å–æ–±–µ–Ω –∑–∞–ø–æ–º–Ω–∏—Ç—å –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ—Ä—Ç–µ–∂–µ–π –Ω–∞ –≤—Å–µ —Å–ª—É—á–∞–∏ –∂–∏–∑–Ω–∏. –ö–æ–≥–¥–∞ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ —É–∂–µ –∑–∞–ø–æ–º–Ω–∏–ª –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ—Ä—Ç–µ–∂–µ–π, –æ–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ë–æ–ª—å—à–æ–π –∫–∞—Ç–∞–ª–æ–≥</strong> —Å–æ –°–õ 15, —á—Ç–æ–±—ã –∑–∞–ø–æ–º–Ω–∏—Ç—å –µ—â—ë –æ–¥–∏–Ω. –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–æ–º–Ω–µ–Ω–Ω—ã—Ö —á–µ—Ä—Ç–µ–∂–µ–π, –Ω–æ –∑–∞ –∫–∞–∂–¥—ã–µ 10 –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –°–õ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –Ω–∞ 1.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü–æ–¥–º–∞—Å—Ç–µ—Ä—å–µ (–†–µ–º)</strong><br>
            –ö–æ–≥–¥–∞ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞—Ç—å –∫–∞–∫–æ–π-–ª–∏–±–æ –ø—Ä–µ–¥–º–µ—Ç, –æ–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ü–æ–¥–º–∞—Å—Ç–µ—Ä—å–µ</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –°–õ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –æ–Ω –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç 1 –∫ —É—Ä–æ–Ω—É –∏–ª–∏ –∫ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ –∑–∞ –∫–∞–∂–¥—ã–µ 2 –ø—É–Ω–∫—Ç–∞ —Å–≤–µ—Ä—Ö —É–∫–∞–∑–∞–Ω–Ω–æ–π –°–õ. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–æ–Ω—É—Å –∫ —É—Ä–æ–Ω—É –∏–ª–∏ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ —Ä–∞–≤–µ–Ω 5. –†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –£–¥–∞—á—É –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ –±–æ–Ω—É—Å–∞.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ (–†–µ–º)</strong><br>
            <strong>–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞</strong> –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫—É –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã —É—Ä–æ–≤–Ω—è –º–∞—Å—Ç–µ—Ä–∞. –†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç —Ç–∞–∫–∂–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –°–õ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞, —á—Ç–æ–±—ã –Ω–∞–≤—Å–µ–≥–¥–∞ –ø—Ä–∏–¥–∞—Ç—å –±—Ä–æ–Ω–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ (–æ–Ω —Å–∞–º —Ä–µ—à–∞–µ—Ç —á–µ–º—É –∏–º–µ–Ω–Ω–æ) –∏–ª–∏ –±–æ–Ω—É—Å –æ—Ä—É–∂–∏—é: –¥—Ä–æ–±—è—â–µ–µ –æ—Ä—É–∂–∏–µ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ –¥–µ–∑–æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—é—â–µ–µ (-2), –∫–æ–ª—é—â–µ–µ –∏–ª–∏ —Ä–µ–∂—É—â–µ–µ ‚Äî –∫—Ä–æ–≤–æ–ø—É—Å–∫–∞—é—â–µ–µ (50%).
        </td>
    </tr>
</table>

<!-- –í–ï–¢–ö–ê 2 ‚Äî –ê–ª—Ö–∏–º–∏–∫ -->
<table class="skills_branch_2">
    <tr>
        <td class="header">–ê–ª—Ö–∏–º–∏–∫</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°–ø–∏—Å–æ–∫ –ª–µ–∫–∞—Ä—Å—Ç–≤ (–ò–Ω—Ç)</strong><br>
            –£–º–µ–ª—ã–π —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ —Å–ø–æ—Å–æ–±–µ–Ω –∑–∞–ø–æ–º–Ω–∏—Ç—å –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ä–º—É–ª –Ω–∞ –≤—Å–µ —Å–ª—É—á–∞–∏ –∂–∏–∑–Ω–∏. –ö–æ–≥–¥–∞ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ —É–∂–µ –∑–∞–ø–æ–º–Ω–∏–ª –¥–æ—Å—Ç—É–ø–Ω–æ–µ –µ–º—É —á–∏—Å–ª–æ —Ñ–æ—Ä–º—É–ª, –æ–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–°–ø–∏—Å–æ–∫ –ª–µ–∫–∞—Ä—Å—Ç–≤</strong> —Å–æ –°–õ 15, —á—Ç–æ–±—ã –∑–∞–ø–æ–º–Ω–∏—Ç—å –µ—â—ë –æ–¥–Ω—É. –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–æ–º–Ω–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª, –Ω–æ –∑–∞ –∫–∞–∂–¥—ã–µ 10 –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –°–õ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –Ω–∞ 1.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–î–≤–æ–π–Ω–∞—è –ø–æ—Ä—Ü–∏—è (–†–µ–º)</strong><br>
            –ö–æ–≥–¥–∞ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑–≥–æ—Ç–æ–≤–∏—Ç—å –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–∏–π —Å–æ—Å—Ç–∞–≤, –æ–Ω –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–î–≤–æ–π–Ω–æ–π –ø–æ—Ä—Ü–∏–∏</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –°–õ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—É–ª—ã. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –æ–Ω —Å–æ–∑–¥–∞—ë—Ç –¥–≤–µ –ø–æ—Ä—Ü–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ –∏–∑ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö –Ω–∞ –æ–¥–Ω—É –ø–æ—Ä—Ü–∏—é. –≠—Ç–æ –ø—Ä–∏–º–µ–Ω–∏–º–æ –∫–æ –≤—Å–µ–º –∞–ª—Ö–∏–º–∏—á–µ—Å–∫–∏–º –ø—Ä–µ–¥–º–µ—Ç–∞–º, –≤–∫–ª—é—á–∞—è —ç–ª–∏–∫—Å–∏—Ä—ã, –º–∞—Å–ª–∞, –æ—Ç–≤–∞—Ä—ã –∏ –±–æ–º–±—ã.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ê–¥–∞–ø—Ç–∞—Ü–∏—è (–†–µ–º)</strong><br>
            –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –≤–µ–¥—å–º–∞—á—å–µ–≥–æ —ç–ª–∏–∫—Å–∏—Ä–∞ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–ê–¥–∞–ø—Ç–∞—Ü–∏–∏</strong> (3 + –°–õ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è), —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å –°–õ –∏–∑–±–µ–≥–∞–Ω–∏—è –æ—Ç—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç —Å–≤—ã—à–µ –°–õ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è. –ü—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ —è–¥–æ–≤–∏—Ç–æ—Å—Ç—å —ç–ª–∏–∫—Å–∏—Ä–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è. –°–õ –∏–∑–±–µ–≥–∞–Ω–∏—è –æ—Ç—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –æ–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∏–∂–µ 12.
        </td>
    </tr>
</table>

<!-- –í–ï–¢–ö–ê 3 ‚Äî –ò–º–ø—Ä–æ–≤–∏–∑–∞—Ç–æ—Ä -->
<table class="skills_branch_3">
    <tr>
        <td class="header">–ò–º–ø—Ä–æ–≤–∏–∑–∞—Ç–æ—Ä</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–£–ª—É—á—à–µ–Ω–∏–µ (–†–µ–º)</strong><br>
            –†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–£–ª—É—á—à–µ–Ω–∏—è</strong> —Å–æ –°–õ, —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ –ø–æ–ª—è—Ö, —á—Ç–æ–±—ã –ø—Ä–∏–¥–∞—Ç—å –æ—Ä—É–∂–∏—é –∏–ª–∏ –±—Ä–æ–Ω–µ –æ—Å–æ–±—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫–∞). –ù–∞ —É–ª—É—á—à–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å 3 —Ä–∞—É–Ω–¥–∞. –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—É–∑–Ω–∏—Ü—É, –Ω–æ –æ–Ω–∞ –¥–∞—ë—Ç –±–æ–Ω—É—Å +2 –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≤–∞–ª –Ω–∞–Ω–æ—Å–∏—Ç –ø—Ä–µ–¥–º–µ—Ç—É —É—Ä–æ–Ω, —Ä–∞–≤–Ω—ã–π –∑–Ω–∞—á–µ–Ω–∏—é –ø—Ä–æ–≤–∞–ª–∞.
            <br><br>
            <div style="display:inline-block;">
            <table class="table-small" border="1" cellspacing="0" cellpadding="4">
                <tr>
                    <th>–£–ª—É—á—à–µ–Ω–∏–µ</th>
                    <th>–°–õ</th>
                </tr>
                <tr>
                    <td><b>–û—Ä—É–∂–∏–µ</b></td>
                    <td></td>
                </tr>
                <tr>
                    <td>–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ (+2 –∫ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏)</td>
                    <td>14</td>
                </tr>
                <tr>
                    <td>–ó–∞–∑—É–±—Ä–∏–≤–∞–Ω–∏–µ/—à–∏–ø—ã (+25 % –∫ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è)</td>
                    <td>16</td>
                </tr>
                <tr>
                    <td>–û–±–ª–µ–≥—á–µ–Ω–∏–µ (+1 –∫ —Ç–æ—á–Ω–æ—Å—Ç–∏)</td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>–ë—Ä–æ–Ω—è</b></td>
                    <td></td>
                </tr>
                <tr>
                    <td>–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ (+2 –∫ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏)</td>
                    <td>14</td>
                </tr>
                <tr>
                    <td>–ö–∞–º—É—Ñ–ª—è–∂ (+1 –∫ –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏)</td>
                    <td>16</td>
                </tr>
                <tr>
                    <td>–®–∏–ø—ã (2 —É—Ä–æ–Ω–∞ —Ç–æ–º—É, –∫—Ç–æ –ø—Ä–æ–≤–æ–¥–∏—Ç –∑–∞—Ö–≤–∞—Ç)</td>
                    <td>18</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°–µ—Ä–µ–±—Ä–µ–Ω–∏–µ (–†–µ–º)</strong><br>
            –†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –ø–æ—Å–µ—Ä–µ–±—Ä–∏—Ç—å –∏–º–µ—é—â–µ–µ—Å—è –æ—Ä—É–∂–∏–µ –≤ –∫—É–∑–Ω–∏—Ü–µ, —Å–æ–≤–µ—Ä—à–∏–≤ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ –°–õ 16. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è —ç—Ç–æ–≥–æ —Å–µ—Ä–µ–±—Ä—è–Ω—ã—Ö —Å–ª–∏—Ç–∫–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –æ—Ä—É–∂–∏—è. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –æ—Ä—É–∂–∏–µ –Ω–∞–Ω–æ—Å–∏—Ç +1d6 —É—Ä–æ–Ω–∞ —Å–µ—Ä–µ–±—Ä–æ–º –∑–∞ –∫–∞–∂–¥—ã–µ 3 –ø—É–Ω–∫—Ç–∞ —Å–≤—ã—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ –Ω–µ –±–æ–ª–µ–µ 5d6. –ü—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ –æ—Ä—É–∂–∏–µ –ª–æ–º–∞–µ—Ç—Å—è.
            <br><br>
            –î–ª—è —Å–µ—Ä–µ–±—Ä–µ–Ω–∏—è –æ–¥–Ω–æ—Ä—É—á–Ω–æ–≥–æ –æ—Ä—É–∂–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è 2 —Å–ª–∏—Ç–∫–∞ —Å–µ—Ä–µ–±—Ä–∞, –¥–≤—É—Ä—É—á–Ω–æ–≥–æ ‚Äî 4 —Å–ª–∏—Ç–∫–∞ —Å–µ—Ä–µ–±—Ä–∞, –∏ 1 —Å–ª–∏—Ç–æ–∫ —É–π–¥—ë—Ç –Ω–∞ —Å–µ—Ä–µ–±—Ä–µ–Ω–∏–µ 10 –∏–ª–∏ –º–µ–Ω–µ–µ —Å—Ç—Ä–µ–ª –∏–ª–∏ –∞—Ä–±–∞–ª–µ—Ç–Ω—ã—Ö –±–æ–ª—Ç–æ–≤.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ü—Ä–∏—Ü–µ–ª—å–Ω—ã–π —É–¥–∞—Ä (–†–µ–º)</strong><br>
            –†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ü—Ä–∏—Ü–µ–ª—å–Ω—ã–π —É–¥–∞—Ä</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –°–õ –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –≤ –Ω—ë–º –∏–∑—ä—è–Ω. –ù–∞ –æ—Å–º–æ—Ç—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ —É—Ö–æ–¥–∏—Ç 1 —Ä–∞—É–Ω–¥, –Ω–æ —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫—É —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–∏—Ü–µ–ª—å–Ω—É—é –∞—Ç–∞–∫—É —Å–æ —à—Ç—Ä–∞—Ñ–æ–º ‚àí6, —á—Ç–æ–±—ã –Ω–∞–Ω–µ—Å—Ç–∏ —Ä–∞–∑—Ä—É—à–∞—é—â–∏–π —É—Ä–æ–Ω –æ—Ä—É–∂–∏—é –∏–ª–∏ –±—Ä–æ–Ω–µ, —Ä–∞–≤–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –±—Ä–æ—Å–∫–∞ —à–µ—Å—Ç–∏–≥—Ä–∞–Ω–Ω—ã—Ö –∫–æ—Å—Ç–µ–π –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ, —Ä–∞–≤–Ω–æ–º –∑–Ω–∞—á–µ–Ω–∏—é <strong>–ü—Ä–∏—Ü–µ–ª—å–Ω–æ–≥–æ —É–¥–∞—Ä–∞</strong>.
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_ru(num, title, description)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 8, 'Craftsman', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>Vigor:</strong> 0<br><br>
            <strong>Magical Perks:</strong><br>
            <strong class="section-title">None</strong>
        </td>
        <td>
            <strong>Skills</strong>
            <ul>
                <li>[BODY] - Endurance</li>
                <li>[BODY] - Physique</li>
                <li>[CRA] - Alchemy</li>
                <li>[CRA] - Crafting</li>
                <li>[DEX] - Athletics</li>
                <li>[EMP] - Fine Arts</li>
                <li>[EMP] - Persuasion</li>
                <li>[INT] - Business</li>
                <li>[INT] - Education</li>
                <li>[INT] - Streetwise</li>
            </ul>
        </td>
        <td>
            <strong>Gear</strong><br>
            <strong class="section-title">(Pick 5)</strong>
            <ul>
                <li>50 crowns of components</li>
                <li>Alchemy set</li>
                <li>Crafting tools</li>
                <li>Hourglass</li>
                <li>Iron long sword</li>
                <li>Lock</li>
                <li>Mace</li>
                <li>Merchant‚Äôs tools</li>
                <li>Small chest</li>
                <li>Tinker‚Äôs forge</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Defining Skill</h3>
<table class="main_skill">
    <tr>
        <td class="header">Patch Job (CRA)</td>
    </tr>
    <tr>
        <td class="opt_content">
            A skilled craftsman can patch a weapon or armor well enough to keep it working and keep its wearer/wielder in the fight, whether that be by tying a bowstring back together, sharpening the edge of a broken blade, or nailing a plate over a cracked shield. By taking a turn to roll <strong>Patch Job</strong> at a DC equal to the item‚Äôs Crafting DC-3 a Craftsman can restore a broken shield or armor to half its full SP or restore a broken weapon to half its durability. Until fixed at a forge, a patched weapon does half its normal damage.
            <br><br>
            <strong>Too Many Patches</strong><br>
            A weapon, shield, or armor which has already been patched once can only be patched again 1 more time, and this patch only brings it to 1/4th SP/Durability (rounding down).
        </td>
    </tr>
</table>

<h3>Professional Skills</h3>
<table class="skills_branch_1">
    <tr>
        <td class="header">The Forge Master</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Extensive Catalogue (INT)</strong><br>
            A skilled Craftsman can keep a mental catalogue of diagrams in their head at all times. When a Craftsman has memorized as many diagrams as they can, they may roll <strong>Extensive Catalogue</strong> at DC:15 to memorize one more. There is no limit, but every 10 diagrams they have memorized adds 1 to the DC.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Journeyman (CRA)</strong><br>
            A Craftsman who begins crafting an item can roll <strong>Journeyman</strong> at a DC equal to the item‚Äôs crafting DC. If they succeed they add +1 DMG for weapons or +1 SP for armor for every 2 points they rolled above the DC. The maximum bonus they can give to DMG or SP is 5.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Master Crafting (CRA)</strong><br>
            Master Crafting allows a Craftsman to make items that are master grade. They can also roll a <strong>Master Crafting</strong> roll at any time at a DC equal to the item‚Äôs crafting DC to permanently grant armor resistance (their choice) or weapons a 50% bleeding or -2 Stun value based on damage type.
        </td>
    </tr>
</table>
<table class="skills_branch_2">
    <tr>
        <td class="header">The Alchemist</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Mental Pharmacy (INT)</strong><br>
            A skilled Craftsman can keep a mental catalogue of formulae in their head at all times. When a Craftsman has memorized as many formulae as they can, they may roll <strong>Mental Pharmacy</strong> at DC:15 to memorize one more. There is no limit, but every 10 formulae they have memorized adds 1 to the DC.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Double Dose (CRA)</strong><br>
            Any time a craftsman sets out to make an alchemical item they can make a <strong>Double Dose</strong> roll at a DCequal to the formula‚Äôs crafting DC. If they succeed they create two units of the formula with the ingredients of one. This applies to all items created with alchemy, including potions, oils, decoctions, and bombs.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Adaptation (CRA)</strong><br>
            Craftsmen can roll an <strong>Adaptation</strong> check (3 + the crafting DC) before making a witcher potion to lower its DC to avoid poisoning by 1 for every point they rolled over the crafting DC. If they fail, the potion comes out as poisonous as it normally would be. The DC to avoid poisoning can never be lower than 12.
        </td>
    </tr>
</table>
<table class="skills_branch_3">
    <tr>
        <td class="header">The Improviser</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Augmentation (CRA)</strong><br>
            A Craftsman can make an <strong>Augmentation</strong> roll at a DC listed in the Augmentation chart to augment a weapon or Armor with their crafting tools. This augmentation takes 3 rounds. While a forge isn‚Äôt required, it grants a +2 to the roll. A fumble results in the item taking damage equal to the fumble value.
            <br><br>
            <div style="display:inline-block;">
            <table class="table-small" border="1" cellspacing="0" cellpadding="4">
                <tr>
                    <th>Augmentation</th>
                    <th>DC</th>
                </tr>
                <tr>
                    <td><b>Weapons</b></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Reinforced<br>+2 Reliability</td>
                    <td>14</td>
                </tr>
                <tr>
                    <td>Serration/Spikes<br>+25% Bleed</td>
                    <td>16</td>
                </tr>
                <tr>
                    <td>Lighten<br>+1 Accuracy</td>
                    <td>18</td>
                </tr>
                <tr>
                    <td><b>Armors</b></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Reinforced<br>+2 SP</td>
                    <td>14</td>
                </tr>
                <tr>
                    <td>Camouflage<br>+1 Stealth</td>
                    <td>16</td>
                </tr>
                <tr>
                    <td>Studded<br>2 Damage to Grapplers</td>
                    <td>18</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Silver Coating (CRA)</strong><br>
            A Craftsman can coat an existing weapon in silver with a forge and a number of units of silver ingots based on the size of the weapon. The DC for this roll is 16. If you succeed, add +1d6 silver damage to a weapon per 3 points you rolled above the DC, up to 5d6. Failing the roll breaks the weapon.
            <br><br>
            <strong>Silver Coating</strong><br>
            Silver coating requires 2 ingots of silver for 1-handed weapons, 4 ingots of silver for 2-handed weapons, and 1 ingot of silver for up to 10 arrows or crossbow bolts
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Pinpoint (CRA)</strong><br>
            A Craftsman can roll <strong>Pinpoint</strong> with a DC equal an item‚Äôs crafting DC to search for a flaw in the item‚Äôs design. This takes 1 turn studying, but allows the Craftsman to make a targeted attack at a -6 to do ablation damage to the armor or weapon equal to half their <strong>Pinpoint</strong> value in 6-sided dice.
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_en(num, title, description)
)
, ins_title AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS id
       , meta.entity, 'title', raw_data.lang, raw_data.title
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
, ins_description AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description') AS id
       , meta.entity, 'description', raw_data.lang, raw_data.description
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_profession_o' || to_char(raw_data.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS label,
       raw_data.num AS sort_order,
       jsonb_build_object(
           'title', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title')::text),
           'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description')::text)
       ) AS metadata
FROM raw_data
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;


-- <<< END sql/090_profession_08_craftsman.sql

-- >>> BEGIN sql/090_profession_09_merchant.sql

\echo '090_profession_09_merchant.sql'
-- –í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞: –¢–æ—Ä–≥–æ–≤–µ—Ü

WITH
  meta AS (SELECT 'witcher_cc' AS su_su_id
                , 'wcc_profession' AS qu_id
                , 'answer_options' AS entity)
, raw_data AS (
  SELECT 'ru' AS lang, raw_data_ru.*
    FROM (VALUES
            ( 9, '–¢–æ—Ä–≥–æ–≤–µ—Ü', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>–≠–Ω–µ—Ä–≥–∏—è:</strong> 0<br><br>
            <strong>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:</strong><br>
            <strong class="section-title">–ù–µ—Ç</strong>
        </td>
        <td>
            <strong>–ù–∞–≤—ã–∫–∏</strong>
            <ul>
                <li>[–í–æ–ª—è] - –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ —É–±–µ–∂–¥–µ–Ω–∏—é</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≥–æ—Ä–æ–¥–µ</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –¢–æ—Ä–≥–æ–≤–ª—è</li>
                <li>[–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç] - –Ø–∑—ã–∫ (–≤—ã–±–µ—Ä–∏—Ç–µ 1)</li>
                <li>[–†–µ–∞–∫—Ü–∏—è] - –í–ª–∞–¥–µ–Ω–∏–µ –ª—ë–≥–∫–∏–º–∏ –∫–ª–∏–Ω–∫–∞–º–∏</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ª—é–¥–µ–π</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –£–±–µ–∂–¥–µ–Ω–∏–µ</li>
                <li>[–≠–º–ø–∞—Ç–∏—è] - –•–∞—Ä–∏–∑–º–∞</li>
            </ul>
        </td>
        <td>
            <strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong><br>
            <strong class="section-title">(–≤—ã–±–µ—Ä–∏—Ç–µ 3)</strong>
            <ul>
                <li>–ü–∏—Å—å–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏</li>
                <li>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–æ—Ä–≥–æ–≤—Ü–∞</li>
                <li>–ë–æ–ª—å—à–∞—è –ø–∞–ª–∞—Ç–∫–∞</li>
                <li>–î–Ω–µ–≤–Ω–∏–∫</li>
                <li>–ê—Ä–±–∞–ª–µ—Ç –∏ –∞—Ä–±–∞–ª–µ—Ç–Ω—ã–µ –±–æ–ª—Ç—ã x20</li>
                <li>–ö–∏–Ω–∂–∞–ª</li>
            </ul>
            <br><strong>–û—Å–æ–±–æ–µ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</strong>
            <ul>
                <li>–ú—É–ª</li>
                <li>–ü–æ–≤–æ–∑–∫–∞</li>
                <li>–û–±—ã—á–Ω—ã–µ –∏–ª–∏ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é 1000 –∫—Ä–æ–Ω</li>
            </ul>
        </td>
    </tr>
</table>

<h3>–û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–≤—ã–∫</h3>
<table class="main_skill">
    <tr>
        <td class="header">–ë—ã–≤–∞–ª—ã–π –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫ (–ò–Ω—Ç)</td>
    </tr>
    <tr>
        <td class="opt_content">
            –û–±—ã—á–Ω—ã–π —Ç–æ—Ä–≥–æ–≤–µ—Ü –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –∂–∏–∑–Ω—å —Ç–µ–º, —á—Ç–æ –ø—Ä–æ–¥–∞—ë—Ç —Ç–æ–≤–∞—Ä –ø—Ä–∏—Ö–æ–¥—è—â–∏–º –∫ –Ω–µ–º—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º. –°—Ç—Ä–∞–Ω—Å—Ç–≤—É—é—â–∏–π –∂–µ —Ç–æ—Ä–≥–æ–≤–µ—Ü —Å–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é. –û–Ω –µ–∑–¥–∏—Ç –ø–æ –º–∏—Ä—É –∏ —É–∑–Ω–∞—ë—Ç –æ–±–æ –≤—Å—ë–º, —á—Ç–æ —Ç–∞–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –¢–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø–æ —Å–≤–æ–µ–º—É –∂–µ–ª–∞–Ω–∏—é —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞–≤—ã–∫–∞ <strong>–ë—ã–≤–∞–ª—ã–π –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫</strong>, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –æ–¥–∏–Ω —Ñ–∞–∫—Ç –æ–± –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –ø—Ä–µ–¥–º–µ—Ç–µ, –∫—É–ª—å—Ç—É—Ä–µ –∏–ª–∏ –æ–±–ª–∞—Å—Ç–∏. –°–õ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ–¥—É—â–∏–π. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Ç–æ—Ä–≥–æ–≤–µ—Ü –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å, –≤—Å–ø–æ–º–Ω–∏–≤ —Ç–µ –≤—Ä–µ–º–µ–Ω–∞, –∫–æ–≥–¥–∞ –æ–Ω –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑ –±—ã–ª –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ.
        </td>
    </tr>
</table>

<h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</h3>

<table class="skills_branch_1">
    <tr>
        <td class="header">–ü–æ—Å—Ä–µ–¥–Ω–∏–∫</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–†—ã–Ω–æ–∫ (–ò–Ω—Ç)</strong><br>
            –¢–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–†—ã–Ω–∫–∞</strong> —Å –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–π –≤–µ–¥—É—â–∏–º –°–õ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –ø–æ –±–æ–ª–µ–µ –Ω–∏–∑–∫–æ–π —Ü–µ–Ω–µ. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Ç–æ—Ä–≥–æ–≤–µ—Ü –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–≥–æ, –∫—Ç–æ –ø—Ä–æ–¥–∞—Å—Ç –µ–º—É —Ç–æ—Ç –∂–µ –ø—Ä–µ–¥–º–µ—Ç –∑–∞ –ø–æ–ª—Ü–µ–Ω—ã. –ß–µ–º –±–æ–ª–µ–µ —Ä–µ–¥–∫–∏–π –ø—Ä–µ–¥–º–µ—Ç, —Ç–µ–º –≤—ã—à–µ –°–õ –ø–æ–∏—Å–∫–∞. <strong>–†—ã–Ω–æ–∫</strong> –Ω–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ, –≤–µ–¥—å–º–∞—á—å–∏ –ø—Ä–µ–¥–º–µ—Ç—ã –∏ —Ä–µ–ª–∏–∫–≤–∏–∏.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ù–µ—á–µ—Å—Ç–Ω–∞—è —Å–¥–µ–ª–∫–∞ (–≠–º–ø)</strong><br>
            –°–æ–≤–µ—Ä—à–∞—è –ø–æ–¥–∫—É–ø, —Ç–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ù–µ—á–µ—Å—Ç–Ω–∞—è —Å–¥–µ–ª–∫–∞</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –í–æ–ª–µ —Ö 3 —Ü–µ–ª–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Ç–æ—Ä–≥–æ–≤–µ—Ü –¥–∞—ë—Ç –≤–∑—è—Ç–∫—É –ª—é–±—ã–º –ø—Ä–µ–¥–º–µ—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π —É –Ω–µ–≥–æ –µ—Å—Ç—å –∏ –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–æ–∏—Ç –Ω–µ –º–µ–Ω–µ–µ 5 –∫—Ä–æ–Ω. –í–∑—è—Ç–∫–∞ –≤—Å–µ–≥–¥–∞ –¥–∞—ë—Ç +3 –∫ –£–±–µ–∂–¥–µ–Ω–∏—é. –ï—Å–ª–∏ –≤–∑—è—Ç–∫–∞ —Å–æ–≤—Å–µ–º —É–∂ –Ω–µ—Å—É—Ä–∞–∑–Ω–∞, –°–õ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 5.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–û–±–µ—â–∞–Ω–∏–µ (–≠–º–ø)</strong><br>
            –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∫—É–ø–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç —Ç–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–û–±–µ—â–∞–Ω–∏—è</strong> —Å–æ –°–õ, —Ä–∞–≤–Ω–æ–π –≠–º–ø —Ö 3 –ø—Ä–æ–¥–∞–≤—Ü–∞. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –ø—Ä–æ–¥–∞–≤–µ—Ü –≤–µ—Ä–∏—Ç –æ–±–µ—â–∞–Ω–∏—é —Ç–æ—Ä–≥–æ–≤—Ü–∞ –∑–∞–ø–ª–∞—Ç–∏—Ç—å –ø–æ–∑–∂–µ. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–¥–µ–ª—å, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —Ä–∞–≤–Ω–æ –∑–Ω–∞—á–µ–Ω–∏—é <strong>–û–±–µ—â–∞–Ω–∏—è</strong>.
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">–ß–µ–ª–æ–≤–µ–∫ —Å–æ —Å–≤—è–∑—è–º–∏</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–¢—Ä—É—â–æ–±—ã (–≠–º–ø)</strong><br>
            –¢–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–¢—Ä—É—â–æ–±—ã</strong> —Å–æ –°–õ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ—Å–µ–ª–µ–Ω–∏—è, —á—Ç–æ–±—ã –∑–∞—Ä—É—á–∏—Ç—å—Å—è –ø–æ–º–æ—â—å—é 1 –±–µ—Å–ø—Ä–∏–∑–æ—Ä–Ω–∏–∫–∞ –∏–ª–∏ –±–µ–∑–¥–æ–º–Ω–æ–≥–æ –∑–∞ –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç —Å–≤—ã—à–µ –°–õ (–º–∞–∫—Å–∏–º—É–º 10). –¢–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç —Å–ø—Ä–æ—Å–∏—Ç—å —É –Ω–∏—Ö —Å–æ–≤–µ—Ç–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å +1 –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –≥–æ—Ä–æ–¥–µ –∑–∞ –∫–∞–∂–¥–æ–≥–æ. –ò–Ω—Ñ–æ—Ä–º–∞—Ç–æ—Ä—ã –±–µ—Ä—É—Ç –ø–ª–∞—Ç—É –≤ 1 –∫—Ä–æ–Ω—É –Ω–∞ –∫–∞–∂–¥–æ–≥–æ, –∫–æ–≥–¥–∞ —Å –Ω–∏–º–∏ —Å–æ–≤–µ—Ç—É—é—Ç—Å—è.
            <br><br>
            <div style="display:inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">–ü–æ—Å–µ–ª–µ–Ω–∏—è</th>
                </tr>
                <tr>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th> <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                </tr>
                <tr>
                    <td>–î–µ—Ä–µ–≤–Ω—è</td> <td>14</td>
                </tr>
                <tr>
                    <td>–ù–µ–±–æ–ª—å—à–æ–π –≥–æ—Ä–æ–¥</td> <td>18</td>
                </tr>
                <tr>
                    <td>–°—Ç–æ–ª–∏—Ü–∞</td> <td>22</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°–≤–æ–π —á–µ–ª–æ–≤–µ–∫ (–ò–Ω—Ç)</strong><br>
            –¢–æ—Ä–≥–æ–≤–µ—Ü —Å–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é <strong>–°–≤–æ–π —á–µ–ª–æ–≤–µ–∫</strong> –º–æ–∂–µ—Ç —É–±–µ–¥–∏—Ç—å –¥—Ä—É–≥–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–æ—à–ø–∏–æ–Ω–∏—Ç—å –Ω–∞ –Ω–µ–≥–æ. –ó–∞–ø–ª–∞—Ç–∏—Ç–µ 10 –∫—Ä–æ–Ω –∏ —Å–æ–≤–µ—Ä—à–∏—Ç–µ –≤—Å—Ç—Ä–µ—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–°–≤–æ–µ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞</strong> –ø—Ä–æ—Ç–∏–≤ –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —É–±–µ–∂–¥–µ–Ω–∏—é —Ü–µ–ª–∏. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –ø–µ—Ä—Å–æ–Ω–∞–∂ –±—É–¥–µ—Ç —à–ø–∏–æ–Ω–∏—Ç—å –¥–ª—è —Ç–æ—Ä–≥–æ–≤—Ü–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–°–≤–æ–π —á–µ–ª–æ–≤–µ–∫</strong>. –ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ —Å—Ä–æ–∫–∞ —Ç–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç —Å–Ω–æ–≤–∞ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, –æ–ø—è—Ç—å –∂–µ –∑–∞–ø–ª–∞—Ç–∏–≤.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–ö–∞—Ä—Ç–∞ —Å–æ–∫—Ä–æ–≤–∏—â (–ò–Ω—Ç)</strong><br>
            –û–¥–∏–Ω —Ä–∞–∑ –∑–∞ –∏–≥—Ä–æ–≤—É—é –ø–∞—Ä—Ç–∏—é —Ç–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–ö–∞—Ä—Ç–∞ —Å–æ–∫—Ä–æ–≤–∏—â</strong> —Å–æ –°–õ, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–π –≤–µ–¥—É—â–∏–º, —á—Ç–æ–±—ã –≤—Å–ø–æ–º–Ω–∏—Ç—å –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–æ–µ –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ —Ä–µ–ª–∏–∫–≤–∏–∏ –∏–ª–∏ —Ä—É–∏–Ω, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è —á—Ç–æ-—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ. –ú–µ—Å—Ç–æ, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç –∏–ª–∏ —Ä—É–∏–Ω—ã, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–ª–µ–∫–æ –∏–ª–∏ –∂–µ –∫–∏—à–∏—Ç –æ–ø–∞—Å–Ω–æ—Å—Ç—è–º–∏. –ß—Ç–æ–±—ã –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –Ω–µ–≥–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ü–µ–ª–∞—è –∏–≥—Ä–æ–≤–∞—è –ø–∞—Ä—Ç–∏—è.
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">–ì–∞–≤–µ–Ω–∫–∞—Ä</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–•–æ—Ä–æ—à–∏–µ —Å–≤—è–∑–∏ (–í–æ–ª—è)</strong><br>
            –í—Ö–æ–¥—è –≤ –ø–æ—Å–µ–ª–µ–Ω–∏–µ –≤–ø–µ—Ä–≤—ã–µ, —Ç–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å —á–∞—Å –Ω–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Å—Ç–∏ –æ —Å–≤–æ—ë–º –ø—Ä–∏–±—ã—Ç–∏–∏, –∞ –∑–∞—Ç–µ–º —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É <strong>–•–æ—Ä–æ—à–∏—Ö —Å–≤—è–∑–µ–π</strong> —Å–æ –°–õ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ—Å–µ–ª–µ–Ω–∏—è. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Ä–µ–ø—É—Ç–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—Ü–∞ –≤ —ç—Ç–æ–º –ø–æ—Å–µ–ª–µ–Ω–∏–∏ –Ω–∞ 1d6 –Ω–µ–¥–µ–ª—å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤—ã—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π –°–õ, –¥–µ–ª—ë–Ω–Ω–æ–µ –Ω–∞ 2 (–º–∏–Ω–∏–º—É–º 1).
        <br><br>
            <div style="display:inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">–ü–æ—Å–µ–ª–µ–Ω–∏—è</th>
                </tr>
                <tr>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th> <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                </tr>
                <tr>
                    <td>–î–µ—Ä–µ–≤–Ω—è</td> <td>14</td>
                </tr>
                <tr>
                    <td>–ù–µ–±–æ–ª—å—à–æ–π –≥–æ—Ä–æ–¥</td> <td>18</td>
                </tr>
                <tr>
                    <td>–°—Ç–æ–ª–∏—Ü–∞</td> <td>22</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–°–±—ã—Ç—á–∏–∫ (–ò–Ω—Ç)</strong><br>
            –¢–æ—Ä–≥–æ–≤–µ—Ü, –∫–æ—Ç–æ—Ä–æ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –ø—Ä–µ–¥–º–µ—Ç–∞ —Å —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–º –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ–º –∏–ª–∏ –∫—Ä–∞–¥–µ–Ω–æ–≥–æ, –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–°–±—ã—Ç—á–∏–∫</strong> —Å–æ –°–õ, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–π –≤–µ–¥—É—â–∏–º. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Ç–æ—Ä–≥–æ–≤–µ—Ü –ø—Ä–æ–¥–∞—Å—Ç –ø—Ä–µ–¥–º–µ—Ç –ø–æ –ø–æ–ª–Ω–æ–π —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Å—Ç–∞–Ω–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å –ª–∏—à–Ω–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –Ω–µ —Å–¥–∞—Å—Ç —Ç–æ—Ä–≥–æ–≤—Ü–∞ —Å—Ç—Ä–∞–∂–µ.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>–í–æ–∏–Ω—Å–∫–∏–π –¥–æ–ª–≥ (–≠–º–ø)</strong><br>
            –¢–æ—Ä–≥–æ–≤–µ—Ü –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ <strong>–í–æ–∏–Ω—Å–∫–∏–π –¥–æ–ª–≥</strong>, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ—Å–∏—Ç—å –æ –ø–æ–º–æ—â–∏ –≤–æ–∏–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π —É –Ω–µ–≥–æ –≤ –¥–æ–ª–≥—É. –†–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ 3 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ –ø–æ–ª—è—Ö. –í–æ–∏–Ω –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Ç–æ—Ä–≥–æ–≤—Ü–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π, —Ä–∞–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏—é <strong>–í–æ–∏–Ω—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞</strong>, –∏ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª–Ω–∏—Ç –ª—é–±–æ–π –ø—Ä–∏–∫–∞–∑ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–∑—É–º–Ω–æ–≥–æ.
            <br><br>
            <div style="display:inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                    <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                </tr>
                <tr>
                    <th colspan="2">–ê—Ç–∞–∫–∞ –∏ –∑–∞—â–∏—Ç–∞</th>
                </tr>
                <tr>
                    <td>10</td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>14</td>
                    <td>8</td>
                </tr>
                <tr>
                    <td>16</td>
                    <td>10</td>
                </tr>
                <tr>
                    <th colspan="2">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç</th>
                </tr>
                <tr>
                    <td>3</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>5</td>
                </tr>
                <tr>
                    <td>9</td>
                    <td>10</td>
                </tr>
                <tr>
                    <th colspan="2">–û—Ä—É–∂–∏–µ –∏ –±—Ä–æ–Ω—è</th>
                </tr>
                <tr>
                    <td>–ö–æ—Ä–ø—É—Å–Ω–∞—è –±—Ä–æ–Ω—è (–ü–ë 3), –∑–∏—Ä–∏–∫–∞–Ω—Å–∫–∏–π –∫–∏–Ω–∂–∞–ª, —Ä—É—á–Ω–æ–π –∞—Ä–±–∞–ª–µ—Ç –∏ 10 –∞—Ä–±–∞–ª–µ—Ç–Ω—ã—Ö –±–æ–ª—Ç–æ–≤</td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>–ö–æ—Ä–ø—É—Å–Ω–∞—è –±—Ä–æ–Ω—è (–ü–ë 5), –¥–ª–∏–Ω–Ω—ã–π –ª—É–∫ –∏ 30 —Å—Ç—Ä–µ–ª</td>
                    <td>6</td>
                </tr>
                <tr>
                    <td>–ü–æ–ª–Ω—ã–π –ª–∞—Ç–Ω—ã–π –¥–æ—Å–ø–µ—Ö –∏ —Ç–æ—Ä—Ç—É—Ä</td>
                    <td>10</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_ru(num, title, description)
  UNION ALL
  SELECT 'en' AS lang, raw_data_en.*
    FROM (VALUES
            ( 9, 'Merchant', '
<div class="ddlist_option">
<table class="profession_table">
    <tr>
        <td>
            <strong>Vigor:</strong> 0<br><br>
            <strong>Magical Perks:</strong><br>
            <strong class="section-title">None</strong>
        </td>
        <td>
            <strong>Skills</strong>
            <ul>
                <li>[EMP] - Charisma</li>
                <li>[EMP] - Gambling</li>
                <li>[EMP] - Human Perception</li>
                <li>[EMP] - Persuasion</li>
                <li>[INT] - Business</li>
                <li>[INT] - Education</li>
                <li>[INT] - Language (Choose 1)</li>
                <li>[INT] - Streetwise</li>
                <li>[REF] - Small Blades</li>
                <li>[WILL] - Resist Coercion</li>
            </ul>
        </td>
        <td>
            <strong>Gear</strong><br>
            <strong class="section-title">(Pick 3)</strong>
            <ul>
                <li>Crossbow &amp; bolts x20</li>
                <li>Dagger</li>
                <li>Journal</li>
                <li>Large tent</li>
                <li>Merchant‚Äôs tools</li>
                <li>Writing kit</li>
            </ul>
            <br><strong>Special Gear</strong>
            <ul>
                <li>Mule</li>
                <li>Cart</li>
                <li>Common or everyday items worth 1000 crowns</li>
            </ul>
        </td>
    </tr>
</table>

<h3>Defining Skill</h3>
<table class="main_skill">
    <tr>
        <td class="header">Well Traveled (INT)</td>
    </tr>
    <tr>
        <td class="opt_content">
            Your average merchant makes a living from trade, and that trade brings in customers from all around. But a traveling merchant goes to their customers, wandering the roads of the world and learning from its people. A Merchant can make a <strong>Well Traveled</strong> roll any time they want to know a fact about a specific item, culture, or area. The DC is set by the GM, and if the roll is successful the Merchant remembers the answer to that question, calling on memories of the last time they traveled through the applicable area.
        </td>
    </tr>
</table>

<h3>Professional Skills</h3>

<table class="skills_branch_1">
    <tr>
        <td class="header">The Broker</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Options (INT)</strong><br>
            A Merchant can roll <strong>Options</strong> against a DC set by the GM to find a lower price on an item. If they succeed the Merchant finds another person selling the same item for half the price. The higher the item rarity, the higher the DC should be. <strong>Options</strong> does not affect experimental, witcher, or relic items.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Hard Bargain (EMP)</strong><br>
            When bribing a target a Merchant can roll <strong>Hard Bargain</strong> at a DC equal to the opponent‚Äôs WILLx3. If they succeed, they can bribe the opponent with any item they have at hand that is worth 5 crowns. The object always grants +3 to Persuasion. The DC rises by 5 for truly ridiculous bribes.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Promise (EMP)</strong><br>
            When attempting to buy an item, a Merchant can make a <strong>Promise</strong> roll at a DC equal to the Salesperson‚Äôs EMPx3. If they succeed the salesperson accepts the Merchant‚Äôs promise to pay for the item later. This promise holds the salesperson over for a number of weeks equal to your <strong>Promise</strong> ability.
        </td>
    </tr>
</table>

<table class="skills_branch_2">
    <tr>
        <td class="header">The Contact</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Rookery (EMP)</strong><br>
            A Merchant can make a <strong>Rookery</strong> roll at a DC based on the settlement they are in to gain the aid of 1 urchin or vagrant per 1 point they rolled over the DC (maximum 10). These people can be consulted to grant +1 per person on Streetwise rolls. Informants take 1 crown each as payment each time they are consulted.
            <br><br>
            <div style="display:inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">Settlements</th>
                </tr>
                <tr>
                    <th>Value</th> <th>Cost</th>
                </tr>
                <tr>
                    <td>Thorp</td> <td>14</td>
                </tr>
                <tr>
                    <td>Small city</td> <td>18</td>
                </tr>
                <tr>
                    <td>Capital</td> <td>22</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Insider (INT)</strong><br>
            A Merchant with <strong>Insider</strong> can convince a person to spy for them. Spend 10 crowns and roll <strong>Insider</strong> versus the person‚Äôs Resist Coercion roll. If it is successful the person will spy on a target for as many days as your <strong>Insider</strong> value. At the end of this time you can roll again, but must pay again.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Treasure Map (INT)</strong><br>
            Once per session a Merchant can roll <strong>Treasure Map</strong> at a DC set by the GM to remember the supposed location of a relic item, or a ruin that may hide something useful. This location will, of course, be out of the way or exceedingly dangerous, requiring a quest. Reaching this item or ruin should require a full session.
        </td>
    </tr>
</table>

<table class="skills_branch_3">
    <tr>
        <td class="header">The Havekar</td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Well Connected (WILL)</strong><br>
            On first entering a settlement, a Merchant can spend an hour spreading word of their arrival, then roll <strong>Well Connected</strong> at a DC based on the settlement. Success raises their reputation in that settlement by a number equal to the amount you rolled over the DC divided by 2 (minimum 1), for 1d6 Weeks.
            <br><br><div style="display:inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th colspan="2">Settlements</th>
                </tr>
                <tr>
                    <th>Value</th> <th>Cost</th>
                </tr>
                <tr>
                    <td>Thorp</td> <td>14</td>
                </tr>
                <tr>
                    <td>Small city</td> <td>18</td>
                </tr>
                <tr>
                    <td>Capital</td> <td>22</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Fence (INT)</strong><br>
            A Merchant who has to get rid of a dubious or stolen item can make a <strong>Fence</strong> roll at a DC determined by the GM. If they succeed, they sell the item (at full market price) to a buyer who won‚Äôt ask any serious questions and won‚Äôt turn them in to the Guard.
        </td>
    </tr>
    <tr>
        <td class="opt_content">
            <strong>Warrior‚Äôs Debt (EMP)</strong><br>
            A Merchant can roll <strong>Warrior‚Äôs Debt</strong> to call on a fighter who owes them. Split your roll between the 3 sections on the Warrior table in the sidebar. This warrior will work for you for a number of days equal to your <strong>Warrior‚Äôs Debt</strong> value and takes any reasonable order you give without asking questions.
            <br><br>
            <div style="display:inline-block;">
            <table border="1" cellpadding="4" cellspacing="0" class="table-small">
                <tr>
                    <th>Value</th>
                    <th>Cost</th>
                </tr>
                <tr>
                    <th colspan="2">Attack &amp; Defense</th>
                </tr>
                <tr>
                    <td>10</td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>14</td>
                    <td>8</td>
                </tr>
                <tr>
                    <td>16</td>
                    <td>10</td>
                </tr>
                <tr>
                    <th colspan="2">Intelligence</th>
                </tr>
                <tr>
                    <td>3</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>5</td>
                </tr>
                <tr>
                    <td>9</td>
                    <td>10</td>
                </tr>
                <tr>
                    <th colspan="2">Weapons &amp; Armor</th>
                </tr>
                <tr>
                    <td>SP:3 body armor, a zerrikanian dagger &amp; a hand crossbow &amp; 10 arbalet bolts</td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>SP:5 body armor &amp; a longbow with 30 arrows</td>
                    <td>6</td>
                </tr>
                <tr>
                    <td>Full plate &amp; torrrw</td>
                    <td>10</td>
                </tr>
            </table>
            </div>
        </td>
    </tr>
</table>
</div>
')
         ) AS raw_data_en(num, title, description)
)
, ins_title AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS id
       , meta.entity, 'title', raw_data.lang, raw_data.title
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
, ins_description AS (
  INSERT INTO i18n_text (id, entity, entity_field, lang, text)
  SELECT ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description') AS id
       , meta.entity, 'description', raw_data.lang, raw_data.description
    FROM raw_data
    CROSS JOIN meta
  ON CONFLICT (id, lang) DO NOTHING
)
INSERT INTO answer_options (an_id, su_su_id, qu_qu_id, label, sort_order, metadata)
SELECT 'wcc_profession_o' || to_char(raw_data.num, 'FM00') AS an_id,
       meta.su_su_id,
       meta.qu_id,
       ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title') AS label,
       raw_data.num AS sort_order,
       jsonb_build_object(
           'title', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.title')::text),
           'description', jsonb_build_object('i18n_uuid', ck_id(meta.su_su_id ||'.'|| meta.qu_id ||'_o'|| to_char(raw_data.num, 'FM9900') ||'.'|| meta.entity ||'.description')::text)
       ) AS metadata
FROM raw_data
CROSS JOIN meta
ON CONFLICT (an_id) DO NOTHING;


-- <<< END sql/090_profession_09_merchant.sql

-- >>> BEGIN sql/091_shop.sql

\echo '091_shop.sql'
-- –£–∑–µ–ª: –ú–∞–≥–∞–∑–∏–Ω (–∑–∞–∫—É–ø–∫–∞ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º)

-- –ò–µ—Ä–∞—Ä—Ö–∏—è –ø—É—Ç–µ–π (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞)
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
SELECT ck_id('witcher_cc.hierarchy.' || v.path) AS id
     , 'hierarchy' AS entity
     , 'path' AS entity_field
     , v.lang
     , v.text
  FROM (VALUES
          ('equipment', 'ru', '–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ'),
          ('equipment', 'en', 'Equipment')
       ) AS v(path, lang, text)
ON CONFLICT (id, lang) DO NOTHING;

WITH meta AS (
  SELECT 'witcher_cc' AS su_su_id
       , 'wcc_shop' AS qu_id
       , 'questions' AS entity
)
INSERT INTO questions (qu_id, su_su_id, title, body, qtype, metadata)
SELECT meta.qu_id
     , meta.su_su_id
     , NULL
     , NULL
     , 'value_textbox'
     , jsonb_build_object(
         'path', jsonb_build_array(
           ck_id('witcher_cc.hierarchy.equipment')::text
         ),
         'renderer', 'shop',
         'shop', jsonb_build_object(
           -- –û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å: —Ç–æ–ª—å–∫–æ money.crowns
           'budget', jsonb_build_object(
             'currency', 'crowns',
             'path', 'characterRaw.money.crowns'
           ),
           -- –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ DLC (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫)
           'allowedDlcs', jsonb_build_array('core', 'hb', 'dlc_wt', 'exp_bot', 'exp_lal', 'exp_toc', 'exp_wj', 'dlc_prof_peasant', 'dlc_rw1', 'dlc_rw2', 'dlc_rw3', 'dlc_rw4', 'dlc_rw5', 'dlc_sch_manticore', 'dlc_sch_snail', 'dlc_sh_mothr', 'dlc_sh_tai', 'dlc_sh_tothr', 'dlc_sh_wat', 'dlc_wpaw', 'dlc_rw_rudolf'),
           'sources', jsonb_build_array(
             jsonb_build_object(
               'id', 'weapons',
               'title', 'Weapons',
               'table', 'wcc_item_weapons_v',
               'dlcColumn', 'dlc_id',
               'keyColumn', 'w_id',
               'langColumn', 'lang',
               'langPath', 'characterRaw.lang',
               'groupColumn', 'weapon_class',
               'tooltipField', 'effect_descriptions',
               'targetPath', 'characterRaw.gear',
               'columns', jsonb_build_array(
                 jsonb_build_object('field', 'weapon_name', 'label', 'Name'),
                 jsonb_build_object('field', 'weapon_class', 'label', 'Class'),
                 jsonb_build_object('field', 'dmg', 'label', 'Damage'),
                 jsonb_build_object('field', 'weight', 'label', 'Weight'),
                 jsonb_build_object('field', 'price', 'label', 'Price'),
                 jsonb_build_object('field', 'hands', 'label', 'Hands'),
                 jsonb_build_object('field', 'availability', 'label', 'Availability'),
                 jsonb_build_object('field', 'crafted_by', 'label', 'Crafted By'),
                 jsonb_build_object('field', 'concealment', 'label', 'Concealment'),
                 jsonb_build_object('field', 'dmg_types', 'label', 'Damage Types'),
                 jsonb_build_object('field', 'effect_names', 'label', 'Effects'),
                 jsonb_build_object('field', 'dlc', 'label', 'DLC')
               )
             )
           )
         )
       )
  FROM meta
ON CONFLICT (qu_id) DO UPDATE
SET
  su_su_id = EXCLUDED.su_su_id,
  title = EXCLUDED.title,
  body = EXCLUDED.body,
  qtype = EXCLUDED.qtype,
  metadata = EXCLUDED.metadata;

-- –°–≤—è–∑–∏: –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ ‚Äî –º–∞–≥–∞–∑–∏–Ω
INSERT INTO transitions (from_qu_qu_id, to_qu_qu_id)
SELECT 'wcc_profession', 'wcc_shop'
WHERE NOT EXISTS (
  SELECT 1
  FROM transitions t
  WHERE t.from_qu_qu_id = 'wcc_profession'
    AND t.to_qu_qu_id = 'wcc_shop'
);



-- <<< END sql/091_shop.sql
