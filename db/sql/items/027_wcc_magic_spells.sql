\echo '027_wcc_magic_spells.sql'
-- Magic spells (and Witcher Signs) from temp TSV

CREATE TABLE IF NOT EXISTS wcc_magic_spells (
  ms_id              varchar(10) PRIMARY KEY,  -- e.g. 'MS001'
  dlc_dlc_id         varchar(64) NOT NULL REFERENCES wcc_dlcs(dlc_id),

  level_id           uuid NULL,                -- ck_id('level.*')
  element_id         uuid NULL,                -- ck_id('element.*')
  form_id            uuid NULL,                -- ck_id('magic.form.*')
  effect_time_unit_id uuid NULL,               -- ck_id('time.unit.*')

  name_id            uuid NOT NULL,            -- ck_id('witcher_cc.magic.spell.name.'||ms_id)
  effect_id          uuid NOT NULL,            -- ck_id('witcher_cc.magic.spell.effect.'||ms_id)

  distance           text NULL,
  zone_size          text NULL,
  stamina_cast       text NULL,
  stamina_keeping    text NULL,
  damage             text NULL,
  effect_time_value  text NULL,

  defense_ids        uuid[] NULL,              -- array of ck_id('skill.*') / ck_id('parameter.*') used for defense
  type               text NULL                 -- 'spell' for mage spells, 'sign' for witcher signs
);

-- Add type column if it doesn't exist (migration for existing tables)
DO E'\nBEGIN\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns\n    WHERE table_name = ''wcc_magic_spells'' AND column_name = ''type''\n  ) THEN\n    ALTER TABLE wcc_magic_spells ADD COLUMN type text NULL;\n  END IF;\nEND ';

WITH raw_data (
  ms_id, dlc_dlc_id,
  level_key, element_key,
  name_ru, name_en,
  effect_ru,
  form_key,
  distance, zone_size,
  stamina_cast, stamina_keeping,
  damage,
  effect_time_value, effect_time_unit_key,
  defense_1, defense_2, defense_3
) AS ( VALUES
  ('MS001', 'core', 'level.novice', 'element.mixed', 'Зеркало Афана', 'Afan''s Mirror', 'Создаёт 1d10 нематериальных и иллюзорных клонов мага никак внешне не отличимых. - Клоны полностью управляются магом без затраты действия - Клоны не могут покидать радиус действия заклинания.', 'magic.form.zone_circle_around', '', '10', '3', '2', '', '', '', '', '', ''),
  ('MS002', 'core', 'level.novice', 'element.mixed', 'Слепящая пыль', 'Blinding Dust', '<align="left">Позволяет направить в глаза цели горсть магической пыли, которая <b><i>ослепит</i></b> её на время действия заклинания.  <b><i>Ослепленная</i></b> цель получает:   * штраф -3 к броскам (Атаки) и (Защиты)   * штраф -5 к проверкам (Внимания), связанным со зрением. - Нужно потратить ход чтобы восстановить зрение.        </align>', 'magic.form.direct', '4', '', '3', '', '', '1d10', 'time.unit.round', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS003', 'core', 'level.novice', 'element.mixed', 'Рассеивание', 'Dispel', 'Позволяет прекратить действие заклинания/ритуала/порчи - Можно сотворить как действие защиты, чтобы блокировать любые магические атаки. - Нужно выиграть встречную проверку <i>(Сотворения заклинаний)</i> для успеха. - Тратит Вын в размере 1/2 стоимости цели', 'magic.form.direct', '10', '', '', '', '', '', '', 'Сотворение заклинаний', '', ''),
  ('MS004', 'core', 'level.novice', 'element.mixed', 'Очарование', 'Glamour', 'Создаёт иллюзию, благодаря которой вы выглядите сногсшибательно! - Мог получает бонус +3 к    * <i>(Соблазнению)</i>    * <i>(Харизме)</i>    * <i>(Лидерству)</i>', 'magic.form.self', '', '', '5', '', '', '1d6', 'time.unit.hour', '', '', ''),
  ('MS005', 'core', 'level.novice', 'element.mixed', 'Магический компас', 'Magic Compass', 'Позволяет мгновенно определить, в каком направлении находится место, где побывал заклинатель, или же просто указывает на север.', 'magic.form.self', '', '', '3', '', '', '1d6', 'time.unit.hour', '', '', ''),
  ('MS006', 'core', 'level.novice', 'element.mixed', 'Управление чувствами', 'Mind Manipulation', 'Позволяет заставить цель испытывать одно из следующих чувств:  - ненависть - любовь - подавленность - эйфория', 'magic.form.direct', '5', '', '3', '', '', '1d10', 'time.unit.round', 'Сопротивление магии', '', ''),
  ('MS007', 'core', 'level.novice', 'element.mixed', 'Призыв посоха', 'Summon Staff', 'Позволяет телепортировать свой посох в место, где заклинатель был за последний день. - Чтобы призвать посох  обратно нужно еще раз выполнить заклинание.', 'magic.form.self', '', '', '2', '', '', '', '', '', '', ''),
  ('MS008', 'core', 'level.novice', 'element.mixed', 'Телепатия', 'Telepathy', 'Позволяет мысленно общаться с одной целью или читать мысли. - Для телепатии не существует языкового барьера. - Если цель - ведьмак, то его медальон завибрирует. - Если цель - маг, то раз в ход он может заметить слежку выиграв бросок <i>(Магических познаний)</i> против <i>(Сотворения заклинаний)</i>.', 'magic.form.direct', '10', '', '2', '1', '', '', '', '', '', ''),
  ('MS009', 'core', 'level.novice', 'element.earth', 'Сенли Грейг', 'Cenlly Graig', 'Метает острые камни в противника. Количество камней равно броску <i>(Сотворение заклинаний)</i> минус бросок <i>(Защиты)</i> и каждый наносит 1d6 урона.', 'magic.form.direct', '5', '', '3', '', '(1..10)*d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS010', 'core', 'level.novice', 'element.earth', 'Коди Бивид', 'Codi Bywyd', 'Позволяет за один ход вырастить из семечка небольшое взрослое растение, т.е. травы и кусты (в т. ч. для алхимии), но не крупные растения вроде деревьев.', 'magic.form.direct', '4', '', '2', '', '', '', '', '', '', ''),
  ('MS011', 'core', 'level.novice', 'element.earth', 'Магическое обследование', 'Diagnostic Spell', '<align="left">Позволяет быстро оценить состояние здоровья цели:  - Количество оставшихся ПЗ - Какие есть критические ранения - Какие на ней эффекты (отравлена/больна ли цель)</align>', 'magic.form.direct', '5', '', '3', '', '', '', '', '', '', ''),
  ('MS012', 'core', 'level.novice', 'element.earth', 'Каменный шип', 'Earthen Spike', 'Выгоняет из земли каменный шип, пронзая цель снизу. Сталагмит остаётся торчать, пока не будет уничтожен, получив 20 пунктов урона.', 'magic.form.direct', '6', '', '5', '', '5d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS013', 'core', 'level.novice', 'element.earth', 'Дыхание Кората', 'Korath''s Breath', 'Метает обжигающую дробь разбитой скалы или земли близ заклинателя, чем <b><i>ослепляет</i></b> цели на 1d6 раундов.', 'magic.form.zone_cone', '', '3', '2', '', '', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS014', 'core', 'level.novice', 'element.earth', 'Перо Лютиэнь', 'Luthien''s Quill', 'Позволяет начертать буквы или рисунок на любой твёрдой поверхности. Нельзя использовать на живых существах.', 'magic.form.direct', '1', '', '2', '', '', '', '', '', '', ''),
  ('MS015', 'core', 'level.novice', 'element.earth', 'Магическое исцеление', 'Magic Healing', 'Эффект на выбор: - Восстанавливает 3 ПЗ за ход. - Лечит крит.ранения, для чего нужно применить спелл [уровень раны]*2+2 раз со <b>Сл:</b>[уровень раны]*2+12, а потом отдых для избавления от штрафов раны (не меньше одного дня): 1) Легкая: 8 - <b>ТЕЛ</b> дней 2) Средняя: 12 - <b>ТЕЛ</b> дней 3) Тяжёлая: 15 - <b>ТЕЛ</b> дней 4) Смертельная: штраф навсегда', 'magic.form.direct', '2', '', '5', '', '', '1d10', 'time.unit.round', '', '', ''),
  ('MS016', 'core', 'level.novice', 'element.earth', 'Тюрьма Тальфрина', 'Talfryn''s Prison', 'Опутывает цель корнями. Их можно уничтожить, у них 15ПЗ. Чтобы выпутаться, можно раз в ход пробросить <i>(Уклонение)</i> больше, чем было в броске <i>(Сотворения заклинаний)</i> при создании тюрьмы.', 'magic.form.direct', '10', '', '3', '', '', '', '', 'Уклонение', '', ''),
  ('MS017', 'core', 'level.novice', 'element.air', 'Адэнидд', 'Adenydd', 'Маг становится легче и планирует вместо падения, не получая урон. Можно двигаться в сторону на то же расстояние, что и вниз.', 'magic.form.self', '', '', '4', '2', '', '', '', '', '', ''),
  ('MS018', 'core', 'level.novice', 'element.air', 'Воздушный пузырь', 'Air Pocket', 'Создаёт пузырь свежего воздуха под водой или в зоне, где обычно чистого воздуха не бывает.', 'magic.form.zone_circle', '12', '1', '3', '', '', '2d10', 'time.unit.round', '', '', ''),
  ('MS019', 'core', 'level.novice', 'element.air', 'Шквал Бронвина', 'Bronwyn''s Gust', 'Наносит собственный урон и отталкивает цель на бросок <i>(Сотворения заклинаний)</i> минус бросок <i>(Защиты)</i> метров.  При столкновении цель получает также урон таранящего удара, то есть [половина дистанции отбрасывания]d6 умноженный на модификатор веса цели.   Модификаторы: 0.5 - Накер, кошка и т.д. 1 - Человек и т.д. 2 - Волколак, Эндриага и т.д. 3 - Главоглаз, Тролль и т.д.', 'magic.form.direct', '2', '', '2', '', '1d6', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS020', 'core', 'level.novice', 'element.air', 'Освежение воздуха', 'Freshen Air', 'Пока дествует, ощичает воздух от дыма, яда или любого другого загрязнения.', 'magic.form.zone_circle_around', '', '4', '2', '2', '', '', '', '', '', ''),
  ('MS021', 'core', 'level.novice', 'element.air', 'Убежище Уриена', 'Urien''s Shelter', 'Отменяет все эффекты плохой погоды: экстремальную жару, экстремальный холод, дождь и снег.', 'magic.form.zone_circle_around', '', '8', '3', '', '', '1d6', 'time.unit.hour', '', '', ''),
  ('MS022', 'core', 'level.novice', 'element.air', 'Статическая буря', 'Static Storm', 'Любой персонаж, кроме самого мага, получает 2 урона статическим электричеством за раунд, если держит или одет в металл.', 'magic.form.zone_circle_around', '', '5', '5', '', '2', '2d6', 'time.unit.round', '', '', ''),
  ('MS023', 'core', 'level.novice', 'element.air', 'Телекинез', 'Telekinesis', 'Позволяет перемещать потоками воздуха предмет весом 5*<i>(Сотворение заклинаний) </i>кг по воздуху. Можно дистанционно применить предмет по назначению, используя вместо нужного навыка <b>ВОЛ</b>+<i>(Сотворение заклинаний)</i> со штрафом -3, а для точных действий даже -5. Бросить предмет можно используя <b>ВОЛ</b> вместо <b>ТЕЛ</b>.', 'magic.form.direct', '5', '', '3', '2', '', '', '', '', '', ''),
  ('MS024', 'core', 'level.novice', 'element.air', 'Зефир', 'Zephyr', 'Наносит собственный урон и отталкивает всех на 6 метров.  При столкновении цель получает также урон таранящего удара, то есть 3d6 умноженный на модификатор веса цели.   Модификаторы: 0.5 - Накер, Кошка и т.д. 1 - Человек и т.д. 2 - Волколак, Эндриага и т.д. 3 - Главоглаз, Тролль и т.д.', 'magic.form.zone_circle', '', '2', '5', '', '1d6', '', '', '', '', ''),
  ('MS025', 'core', 'level.novice', 'element.fire', 'Энье', 'Aenye', 'Метнуть Огненный шар в цель.  - Шанс <b><i>поджечь</i></b> цель - 75%.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.direct', '12', '', '5', '', '4d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS026', 'core', 'level.novice', 'element.fire', 'Айна Версеос', 'Aine Verseos', 'Создаёт зону яркого света.  Яркий свет имеет эффекты: - Сложность в применении навыков возрастает на +2. - Штраф -3 к <i>(Вниманию)</i>. - Штраф -3 к <i>(Атаке)</i> и <i>(Защите)</i>, если смотреть на источник света.', 'magic.form.zone_circle_around', '', '4', '1', '2', '', '', '', '', '', ''),
  ('MS027', 'core', 'level.novice', 'element.fire', 'Огненное клеймо', 'Brand of Fire', 'Наносит на обнажённую кожу клеймо с простым символом или словом. - Оставляет большой шрам на всю жизнь - Нечитаемым текст может сделать хирург (Лечащим прикосновением) со <b>Сл:15</b>.', 'magic.form.direct', '8', '', '4', '', '1d6', '', '', '', '', ''),
  ('MS028', 'core', 'level.novice', 'element.fire', 'Хватка Кадфана', 'Cadfan''s Grasp', 'Нагревает металлический предмет.  - Можно заставить кого-то уронить предмет. Если цель отказывается, то получает 2d6 урона по держащей руке. - Можно усилить оружие +2d6 урона и 50%-ным шанс <b><i>поджога</i></b>.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.direct', '8', '', '4', '', '', '1d6', 'time.unit.round', '', '', ''),
  ('MS029', 'core', 'level.novice', 'element.fire', 'Магическая вспышка', 'Magic Flare', '<align="left">Вспышка над головой мага <b><i>ослепляет</i></b> всех вокруг на 1d6 раундов. - Вспышку видно на расстоянии 10 километров.  <b><i>Ослепленная</i></b> цель получает:   * штраф -3 к броскам (Атаки) и (Защиты)   * штраф -5 к проверкам (Внимания), связанным со зрением.</align> - Нужно потратить ход чтобы восстановить зрение.', 'magic.form.zone_circle', '', '8', '2', '', '', '', '', 'Сопротивление магии', '', ''),
  ('MS030', 'core', 'level.novice', 'element.fire', 'Управление пламенем', 'Raise Flames', 'Управляет уже существующим пламенем. Эффект на выбор: - Усиляет или ослабляет урон на единицу. - Распространяет его на 2 метра за раунд.', 'magic.form.direct', '10', '', '3', '2', '', '', '', '', '', ''),
  ('MS031', 'core', 'level.novice', 'element.fire', 'Танио Ильхар', 'Tanio Ilchar', 'Вполохом пламени <b><i>поджигает</i></b> все цели в зоне поражения с вероятностью 100%.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.zone_square', '8', '2', '3', '', '', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS032', 'core', 'level.novice', 'element.fire', 'Волна огня', 'Wave of Fire', 'Атака огнём с шансом поджечь 50%.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.zone_cone', '', '3', '4', '', '2d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS033', 'core', 'level.novice', 'element.water', 'Град Кэрис', 'Carys'' Hail', 'Метает от 1 до 5 ледяных осколков в одного противника. Количество осколков - бросок  <i>(Сотворение заклинаний)</i> минус бросок <i>(Защиты)</i>. Вероятность цели заморозки от шипа 25%. Каждый осколок - отдельная атака.', 'magic.form.direct', '5', '', '3', '', '(1..5)*d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS034', 'core', 'level.novice', 'element.water', 'Управление водой', 'Control Water', 'Управляем направлением и скоростью течения. Замедления плавающих целей вдвое, ускорения кораблей в 1.5 раза, или даже замедления или остановка течения. Сложность определяет мастер.', 'magic.form.direct', '10', '', '5', '2', '', '', '', 'СЛ от ведущего', '', ''),
  ('MS035', 'core', 'level.novice', 'element.water', 'Проклятие Седны', 'Curse of Sedna', 'Создаёт водоворот. Цель каждый раунд защищается <i>(Плаванием)</i> против <i>(Сотворения заклинаний)</i> чтобы не оказаться под водой и не начать <b><i>задыхаться</i></b>,  т.е. получать 3 не блокируемого урона за раунд.', 'magic.form.zone_circle', '12', '5', '5', '2', '', '', '', 'Атлетика', '', ''),
  ('MS036', 'core', 'level.novice', 'element.water', 'Туман Дормина', 'Dormyn''s Fog', 'Создаёт зону плотного тумана. Все получают штраф -3 к <i>(Вниманию)</i>, а радиус обзора уменьшается до 4 метров.', 'magic.form.zone_circle_around', '', '10', '3', '2', '', '', '', '', '', ''),
  ('MS037', 'core', 'level.novice', 'element.water', 'Ливень', 'Downpour', 'Вызывает сильный дождь, заливающий любое открытое пламя и отменяет все эффекты <i><b>горения</b></i>.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.zone_circle', '8', '10', '2', '2', '', '', '', '', '', ''),
  ('MS038', 'core', 'level.novice', 'element.water', 'Гололёд', 'Ice Slick', 'Покрывает поверхность льдом. Любой ступивший на него падает подскальзнувшись, провалив проверку <i>(Атлетики) </i>против <i>(Сотворения заклинаний)</i> мага.', 'magic.form.zone_square', '10', '2', '2', '', '', '2d10', 'time.unit.round', 'Атлетика', '', ''),
  ('MS039', 'core', 'level.novice', 'element.water', 'Пиро Дюр', 'Puro Dwr', 'Очищает воду от яда и болезней, оставляя живых существ. Если очищаемой воды меньше куба, то она останется чистой.', 'magic.form.zone_cube', '4', '1', '2', '', '', '1d10', 'time.unit.round', '', '', ''),
  ('MS040', 'core', 'level.novice', 'element.water', 'Рьеви', 'Rhewi', '<b><i>Замораживает</i></b> живую цель, а неживую цель невозможно передвинуть или ею манипулировать.', 'magic.form.direct', '8', '', '2', '', '', '1d10', 'time.unit.round', 'Уклонение', 'Атлетика', ''),
  ('MS041', 'core', 'level.journeyman', 'element.mixed', 'Метод Эйльхарт', 'Eilhart''s Technique', 'Вы извлекаете из памяти цели одну тайну. - При крит.провале защиты цели, её <b>ИНТ</b> навсегда снижается на единицу.', 'magic.form.direct', '3', '', '12', '', '', '', '', 'Сопротивление магии', '', ''),
  ('MS042', 'core', 'level.journeyman', 'element.mixed', 'Иллюзия', 'Illusion', 'Создает визуальную иллюзию. - Иллюзия бесшумна, не пахнет и неосязаема. - При крит.провале защиты любой зритель не только видит, но и верит в её реальность.', 'magic.form.zone_circle_around', '', '20', '8', '4', '', '', '', 'Сопротивление магии', '', ''),
  ('MS043', 'core', 'level.journeyman', 'element.mixed', 'Телепортация', 'Teleportation', '<align="left">Переносит мага без пассажира на любую дистанцию. - Вещи можно перенести только те, что в руках или на себе. - Если цель - знакомое место    * <b>Сл:15</b>    * При провале: телепортирует в случайное место в радиусе 1d10 км. - Если цель - незнакомое место    * Нужен предмет из этого места    * <b>Сл:20</b>    * При провале: телепортирует в случайное место в радиусе 3d10 км.</align>', 'magic.form.self', '', '', '10', '', '', '', '', 'СЛ от ведущего', '', ''),
  ('MS044', 'core', 'level.journeyman', 'element.earth', 'Теория Эльгана', 'Elgan''s Theory', 'Делает металлический объект магнитом. Любой металл в зоне действия притягивается и «прилипает» к нему, увеличивая также его вес. Оторвать предмет можно бросив Силу со <b>Сл:18</b>.', 'magic.form.zone_circle', '8', '2', '10', '', '', '2d10', 'time.unit.round', '', '', ''),
  ('MS045', 'core', 'level.journeyman', 'element.earth', 'Ристр Грейг', 'Rhwystr Graig', '- Создает каменную стену размером 2 на 3 метра с 30 ПБ. - Прежде чем урон попадет в скрывающуюся за стеной цель, он будет снижен на текущее значение ПБ стены. Далее урон взаимодействует с нательной бронёй цели по обычным правилам. - При успешном пробитии ПБ стены снижается на 1. - Когда ПБ снизится до нуля, стена будет разрушена.', 'magic.form.direct', '20', '', '15', '', '', '', '', '', '', ''),
  ('MS046', 'core', 'level.journeyman', 'element.earth', 'Землетрясение Стаммельфорда', 'Stammelford''s Earthquake', 'Корёжит землю. - Накладывает на цели штрафы к <b>РЕА</b> -2 и к <b>СКОР</b> -3. - Шанс 10% обрушения мелких строений. - Каждый ход цели через бросок <i>(Атлетики)</i> пытаются не провалиться под землю. Провалившись, начинают <b><i>задыхаться</i></b>, т.е. получать 3 не блокируемого урона за раунд. - Земля остается искорёженной.', 'magic.form.zone_circle', '30', '10', '12', '', '', '1d10', 'time.unit.round', 'Атлетика', '', ''),
  ('MS047', 'core', 'level.journeyman', 'element.air', 'Гром Альзура', 'Alzur''s Thunder', 'Метает молнию с 75%-ным шансом <b><i>горения</i></b> сквозь несколько целей по прямой. Каждой следующей на 1d6 меньше урона.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.direct', '25', '', '15', '', '8d6', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS048', 'core', 'level.journeyman', 'element.air', 'Гвинт Троэдли', 'Gwynt Troelli', 'Барьером из ветра блокирует дистанционные атаки, отбрасывая снаряд на 8 метров в случайном направлении, если бросок атаки не превысил <i>(Сотворение заклинаний)</i>.', 'magic.form.zone_circle_around', '', '10', '12', '4', '', '', '', '', '', ''),
  ('MS049', 'core', 'level.journeyman', 'element.air', 'Удушение', 'Suffocate', '- <b><i>Душит</i></b> цель, нанося 1d10 не блокируемого урона каждый раунд. - Цель <b><i>ошеломлена</i></b>. То есть получает штраф -2 к Атаке и Защите, потеряв равновесие. Получив удар или отвлекшись, маг прерывает заклинание.', 'magic.form.direct', '10', '', '14', '4', '1d10', '', '', 'Сопротивление магии', '', ''),
  ('MS050', 'core', 'level.journeyman', 'element.fire', 'Вспышка Деметии Крест', 'Demetia''s Crest Surge', 'Создает огненный щит вокруг мага. - Блокируют 2*<i>(Сотворение заклинаний)</i> заклинаний воды. - Уничтожает снаряды - Не проницаем для живых существ.', 'magic.form.zone_circle_around', '', '10', '12', '4', '', '', '', '', '', ''),
  ('MS051', 'core', 'level.journeyman', 'element.fire', 'Пылающий вихрь', 'Flaming Vortex', 'Создаёт пылающее управляемое торнадо.  - Перемещается на <i>(Сотворение заклинаний)</i> метров за ход. - При контакте у цели 50% шанс <b><i>загореться</i></b>. - Вихрь не уходит дальше дистанции заклинания.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.zone_circle', '10', '1', '15', '4', '5d6', '', '', 'Уклонение', '', ''),
  ('MS052', 'core', 'level.journeyman', 'element.fire', 'Сейриф Хайдь', 'Seirff Haul', 'Несколько огненных змей берут цель в <b><i>захват</i></b> и та <b><i>горит</i></b> - Каждый ход можно предпринимать попытку выбраться броском <i>(Уклонения)</i> против <i>(Сотворения заклинаний)</i> - Каждый ход <b>Сл</b> для броска (Уклонения) растёт на 1. Змеи опоясывают всё туже.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя. <b><i>Захваченная</i></b> цель не может ходить и получает штраф -2 ко фсем физическим действиям.', 'magic.form.direct', '10', '', '10', '', '', '2d10', 'time.unit.round', 'Уклонение', '', ''),
  ('MS053', 'core', 'level.journeyman', 'element.water', 'Аньядьх', 'Anialwch', 'Частично вытягивает жидкость из цели. Наносит одновременно равный смертельный и не смертельный урон.', 'magic.form.direct', '10', '', '8', '', '4d6', '', '', 'Сопротивление магии', '', ''),
  ('MS054', 'core', 'level.journeyman', 'element.water', 'Градобитие Меригольд', 'Merigold''s Hailstorm', 'Создаёт зону мощного града. Цели каждый ход получают урон в случайную часть тела, если проваливают защиту.', 'magic.form.zone_circle', '', '30', '15', '4', '2d6', '', '', 'Уклонение', '', ''),
  ('MS055', 'core', 'level.journeyman', 'element.water', 'Волны Нагльфара', 'Waves of the Naglfar', 'Создаёт волну ледяной магии, <b><i>замораживая</i></b> цели со всех сторон.', 'magic.form.zone_circle', '', '3', '10', '', '4d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS056', 'core', 'level.master', 'element.mixed', 'Мысленный приказ', 'Mental Command', 'Цель выполняет мысленный приказ мага.  - Цель получает +5 к <i>(Сопротивлению магии)</i>, если приказано, что-то, что она никогда бы не сделала. - Цель сопротивляется каждые 1d6 ходов.', 'magic.form.direct', '10', '', '25', '', '', '', '', 'Сопротивление магии', '', ''),
  ('MS057', 'core', 'level.master', 'element.mixed', 'Магический портал', 'Standing Portal', '<align="left">Создает портал - Размер: 1x2 метра - Дальность: неограниченная - Можно пронести любые вещи - Отключенный во время прохождения портал наносит крит. рану "потеря конечности" или разрубит вещь надвое. - Если цель - знакомое место, то портал открывается с лёгкостью. - Если цель - незнакомое место    * Нужен предмет из этого места    * Нужна проверка <i>(Сотворения заклинаний)</i> со <b>Сл:20</b>    * При провале: портал ведет в случайное место в радиусе 3d10 км.</align>', 'magic.form.direct', '10', '', '22', '6', '', '', '', 'СЛ от ведущего', '', ''),
  ('MS058', 'core', 'level.master', 'element.earth', 'Полиморфизм', 'Polymorphism', 'Превращает мага в змею, кошку, птицу или собаку с их параметрами, но сохраняя инвентарь. Возврат требует снова сотворить заклинание, но невозможен во время контакта с двимеритом.', 'magic.form.self', '', '', '22', '', '', '', '', '', '', ''),
  ('MS059', 'core', 'level.master', 'element.earth', 'Трансмутация', 'Transmutation', 'Превращает один металл в другой (кроме двимерита), а самоцвет - в совершенный самоцвет.', 'magic.form.direct', '2', '', '25', '', '', '', '', '', '', ''),
  ('MS060', 'core', 'level.master', 'element.air', 'Дервиш', 'Dervish', '- Барьером из ветра блокирует дистанционные атаки, отбрасывая снаряд на 8 метров в случайном направлении, если бросок атаки не превысил бросок <i>(Сотворения заклинаний)</i> - Контактируя с целью наносит  урон 1d6 и отталкивает на 6 метров.  - При столкновении цель получает также урон таранящего удара, то есть 3d6 умноженный на модификатор веса цели.  Маг может только спокойно ходить.', 'magic.form.zone_circle_around', '', '2', '22', '6', '1d6', '', '', 'Атлетика', '', ''),
  ('MS061', 'core', 'level.master', 'element.air', 'Гроза', 'Lightning Storm', 'Каждый ход гроза с шансом 35% бьет молнией по каждой цели (кроме мага). В момент удара цель может попытаться увернуться чтобы не получить урон с 75% шансом <b><i>загореться</i></b>.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.zone_circle', '', '20', '25', '6', '8d6', '', '', 'Уклонение', '', ''),
  ('MS062', 'core', 'level.master', 'element.fire', 'Огонь Мельгара', 'Melgar''s Fire', 'Град из огненных шаров. - Каждый ход с шансом 75% бьет каждую цель (кроме мага) огненным шаром. - Провалив бросок <i>(Защиты)</i>, цель получает урон и с шансом 75% начинает <i><b>гореть</b></i>.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.zone_circle', '', '40', '25', '', '4d6', '2d6', 'time.unit.round', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS063', 'core', 'level.master', 'element.fire', 'Зеркальный эффект', 'Mirror Effect', 'Бьёт не реагирующим на ветер лучом света. - При блокировании луч уничтожает преграду. Но если преградой служит зеркало, то лишь отклоняется в случайном направлении, а зеркало получает урон. - Для каста нужно Солнце, не работает в темноте. - При Луне и пасмурном дне только половина урона.', 'magic.form.direct', '20', '', '25', '', '10d6', '2d6', 'time.unit.round', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS064', 'core', 'level.master', 'element.water', 'Расступление вод', 'Part Water', 'Заставляет воду расступиться (объем до 10x100x10 метров), отгоняя с водой и живых существ (включая мага, если тот в той воде). Стена воды свободно проницаема.', 'magic.form.zone_cube', '10', '10, 100', '25', '6', '', '', '', '', '', ''),
  ('MS065', 'core', 'level.master', 'element.water', 'Трифери Геаф', 'Tryferi Gaeaf', 'Метает 0.5*<i>(Сотворение заклинаний)</i> двухметровых ледяных шипов с 20 прочности. Можно в разные цели. Пробив броню шип замораживает цель, причиняя 2 урона в ход пока не изъят (бросок <i>(Силы)</i> <b>Сл:20</b>), не разрушен, или не кончится заклинание. Каждый шип - отдельная атака.', 'magic.form.direct', '20', '', '22', '', 'x*5d6', '1d10', 'time.unit.round', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS094', 'core', 'level.novice', 'element.mixed', 'Ирден', 'Yrden', 'Создает вокруг заклинателя магический круг, влияющий на цели, пока те в круге. - Вошедшие (кроме заклинателя) получают штраф -[X/2] к <b>СКОР</b> и <b>РЕА</b>, где X - количество вложенной <b>ВЫН</b>. Дробное значение округляется вверх. - Бесплотные существа стано-вятся материальными.', 'magic.form.zone_circle', '', '3', '1-7', '', '', '5', 'time.unit.round', '', '', ''),
  ('MS095', 'core', 'level.novice', 'element.air', 'Аард', 'Aard', 'Аард выпускает волну телекинетической силы. - Все пораженные цели <b><i>ошеломлены</i></b>. То есть получают штраф -2 к <i>(Атаке)</i> и <i>(Защите)</i>, до следующего своего хода. - Шанс <b><i>сбить с ног</i></b> равен X*10%, где X равен количеству вложенных очков <b>ВЫН</b>. Сбитая с ног цель получает еще штраф -2 к (Атаке) и (Защите) пока не потрати перемещение на то чтобы встать.', 'magic.form.zone_cone', '', '2', '1-7', '', '', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS096', 'core', 'level.novice', 'element.fire', 'Игни', 'Igni', 'Игни испускает волну огня и искр. - Урон равен Xd6, где X - количество очков вложенной <b>ВЫН</b>. - Шанс <b><i>поджечь</i></b> цель 50 %. - Урон по туловищу, но при касте в упор можно выбрать часть тела.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.zone_cone', '', '2', '1-7', '', 'X*d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS097', 'core', 'level.novice', 'element.water', 'Аксий', 'Axii', '<b><i>Дезориентирует</i></b> цель. - Штраф -[X/2] для цели на прохождение испытания <i>(Устойчивости)</i>, где X - количество вложенной <b>ВЫН</b>. Дробное значение округляется вверх. - Можно использовать как <i>(Убеждение)</i>, кидая вместо него <i>(Сотворение заклинаний)</i> и защищаясь <i>(Сопротивлением магии)</i>. Голова и руки мага при этом окутывает заметное свечение.', 'magic.form.direct', '8', '', '1-7', '', '', '', '', 'Сопротивление магии', '', ''),
  ('MS098', 'core', 'level.novice', 'element.earth', 'Квен', 'Quen', 'Создает магический щит с [5*X] ПЗ, где X - очки вложенной <b>ВЫН</b>. - Любой урон сперва идет в Квен. - Квен разрушает и смертельный, и не смертельный урон. - Применим против заклинаний с возможностью блокирования. - Не действует на урон статусом (яд, гипоксия, огонь и т.д.). - Нельзя сотворить новый щит Квен, пока действует старый.', 'magic.form.self', '', '', '1-7', '', '', '10', 'time.unit.round', '', '', ''),
  ('MS099', 'core', 'level.journeyman', 'element.mixed', 'Магическая ловушка', 'Magic Trap', '<align="left">Продвинутое владение Ирден создает магическую ловушку. - Каждый раунд ловушка атакует ближайшую цель. - Атаке может подвергнуться только вражеская цель. - На подготовку уходит 1 раунд - Ловушка действует столько раундов, сколько очков <b>ВЫН</b> было вложено в знак.</align>', 'magic.form.zone_circle', '', '3', '1-7', '', '3d6', '1-7', 'time.unit.round', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS100', 'core', 'level.journeyman', 'element.air', 'Сметающий Аард', 'Aard Sweep', 'Продвинутое владение Аардом создает выброс телекине-тической силы в форме сферы. - Все цели в радиусе действия <b><i>ошеломлены</i></b>. - Шанс сбить с ног равен X*10%, где X - количество вложенных очков <b>ВЫН</b>. - Летающие существа получают урон от падения в количестве [H/2]d6, где H - высота падения в метрах.', 'magic.form.zone_circle', '', '4', '1-7', '', '', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS101', 'core', 'level.journeyman', 'element.fire', 'Огненный поток', 'Fire Stream', 'Продвинутое владение Игни испускает сплошной поток огня. - Урон равен Xd6, где X - очки <b>ВЫН</b>, вложенные в знак.  - Поддержание потока стоит половину вложенных очков <b>ВЫН</b>, округляя вверх. - Шанс <b><i>поджечь</i></b> цель 75%. - В свой ход маг может сменить цель. - Поток можно прицельно направлять в часть тела.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.direct', '3', '', '1-7', '1-4', 'X*d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS102', 'core', 'level.journeyman', 'element.water', 'Марионетка', 'Puppet', 'Продвинутое владение Аксием позволяет управлять разумом цели, даля её союзной. - Длится влияние X раундов, где X - количество окчков вложенной <b>ВЫН</b>. - Каждый раунд цель бросает проверку <i>(Сопротивления магии)</i>, пытаясь освободиться.', 'magic.form.direct', '8', '', '1-7', '', '', '1-7', 'time.unit.round', 'Сопротивление магии', '', ''),
  ('MS103', 'core', 'level.journeyman', 'element.earth', 'Активный щит', 'Active Shield', '<align="left">Продвинутое владение Квен создаёт сияющий щит вокруг заклинателя c [10*X] ПЗ, где X - очки вложенной <b>ВЫН</b>.  - Цена поддержки равна цене каста. - Защищает кроме мага и одну  прижавшуюся цель. - Все предметы разрушаются, если проходят через щит. - Бегать нельзя, только ходить. - Если щит сбит или прекращен, то:    * В радиусе 2 метров всё (и союзники) получает урон 1d6 в торс.    * Если предмет легче 226кг и не закреплен, то отбрасывается на 2 метра.</align>', 'magic.form.self', '', '', '1-7', '1-7', '1d6', '', '', '', '', ''),
  ('MS125', 'exp_toc', 'level.novice', 'element.mixed', 'Алхимическое восстановление', 'Alchemical Recovery', 'При провале крафта алхимии восстанавливает одно из веществ. - Нельзя применить к одному проекту дважды. - Можно использовать вместе со стандартным этапом восстановления.', 'magic.form.direct', '2', '', '2', '', '', '', '', '', '', ''),
  ('MS126', 'exp_toc', 'level.novice', 'element.mixed', 'Изъян', 'Blemish', 'Создает небольшую иллюзию на цели, делая её не привлекательой. - Цель получает штраф -3 к проверкам    * <i>(Соблазнения)</i>    * <i>(Харизмы)</i>    * <i>(Лидерства)</i> - Цель не подозревает об изъяне, но может узнать от других или пробросить <i>(Внимательность)</i> со <b>Сл:16</b>, глядя в отражение.', 'magic.form.direct', '4', '', '5', '', '', '1d6', 'time.unit.round', 'Сопротивление магии', '', ''),
  ('MS127', 'exp_toc', 'level.novice', 'element.mixed', 'Обнаружение лей-линий', 'Detect Ley Lines', 'Позволяет найти ближайшую Лей-линию, посылая магический импульс. Рука мага указывает в направлении ближайшей Лей-линии, и он чувствует с каким элементом она связана.', 'magic.form.zone_circle', '', '1609', '2', '', '', '', '', '', '', ''),
  ('MS128', 'exp_toc', 'level.novice', 'element.mixed', 'Погибель Фергуса', 'Fergus'' Demise', 'Позволяет пытать цель, вызывая группу волшебных игл, которые повинуются вашим командам. - Можно использовать для допроса, тогда можно использовать проверку <i>(Сотворения заклинаний)</i> вместо <i>(Запугивания)</i>.', 'magic.form.direct', '2', '', '4', '', '', '1', 'time.unit.hour', '', '', ''),
  ('MS129', 'exp_toc', 'level.novice', 'element.mixed', 'Удержание языка', 'Hold Tongue', 'Губы цели склеены, а язык парализован. - Маг, жрец и друид не могут творить магию, если навык <i>(Сотворения заклинаний)</i> ниже 7.  - Цель сопротивляется против нового броска <i>(Сотворения Заклинаний)</i> каждый ход.', 'magic.form.direct', '10', '', '5', '', '', '10', 'time.unit.minute', 'Сопротивление магии', '', ''),
  ('MS130', 'exp_toc', 'level.novice', 'element.mixed', 'Магический заслон', 'Magic Screen', 'Создает иллюзию, скрывая или изменяя объекты. - Изменение только визуальное - Заклинание может быть рассеяно или прерваться, если какой-либо объект покинул зону действия. - Цель может распознать иллюзию и посмотреть сквозь неё, подойдя на 4 метра и успешно бросив проверку <i>(Сопротивления магии)</i>.', 'magic.form.zone_cube', '4', '2', '3', '', '', '', '', 'Сопротивление магии', '', ''),
  ('MS131', 'exp_toc', 'level.novice', 'element.mixed', 'Переоткрытие портала', 'Reopen Portal', 'Вновь открывает не активные порталы.    * Стационарный постоянный портал. Сложность проверки <i>(Сотворения заклинаний)</i> <b>Сл:16</b>    * Устанавливаемый портал другого пользователя магии, если тот закрылся не более 30 секунд назад.  Сложность проверки <i>(Сотворения заклинаний)</i> <b>Сл:20</b>.', 'magic.form.direct', '2', '', '6', '', '', '1', 'time.unit.round', 'СЛ от ведущего', '', ''),
  ('MS132', 'exp_toc', 'level.novice', 'element.mixed', 'Метод Саволлы', 'Savolla''s Method', 'Разрушает ткани трупа, отслаивая при этом мутагенные соединения и те слегка светятся в теле цели. - Позволяет извлечь мутаген с  проверкой <i>(Алхимии)</i> или <i>(Подготовкой ведьмака)</i> со <b>Сл:14</b>.', 'magic.form.direct', '2', '', '5', '', '', '', '', '', '', ''),
  ('MS133', 'exp_toc', 'level.novice', 'element.earth', 'Крифхау', 'Cryfhau', 'Уплотняет материал, повышая текущее и максимальное значение ПБ укрытия на 5. Уплотнить один участок можно лишь раз.', 'magic.form.zone_cube', '2', '2', '4', '', '', '', '', '', '', ''),
  ('MS134', 'exp_toc', 'level.novice', 'element.earth', 'Земляной столб', 'Earthen Pillar', '- Поднимает куб земли из земляной поверхности, являющейся укрытием с 10 ПБ. - Прежде чем урон попадет в скрывающуюся за стеной цель, он будет снижен на текущее значение ПБ столба. Далее урон взаимодействует с нательной бронёй цели по обычным правилам. - При успешном пробитии ПБ столба снижается на 1. - Когда ПБ снизится до нуля, столб будет разрушен.', 'magic.form.zone_cube', '10', '2', '4', '', '', '', '', '', '', ''),
  ('MS135', 'exp_toc', 'level.novice', 'element.earth', 'Обострение чувств', 'Sharpen Senses', 'Вы немедленно получаете преимущества: - Ночное зрение: нет штрафа -2 к <i>(Вниманию)</i> и +2 к <b>Сл</b> при слабом освещении.  - Способность отслеживания запахов. - Хороший слух: бонус +2 к броскам на <i>(Внимание)</i>.  Однако яркий свет или громкий шум вызовут эффект <b><i>ошеломления</i></b>.', 'magic.form.self', '', '', '2', '', '', '30', 'time.unit.minute', '', '', ''),
  ('MS136', 'exp_toc', 'level.novice', 'element.earth', 'Размягчение Земли', 'Soften Earth', 'Превращает землю в трясину или зыбучие пески. Штраф -2 к <i>(Уклонению)</i> и <i>(Атлетике)</i> из-за того, что становится трудно передвигаться.', 'magic.form.zone_cube', '10', '6', '2', '', '', '2d10', 'time.unit.round', '', '', ''),
  ('MS137', 'exp_toc', 'level.novice', 'element.air', 'Бронвинский лук', 'Bronwyn''s Bow', 'Призывает поток воздуха для метания метательного оружия, стрелы/болта или бомбы с использованием <i>(Сотворения заклинаний)</i>. Стрела/болт дают дополнительно 4d6.урона.', 'magic.form.direct', '50', '', '5', '', '', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS138', 'exp_toc', 'level.novice', 'element.air', 'Пылевое покрытие', 'Dust Coating', 'Создает облако пыли, выявляющее невидимых существ на один раунд, плюс одной цели может отменить невидимость, облепив пылью, если та не смогла защититься.', 'magic.form.zone_cube', '20', '10', '3', '2', '', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS139', 'exp_toc', 'level.novice', 'element.air', 'Легкие ноги', 'Light Feet', 'Увеличивает скорость мага на 5, бег на 15, прыжок на 3.', 'magic.form.self', '', '', '2', '2', '', '', '', '', '', ''),
  ('MS140', 'exp_toc', 'level.novice', 'element.air', 'Усиление запахов', 'Magnify Odor', 'Усиливает запах в области. При провале броска (<i>Стойкости)</i> против вашего броска <b><i></b>(Сотворение заклинаний)<b></i></b> цель <b><i>тошнит</i></b> 1 минуту и воняет неделю, давая +2 к <i>(Отслеживанию)</i> через нюх, но можно смыть вонь полным погружением. У самой цели <i>(Отслеживание)</i> запаха при этом отшибает.', 'magic.form.zone_cube', '10', '6', '5', '', '', '7', 'time.unit.day', '', '', ''),
  ('MS141', 'exp_toc', 'level.novice', 'element.fire', 'Дыхание огня', 'Breath of Fire', 'Выдыхает струю магического огня. Цель получает урон и <b><i>загорается</i></b> с шансом 100%.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.direct', '4', '', '4', '', '3d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS142', 'exp_toc', 'level.novice', 'element.fire', 'Пламенное покрытие', 'Coating of Fire', 'Шанс <b><i>загореться</i></b> становится 100% при контакте с любым открытм огнём или чем-то с любым шансом поджога.  <b><i>Горящая</i></b> цель получает по 5 урона в каждую часть тела. Броня поглощает урон, но теряет 1 ПБ, как и оружие. Нужно потратить ход чтобы сбить пламя.', 'magic.form.direct', '2', '', '3', '', '', '1', 'time.unit.hour', 'Уклонение', 'Атлетика', ''),
  ('MS143', 'exp_toc', 'level.novice', 'element.fire', 'Безобидное пламя', 'Harmless Fire', 'Делает тепло и огнь в области безопасным. - Он не распространяется и не причиняет вреда. - От огненных атак цели всё еще получают урон.', 'magic.form.zone_cube', '8', '2', '3', '', '', '10', 'time.unit.minute', '', '', ''),
  ('MS144', 'exp_toc', 'level.novice', 'element.fire', 'Дым Вахилы', 'Vahila''s Smoke', 'Окутывает голову цели дымом. - Цель <b><i>слепнет</i></b> и <b><i>задыхается</i></b>, т.е. получает 3 не блокируемого урона за раунд. - Каждый ход, с тратой действия, можно пытаться развеять новым броском <i>(Защиты)</i> против новой проверки <i>(Сотворения заклинаний)</i>.  <b><i>Ослепленная</i></b> цель получает:   * штраф -3 к броскам (Атаки) и (Защиты)   * штраф -5 к проверкам (Внимания), связанным со зрением.</align> - Нужно потратить ход чтобы восстановить зрение.', 'magic.form.direct', '10', '', '3', '2', '', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS145', 'exp_toc', 'level.novice', 'element.water', 'Дыхание Авроры', 'Aurora''s Breath', 'Позволяет дышать водой.', 'magic.form.self', '', '', '5', '', '', '30', 'time.unit.minute', '', '', ''),
  ('MS146', 'exp_toc', 'level.novice', 'element.water', 'Скользящий поток', 'Slip Stream', '<align="left">Увеличивает скорость плавания на 12, отменяет штрафы за атаку и защиту под водой.  Обычные штрафы под водой: - Скорость атаки ближним боем равна одному удару за раунд. - К атаке, блокированию и парированию штраф -2. - К <i>(Вниманию)</i> штраф -3. - Вместо <i>(Уклонения)</i> только <i>(Атлетика)</i> для защиты. И при движении. - Дальность стрельбы из лука и арбалета 25</align>% от нормы, а урон 50%.', 'magic.form.self', '', '', '5', '', '', '10', 'time.unit.minute', '', '', ''),
  ('MS147', 'exp_toc', 'level.novice', 'element.water', 'Струя воды', 'Water Jet', 'Создает управляемый гейзер из источника воды. Наносит урон с типом урона на ваш выбор и <b><i>сбивает с ног</i></b>. - Сбитая с ног цель получает штраф -2 к (Атаке) и (Защите) пока не потратит перемещение на то чтобы встать.', 'magic.form.direct', '8', '', '5', '', '4d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS148', 'exp_toc', 'level.novice', 'element.water', 'Паутина льда', 'Web of Ice', 'Создаёт на поверхности тонкую ледяную структуру, которую можно обнаружить пробросив <i>(Внимание)</i> со <b>Сл:16</b>. При наличии двух связанных структур, потревожив одну, разрушатся обе.', 'magic.form.direct', '2', '', '2', '', '', '1', 'time.unit.day', '', '', ''),
  ('MS149', 'exp_toc', 'level.journeyman', 'element.mixed', 'Покров', 'Cloak', '<align="left">Дает невидимость магу и всему, что он носит. - Бонус +10 к <i>(Скрытности)</i> - Бонус +5 к <i>(Атаке)</i> - Бонус +5 к <i>(Защите)</i> - бонусы для <i>(Атаки)</i> и <i>(Защиты)</i> становится +3, если:     * Цель бросает проверку <i>(Внимания)</i>      * Цель кастует Ирден     * Цель бросает бомбу "Лунная пыль" - Бонус для <i>(Скрытности)</i> становится +5, если:     * Цель кастует Ирден     * Цель бросает бомбу "Лунная пыль" - При попадании атаки по вам заклинание спадает.</align>', 'magic.form.self', '', '', '16', '2', '', '', '', '', '', ''),
  ('MS150', 'exp_toc', 'level.journeyman', 'element.mixed', 'Разрыв фокусировки', 'Disrupt Focus', 'Временно отключает эффект Фокусировки в предмете с таким эффектом.  Эффект "Фокусирующее (n)" :При сотворении магии с помощью этого оружия вычтите n из стоимости заклинания в Выносливости. Эффект "Фокусирующее (+)": Бонус +2 к <b>Сл</b> проверок против заклинания владельца предмета.', 'magic.form.direct', '10', '', '15', '', '', '10', 'time.unit.minute', '', '', ''),
  ('MS151', 'exp_toc', 'level.journeyman', 'element.mixed', 'Камера Дормина', 'Dormyn''s Chamber', 'Запечатывает цель в полупрозрачном магическом пузыре. - Пузырь имеет 40 ПЗ. - Сквозь пузырь нельзя выбрать цель в обе стороны. - Звук не проходит.', 'magic.form.direct', '10', '', '18', '8', '', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS152', 'exp_toc', 'level.journeyman', 'element.mixed', 'Усиление', 'Empower', '<align="left">Следующее заклинание мага после усиления имеет эффект выбор: - Шанс наступления эффекта 100%. - Бонус +2 к <i>(Сотворению заклинаний)</i>  - Дополнительный урон 2d6.  - При крит.провале (1 на дайсе) маг получает:   * Любой фокусирующий предмет у мага взрывается на 1d10 урона в радиусе 2 метров.    * Безусловные 20 урона    * Случайный эффект из следующих:       1. Маг <b><i>загорается</i></b>        2. Маг <b><i>заморожен</i></b>         3. Мага отбрасывает на 2 метра.        4. Маг <b><i>дизориентирован</i></b></align>', 'magic.form.self', '', '', '12', '', '', '1', 'time.unit.minute', '', '', ''),
  ('MS153', 'exp_toc', 'level.journeyman', 'element.mixed', 'Спектральная связь', 'Spectral Tether', 'Не позволяет цели:    * Становиться бестелесной    * Становиться невидимой    * Телепортироваться    * Удаляться более чем на 10 м от мага - Можно на каждому ходу пытаться сбросить эффекты связи новой проверкой <i>(Сопротивления магии)</i> против нового броска <i>(Атаки)</i> ценой траты действия.', 'magic.form.direct', '10', '', '8', '4', '', '', '', 'Сопротивление магии', '', ''),
  ('MS154', 'exp_toc', 'level.journeyman', 'element.mixed', 'Портал-ловушка', 'Trap Portal', 'Размещает ловушку в существующем портале, перенаправляя его конечную точку в пределах 1.6км от настоящей. - Можно заметить, если успешно пробросить <i>(Магическое познание)</i> со <b>Сл:16</b> или <i>(Образование)</i> со <b>Сл:20</b>. - Работает только на одном существе, проходящем через портал. - Следы ловушки в портале можно обнаружить даже через 30 дней после наложения.', 'magic.form.direct', '4', '', '12', '', '', '30', 'time.unit.day', '', '', ''),
  ('MS155', 'exp_toc', 'level.journeyman', 'element.earth', 'Обвал Беккера', 'Bekker''s Rockslide', '- Бросает из-под земли большой камень в цель, нанося урон 6d6 по торсу и <b><i>сбивая с ног</i></b>, если та провалит защиту.  - Осколки наносят 4d6 урона по торсу любому в радиусе 6м при провале <i>(Атлетики)</i> со <b>Сл:16</b>, также <b><i>сбивая с ног</i></b>. - Сбитая с ног цель получает штраф -2 к (Атаке) и (Защите) пока не потратит перемещение на то чтобы встать.', 'magic.form.zone_circle', '10', '6', '13', '', '6d6', '', '', 'Атлетика', '', ''),
  ('MS156', 'exp_toc', 'level.journeyman', 'element.earth', 'Бастион Элгана', 'Elgan''s Bastion', 'Магнетизмом создает круговое каменное укрытие из камней вокруг мага. - Защищающает от физических атак. - Укрытие имеет 30 ПБ - Снижает скорость до 2 и маг может лишь двигаться и только один раз в раунд.', 'magic.form.self', '', '', '14', '4', '', '', '', '', '', ''),
  ('MS157', 'exp_toc', 'level.journeyman', 'element.earth', 'Рой Яведа', 'Javed''s Swarm', '<align="left">Приманивает подконтрольный рой насекомых, атакующий облеплением. Характеристики роя:    * ПЗ - 15    * <b>СКОР</b> - 7    * <i>(Уклонение) </i>основа - 14.    * Урон - 1d6 по торсу, который не блокируется бронёй.    * Шанс 100% <i><b>отравить</b></i> в атаке. То есть цель получает 3 не блокируемого урона за раунд. Для прекращения отравления нужно пробросить <i>(Стойкость)</i> со <b>Сл:15,</b> потратив действие.', 'magic.form.direct', '6', '', '10', '', '', '10', 'time.unit.minute', '', '', ''),
  ('MS158', 'exp_toc', 'level.journeyman', 'element.air', 'Шаровая молния', 'Ball Lightning', 'Создает подконтрольную одноразовую магическую молнию, наносящую урон по торсу и крит.эффект <b>Контузию</b> на 10 минут. При успешном уклонении цели на следующем ходу можно опять действием направить её в цель.', 'magic.form.direct', '20', '', '14', '', '3d6', '5', 'time.unit.round', 'Уклонение', 'Атлетика', ''),
  ('MS159', 'exp_toc', 'level.journeyman', 'element.air', 'Невидимая лента', 'Invisible Ribbon', 'Создает невидимое лезвие ветра, наносящее 3d6 урона. Бросок Внимания СЛ20 чтобы понять источник атаки. Кастуется шёпотом.', 'magic.form.direct', '10', '', '15', '', '3d6', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS160', 'exp_toc', 'level.journeyman', 'element.air', 'Прикосновение молнии', 'Touch of Lightning', 'Заряжает неподвижный металлический предмет электричеством, наносящим 1d6 урона. Можно усилить, поддерживая каст, по 1d6 за ход до 8d6 урона. При движении и через сутки предмет теряет заряд. Обнаруживается броском <i>(Внимания) <b></i>Сл:20</b>.', 'magic.form.direct', '2', '', '8', '5', '(1..8)*d6', '', '', '', '', ''),
  ('MS161', 'exp_toc', 'level.journeyman', 'element.fire', 'Укольная дверь', 'Cinder Door', 'Жгёт горючие структуры. Наносит 4d6 разрушающего урона горючему материалу какждый раунд пока активно, не повреждая ничего другого.', 'magic.form.zone_cube', '2', '2', '12', '3', '4d6', '', '', '', '', ''),
  ('MS162', 'exp_toc', 'level.journeyman', 'element.fire', 'Магическая кузница', 'Mage''s Forge', 'Создает волшебный огонь. - Можно использовать как походную кузницу. - Можно использовать для очистки металла. При провале крафта металл автоматически будет восстанавливаться. - Невозможно исползовать на двимерите.', 'magic.form.direct', '2', '', '12', '', '', '1', 'time.unit.day', '', '', ''),
  ('MS163', 'exp_toc', 'level.journeyman', 'element.fire', 'Прикосновение кузнеца', 'Smith''s Touch', 'Позволяет манипулировать металлом как глиной голыми руками. - В бою, в качестве атаки наносит 3d6 разрушающего урона доспехам или оружию. - Не применимо к двимериту.', 'magic.form.direct', '2', '', '10', '10', '', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS164', 'exp_toc', 'level.journeyman', 'element.water', 'Эссенция зелья', 'Essence of Potion', 'Один раз копирует свойства одного зелья или эликсира, перенося их в единицу Эссенции Воды.', 'magic.form.direct', '2', '', '12', '', '', '', '', '', '', ''),
  ('MS165', 'exp_toc', 'level.journeyman', 'element.water', 'Инверн', 'Invaerne', 'Создает воющуий снежный ветер, создавая снежные и ледяные условия. На холоде может работать до недели.', 'magic.form.zone_circle', '50', '50', '14', '', '', '1', 'time.unit.hour', '', '', ''),
  ('MS166', 'exp_toc', 'level.journeyman', 'element.water', 'Коррозия', 'Rusting', 'Наносит 2d6 разрушающего урона на выбор всем доспехам или оружию. При блоке щитом урон получает только щит. - Каждый поврежденный предмет доспеха дает -2 штраф к <b>РЕА</b>, <b>ЛВК</b>, <b>СКОР</b>. - Поврежденное оружие дает штраф -2 на атаки. Устраняется проверкой Ремесла СЛ14 за час с десяти предметов.', 'magic.form.direct', '4', '', '14', '', '', '', '', 'Уклонение', 'Атлетика', 'Блокирование'),
  ('MS167', 'exp_toc', 'level.master', 'element.mixed', 'Тёмное зеркало Беккера', 'Bekker''s Dark Mirror', 'Околдовывает отражающую поверхность с отражением цели, поймав её отражение. - Снижает две характеристики цели на 1d6, уменьшая и связанные доп. характеристики. - Во время действия цель не дает других отражений. - Снимается уничтожением отражения. - Цель должна быть способна отражаться.', 'magic.form.direct', '10', '', '25', '', '', '30', 'time.unit.day', 'Сопротивление магии', '', ''),
  ('MS168', 'exp_toc', 'level.master', 'element.mixed', 'Кража заклинаний', 'Steal Spell', 'Переназначает цель заклинания другого мага не уровня мастера. - Цель должна быть в зоне досягаемости другого мага. - Требуется встречная проверка  <i>(Сотворения заклинания)</i>. - Если заклинание требует проверки <i>(Атаки)</i>, используйте проверку <i>(Сотворения заклинаний)</i> из встречной проверки. - Активное заклинание теперь поддерживается вашей выносливостью.', 'magic.form.direct', '10', '', '20', '', '', '', '', 'Сотворение заклинаний', '', ''),
  ('MS169', 'exp_toc', 'level.master', 'element.earth', 'Кристаллический Стазис', 'Crystal Stasis', 'Окружает цель кристаллами. Требуется активная поддержка еще 2 хода для полного наложения. Прерванное заклинание теряет все эффекты. Наложенное снимается рассеиванием магии. - На первом ходу дает цели штраф -3 к Атаке, Защите и <b>СКОР</b>. - На втором ходу цель не может двигаться. - На третьем - цель <b><i>теряет сознание</i></b> на годы, не старея.', 'magic.form.direct', '6', '', '25', '6', '', '', '', 'Сопротивление магии', 'Уклонение', 'Атлетика'),
  ('MS170', 'exp_toc', 'level.master', 'element.earth', 'Формование Земли', 'Shape Earth', 'Создает структуру за 10 минут из доступных материалов, включая дерево, в пределах зоны влияния любой не сложной формы.   ПБ (5-30) такого укрытия определяется Мастером в зависимости от материала и формы.', 'magic.form.zone_cube', '6', '20', '25', '', '', '', '', '', '', ''),
  ('MS171', 'exp_toc', 'level.master', 'element.air', 'Гвинтог', 'Gwyntog', 'Создает бурю. - Летающие существа получают урон от падения в количество [X/2]d6, где X - высота падения в метрах. - Летающие существа  <b><i>сбиваются с ног</i></b>. Сбитая с ног цель получает штраф -2 к (Атаке) и (Защите) пока не потратит перемещение на то чтобы встать. - Дальнобойные атаки вместо цели попадают туда, куда решит мастер. Перемещение или бег возможны после броска <i>(Атлетики)</i> <b>Сл:20</b>.', 'magic.form.zone_circle', '100', '40', '24', '6', '', '', '', '', '', ''),
  ('MS172', 'exp_toc', 'level.master', 'element.air', 'Рука бури', 'Hand of the Tempest', 'Эффект на выбор: - Подбросить до 1000кг на 14 метров. Живая цель может бросить проверку <i>(Уклонения)</i>. Падать начнет к концу следующего хода. При падении объект и то, что под ним получает 7d6 дробящего урона по корпусу, а объект <b><i>сбивается с ног</i></b>. Сбитая с ног цель получает штраф -2 к (Атаке) и (Защите) пока не потратит перемещение на то чтобы встать. - Толкнуть проваливших защиту цели в конусе на 14 метров назад. Врезаясь цели получают таранящий урон. - Управление объектом до 1000кг будто рукой (телекинез).', 'magic.form.direct', '20', '', '25', '', '', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS173', 'exp_toc', 'level.master', 'element.fire', 'Пламя Кората', 'Blaze of the Korath', '<align="left">Создает ауру, истощающую <b>ВЫН</b> всех существ на 2d6   * в момент каста   * в начале своего хода цели   * при входе на своём ходу. - Цели не могут отдохнуть. - При снижении <b>ВЫН</b> до 0, существо <i><b>теряет сознание</b></i> пока не восстановит 20 <b>ВЫН</b> и не пробросит испытание <i>(Устойчивости)</i>.</align>', 'magic.form.zone_circle', '100', '40', '24', '4', '', '', '', '', '', ''),
  ('MS174', 'exp_toc', 'level.master', 'element.fire', 'Живой огонь', 'Living Fire', '<align="left">Призывает бесплотный управляемый Живой Огонь. Характеристики огня:    * <b>СКОР</b> 5.    * <b>ВЫН</b> - бесконечная    * <i>(Сотворение Заклинаний)</i> основа - 16    * Знает спеллы:       - Энье       - Волна огня       - Пылающий вихрь   * Нет дополнительных действий   * Может быть потушен как любой огонь.   * Из-за бесплотности имеет иммунитет к физическим атакам, кровотечению и яду.</align>', 'magic.form.direct', '10', '', '25', '', '', '10', 'time.unit.minute', '', '', ''),
  ('MS175', 'exp_toc', 'level.master', 'element.water', 'Извлечение Айфры', 'Ainfra''s Extraction', 'Высасывает влагу цели, снижая её <b>ВЫН</b> на 8d6. Влагу можно немедленно направить в Рьеви, Гололед или Струю воды без затрат <b>ВЫН</b>.', 'magic.form.direct', '', '', '22', '', '', '', '', 'Сопротивление магии', '', ''),
  ('MS176', 'exp_toc', 'level.master', 'element.water', 'Потоп Ис', 'Deluge of Ys', 'Призывает куб воды, который разливается в течение этого же хода на открытой местности, а в замкнутом пространстве заполняет его и разрушает неукрепленные барьеры.  - Волна также наносит урон по торсу и <b><i>сбивает всех с ног</i></b> при провале броска на <i>(Силу)</i> <b>Сл:24.</b> Сбитая с ног цель получает штраф -2 к (Атаке) и (Защите) пока не потратит перемещение на то чтобы встать.', 'magic.form.zone_cube', '40', '20', '24', '', '5d6', '', '', '', '', ''),
  ('MS210', 'exp_toc', 'level.journeyman', 'element.water', 'Сомна', 'Somne', '<align="left">Усыпляет цель на 8 часов, <b><i>дезориентируя</i></b> её. - Если X - количество очков вложенной <b>ВЫН</b>, то цель может проснуться от:    * Громкого шума - при X = 2..3    * Попытки разбудить действием - при X = 2..5    * Попытки разбудить полного раунда - при X = 2..6    * Урона - при X = 2..7 - Цель не узнает о влиянии магии при пробуждении, если нет причин подозревать о нем.</align>', 'magic.form.direct', '8', '', '2-7', '', '', '', '', 'Сопротивление магии', '', ''),
  ('MS211', 'exp_toc', 'level.journeyman', 'element.mixed', 'Супирре', 'Supirre', 'Нанеся знак на поверхность, можно слышать происходящее рядом с любого расстояния без проверки <i>(Внимания)</i>, "подключившись" к нему сознанием. - Радиус зоны слышимости от нанесенного знака [2*X] метров, где X - очки вложенной <b>ВЫН</b>. - Можно сосредоточиться на одном звуке или разговоре, "отключив" все остальные шумы. - Нанося новый знак, маг теряет связь со старым.', 'magic.form.zone_circle', '2', '2..14', '1-7', '', '', '', '', '', '', ''),
  ('MS228', 'exp_bot', 'level.journeyman', 'element.mixed', 'Процедура Прис', 'Preece’s Procedure', 'Временно блокирует одну эмоцию (Ненависть, Любовь, Депрессия, Счастье) у цели. - Цель не подозревает о магическом воздействии ни во время, ни после завершения влияния. - При повторном наложении на цель, уже находящуюся под его воздействием, <b>ВЫН</b> для применения увеличивается на 2.', 'magic.form.direct', '3', '', '10', '', '', '8', 'time.unit.hour', 'Сопротивление магии', '', ''),
  ('MS229', 'exp_bot', 'level.journeyman', 'element.air', 'Акхан Дааль', 'Akhan Daal', E'Создаёт взрыв сотрясающей энергии. - Цели получают урон по туловищу - Цели сбиваются с ног - Цели отбрасываются на 4 метра - При столкновении с чем-либо цели получают таранящий урон, т.е. 2d6 умноженный на модификатор веса цели. \n \n Модификаторы тарана:\n 0.5 - Накер, кошка и т.д.\n 1 - Человек и т.д.\n 2 - Волколак, Эндриага и т.д.\n 3 - Главоглаз, Тролль и т.д.', 'magic.form.zone_circle', '4', '2', '12', '', '4d6', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS230', 'exp_bot', 'level.journeyman', 'element.mixed', 'Замещение де Клодин', 'De Claudine’s Substitution', 'Позволяет навсегда изменить одну единицу алхимического ингредиента. - Мутированный ингредиент меняет содержащийся в нем алхимический ингредиент на любой другой. - В алхимической формуле можно использовать только одну единицу трансмутированного вещества без разрушения смеси.', 'magic.form.direct', '2', '', '8', '', '', '', '', '', '', ''),
  ('MS231', 'exp_bot', 'level.journeyman', 'element.air', 'Шторм ван Аделаиды', 'Van Adelaide''s Gale', E'Переносит вас на расстояние до 30м мощным ветром с мягкой посадкой без получения урона. - Порыв ветра в момент прыжка:   * отбрасывает любого на 6м   * цели получают урон в корпус   * цели получают дополнительно та-ранящий урон при столкновении. Т.е. 3d6 умноженный на модификатор веса цели. \n \n Модификаторы тарана:\n 0.5 - Накер, кошка и т.д.\n 1 - Человек и т.д.\n 2 - Волколак, Эндриага и т.д.\n 3 - Главоглаз, Тролль и т.д.', 'magic.form.zone_circle', '', '2', '12', '', '1d6', '', '', 'Уклонение', 'Атлетика', ''),
  ('MS232', 'exp_toc', 'level.journeyman', 'element.necromancy', 'Восстановление трупа', 'Corpse Restoration', 'Восстанавливает мышцы, плоть, кожу и волосы целевого трупа в призрачной форме. Восстановленный труп выглядит как полупрозрачная версия человека в момент смерти со всеми ранами. Форму можно трогать и исследовать как настоящую. Можно призвать части тела, которые у вас есть, даже если они не соединены, в пределах 4м. - При провале происходит вторжение Беспокойных Духов.', 'magic.form.direct', '4', '', '7', '', '', '1', 'time.unit.hour', '', '', ''),
  ('MS233', 'exp_toc', 'level.master', 'element.necromancy', 'Буря душ', 'Storm of Souls', 'Втягивает беспокойные души в мир, чтобы сеять хаос. Сразу после сотворения призывается 1d6+4 призрака, ослепленных яростью. Они атакуют любую цель, включая заклинателя и союзников. - При провале происходит вторжение Беспокойных Духов.', 'magic.form.direct', '10', '', '22', '', '', '2d6', 'time.unit.round', '', '', '')
),
spell_effects_en (ms_id, text_en) AS (
  VALUES
    ('MS001', E'Creates 1d10 intangible, illusory clones of the mage that are indistinguishable from the original.\n- The clones are fully controlled by the mage without spending an action.\n- The clones cannot leave the spell''s radius.'),
    ('MS002', E'You fling a handful of magical dust into the target''s eyes, Blinding them for the spell''s duration.\nA Blinded target suffers:\n* -3 to Attack and Defense rolls\n* -5 to sight-based Awareness checks\n- The target must spend a turn to clear their vision.'),
    ('MS003', E'Ends an active spell/ritual/hex.\n- May be cast as a defensive action to block magical attacks.\n- You must win an opposed (Spell Casting) check.\n- Costs STA equal to 1/2 of the target effect''s STA cost.'),
    ('MS004', E'Creates an illusion that makes you look stunning.\n- You gain +3 to (Seduction), (Charisma), and (Leadership).'),
    ('MS005', 'Instantly determines the direction to a place the caster has visited, or simply points north.'),
    ('MS006', E'Forces the target to feel one of the following:\n- hatred\n- love\n- depression\n- euphoria'),
    ('MS007', E'Teleports your staff to a location the caster has been within the last day.\n- To return the staff, cast this spell again.'),
    ('MS008', E'Allows you to communicate telepathically with one target, or read thoughts.\n- There is no language barrier.\n- If the target is a witcher, their medallion vibrates.\n- If the target is a mage, once per turn they may notice the intrusion by winning a (Magical Knowledge) check vs your (Spell Casting) check.'),
    ('MS009', E'Hurls sharp stones at the enemy.\nThe number of stones equals your (Spell Casting) roll minus the target''s Defense roll; each stone deals 1d6 damage.'),
    ('MS010', 'In one turn, grows a small mature plant from a seed (herbs and bushes, including alchemy plants), but not large plants like trees.'),
    ('MS011', E'Quickly assesses the target''s health:\n- remaining HP\n- critical wounds\n- any active effects (poisoned/sick, etc.'),
    ('MS012', E'Forces a stone spike up from the ground, impaling the target from below.\nThe stalagmite remains until destroyed after taking 20 damage.'),
    ('MS013', 'Throws scorching shards of shattered rock/earth near the caster, Blinding targets for 1d6 rounds.'),
    ('MS014', E'Writes letters or draws on any hard surface.\nCannot be used on living creatures.'),
    ('MS015', E'Choose one effect:\n- Restores 3 HP per turn.\n- Heals critical wounds: you must cast the spell [wound level]*2+2 times at DC [wound level]*2+12, then rest to remove wound penalties (at least one day):\n1) Light: DC 8 — BODY days\n2) Moderate: DC 12 — BODY days\n3) Severe: DC 15 — BODY days\n4) Mortal: penalty is permanent'),
    ('MS016', E'Entangles the target with roots (15 HP).\nTo break free, once per turn the target may roll (Dodge/Escape) higher than your original (Spell Casting) roll used to create the prison.'),
    ('MS017', E'The mage becomes lighter and glides instead of falling, taking no fall damage.\nYou may drift sideways as far as you fall downward.'),
    ('MS018', 'Creates a pocket of fresh air underwater or in an area where clean air normally doesn''t exist.'),
    ('MS019', E'Deals its listed damage and pushes the target back by (Spell Casting) minus the target''s Defense, in meters.\nOn collision, the target also takes ramming damage: [half the push distance]d6 multiplied by the target''s weight modifier.\nWeight modifiers:\n0.5 — nekker, cat, etc.\n1 — human, etc.\n2 — werewolf, endriaga, etc.\n3 — fiend, troll, etc.'),
    ('MS020', 'While active, cleans the air of smoke, poison, or any other contamination.'),
    ('MS021', 'Cancels all effects of bad weather: extreme heat, extreme cold, rain, and snow.'),
    ('MS022', 'Any character except the mage takes 2 damage from static electricity each round if holding or wearing metal.'),
    ('MS023', E'Moves an object weighing up to 5*(Spell Casting) kg through the air.\nYou may use the object remotely for its intended purpose, rolling WILL+(Spell Casting) instead of the required skill at -3 (or -5 for delicate actions).\nYou may also throw objects using WILL instead of BODY.'),
    ('MS024', E'Deals its listed damage and pushes everyone back 6 meters.\nOn collision, ramming damage is 3d6 multiplied by the target''s weight modifier (see Bronwyn''s Gust).'),
    ('MS025', E'Throws a fireball at the target.\n- 75% chance to set the target on fire.\nA Burning target takes 5 damage to each body part each round. Armor absorbs damage but loses 1 SP (as do weapons). It takes a turn to put out the flames.'),
    ('MS026', E'Creates an area of bright light. Bright light effects:\n- +2 to the DC of skill checks\n- -3 to (Awareness)\n- -3 to (Attack) and (Defense) if looking at the light source'),
    ('MS027', E'Brands bare skin with a simple symbol or word.\n- Leaves a large scar for life.\n- A surgeon can make the text unreadable with Healing Touch at DC 15.'),
    ('MS028', E'Heats a metal object.\n- You can force someone to drop it; if they refuse, they take 2d6 damage to the holding hand.\n- You can empower a weapon: +2d6 damage and a 50% chance to set the target on fire.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS029', E'A flare above the mage blinds everyone around for 1d6 rounds.\n- Visible from 10 km.\nA Blinded target suffers:\n* -3 to Attack and Defense rolls\n* -5 to sight-based Awareness checks\n- The target must spend a turn to clear their vision.'),
    ('MS030', E'Controls an existing flame. Choose one:\n- Increase or decrease its damage by 1.\n- Spread it by 2 meters per round.'),
    ('MS031', E'A burst of flame sets all targets in the area on fire with a 100% chance.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS032', E'Fire attack with a 50% chance to set the target on fire.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS033', E'Throws 1 to 5 ice shards at one enemy.\nThe number of shards equals your (Spell Casting) roll minus the target''s Defense roll.\nEach shard is a separate attack. Each shard has a 25% chance to freeze the target.'),
    ('MS034', E'Controls the direction and speed of a current: halve the speed of swimmers, increase ships by 1.5×, or even slow/stop the current.\nThe GM sets the DC.'),
    ('MS035', E'Creates a whirlpool.\nEach round the target defends with (Swimming) vs your (Spell Casting) to avoid being pulled under and starting to Suffocate, taking 3 unblockable damage per round.'),
    ('MS036', E'Creates an area of thick fog.\nEveryone suffers -3 to (Awareness), and visibility radius is reduced to 4 meters.'),
    ('MS037', 'Summons heavy rain that extinguishes any open flame and removes all Burning effects.'),
    ('MS038', E'Covers the ground with ice.\nAnyone who steps on it falls prone after failing an (Athletics) check vs the caster''s (Spell Casting) check.'),
    ('MS039', E'Purifies water of poison and disease while leaving living creatures intact.\nIf the amount of purified water is smaller than a cube, it remains clean.'),
    ('MS040', E'Freezes a living target.\nAn inanimate target cannot be moved or manipulated.'),
    ('MS041', E'Extracts one secret from the target''s memory.\nOn a critical failure of the target''s defense, their INT is permanently reduced by 1.'),
    ('MS042', E'Creates a visual illusion.\n- Silent, odorless, intangible.\n- On a critical failure of the defense, any observer not only sees it but believes it is real.'),
    ('MS043', E'Teleports the mage (no passenger) any distance.\n- You can only bring items held or worn.\n- Familiar destination:\n* DC 15\n* On failure: you arrive at a random location within 1d10 km.\n- Unfamiliar destination:\n* Requires an item from that place\n* DC 20\n* On failure: you arrive at a random location within 3d10 km.'),
    ('MS044', E'Turns a metal object into a magnet.\nAny metal in the area is pulled to it and sticks, increasing its weight.\nTo pull an item away, roll Strength at DC 18.'),
    ('MS045', E'Creates a stone wall 2×3 meters with 30 SP.\n- Before damage reaches a target behind the wall, reduce it by the wall''s current SP; then apply remaining damage to the target''s armor normally.\n- Each successful penetration reduces the wall''s SP by 1.\n- When SP reaches 0, the wall is destroyed.'),
    ('MS046', E'Warps the ground.\n- Targets suffer -2 REF and -3 SPD.\n- 10% chance to collapse small structures.\n- Each turn, targets must make an (Athletics) check or fall into the ground; on failure they begin to Suffocate, taking 3 unblockable damage per round.\n- The ground remains warped.'),
    ('MS047', E'Fires a lightning bolt through multiple targets in a line with a 75% chance to inflict Burning.\nEach subsequent target takes 1d6 less damage.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS048', 'A wind barrier blocks ranged attacks, deflecting a projectile 8 meters in a random direction if the attack roll does not exceed your (Spell Casting) check.'),
    ('MS049', E'Suffocates the target, dealing 1d10 unblockable damage each round.\n- The target is Stunned (–2 to Attack and Defense).\n- If you take a hit or are distracted, you break the spell.'),
    ('MS050', E'Creates a fiery shield around the mage.\n- Blocks 2*(Spell Casting) water spells.\n- Destroys projectiles.\n- Impassable for living beings.'),
    ('MS051', E'Creates a controllable flaming tornado.\n- Moves up to (Spell Casting) meters per turn.\n- On contact, 50% chance to set the target on fire.\n- Cannot move beyond the spell''s range.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS052', E'Several fire snakes Grapple the target and set them on fire.\n- Each turn, the target may try to escape with a (Dodge/Escape) check vs your (Spell Casting) check.\n- Each turn, the DC of the escape check increases by 1 as the snakes tighten.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.)\nA Grappled target cannot move and suffers -2 to all physical actions.'),
    ('MS053', 'Partially draws liquid from the target, dealing equal lethal and nonlethal damage simultaneously.'),
    ('MS054', E'Creates an area of powerful hail.\nEach turn, targets take damage to a random body part if they fail their defense.'),
    ('MS055', 'Creates a wave of icy magic, freezing targets from all sides.'),
    ('MS056', E'The target follows the mage''s mental command.\n- The target gains +5 to (Resist Magic) if commanded to do something they would never do.\n- The target resists every 1d6 turns.'),
    ('MS057', E'Creates a portal.\n- Size: 1×2 meters\n- Range: unlimited\n- Any items can be carried through\n- If the portal shuts while something is passing through, it inflicts the critical wound "lost limb" or cuts an item in half\n- Familiar destination: opens easily\n- Unfamiliar destination:\n* Requires an item from that place\n* Requires a (Spell Casting) check at DC 20\n* On failure: the portal leads to a random location within 3d10 km'),
    ('MS058', E'Transforms the mage into a snake, cat, bird, or dog, using their stats while keeping inventory.\nTo revert, cast again; cannot revert while in contact with dimeritium.'),
    ('MS059', 'Transmutes one metal into another (except dimeritium), and a gemstone into a perfect gemstone.'),
    ('MS060', E'A wind barrier blocks ranged attacks, deflecting projectiles 8 meters in a random direction if the attack roll does not exceed your (Spell Casting) check.\n- On contact, deals 1d6 damage and pushes the target 6 meters.\n- On collision, the target takes ramming damage: 3d6 multiplied by the target''s weight modifier.\nThe mage can only walk calmly (no running).'),
    ('MS061', E'Each turn, the storm has a 35% chance to strike every target (except the mage) with lightning.\nAt the moment of impact, the target may attempt to dodge to avoid damage; on a hit there is a 75% chance to set the target on fire.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS062', E'A hail of fireballs.\n- Each turn, 75% chance to hit each target (except the mage) with a fireball.\n- If the target fails their Defense, they take damage and have a 75% chance to start Burning.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS063', E'Fires a beam of light unaffected by wind.\n- If blocked, the beam destroys the obstacle; but if the obstacle is a mirror, the beam ricochets in a random direction and the mirror takes damage.\n- Requires sunlight to cast; does not work in darkness.\n- Under moonlight or on a cloudy day, damage is halved.'),
    ('MS064', E'Parts water (up to 10×100×10 meters), pushing water and living creatures aside (including the mage if they are in that water).\nThe wall of water is freely permeable.'),
    ('MS065', E'Throws 0.5*(Spell Casting) two-meter ice spikes with 20 durability. You may target different creatures.\nIf a spike penetrates armor, it freezes the target, dealing 2 damage per turn until removed (Strength check DC 20), destroyed, or the spell ends.\nEach spike is a separate attack.'),
    ('MS094', E'Creates a magic circle around the caster that affects targets while they remain inside.\n- Anyone entering (except the caster) suffers -ceil(X/2) to SPD and REF, where X is the amount of STA invested (round fractions up).\n- Ethereal creatures become corporeal.'),
    ('MS095', E'Aard releases a wave of telekinetic force.\n- All affected targets are Stunned (–2 to Attack and Defense) until their next turn.\n- Chance to knock prone is X*10%, where X is the STA invested.\nA prone target suffers an additional –2 to Attack and Defense until they spend movement to stand up.'),
    ('MS096', E'Igni releases a wave of fire and sparks.\n- Damage is Xd6, where X is the STA invested.\n- 50% chance to set the target on fire.\n- Damage is to the torso; at point-blank you may choose a body part.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS097', E'Axii Dazes the target.\n- Penalty to the target''s Stability test is -ceil(X/2), where X is the STA invested (round fractions up).\n- Can be used like (Persuasion), rolling (Spell Casting) instead, opposed by (Resist Magic).\nThe mage''s head and hands glow visibly.'),
    ('MS098', E'Quen creates a magic shield with [5*X] HP, where X is the STA invested.\n- All damage is applied to Quen first.\n- Quen absorbs both lethal and nonlethal damage.\n- Works against spells that can be blocked.\n- Does not protect against status damage (poison, hypoxia, fire, etc.).\n- You cannot create a new Quen shield while the old one persists.'),
    ('MS099', E'Advanced Yrden creates a magic trap.\n- Each round the trap attacks the nearest target.\n- It can only attack an enemy target.\n- Takes 1 round to set up.\n- Lasts a number of rounds equal to the STA invested in the Sign.'),
    ('MS100', E'Advanced Aard releases a spherical telekinetic burst.\n- All targets within range are Stunned.\n- Chance to knock prone is X*10%, where X is the STA invested.\n- Flying creatures take falling damage equal to [H/2]d6, where H is fall height in meters.'),
    ('MS101', E'Advanced Igni produces a continuous stream of fire.\n- Damage is Xd6, where X is the STA invested.\n- Sustaining costs half the invested STA, rounded up.\n- 75% chance to set the target on fire.\n- On your turn, you may switch targets.\n- You can aim at a specific body part.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS102', E'Advanced Axii allows you to control the target''s mind, making them your ally.\n- Influence lasts X rounds, where X is the STA invested.\n- Each round the target makes a (Resist Magic) check to break free.'),
    ('MS103', E'Advanced Quen creates a glowing shield around the caster with [10*X] HP, where X is the STA invested.\n- Sustain cost equals cast cost.\n- Protects the caster and one adjacent ally pressed close.\n- Any objects passing through the shield are destroyed.\n- You cannot run; only walk.\n- If the shield is broken or ended:\n* Within 2 meters, everything (including allies) takes 1d6 damage to the torso.\n* If an object is lighter than 226 kg and not fixed in place, it is pushed 2 meters away.'),
    ('MS125', E'On an alchemy crafting failure, restores one of the substances.\n- Cannot be used twice for the same project.\n- Can be used together with the standard recovery step.'),
    ('MS126', E'Creates a small illusion on the target, making them unattractive.\n- The target suffers -3 to checks:\n* (Seduction)\n* (Charisma)\n* (Leadership)\n- The target does not suspect the blemish, but may learn from others or notice it with an (Awareness) check at DC 16 while looking at a reflection.'),
    ('MS127', E'Finds the nearest Ley Line by sending out a magical pulse.\nThe mage''s hand points toward the nearest Ley Line, and the mage senses which element it is tied to.'),
    ('MS128', E'Allows you to torture a target by conjuring a group of magical needles that obey your commands.\n- Can be used for interrogation; in that case you may use (Spell Casting) instead of (Intimidation).'),
    ('MS129', E'The target''s lips are sealed and their tongue is paralyzed.\n- A mage, priest, or druid cannot cast magic if their (Spell Casting) skill is below 7.\n- Each turn the target resists against a new (Spell Casting) roll.'),
    ('MS130', E'Creates an illusion that hides or changes objects.\n- The change is visual only.\n- The spell can be dispelled or may end if any object leaves the area.\n- A target can recognize the illusion and see through it by approaching within 4 meters and succeeding on a (Resist Magic) check.'),
    ('MS131', E'Reopens inactive portals:\n* A stationary permanent portal: (Spell Casting) check DC 16\n* Another caster''s portal that closed no more than 30 seconds ago: (Spell Casting) check DC 20'),
    ('MS132', E'Breaks down a corpse''s tissues while separating mutagenic compounds, which glow faintly in the body.\n- Allows you to extract a mutagen with an (Alchemy) or (Witcher Training) check at DC 14.'),
    ('MS133', E'Densifies a material, increasing the current and maximum SP of a piece of cover by 5.\nYou can densify a given section only once.'),
    ('MS134', E'Raises a cube of earth from an earthen surface, creating cover with 10 SP.\n- Before damage reaches a target behind it, reduce damage by the pillar''s current SP; then apply remaining damage to the target''s armor normally.\n- Each successful penetration reduces the pillar''s SP by 1.\n- When SP reaches 0, the pillar is destroyed.'),
    ('MS135', E'You immediately gain the following benefits:\n- Night vision: no -2 penalty to (Awareness) in dim light, and +2 to DCs in dim light.\n- Ability to track by smell.\n- Good hearing: +2 to (Awareness) rolls.\nHowever, bright light or loud noise will cause the Stunned condition.'),
    ('MS136', E'Turns ground into mud or quicksand.\n- -2 to (Dodge/Escape) and (Athletics) because movement becomes difficult.'),
    ('MS137', E'Conjures a stream of air that lets you throw a thrown weapon, arrow/bolt, or a bomb using (Spell Casting) instead of the usual skill.\nAn arrow/bolt deals an additional 4d6 damage.'),
    ('MS138', E'Creates a cloud of dust that reveals invisible creatures for 1 round.\nAdditionally, you may remove one target''s invisibility by coating them with dust if they fail their defense.'),
    ('MS139', 'Increases the mage''s Speed by 5, Run by 15, and Jump by 3.'),
    ('MS140', E'Amplifies smells in the area.\nIf a target fails an (Endurance) check vs your (Spell Casting) check:\n- They vomit for 1 minute.\n- They stink for a week, giving +2 to tracking them by smell (but the stench can be washed off by full immersion).\n- The target''s own sense of smell tracking is dulled.'),
    ('MS141', E'You breathe a jet of magical flame. The target takes damage and ignites with 100% chance.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS142', E'The chance to ignite becomes 100% when the target comes into contact with any open fire or anything that has any chance to ignite.\n(Burning rules: 5 damage to each body part each round; armor absorbs damage but loses 1 SP; it takes a turn to put out the flames.'),
    ('MS143', E'Makes heat and fire in the area harmless.\n- The fire does not spread and does not cause damage.\n- Fire attacks still deal damage normally.'),
    ('MS144', E'Envelops the target''s head in smoke.\n- The target is Blinded and Suffocating, taking 3 unblockable damage per round.\n- Each turn (spending an action), the target may try to disperse it with a new Defense roll vs a new (Spell Casting) check.\nBlinded penalties:\n* -3 to Attack and Defense rolls\n* -5 to sight-based Awareness checks\n- The target must spend a turn to clear their vision.'),
    ('MS145', 'Allows you to breathe underwater.'),
    ('MS146', E'Increases swimming speed by 12 and removes penalties for attacking and defending underwater.\nStandard underwater penalties:\n- Melee attack speed is one strike per round.\n- -2 to Attack, Block, and Parry.\n- -3 to (Awareness).\n- Only (Athletics) can be used for defense and movement (instead of (Dodge/Escape)).\n- Bow and crossbow range is 25% of normal and damage is 50%.'),
    ('MS147', E'Creates a controllable geyser from a water source.\nDeals damage of a type you choose and knocks the target prone.\n- A prone target suffers -2 to Attack and Defense until they spend movement to stand.'),
    ('MS148', E'Creates a thin ice structure on a surface. It can be detected with an (Awareness) check at DC 16.\nIf two linked structures exist, disturbing one destroys both.'),
    ('MS149', E'Grants invisibility to the mage and everything they wear.\n- +10 to (Stealth)\n- +5 to (Attack)\n- +5 to (Defense)\n- The Attack and Defense bonuses become +3 if:\n* A target makes an (Awareness) check\n* A target casts Yrden\n* A target throws a "Moon Dust" bomb\n- The Stealth bonus becomes +5 if:\n* A target casts Yrden\n* A target throws a "Moon Dust" bomb\n- If you are hit by an attack, the spell ends.'),
    ('MS150', E'Temporarily disables a Focus effect in an item.\nFocus effects:\n- "Focusing (n)": when casting magic through this weapon, subtract n from the spell''s STA cost.\n- "Focusing (+)": +2 to the DC of checks against the owner''s spells.'),
    ('MS151', E'Seals the target inside a semi-transparent magical bubble.\n- The bubble has 40 HP.\n- You cannot target through the bubble in either direction.\n- Sound does not pass through.'),
    ('MS152', E'Your next spell after Empower gains one chosen benefit:\n- 100% chance for its effect to occur\n- +2 to (Spell Casting)\n- +2d6 additional damage\nOn a critical failure (rolling a 1 on the die), the mage suffers:\n* Any focusing item they carry explodes for 1d10 damage in a 2 m radius\n* An automatic 20 damage\n* One random effect:\n1) The mage ignites\n2) The mage is frozen\n3) The mage is pushed back 2 meters\n4) The mage is Dazed'),
    ('MS153', E'Prevents the target from:\n* becoming incorporeal\n* becoming invisible\n* teleporting\n* moving more than 10 meters away from the mage\n- Each turn, the target may attempt to break the tether by making a new (Resist Magic) check vs the caster''s new Attack roll, spending an action.'),
    ('MS154', E'Places a trap on an existing portal, redirecting its destination within 1.6 km of the true endpoint.\n- Can be noticed with (Magical Knowledge) at DC 16 or (Education) at DC 20.\n- Affects only one creature passing through the portal.\n- Traces of the trap can be detected even 30 days later.'),
    ('MS155', E'Hurls a large rock from the ground at a target, dealing 6d6 torso damage and knocking them prone if they fail their defense.\n- Shrapnel deals 4d6 torso damage to anyone within 6 m who fails an (Athletics) check at DC 16, also knocking them prone.\n- A prone target suffers -2 to Attack and Defense until they spend movement to stand.'),
    ('MS156', E'Uses magnetism to create a circular stone cover around the mage.\n- Protects against physical attacks.\n- The cover has 30 SP.\n- Reduces Speed to 2; the mage can only move, and only once per round.'),
    ('MS157', E'Summons a controlled insect swarm that attacks by swarming. Swarm stats:\n* HP 15\n* SPD 7\n* (Dodge/Escape) base 14\n* Damage: 1d6 torso, not blocked by armor\n* 100% chance to Poison on attack: the target takes 3 unblockable damage per round\nTo end the poison, the target must roll (Endurance) at DC 15, spending an action.'),
    ('MS158', E'Creates a controllable one-time lightning that deals torso damage and inflicts the critical effect Concussion for 10 minutes.\nIf the target successfully dodges, on your next turn you may spend an action to direct it at the target again.'),
    ('MS159', E'Creates an invisible blade of wind that deals 3d6 damage.\nAn (Awareness) check at DC 20 is required to understand the source of the attack.\nCast as a whisper.'),
    ('MS160', E'Charges a stationary metal object with electricity, dealing 1d6 damage.\nYou may empower it by sustaining the spell: +1d6 per turn up to 8d6.\nIf the object is moved, or after a day passes, the charge dissipates.\nDetected with an (Awareness) check at DC 20.'),
    ('MS161', E'Burns flammable structures.\nDeals 4d6 destructive damage to flammable material each round while active, without damaging anything else.'),
    ('MS162', E'Creates magical fire.\n- Can be used as a travel forge.\n- Can be used to purify metal.\n- If a crafting attempt fails, the metal is automatically recovered.\n- Cannot be used on dimeritium.'),
    ('MS163', E'Allows you to shape metal like clay with bare hands.\n- In combat, as an attack, deals 3d6 destructive damage to armor or weapons.\n- Not applicable to dimeritium.'),
    ('MS164', 'Once, copies the properties of one potion or elixir into one unit of Water Essence.'),
    ('MS165', E'Creates a howling snowy wind, creating snow and ice conditions.\nIn cold weather, it can last up to a week.'),
    ('MS166', E'Deals 2d6 destructive damage (choose) to either all armor pieces or all weapons.\nIf blocked with a shield, only the shield takes damage.\n- Each damaged armor piece gives -2 to REF, DEX, and SPD.\n- A damaged weapon gives -2 to attacks.\nRepaired with a (Crafting) check at DC 14, taking 1 hour per ten items.'),
    ('MS167', E'Enchants a reflective surface with the target''s reflection, trapping it.\n- Reduces two of the target''s attributes by 1d6 (and reduces linked derived stats).\n- While active, the target produces no other reflections.\n- Ends when the reflection is destroyed.\n- The target must be able to be reflected.'),
    ('MS168', E'Retargets another mage''s spell (not Master level).\n- The original target must be within that mage''s range.\n- Requires an opposed (Spell Casting) check.\n- If the spell uses an (Attack) check, use the (Spell Casting) value from the opposed check.\n- The spell is now sustained with your STA.'),
    ('MS169', E'Surrounds the target with crystals. Requires active sustaining for 2 additional turns to fully apply.\nIf the spell is interrupted, all effects are lost. Once applied, it is removed by Dispel Magic.\n- Turn 1: the target suffers -3 to Attack, Defense, and SPD.\n- Turn 2: the target cannot move.\n- Turn 3: the target falls unconscious for years without aging.'),
    ('MS170', E'Creates a structure over 10 minutes from available materials (including wood) within the area, of any simple shape.\nThe SP (5–30) of the resulting cover is set by the GM based on material and shape.'),
    ('MS171', E'Creates a storm.\n- Flying creatures take falling damage equal to [H/2]d6, where H is fall height in meters.\n- Flying creatures are knocked prone. A prone target suffers -2 to Attack and Defense until they stand.\n- Ranged attacks miss their intended target and hit wherever the GM decides.\n- Moving or running requires an (Athletics) check at DC 20.'),
    ('MS172', E'Choose one effect:\n- Toss up to 1000 kg up to 14 meters. A living target may make a (Dodge/Escape) check. The fall begins at the end of the target''s next turn. On impact, the object and whatever is beneath it take 7d6 bludgeoning damage to the torso, and the target is knocked prone.\n- Push targets in a cone who fail their defense back 14 meters. On collision they take ramming damage.\n- Manipulate an object up to 1000 kg as if with a hand (telekinesis).'),
    ('MS173', E'Creates an aura that drains 2d6 STA from all creatures:\n* at the moment of casting\n* at the start of a creature''s turn\n* when a creature enters on their turn\n- Targets cannot rest.\n- If a creature''s STA drops to 0, it falls unconscious until it recovers 20 STA and passes a Stability test.'),
    ('MS174', E'Summons an incorporeal, controllable Living Fire. Stats:\n* SPD 5\n* STA infinite\n* (Spell Casting) base 16\n* Knows spells: Aenye, Wave of Fire, Flaming Vortex\n* No extra actions\n* Can be extinguished like any normal fire\n* Due to incorporeality: immune to physical attacks, bleeding, and poison'),
    ('MS175', E'Drains moisture from the target, reducing their STA by 8d6.\nThe moisture can immediately be redirected into Rhewi, Ice Slick, or Water Jet with no STA cost.'),
    ('MS176', E'Summons a cube of water that spills across open ground in the same turn, and in enclosed spaces fills them and breaks unreinforced barriers.\n- The wave also deals torso damage and knocks everyone prone if they fail a Strength check at DC 24.'),
    ('MS210', E'Puts the target to sleep for 8 hours, leaving them Dazed.\n- If X is the STA invested, the target can be awakened by:\n* loud noise (if X = 2..3)\n* an attempt to wake them using an action (if X = 2..5)\n* an attempt to wake them using a full-round action (if X = 2..6)\n* damage (if X = 2..7)\n- The target does not realize they were affected by magic upon waking unless they have reason to suspect it.'),
    ('MS211', E'By drawing the Sign on a surface, you can hear what happens nearby from any distance without an (Awareness) check by "connecting" your mind to it.\n- Hearing radius is [2*X] meters, where X is the STA invested.\n- You can focus on one sound or conversation, filtering out all other noise.\n- When you draw a new Sign, you lose the connection to the old one.'),
    ('MS228', E'Temporarily blocks one emotion in the target (Hatred, Love, Depression, Happiness).\n- The target does not suspect magical influence during or after the effect.\n- If cast again on a target already affected, the STA cost increases by 2.'),
    ('MS229', E'Creates an explosion of concussive energy.\n- Targets take torso damage.\n- Targets are knocked prone.\n- Targets are pushed back 4 meters.\n- On collision, targets take ramming damage: 2d6 multiplied by the target''s weight modifier.\nWeight modifiers:\n0.5 — nekker, cat, etc.\n1 — human, etc.\n2 — werewolf, endriaga, etc.\n3 — fiend, troll, etc.'),
    ('MS230', E'Permanently alters one unit of an alchemy ingredient.\n- The mutated ingredient changes the alchemical substance contained within it to any other substance.\n- In a single alchemy formula, you can use only one unit of transmuted substance without ruining the mixture.'),
    ('MS231', E'Moves you up to 30 m on a powerful wind with a soft landing, taking no damage.\n- The gust at the moment of the jump:\n* pushes anyone 6 m\n* deals torso damage\n* deals additional ramming damage on collision: 3d6 multiplied by the target''s weight modifier\nWeight modifiers:\n0.5 — nekker, cat, etc.\n1 — human, etc.\n2 — werewolf, endriaga, etc.\n3 — fiend, troll, etc.'),
    ('MS232', 'Restores the muscle, flesh, skin, and hair of a targeted corpse in ghostly form. The restored corpse appears as a translucent version of the person at the moment of death with all wounds present. The form can be touched and examined as if real. You can summon body parts you have, even if disconnected, within 4m. - On failure, Restless Spirits invade.'),
    ('MS233', E'Drags restless souls into the world to sow chaos. Immediately upon casting, 1d6+4 wraiths are summoned, blinded by rage. They attack any target, including the caster and allies. - On failure, Restless Spirits invade.')
),
ins_i18n AS (
INSERT INTO i18n_text (id, entity, entity_field, lang, text)
SELECT * FROM (
-- names
SELECT ck_id('witcher_cc.magic.spell.name.'||rd.ms_id),
'magic',
           'spell_names',
           'ru',
           rd.name_ru
      FROM raw_data rd
     WHERE nullif(rd.name_ru,'') IS NOT NULL
    UNION ALL
    SELECT ck_id('witcher_cc.magic.spell.name.'||rd.ms_id),
           'magic',
           'spell_names',
           'en',
           rd.name_en
      FROM raw_data rd
     WHERE nullif(rd.name_en,'') IS NOT NULL
    UNION ALL
    -- effects (HTML stripped at insert time)
    SELECT ck_id('witcher_cc.magic.spell.effect.'||rd.ms_id),
           'magic',
           'spell_effects',
           'ru',
           regexp_replace(replace(replace(rd.effect_ru, chr(11), E'\n'), chr(13), ''), '<[^>]+>', '', 'g')
      FROM raw_data rd
     WHERE nullif(rd.effect_ru,'') IS NOT NULL
    UNION ALL
    -- effects EN (from manual translations)
    SELECT ck_id('witcher_cc.magic.spell.effect.'||see.ms_id),
           'magic',
           'spell_effects',
           'en',
           see.text_en
      FROM spell_effects_en see
  ) foo
  ON CONFLICT (id, lang) DO UPDATE
    SET text = EXCLUDED.text
)
INSERT INTO wcc_magic_spells (
  ms_id, dlc_dlc_id,
  level_id, element_id, form_id,
  name_id, effect_id,
  distance, zone_size,
  stamina_cast, stamina_keeping,
  damage,
  effect_time_value, effect_time_unit_id,
  defense_ids,
  type
)
SELECT rd.ms_id
     , rd.dlc_dlc_id
     , CASE WHEN nullif(rd.level_key,'') IS NOT NULL THEN ck_id(rd.level_key) ELSE NULL END AS level_id
     , CASE WHEN nullif(rd.element_key,'') IS NOT NULL THEN ck_id(rd.element_key) ELSE NULL END AS element_id
     , CASE WHEN nullif(rd.form_key,'') IS NOT NULL THEN ck_id(rd.form_key) ELSE NULL END AS form_id
     , ck_id('witcher_cc.magic.spell.name.'||rd.ms_id) AS name_id
     , ck_id('witcher_cc.magic.spell.effect.'||rd.ms_id) AS effect_id
     , nullif(rd.distance,'')
     , nullif(rd.zone_size,'')
     , nullif(rd.stamina_cast,'')
     , nullif(rd.stamina_keeping,'')
     , nullif(rd.damage,'')
     , CASE
         WHEN nullif(rd.effect_time_value,'') IS NULL THEN NULL
         WHEN rd.effect_time_unit_key LIKE 'time.unit.%' THEN nullif(rd.effect_time_value,'')
         WHEN nullif(rd.effect_time_unit_key,'') IS NOT NULL THEN (nullif(rd.effect_time_value,'') || ' ' || rd.effect_time_unit_key)
         ELSE nullif(rd.effect_time_value,'')
       END AS effect_time_value
     , CASE
         WHEN rd.effect_time_unit_key LIKE 'time.unit.%' THEN ck_id(rd.effect_time_unit_key)
         ELSE NULL
       END AS effect_time_unit_id
     , ARRAY_REMOVE(ARRAY[
         CASE btrim(rd.defense_1)
           WHEN 'Уклонение' THEN ck_id('skill.dodge')
           WHEN 'Уклонение/Изворотливость' THEN ck_id('skill.dodge_escape')
           WHEN 'Атлетика' THEN ck_id('skill.athletics')
           WHEN 'Блокирование' THEN ck_id('skill.blocking')
           WHEN 'Сопротивление магии' THEN ck_id('skill.resist_magic')
           WHEN 'Сопротивление убеждению' THEN ck_id('skill.resist_coercion')
           WHEN 'Сотворение заклинаний' THEN ck_id('skill.spell_casting')
           WHEN 'СЛ от ведущего' THEN ck_id('skill.gm_dc')
           ELSE NULL
         END,
         CASE btrim(rd.defense_2)
           WHEN 'Уклонение' THEN ck_id('skill.dodge')
           WHEN 'Уклонение/Изворотливость' THEN ck_id('skill.dodge_escape')
           WHEN 'Атлетика' THEN ck_id('skill.athletics')
           WHEN 'Блокирование' THEN ck_id('skill.blocking')
           WHEN 'Сопротивление магии' THEN ck_id('skill.resist_magic')
           WHEN 'Сопротивление убеждению' THEN ck_id('skill.resist_coercion')
           WHEN 'Сотворение заклинаний' THEN ck_id('skill.spell_casting')
           WHEN 'СЛ от ведущего' THEN ck_id('skill.gm_dc')
           ELSE NULL
         END,
         CASE btrim(rd.defense_3)
           WHEN 'Уклонение' THEN ck_id('skill.dodge')
           WHEN 'Уклонение/Изворотливость' THEN ck_id('skill.dodge_escape')
           WHEN 'Атлетика' THEN ck_id('skill.athletics')
           WHEN 'Блокирование' THEN ck_id('skill.blocking')
           WHEN 'Сопротивление магии' THEN ck_id('skill.resist_magic')
           WHEN 'Сопротивление убеждению' THEN ck_id('skill.resist_coercion')
           WHEN 'Сотворение заклинаний' THEN ck_id('skill.spell_casting')
           WHEN 'СЛ от ведущего' THEN ck_id('skill.gm_dc')
           ELSE NULL
         END
       ], NULL)::uuid[] AS defense_ids
     , CASE
         WHEN rd.ms_id IN ('MS094', 'MS095', 'MS096', 'MS097', 'MS098', 'MS099', 'MS100', 'MS101', 'MS102', 'MS103', 'MS210', 'MS211') THEN 'sign'
         ELSE 'spell'
       END AS type
  FROM raw_data rd
ON CONFLICT (ms_id) DO UPDATE
SET
  dlc_dlc_id = EXCLUDED.dlc_dlc_id,
  level_id = EXCLUDED.level_id,
  element_id = EXCLUDED.element_id,
  form_id = EXCLUDED.form_id,
  effect_time_unit_id = EXCLUDED.effect_time_unit_id,
  name_id = EXCLUDED.name_id,
  effect_id = EXCLUDED.effect_id,
  distance = EXCLUDED.distance,
  zone_size = EXCLUDED.zone_size,
  stamina_cast = EXCLUDED.stamina_cast,
  stamina_keeping = EXCLUDED.stamina_keeping,
  damage = EXCLUDED.damage,
  effect_time_value = EXCLUDED.effect_time_value,
  defense_ids = EXCLUDED.defense_ids,
  type = EXCLUDED.type;
